(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))r(o);new MutationObserver(o=>{for(const c of o)if(c.type==="childList")for(const h of c.addedNodes)h.tagName==="LINK"&&h.rel==="modulepreload"&&r(h)}).observe(document,{childList:!0,subtree:!0});function t(o){const c={};return o.integrity&&(c.integrity=o.integrity),o.referrerPolicy&&(c.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?c.credentials="include":o.crossOrigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function r(o){if(o.ep)return;o.ep=!0;const c=t(o);fetch(o.href,c)}})();var Ph=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function RA(i){return i&&i.__esModule&&Object.prototype.hasOwnProperty.call(i,"default")?i.default:i}var ap={exports:{}},Sc={};var V1;function DA(){if(V1)return Sc;V1=1;var i=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function t(r,o,c){var h=null;if(c!==void 0&&(h=""+c),o.key!==void 0&&(h=""+o.key),"key"in o){c={};for(var p in o)p!=="key"&&(c[p]=o[p])}else c=o;return o=c.ref,{$$typeof:i,type:r,key:h,ref:o!==void 0?o:null,props:c}}return Sc.Fragment=e,Sc.jsx=t,Sc.jsxs=t,Sc}var B1;function MA(){return B1||(B1=1,ap.exports=DA()),ap.exports}var f=MA(),op={exports:{}},U1;function OA(){return U1||(U1=1,(function(i){var e=(function(t){var r=Object.prototype,o=r.hasOwnProperty,c=Object.defineProperty||function(H,W,D){H[W]=D.value},h,p=typeof Symbol=="function"?Symbol:{},g=p.iterator||"@@iterator",_=p.asyncIterator||"@@asyncIterator",T=p.toStringTag||"@@toStringTag";function E(H,W,D){return Object.defineProperty(H,W,{value:D,enumerable:!0,configurable:!0,writable:!0}),H[W]}try{E({},"")}catch{E=function(W,D,G){return W[D]=G}}function I(H,W,D,G){var se=W&&W.prototype instanceof le?W:le,me=Object.create(se.prototype),Ee=new V(G||[]);return c(me,"_invoke",{value:k(H,D,Ee)}),me}t.wrap=I;function O(H,W,D){try{return{type:"normal",arg:H.call(W,D)}}catch(G){return{type:"throw",arg:G}}}var L="suspendedStart",z="suspendedYield",j="executing",Y="completed",F={};function le(){}function K(){}function B(){}var ie={};E(ie,g,function(){return this});var A=Object.getPrototypeOf,w=A&&A(A(X([])));w&&w!==r&&o.call(w,g)&&(ie=w);var S=B.prototype=le.prototype=Object.create(ie);K.prototype=B,c(S,"constructor",{value:B,configurable:!0}),c(B,"constructor",{value:K,configurable:!0}),K.displayName=E(B,T,"GeneratorFunction");function M(H){["next","throw","return"].forEach(function(W){E(H,W,function(D){return this._invoke(W,D)})})}t.isGeneratorFunction=function(H){var W=typeof H=="function"&&H.constructor;return W?W===K||(W.displayName||W.name)==="GeneratorFunction":!1},t.mark=function(H){return Object.setPrototypeOf?Object.setPrototypeOf(H,B):(H.__proto__=B,E(H,T,"GeneratorFunction")),H.prototype=Object.create(S),H},t.awrap=function(H){return{__await:H}};function R(H,W){function D(me,Ee,Se,we){var je=O(H[me],H,Ee);if(je.type==="throw")we(je.arg);else{var Ye=je.arg,q=Ye.value;return q&&typeof q=="object"&&o.call(q,"__await")?W.resolve(q.__await).then(function(pe){D("next",pe,Se,we)},function(pe){D("throw",pe,Se,we)}):W.resolve(q).then(function(pe){Ye.value=pe,Se(Ye)},function(pe){return D("throw",pe,Se,we)})}}var G;function se(me,Ee){function Se(){return new W(function(we,je){D(me,Ee,we,je)})}return G=G?G.then(Se,Se):Se()}c(this,"_invoke",{value:se})}M(R.prototype),E(R.prototype,_,function(){return this}),t.AsyncIterator=R,t.async=function(H,W,D,G,se){se===void 0&&(se=Promise);var me=new R(I(H,W,D,G),se);return t.isGeneratorFunction(W)?me:me.next().then(function(Ee){return Ee.done?Ee.value:me.next()})};function k(H,W,D){var G=L;return function(me,Ee){if(G===j)throw new Error("Generator is already running");if(G===Y){if(me==="throw")throw Ee;return ne()}for(D.method=me,D.arg=Ee;;){var Se=D.delegate;if(Se){var we=N(Se,D);if(we){if(we===F)continue;return we}}if(D.method==="next")D.sent=D._sent=D.arg;else if(D.method==="throw"){if(G===L)throw G=Y,D.arg;D.dispatchException(D.arg)}else D.method==="return"&&D.abrupt("return",D.arg);G=j;var je=O(H,W,D);if(je.type==="normal"){if(G=D.done?Y:z,je.arg===F)continue;return{value:je.arg,done:D.done}}else je.type==="throw"&&(G=Y,D.method="throw",D.arg=je.arg)}}}function N(H,W){var D=W.method,G=H.iterator[D];if(G===h)return W.delegate=null,D==="throw"&&H.iterator.return&&(W.method="return",W.arg=h,N(H,W),W.method==="throw")||D!=="return"&&(W.method="throw",W.arg=new TypeError("The iterator does not provide a '"+D+"' method")),F;var se=O(G,H.iterator,W.arg);if(se.type==="throw")return W.method="throw",W.arg=se.arg,W.delegate=null,F;var me=se.arg;if(!me)return W.method="throw",W.arg=new TypeError("iterator result is not an object"),W.delegate=null,F;if(me.done)W[H.resultName]=me.value,W.next=H.nextLoc,W.method!=="return"&&(W.method="next",W.arg=h);else return me;return W.delegate=null,F}M(S),E(S,T,"Generator"),E(S,g,function(){return this}),E(S,"toString",function(){return"[object Generator]"});function ye(H){var W={tryLoc:H[0]};1 in H&&(W.catchLoc=H[1]),2 in H&&(W.finallyLoc=H[2],W.afterLoc=H[3]),this.tryEntries.push(W)}function oe(H){var W=H.completion||{};W.type="normal",delete W.arg,H.completion=W}function V(H){this.tryEntries=[{tryLoc:"root"}],H.forEach(ye,this),this.reset(!0)}t.keys=function(H){var W=Object(H),D=[];for(var G in W)D.push(G);return D.reverse(),function se(){for(;D.length;){var me=D.pop();if(me in W)return se.value=me,se.done=!1,se}return se.done=!0,se}};function X(H){if(H!=null){var W=H[g];if(W)return W.call(H);if(typeof H.next=="function")return H;if(!isNaN(H.length)){var D=-1,G=function se(){for(;++D<H.length;)if(o.call(H,D))return se.value=H[D],se.done=!1,se;return se.value=h,se.done=!0,se};return G.next=G}}throw new TypeError(typeof H+" is not iterable")}t.values=X;function ne(){return{value:h,done:!0}}return V.prototype={constructor:V,reset:function(H){if(this.prev=0,this.next=0,this.sent=this._sent=h,this.done=!1,this.delegate=null,this.method="next",this.arg=h,this.tryEntries.forEach(oe),!H)for(var W in this)W.charAt(0)==="t"&&o.call(this,W)&&!isNaN(+W.slice(1))&&(this[W]=h)},stop:function(){this.done=!0;var H=this.tryEntries[0],W=H.completion;if(W.type==="throw")throw W.arg;return this.rval},dispatchException:function(H){if(this.done)throw H;var W=this;function D(we,je){return me.type="throw",me.arg=H,W.next=we,je&&(W.method="next",W.arg=h),!!je}for(var G=this.tryEntries.length-1;G>=0;--G){var se=this.tryEntries[G],me=se.completion;if(se.tryLoc==="root")return D("end");if(se.tryLoc<=this.prev){var Ee=o.call(se,"catchLoc"),Se=o.call(se,"finallyLoc");if(Ee&&Se){if(this.prev<se.catchLoc)return D(se.catchLoc,!0);if(this.prev<se.finallyLoc)return D(se.finallyLoc)}else if(Ee){if(this.prev<se.catchLoc)return D(se.catchLoc,!0)}else if(Se){if(this.prev<se.finallyLoc)return D(se.finallyLoc)}else throw new Error("try statement without catch or finally")}}},abrupt:function(H,W){for(var D=this.tryEntries.length-1;D>=0;--D){var G=this.tryEntries[D];if(G.tryLoc<=this.prev&&o.call(G,"finallyLoc")&&this.prev<G.finallyLoc){var se=G;break}}se&&(H==="break"||H==="continue")&&se.tryLoc<=W&&W<=se.finallyLoc&&(se=null);var me=se?se.completion:{};return me.type=H,me.arg=W,se?(this.method="next",this.next=se.finallyLoc,F):this.complete(me)},complete:function(H,W){if(H.type==="throw")throw H.arg;return H.type==="break"||H.type==="continue"?this.next=H.arg:H.type==="return"?(this.rval=this.arg=H.arg,this.method="return",this.next="end"):H.type==="normal"&&W&&(this.next=W),F},finish:function(H){for(var W=this.tryEntries.length-1;W>=0;--W){var D=this.tryEntries[W];if(D.finallyLoc===H)return this.complete(D.completion,D.afterLoc),oe(D),F}},catch:function(H){for(var W=this.tryEntries.length-1;W>=0;--W){var D=this.tryEntries[W];if(D.tryLoc===H){var G=D.completion;if(G.type==="throw"){var se=G.arg;oe(D)}return se}}throw new Error("illegal catch attempt")},delegateYield:function(H,W,D){return this.delegate={iterator:X(H),resultName:W,nextLoc:D},this.method==="next"&&(this.arg=h),F}},t})(i.exports);try{regeneratorRuntime=e}catch{typeof globalThis=="object"?globalThis.regeneratorRuntime=e:Function("r","regeneratorRuntime = r")(e)}})(op)),op.exports}OA();var lp={exports:{}},Be={};var z1;function kA(){if(z1)return Be;z1=1;var i=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),c=Symbol.for("react.consumer"),h=Symbol.for("react.context"),p=Symbol.for("react.forward_ref"),g=Symbol.for("react.suspense"),_=Symbol.for("react.memo"),T=Symbol.for("react.lazy"),E=Symbol.for("react.activity"),I=Symbol.iterator;function O(D){return D===null||typeof D!="object"?null:(D=I&&D[I]||D["@@iterator"],typeof D=="function"?D:null)}var L={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},z=Object.assign,j={};function Y(D,G,se){this.props=D,this.context=G,this.refs=j,this.updater=se||L}Y.prototype.isReactComponent={},Y.prototype.setState=function(D,G){if(typeof D!="object"&&typeof D!="function"&&D!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,D,G,"setState")},Y.prototype.forceUpdate=function(D){this.updater.enqueueForceUpdate(this,D,"forceUpdate")};function F(){}F.prototype=Y.prototype;function le(D,G,se){this.props=D,this.context=G,this.refs=j,this.updater=se||L}var K=le.prototype=new F;K.constructor=le,z(K,Y.prototype),K.isPureReactComponent=!0;var B=Array.isArray;function ie(){}var A={H:null,A:null,T:null,S:null},w=Object.prototype.hasOwnProperty;function S(D,G,se){var me=se.ref;return{$$typeof:i,type:D,key:G,ref:me!==void 0?me:null,props:se}}function M(D,G){return S(D.type,G,D.props)}function R(D){return typeof D=="object"&&D!==null&&D.$$typeof===i}function k(D){var G={"=":"=0",":":"=2"};return"$"+D.replace(/[=:]/g,function(se){return G[se]})}var N=/\/+/g;function ye(D,G){return typeof D=="object"&&D!==null&&D.key!=null?k(""+D.key):G.toString(36)}function oe(D){switch(D.status){case"fulfilled":return D.value;case"rejected":throw D.reason;default:switch(typeof D.status=="string"?D.then(ie,ie):(D.status="pending",D.then(function(G){D.status==="pending"&&(D.status="fulfilled",D.value=G)},function(G){D.status==="pending"&&(D.status="rejected",D.reason=G)})),D.status){case"fulfilled":return D.value;case"rejected":throw D.reason}}throw D}function V(D,G,se,me,Ee){var Se=typeof D;(Se==="undefined"||Se==="boolean")&&(D=null);var we=!1;if(D===null)we=!0;else switch(Se){case"bigint":case"string":case"number":we=!0;break;case"object":switch(D.$$typeof){case i:case e:we=!0;break;case T:return we=D._init,V(we(D._payload),G,se,me,Ee)}}if(we)return Ee=Ee(D),we=me===""?"."+ye(D,0):me,B(Ee)?(se="",we!=null&&(se=we.replace(N,"$&/")+"/"),V(Ee,G,se,"",function(q){return q})):Ee!=null&&(R(Ee)&&(Ee=M(Ee,se+(Ee.key==null||D&&D.key===Ee.key?"":(""+Ee.key).replace(N,"$&/")+"/")+we)),G.push(Ee)),1;we=0;var je=me===""?".":me+":";if(B(D))for(var Ye=0;Ye<D.length;Ye++)me=D[Ye],Se=je+ye(me,Ye),we+=V(me,G,se,Se,Ee);else if(Ye=O(D),typeof Ye=="function")for(D=Ye.call(D),Ye=0;!(me=D.next()).done;)me=me.value,Se=je+ye(me,Ye++),we+=V(me,G,se,Se,Ee);else if(Se==="object"){if(typeof D.then=="function")return V(oe(D),G,se,me,Ee);throw G=String(D),Error("Objects are not valid as a React child (found: "+(G==="[object Object]"?"object with keys {"+Object.keys(D).join(", ")+"}":G)+"). If you meant to render a collection of children, use an array instead.")}return we}function X(D,G,se){if(D==null)return D;var me=[],Ee=0;return V(D,me,"","",function(Se){return G.call(se,Se,Ee++)}),me}function ne(D){if(D._status===-1){var G=D._result;G=G(),G.then(function(se){(D._status===0||D._status===-1)&&(D._status=1,D._result=se)},function(se){(D._status===0||D._status===-1)&&(D._status=2,D._result=se)}),D._status===-1&&(D._status=0,D._result=G)}if(D._status===1)return D._result.default;throw D._result}var H=typeof reportError=="function"?reportError:function(D){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var G=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof D=="object"&&D!==null&&typeof D.message=="string"?String(D.message):String(D),error:D});if(!window.dispatchEvent(G))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",D);return}console.error(D)},W={map:X,forEach:function(D,G,se){X(D,function(){G.apply(this,arguments)},se)},count:function(D){var G=0;return X(D,function(){G++}),G},toArray:function(D){return X(D,function(G){return G})||[]},only:function(D){if(!R(D))throw Error("React.Children.only expected to receive a single React element child.");return D}};return Be.Activity=E,Be.Children=W,Be.Component=Y,Be.Fragment=t,Be.Profiler=o,Be.PureComponent=le,Be.StrictMode=r,Be.Suspense=g,Be.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=A,Be.__COMPILER_RUNTIME={__proto__:null,c:function(D){return A.H.useMemoCache(D)}},Be.cache=function(D){return function(){return D.apply(null,arguments)}},Be.cacheSignal=function(){return null},Be.cloneElement=function(D,G,se){if(D==null)throw Error("The argument must be a React element, but you passed "+D+".");var me=z({},D.props),Ee=D.key;if(G!=null)for(Se in G.key!==void 0&&(Ee=""+G.key),G)!w.call(G,Se)||Se==="key"||Se==="__self"||Se==="__source"||Se==="ref"&&G.ref===void 0||(me[Se]=G[Se]);var Se=arguments.length-2;if(Se===1)me.children=se;else if(1<Se){for(var we=Array(Se),je=0;je<Se;je++)we[je]=arguments[je+2];me.children=we}return S(D.type,Ee,me)},Be.createContext=function(D){return D={$$typeof:h,_currentValue:D,_currentValue2:D,_threadCount:0,Provider:null,Consumer:null},D.Provider=D,D.Consumer={$$typeof:c,_context:D},D},Be.createElement=function(D,G,se){var me,Ee={},Se=null;if(G!=null)for(me in G.key!==void 0&&(Se=""+G.key),G)w.call(G,me)&&me!=="key"&&me!=="__self"&&me!=="__source"&&(Ee[me]=G[me]);var we=arguments.length-2;if(we===1)Ee.children=se;else if(1<we){for(var je=Array(we),Ye=0;Ye<we;Ye++)je[Ye]=arguments[Ye+2];Ee.children=je}if(D&&D.defaultProps)for(me in we=D.defaultProps,we)Ee[me]===void 0&&(Ee[me]=we[me]);return S(D,Se,Ee)},Be.createRef=function(){return{current:null}},Be.forwardRef=function(D){return{$$typeof:p,render:D}},Be.isValidElement=R,Be.lazy=function(D){return{$$typeof:T,_payload:{_status:-1,_result:D},_init:ne}},Be.memo=function(D,G){return{$$typeof:_,type:D,compare:G===void 0?null:G}},Be.startTransition=function(D){var G=A.T,se={};A.T=se;try{var me=D(),Ee=A.S;Ee!==null&&Ee(se,me),typeof me=="object"&&me!==null&&typeof me.then=="function"&&me.then(ie,H)}catch(Se){H(Se)}finally{G!==null&&se.types!==null&&(G.types=se.types),A.T=G}},Be.unstable_useCacheRefresh=function(){return A.H.useCacheRefresh()},Be.use=function(D){return A.H.use(D)},Be.useActionState=function(D,G,se){return A.H.useActionState(D,G,se)},Be.useCallback=function(D,G){return A.H.useCallback(D,G)},Be.useContext=function(D){return A.H.useContext(D)},Be.useDebugValue=function(){},Be.useDeferredValue=function(D,G){return A.H.useDeferredValue(D,G)},Be.useEffect=function(D,G){return A.H.useEffect(D,G)},Be.useEffectEvent=function(D){return A.H.useEffectEvent(D)},Be.useId=function(){return A.H.useId()},Be.useImperativeHandle=function(D,G,se){return A.H.useImperativeHandle(D,G,se)},Be.useInsertionEffect=function(D,G){return A.H.useInsertionEffect(D,G)},Be.useLayoutEffect=function(D,G){return A.H.useLayoutEffect(D,G)},Be.useMemo=function(D,G){return A.H.useMemo(D,G)},Be.useOptimistic=function(D,G){return A.H.useOptimistic(D,G)},Be.useReducer=function(D,G,se){return A.H.useReducer(D,G,se)},Be.useRef=function(D){return A.H.useRef(D)},Be.useState=function(D){return A.H.useState(D)},Be.useSyncExternalStore=function(D,G,se){return A.H.useSyncExternalStore(D,G,se)},Be.useTransition=function(){return A.H.useTransition()},Be.version="19.2.0",Be}var q1;function og(){return q1||(q1=1,lp.exports=kA()),lp.exports}var ee=og(),cp={exports:{}},Ac={},up={exports:{}},hp={};var H1;function jA(){return H1||(H1=1,(function(i){function e(V,X){var ne=V.length;V.push(X);e:for(;0<ne;){var H=ne-1>>>1,W=V[H];if(0<o(W,X))V[H]=X,V[ne]=W,ne=H;else break e}}function t(V){return V.length===0?null:V[0]}function r(V){if(V.length===0)return null;var X=V[0],ne=V.pop();if(ne!==X){V[0]=ne;e:for(var H=0,W=V.length,D=W>>>1;H<D;){var G=2*(H+1)-1,se=V[G],me=G+1,Ee=V[me];if(0>o(se,ne))me<W&&0>o(Ee,se)?(V[H]=Ee,V[me]=ne,H=me):(V[H]=se,V[G]=ne,H=G);else if(me<W&&0>o(Ee,ne))V[H]=Ee,V[me]=ne,H=me;else break e}}return X}function o(V,X){var ne=V.sortIndex-X.sortIndex;return ne!==0?ne:V.id-X.id}if(i.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var c=performance;i.unstable_now=function(){return c.now()}}else{var h=Date,p=h.now();i.unstable_now=function(){return h.now()-p}}var g=[],_=[],T=1,E=null,I=3,O=!1,L=!1,z=!1,j=!1,Y=typeof setTimeout=="function"?setTimeout:null,F=typeof clearTimeout=="function"?clearTimeout:null,le=typeof setImmediate<"u"?setImmediate:null;function K(V){for(var X=t(_);X!==null;){if(X.callback===null)r(_);else if(X.startTime<=V)r(_),X.sortIndex=X.expirationTime,e(g,X);else break;X=t(_)}}function B(V){if(z=!1,K(V),!L)if(t(g)!==null)L=!0,ie||(ie=!0,k());else{var X=t(_);X!==null&&oe(B,X.startTime-V)}}var ie=!1,A=-1,w=5,S=-1;function M(){return j?!0:!(i.unstable_now()-S<w)}function R(){if(j=!1,ie){var V=i.unstable_now();S=V;var X=!0;try{e:{L=!1,z&&(z=!1,F(A),A=-1),O=!0;var ne=I;try{t:{for(K(V),E=t(g);E!==null&&!(E.expirationTime>V&&M());){var H=E.callback;if(typeof H=="function"){E.callback=null,I=E.priorityLevel;var W=H(E.expirationTime<=V);if(V=i.unstable_now(),typeof W=="function"){E.callback=W,K(V),X=!0;break t}E===t(g)&&r(g),K(V)}else r(g);E=t(g)}if(E!==null)X=!0;else{var D=t(_);D!==null&&oe(B,D.startTime-V),X=!1}}break e}finally{E=null,I=ne,O=!1}X=void 0}}finally{X?k():ie=!1}}}var k;if(typeof le=="function")k=function(){le(R)};else if(typeof MessageChannel<"u"){var N=new MessageChannel,ye=N.port2;N.port1.onmessage=R,k=function(){ye.postMessage(null)}}else k=function(){Y(R,0)};function oe(V,X){A=Y(function(){V(i.unstable_now())},X)}i.unstable_IdlePriority=5,i.unstable_ImmediatePriority=1,i.unstable_LowPriority=4,i.unstable_NormalPriority=3,i.unstable_Profiling=null,i.unstable_UserBlockingPriority=2,i.unstable_cancelCallback=function(V){V.callback=null},i.unstable_forceFrameRate=function(V){0>V||125<V?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):w=0<V?Math.floor(1e3/V):5},i.unstable_getCurrentPriorityLevel=function(){return I},i.unstable_next=function(V){switch(I){case 1:case 2:case 3:var X=3;break;default:X=I}var ne=I;I=X;try{return V()}finally{I=ne}},i.unstable_requestPaint=function(){j=!0},i.unstable_runWithPriority=function(V,X){switch(V){case 1:case 2:case 3:case 4:case 5:break;default:V=3}var ne=I;I=V;try{return X()}finally{I=ne}},i.unstable_scheduleCallback=function(V,X,ne){var H=i.unstable_now();switch(typeof ne=="object"&&ne!==null?(ne=ne.delay,ne=typeof ne=="number"&&0<ne?H+ne:H):ne=H,V){case 1:var W=-1;break;case 2:W=250;break;case 5:W=1073741823;break;case 4:W=1e4;break;default:W=5e3}return W=ne+W,V={id:T++,callback:X,priorityLevel:V,startTime:ne,expirationTime:W,sortIndex:-1},ne>H?(V.sortIndex=ne,e(_,V),t(g)===null&&V===t(_)&&(z?(F(A),A=-1):z=!0,oe(B,ne-H))):(V.sortIndex=W,e(g,V),L||O||(L=!0,ie||(ie=!0,k()))),V},i.unstable_shouldYield=M,i.unstable_wrapCallback=function(V){var X=I;return function(){var ne=I;I=X;try{return V.apply(this,arguments)}finally{I=ne}}}})(hp)),hp}var F1;function LA(){return F1||(F1=1,up.exports=jA()),up.exports}var dp={exports:{}},In={};var $1;function PA(){if($1)return In;$1=1;var i=og();function e(g){var _="https://react.dev/errors/"+g;if(1<arguments.length){_+="?args[]="+encodeURIComponent(arguments[1]);for(var T=2;T<arguments.length;T++)_+="&args[]="+encodeURIComponent(arguments[T])}return"Minified React error #"+g+"; visit "+_+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function t(){}var r={d:{f:t,r:function(){throw Error(e(522))},D:t,C:t,L:t,m:t,X:t,S:t,M:t},p:0,findDOMNode:null},o=Symbol.for("react.portal");function c(g,_,T){var E=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:o,key:E==null?null:""+E,children:g,containerInfo:_,implementation:T}}var h=i.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function p(g,_){if(g==="font")return"";if(typeof _=="string")return _==="use-credentials"?_:""}return In.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=r,In.createPortal=function(g,_){var T=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!_||_.nodeType!==1&&_.nodeType!==9&&_.nodeType!==11)throw Error(e(299));return c(g,_,null,T)},In.flushSync=function(g){var _=h.T,T=r.p;try{if(h.T=null,r.p=2,g)return g()}finally{h.T=_,r.p=T,r.d.f()}},In.preconnect=function(g,_){typeof g=="string"&&(_?(_=_.crossOrigin,_=typeof _=="string"?_==="use-credentials"?_:"":void 0):_=null,r.d.C(g,_))},In.prefetchDNS=function(g){typeof g=="string"&&r.d.D(g)},In.preinit=function(g,_){if(typeof g=="string"&&_&&typeof _.as=="string"){var T=_.as,E=p(T,_.crossOrigin),I=typeof _.integrity=="string"?_.integrity:void 0,O=typeof _.fetchPriority=="string"?_.fetchPriority:void 0;T==="style"?r.d.S(g,typeof _.precedence=="string"?_.precedence:void 0,{crossOrigin:E,integrity:I,fetchPriority:O}):T==="script"&&r.d.X(g,{crossOrigin:E,integrity:I,fetchPriority:O,nonce:typeof _.nonce=="string"?_.nonce:void 0})}},In.preinitModule=function(g,_){if(typeof g=="string")if(typeof _=="object"&&_!==null){if(_.as==null||_.as==="script"){var T=p(_.as,_.crossOrigin);r.d.M(g,{crossOrigin:T,integrity:typeof _.integrity=="string"?_.integrity:void 0,nonce:typeof _.nonce=="string"?_.nonce:void 0})}}else _==null&&r.d.M(g)},In.preload=function(g,_){if(typeof g=="string"&&typeof _=="object"&&_!==null&&typeof _.as=="string"){var T=_.as,E=p(T,_.crossOrigin);r.d.L(g,T,{crossOrigin:E,integrity:typeof _.integrity=="string"?_.integrity:void 0,nonce:typeof _.nonce=="string"?_.nonce:void 0,type:typeof _.type=="string"?_.type:void 0,fetchPriority:typeof _.fetchPriority=="string"?_.fetchPriority:void 0,referrerPolicy:typeof _.referrerPolicy=="string"?_.referrerPolicy:void 0,imageSrcSet:typeof _.imageSrcSet=="string"?_.imageSrcSet:void 0,imageSizes:typeof _.imageSizes=="string"?_.imageSizes:void 0,media:typeof _.media=="string"?_.media:void 0})}},In.preloadModule=function(g,_){if(typeof g=="string")if(_){var T=p(_.as,_.crossOrigin);r.d.m(g,{as:typeof _.as=="string"&&_.as!=="script"?_.as:void 0,crossOrigin:T,integrity:typeof _.integrity=="string"?_.integrity:void 0})}else r.d.m(g)},In.requestFormReset=function(g){r.d.r(g)},In.unstable_batchedUpdates=function(g,_){return g(_)},In.useFormState=function(g,_,T){return h.H.useFormState(g,_,T)},In.useFormStatus=function(){return h.H.useHostTransitionStatus()},In.version="19.2.0",In}var G1;function U0(){if(G1)return dp.exports;G1=1;function i(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(i)}catch(e){console.error(e)}}return i(),dp.exports=PA(),dp.exports}var Y1;function VA(){if(Y1)return Ac;Y1=1;var i=LA(),e=og(),t=U0();function r(n){var s="https://react.dev/errors/"+n;if(1<arguments.length){s+="?args[]="+encodeURIComponent(arguments[1]);for(var a=2;a<arguments.length;a++)s+="&args[]="+encodeURIComponent(arguments[a])}return"Minified React error #"+n+"; visit "+s+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function o(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11)}function c(n){var s=n,a=n;if(n.alternate)for(;s.return;)s=s.return;else{n=s;do s=n,(s.flags&4098)!==0&&(a=s.return),n=s.return;while(n)}return s.tag===3?a:null}function h(n){if(n.tag===13){var s=n.memoizedState;if(s===null&&(n=n.alternate,n!==null&&(s=n.memoizedState)),s!==null)return s.dehydrated}return null}function p(n){if(n.tag===31){var s=n.memoizedState;if(s===null&&(n=n.alternate,n!==null&&(s=n.memoizedState)),s!==null)return s.dehydrated}return null}function g(n){if(c(n)!==n)throw Error(r(188))}function _(n){var s=n.alternate;if(!s){if(s=c(n),s===null)throw Error(r(188));return s!==n?null:n}for(var a=n,l=s;;){var d=a.return;if(d===null)break;var m=d.alternate;if(m===null){if(l=d.return,l!==null){a=l;continue}break}if(d.child===m.child){for(m=d.child;m;){if(m===a)return g(d),n;if(m===l)return g(d),s;m=m.sibling}throw Error(r(188))}if(a.return!==l.return)a=d,l=m;else{for(var v=!1,C=d.child;C;){if(C===a){v=!0,a=d,l=m;break}if(C===l){v=!0,l=d,a=m;break}C=C.sibling}if(!v){for(C=m.child;C;){if(C===a){v=!0,a=m,l=d;break}if(C===l){v=!0,l=m,a=d;break}C=C.sibling}if(!v)throw Error(r(189))}}if(a.alternate!==l)throw Error(r(190))}if(a.tag!==3)throw Error(r(188));return a.stateNode.current===a?n:s}function T(n){var s=n.tag;if(s===5||s===26||s===27||s===6)return n;for(n=n.child;n!==null;){if(s=T(n),s!==null)return s;n=n.sibling}return null}var E=Object.assign,I=Symbol.for("react.element"),O=Symbol.for("react.transitional.element"),L=Symbol.for("react.portal"),z=Symbol.for("react.fragment"),j=Symbol.for("react.strict_mode"),Y=Symbol.for("react.profiler"),F=Symbol.for("react.consumer"),le=Symbol.for("react.context"),K=Symbol.for("react.forward_ref"),B=Symbol.for("react.suspense"),ie=Symbol.for("react.suspense_list"),A=Symbol.for("react.memo"),w=Symbol.for("react.lazy"),S=Symbol.for("react.activity"),M=Symbol.for("react.memo_cache_sentinel"),R=Symbol.iterator;function k(n){return n===null||typeof n!="object"?null:(n=R&&n[R]||n["@@iterator"],typeof n=="function"?n:null)}var N=Symbol.for("react.client.reference");function ye(n){if(n==null)return null;if(typeof n=="function")return n.$$typeof===N?null:n.displayName||n.name||null;if(typeof n=="string")return n;switch(n){case z:return"Fragment";case Y:return"Profiler";case j:return"StrictMode";case B:return"Suspense";case ie:return"SuspenseList";case S:return"Activity"}if(typeof n=="object")switch(n.$$typeof){case L:return"Portal";case le:return n.displayName||"Context";case F:return(n._context.displayName||"Context")+".Consumer";case K:var s=n.render;return n=n.displayName,n||(n=s.displayName||s.name||"",n=n!==""?"ForwardRef("+n+")":"ForwardRef"),n;case A:return s=n.displayName||null,s!==null?s:ye(n.type)||"Memo";case w:s=n._payload,n=n._init;try{return ye(n(s))}catch{}}return null}var oe=Array.isArray,V=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,X=t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ne={pending:!1,data:null,method:null,action:null},H=[],W=-1;function D(n){return{current:n}}function G(n){0>W||(n.current=H[W],H[W]=null,W--)}function se(n,s){W++,H[W]=n.current,n.current=s}var me=D(null),Ee=D(null),Se=D(null),we=D(null);function je(n,s){switch(se(Se,s),se(Ee,n),se(me,null),s.nodeType){case 9:case 11:n=(n=s.documentElement)&&(n=n.namespaceURI)?o1(n):0;break;default:if(n=s.tagName,s=s.namespaceURI)s=o1(s),n=l1(s,n);else switch(n){case"svg":n=1;break;case"math":n=2;break;default:n=0}}G(me),se(me,n)}function Ye(){G(me),G(Ee),G(Se)}function q(n){n.memoizedState!==null&&se(we,n);var s=me.current,a=l1(s,n.type);s!==a&&(se(Ee,n),se(me,a))}function pe(n){Ee.current===n&&(G(me),G(Ee)),we.current===n&&(G(we),bc._currentValue=ne)}var nt,At;function jt(n){if(nt===void 0)try{throw Error()}catch(a){var s=a.stack.trim().match(/\n( *(at )?)/);nt=s&&s[1]||"",At=-1<a.stack.indexOf(`
    at`)?" (<anonymous>)":-1<a.stack.indexOf("@")?"@unknown:0:0":""}return`
`+nt+n+At}var Dn=!1;function ea(n,s){if(!n||Dn)return"";Dn=!0;var a=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var l={DetermineComponentFrameRoot:function(){try{if(s){var de=function(){throw Error()};if(Object.defineProperty(de.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(de,[])}catch(ae){var te=ae}Reflect.construct(n,[],de)}else{try{de.call()}catch(ae){te=ae}n.call(de.prototype)}}else{try{throw Error()}catch(ae){te=ae}(de=n())&&typeof de.catch=="function"&&de.catch(function(){})}}catch(ae){if(ae&&te&&typeof ae.stack=="string")return[ae.stack,te.stack]}return[null,null]}};l.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var d=Object.getOwnPropertyDescriptor(l.DetermineComponentFrameRoot,"name");d&&d.configurable&&Object.defineProperty(l.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var m=l.DetermineComponentFrameRoot(),v=m[0],C=m[1];if(v&&C){var P=v.split(`
`),Z=C.split(`
`);for(d=l=0;l<P.length&&!P[l].includes("DetermineComponentFrameRoot");)l++;for(;d<Z.length&&!Z[d].includes("DetermineComponentFrameRoot");)d++;if(l===P.length||d===Z.length)for(l=P.length-1,d=Z.length-1;1<=l&&0<=d&&P[l]!==Z[d];)d--;for(;1<=l&&0<=d;l--,d--)if(P[l]!==Z[d]){if(l!==1||d!==1)do if(l--,d--,0>d||P[l]!==Z[d]){var ce=`
`+P[l].replace(" at new "," at ");return n.displayName&&ce.includes("<anonymous>")&&(ce=ce.replace("<anonymous>",n.displayName)),ce}while(1<=l&&0<=d);break}}}finally{Dn=!1,Error.prepareStackTrace=a}return(a=n?n.displayName||n.name:"")?jt(a):""}function Tl(n,s){switch(n.tag){case 26:case 27:case 5:return jt(n.type);case 16:return jt("Lazy");case 13:return n.child!==s&&s!==null?jt("Suspense Fallback"):jt("Suspense");case 19:return jt("SuspenseList");case 0:case 15:return ea(n.type,!1);case 11:return ea(n.type.render,!1);case 1:return ea(n.type,!0);case 31:return jt("Activity");default:return""}}function wl(n){try{var s="",a=null;do s+=Tl(n,a),a=n,n=n.return;while(n);return s}catch(l){return`
Error generating stack: `+l.message+`
`+l.stack}}var Xt=Object.prototype.hasOwnProperty,cn=i.unstable_scheduleCallback,Xs=i.unstable_cancelCallback,lf=i.unstable_shouldYield,lu=i.unstable_requestPaint,Mn=i.unstable_now,ta=i.unstable_getCurrentPriorityLevel,El=i.unstable_ImmediatePriority,Sl=i.unstable_UserBlockingPriority,Ws=i.unstable_NormalPriority,cf=i.unstable_LowPriority,cu=i.unstable_IdlePriority,uu=i.log,hu=i.unstable_setDisableYieldValue,bi=null,_n=null;function ii(n){if(typeof uu=="function"&&hu(n),_n&&typeof _n.setStrictMode=="function")try{_n.setStrictMode(bi,n)}catch{}}var qt=Math.clz32?Math.clz32:fu,du=Math.log,to=Math.LN2;function fu(n){return n>>>=0,n===0?32:31-(du(n)/to|0)|0}var Vi=256,na=262144,Wt=4194304;function Bi(n){var s=n&42;if(s!==0)return s;switch(n&-n){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return n&261888;case 262144:case 524288:case 1048576:case 2097152:return n&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return n&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return n}}function Ui(n,s,a){var l=n.pendingLanes;if(l===0)return 0;var d=0,m=n.suspendedLanes,v=n.pingedLanes;n=n.warmLanes;var C=l&134217727;return C!==0?(l=C&~m,l!==0?d=Bi(l):(v&=C,v!==0?d=Bi(v):a||(a=C&~n,a!==0&&(d=Bi(a))))):(C=l&~m,C!==0?d=Bi(C):v!==0?d=Bi(v):a||(a=l&~n,a!==0&&(d=Bi(a)))),d===0?0:s!==0&&s!==d&&(s&m)===0&&(m=d&-d,a=s&-s,m>=a||m===32&&(a&4194048)!==0)?s:d}function Ti(n,s){return(n.pendingLanes&~(n.suspendedLanes&~n.pingedLanes)&s)===0}function uf(n,s){switch(n){case 1:case 2:case 4:case 8:case 64:return s+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function mu(){var n=Wt;return Wt<<=1,(Wt&62914560)===0&&(Wt=4194304),n}function zi(n){for(var s=[],a=0;31>a;a++)s.push(n);return s}function ia(n,s){n.pendingLanes|=s,s!==268435456&&(n.suspendedLanes=0,n.pingedLanes=0,n.warmLanes=0)}function hf(n,s,a,l,d,m){var v=n.pendingLanes;n.pendingLanes=a,n.suspendedLanes=0,n.pingedLanes=0,n.warmLanes=0,n.expiredLanes&=a,n.entangledLanes&=a,n.errorRecoveryDisabledLanes&=a,n.shellSuspendCounter=0;var C=n.entanglements,P=n.expirationTimes,Z=n.hiddenUpdates;for(a=v&~a;0<a;){var ce=31-qt(a),de=1<<ce;C[ce]=0,P[ce]=-1;var te=Z[ce];if(te!==null)for(Z[ce]=null,ce=0;ce<te.length;ce++){var ae=te[ce];ae!==null&&(ae.lane&=-536870913)}a&=~de}l!==0&&sa(n,l,0),m!==0&&d===0&&n.tag!==0&&(n.suspendedLanes|=m&~(v&~s))}function sa(n,s,a){n.pendingLanes|=s,n.suspendedLanes&=~s;var l=31-qt(s);n.entangledLanes|=s,n.entanglements[l]=n.entanglements[l]|1073741824|a&261930}function Al(n,s){var a=n.entangledLanes|=s;for(n=n.entanglements;a;){var l=31-qt(a),d=1<<l;d&s|n[l]&s&&(n[l]|=s),a&=~d}}function Il(n,s){var a=s&-s;return a=(a&42)!==0?1:ra(a),(a&(n.suspendedLanes|s))!==0?0:a}function ra(n){switch(n){case 2:n=1;break;case 8:n=4;break;case 32:n=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:n=128;break;case 268435456:n=134217728;break;default:n=0}return n}function Ts(n){return n&=-n,2<n?8<n?(n&134217727)!==0?32:268435456:8:2}function pu(){var n=X.p;return n!==0?n:(n=window.event,n===void 0?32:D1(n.type))}function wi(n,s){var a=X.p;try{return X.p=n,s()}finally{X.p=a}}var Ei=Math.random().toString(36).slice(2),Jt="__reactFiber$"+Ei,dn="__reactProps$"+Ei,qi="__reactContainer$"+Ei,no="__reactEvents$"+Ei,df="__reactListeners$"+Ei,gu="__reactHandles$"+Ei,_u="__reactResources$"+Ei,Hi="__reactMarker$"+Ei;function io(n){delete n[Jt],delete n[dn],delete n[no],delete n[df],delete n[gu]}function Fi(n){var s=n[Jt];if(s)return s;for(var a=n.parentNode;a;){if(s=a[qi]||a[Jt]){if(a=s.alternate,s.child!==null||a!==null&&a.child!==null)for(n=p1(n);n!==null;){if(a=n[Jt])return a;n=p1(n)}return s}n=a,a=n.parentNode}return null}function si(n){if(n=n[Jt]||n[qi]){var s=n.tag;if(s===5||s===6||s===13||s===31||s===26||s===27||s===3)return n}return null}function Gn(n){var s=n.tag;if(s===5||s===26||s===27||s===6)return n.stateNode;throw Error(r(33))}function $i(n){var s=n[_u];return s||(s=n[_u]={hoistableStyles:new Map,hoistableScripts:new Map}),s}function Zt(n){n[Hi]=!0}var Cl=new Set,Nl={};function Gi(n,s){Yi(n,s),Yi(n+"Capture",s)}function Yi(n,s){for(Nl[n]=s,n=0;n<s.length;n++)Cl.add(s[n])}var xl=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Rl={},Dl={};function yu(n){return Xt.call(Dl,n)?!0:Xt.call(Rl,n)?!1:xl.test(n)?Dl[n]=!0:(Rl[n]=!0,!1)}function so(n,s,a){if(yu(s))if(a===null)n.removeAttribute(s);else{switch(typeof a){case"undefined":case"function":case"symbol":n.removeAttribute(s);return;case"boolean":var l=s.toLowerCase().slice(0,5);if(l!=="data-"&&l!=="aria-"){n.removeAttribute(s);return}}n.setAttribute(s,""+a)}}function Yn(n,s,a){if(a===null)n.removeAttribute(s);else{switch(typeof a){case"undefined":case"function":case"symbol":case"boolean":n.removeAttribute(s);return}n.setAttribute(s,""+a)}}function en(n,s,a,l){if(l===null)n.removeAttribute(a);else{switch(typeof l){case"undefined":case"function":case"symbol":case"boolean":n.removeAttribute(a);return}n.setAttributeNS(s,a,""+l)}}function fn(n){switch(typeof n){case"bigint":case"boolean":case"number":case"string":case"undefined":return n;case"object":return n;default:return""}}function Js(n){var s=n.type;return(n=n.nodeName)&&n.toLowerCase()==="input"&&(s==="checkbox"||s==="radio")}function Ml(n,s,a){var l=Object.getOwnPropertyDescriptor(n.constructor.prototype,s);if(!n.hasOwnProperty(s)&&typeof l<"u"&&typeof l.get=="function"&&typeof l.set=="function"){var d=l.get,m=l.set;return Object.defineProperty(n,s,{configurable:!0,get:function(){return d.call(this)},set:function(v){a=""+v,m.call(this,v)}}),Object.defineProperty(n,s,{enumerable:l.enumerable}),{getValue:function(){return a},setValue:function(v){a=""+v},stopTracking:function(){n._valueTracker=null,delete n[s]}}}}function mt(n){if(!n._valueTracker){var s=Js(n)?"checked":"value";n._valueTracker=Ml(n,s,""+n[s])}}function aa(n){if(!n)return!1;var s=n._valueTracker;if(!s)return!0;var a=s.getValue(),l="";return n&&(l=Js(n)?n.checked?"true":"false":n.value),n=l,n!==a?(s.setValue(n),!0):!1}function Qi(n){if(n=n||(typeof document<"u"?document:void 0),typeof n>"u")return null;try{return n.activeElement||n.body}catch{return n.body}}var oa=/[\n"\\]/g;function Ln(n){return n.replace(oa,function(s){return"\\"+s.charCodeAt(0).toString(16)+" "})}function ro(n,s,a,l,d,m,v,C){n.name="",v!=null&&typeof v!="function"&&typeof v!="symbol"&&typeof v!="boolean"?n.type=v:n.removeAttribute("type"),s!=null?v==="number"?(s===0&&n.value===""||n.value!=s)&&(n.value=""+fn(s)):n.value!==""+fn(s)&&(n.value=""+fn(s)):v!=="submit"&&v!=="reset"||n.removeAttribute("value"),s!=null?Ol(n,v,fn(s)):a!=null?Ol(n,v,fn(a)):l!=null&&n.removeAttribute("value"),d==null&&m!=null&&(n.defaultChecked=!!m),d!=null&&(n.checked=d&&typeof d!="function"&&typeof d!="symbol"),C!=null&&typeof C!="function"&&typeof C!="symbol"&&typeof C!="boolean"?n.name=""+fn(C):n.removeAttribute("name")}function vu(n,s,a,l,d,m,v,C){if(m!=null&&typeof m!="function"&&typeof m!="symbol"&&typeof m!="boolean"&&(n.type=m),s!=null||a!=null){if(!(m!=="submit"&&m!=="reset"||s!=null)){mt(n);return}a=a!=null?""+fn(a):"",s=s!=null?""+fn(s):a,C||s===n.value||(n.value=s),n.defaultValue=s}l=l??d,l=typeof l!="function"&&typeof l!="symbol"&&!!l,n.checked=C?n.checked:!!l,n.defaultChecked=!!l,v!=null&&typeof v!="function"&&typeof v!="symbol"&&typeof v!="boolean"&&(n.name=v),mt(n)}function Ol(n,s,a){s==="number"&&Qi(n.ownerDocument)===n||n.defaultValue===""+a||(n.defaultValue=""+a)}function Zs(n,s,a,l){if(n=n.options,s){s={};for(var d=0;d<a.length;d++)s["$"+a[d]]=!0;for(a=0;a<n.length;a++)d=s.hasOwnProperty("$"+n[a].value),n[a].selected!==d&&(n[a].selected=d),d&&l&&(n[a].defaultSelected=!0)}else{for(a=""+fn(a),s=null,d=0;d<n.length;d++){if(n[d].value===a){n[d].selected=!0,l&&(n[d].defaultSelected=!0);return}s!==null||n[d].disabled||(s=n[d])}s!==null&&(s.selected=!0)}}function bu(n,s,a){if(s!=null&&(s=""+fn(s),s!==n.value&&(n.value=s),a==null)){n.defaultValue!==s&&(n.defaultValue=s);return}n.defaultValue=a!=null?""+fn(a):""}function er(n,s,a,l){if(s==null){if(l!=null){if(a!=null)throw Error(r(92));if(oe(l)){if(1<l.length)throw Error(r(93));l=l[0]}a=l}a==null&&(a=""),s=a}a=fn(s),n.defaultValue=a,l=n.textContent,l===a&&l!==""&&l!==null&&(n.value=l),mt(n)}function Pn(n,s){if(s){var a=n.firstChild;if(a&&a===n.lastChild&&a.nodeType===3){a.nodeValue=s;return}}n.textContent=s}var Tu=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function kl(n,s,a){var l=s.indexOf("--")===0;a==null||typeof a=="boolean"||a===""?l?n.setProperty(s,""):s==="float"?n.cssFloat="":n[s]="":l?n.setProperty(s,a):typeof a!="number"||a===0||Tu.has(s)?s==="float"?n.cssFloat=a:n[s]=(""+a).trim():n[s]=a+"px"}function jl(n,s,a){if(s!=null&&typeof s!="object")throw Error(r(62));if(n=n.style,a!=null){for(var l in a)!a.hasOwnProperty(l)||s!=null&&s.hasOwnProperty(l)||(l.indexOf("--")===0?n.setProperty(l,""):l==="float"?n.cssFloat="":n[l]="");for(var d in s)l=s[d],s.hasOwnProperty(d)&&a[d]!==l&&kl(n,d,l)}else for(var m in s)s.hasOwnProperty(m)&&kl(n,m,s[m])}function ao(n){if(n.indexOf("-")===-1)return!1;switch(n){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var wu=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),tr=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function oo(n){return tr.test(""+n)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":n}function Si(){}var Ll=null;function ri(n){return n=n.target||n.srcElement||window,n.correspondingUseElement&&(n=n.correspondingUseElement),n.nodeType===3?n.parentNode:n}var nr=null,Ki=null;function la(n){var s=si(n);if(s&&(n=s.stateNode)){var a=n[dn]||null;e:switch(n=s.stateNode,s.type){case"input":if(ro(n,a.value,a.defaultValue,a.defaultValue,a.checked,a.defaultChecked,a.type,a.name),s=a.name,a.type==="radio"&&s!=null){for(a=n;a.parentNode;)a=a.parentNode;for(a=a.querySelectorAll('input[name="'+Ln(""+s)+'"][type="radio"]'),s=0;s<a.length;s++){var l=a[s];if(l!==n&&l.form===n.form){var d=l[dn]||null;if(!d)throw Error(r(90));ro(l,d.value,d.defaultValue,d.defaultValue,d.checked,d.defaultChecked,d.type,d.name)}}for(s=0;s<a.length;s++)l=a[s],l.form===n.form&&aa(l)}break e;case"textarea":bu(n,a.value,a.defaultValue);break e;case"select":s=a.value,s!=null&&Zs(n,!!a.multiple,s,!1)}}}var lo=!1;function ir(n,s,a){if(lo)return n(s,a);lo=!0;try{var l=n(s);return l}finally{if(lo=!1,(nr!==null||Ki!==null)&&(ph(),nr&&(s=nr,n=Ki,Ki=nr=null,la(s),n)))for(s=0;s<n.length;s++)la(n[s])}}function Ai(n,s){var a=n.stateNode;if(a===null)return null;var l=a[dn]||null;if(l===null)return null;a=l[s];e:switch(s){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(l=!l.disabled)||(n=n.type,l=!(n==="button"||n==="input"||n==="select"||n==="textarea")),n=!l;break e;default:n=!1}if(n)return null;if(a&&typeof a!="function")throw Error(r(231,s,typeof a));return a}var ai=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),ca=!1;if(ai)try{var yt={};Object.defineProperty(yt,"passive",{get:function(){ca=!0}}),window.addEventListener("test",yt,yt),window.removeEventListener("test",yt,yt)}catch{ca=!1}var Xi=null,Pl=null,ua=null;function Vl(){if(ua)return ua;var n,s=Pl,a=s.length,l,d="value"in Xi?Xi.value:Xi.textContent,m=d.length;for(n=0;n<a&&s[n]===d[n];n++);var v=a-n;for(l=1;l<=v&&s[a-l]===d[m-l];l++);return ua=d.slice(n,1<l?1-l:void 0)}function ha(n){var s=n.keyCode;return"charCode"in n?(n=n.charCode,n===0&&s===13&&(n=13)):n=s,n===10&&(n=13),32<=n||n===13?n:0}function ws(){return!0}function Ii(){return!1}function yn(n){function s(a,l,d,m,v){this._reactName=a,this._targetInst=d,this.type=l,this.nativeEvent=m,this.target=v,this.currentTarget=null;for(var C in n)n.hasOwnProperty(C)&&(a=n[C],this[C]=a?a(m):m[C]);return this.isDefaultPrevented=(m.defaultPrevented!=null?m.defaultPrevented:m.returnValue===!1)?ws:Ii,this.isPropagationStopped=Ii,this}return E(s.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():typeof a.returnValue!="unknown"&&(a.returnValue=!1),this.isDefaultPrevented=ws)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():typeof a.cancelBubble!="unknown"&&(a.cancelBubble=!0),this.isPropagationStopped=ws)},persist:function(){},isPersistent:ws}),s}var Es={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(n){return n.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Wi=yn(Es),sr=E({},Es,{view:0,detail:0}),Bl=yn(sr),rr,co,Ji,uo=E({},sr,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:ar,button:0,buttons:0,relatedTarget:function(n){return n.relatedTarget===void 0?n.fromElement===n.srcElement?n.toElement:n.fromElement:n.relatedTarget},movementX:function(n){return"movementX"in n?n.movementX:(n!==Ji&&(Ji&&n.type==="mousemove"?(rr=n.screenX-Ji.screenX,co=n.screenY-Ji.screenY):co=rr=0,Ji=n),rr)},movementY:function(n){return"movementY"in n?n.movementY:co}}),Ul=yn(uo),da=E({},uo,{dataTransfer:0}),Eu=yn(da),Su=E({},sr,{relatedTarget:0}),fa=yn(Su),zl=E({},Es,{animationName:0,elapsedTime:0,pseudoElement:0}),Au=yn(zl),ho=E({},Es,{clipboardData:function(n){return"clipboardData"in n?n.clipboardData:window.clipboardData}}),Iu=yn(ho),Cu=E({},Es,{data:0}),Zi=yn(Cu),Nu={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},xu={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Ru={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Du(n){var s=this.nativeEvent;return s.getModifierState?s.getModifierState(n):(n=Ru[n])?!!s[n]:!1}function ar(){return Du}var On=E({},sr,{key:function(n){if(n.key){var s=Nu[n.key]||n.key;if(s!=="Unidentified")return s}return n.type==="keypress"?(n=ha(n),n===13?"Enter":String.fromCharCode(n)):n.type==="keydown"||n.type==="keyup"?xu[n.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:ar,charCode:function(n){return n.type==="keypress"?ha(n):0},keyCode:function(n){return n.type==="keydown"||n.type==="keyup"?n.keyCode:0},which:function(n){return n.type==="keypress"?ha(n):n.type==="keydown"||n.type==="keyup"?n.keyCode:0}}),Mu=yn(On),Ou=E({},uo,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Ss=yn(Ou),u=E({},sr,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:ar}),y=yn(u),b=E({},Es,{propertyName:0,elapsedTime:0,pseudoElement:0}),x=yn(b),Q=E({},uo,{deltaX:function(n){return"deltaX"in n?n.deltaX:"wheelDeltaX"in n?-n.wheelDeltaX:0},deltaY:function(n){return"deltaY"in n?n.deltaY:"wheelDeltaY"in n?-n.wheelDeltaY:"wheelDelta"in n?-n.wheelDelta:0},deltaZ:0,deltaMode:0}),re=yn(Q),ge=E({},Es,{newState:0,oldState:0}),qe=yn(ge),Ht=[9,13,27,32],ut=ai&&"CompositionEvent"in window,Rt=null;ai&&"documentMode"in document&&(Rt=document.documentMode);var oi=ai&&"TextEvent"in window&&!Rt,es=ai&&(!ut||Rt&&8<Rt&&11>=Rt),Ci=" ",Ni=!1;function ma(n,s){switch(n){case"keyup":return Ht.indexOf(s.keyCode)!==-1;case"keydown":return s.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function fo(n){return n=n.detail,typeof n=="object"&&"data"in n?n.data:null}var mo=!1;function eS(n,s){switch(n){case"compositionend":return fo(s);case"keypress":return s.which!==32?null:(Ni=!0,Ci);case"textInput":return n=s.data,n===Ci&&Ni?null:n;default:return null}}function tS(n,s){if(mo)return n==="compositionend"||!ut&&ma(n,s)?(n=Vl(),ua=Pl=Xi=null,mo=!1,n):null;switch(n){case"paste":return null;case"keypress":if(!(s.ctrlKey||s.altKey||s.metaKey)||s.ctrlKey&&s.altKey){if(s.char&&1<s.char.length)return s.char;if(s.which)return String.fromCharCode(s.which)}return null;case"compositionend":return es&&s.locale!=="ko"?null:s.data;default:return null}}var nS={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function y_(n){var s=n&&n.nodeName&&n.nodeName.toLowerCase();return s==="input"?!!nS[n.type]:s==="textarea"}function v_(n,s,a,l){nr?Ki?Ki.push(l):Ki=[l]:nr=l,s=wh(s,"onChange"),0<s.length&&(a=new Wi("onChange","change",null,a,l),n.push({event:a,listeners:s}))}var ql=null,Hl=null;function iS(n){t1(n,0)}function ku(n){var s=Gn(n);if(aa(s))return n}function b_(n,s){if(n==="change")return s}var T_=!1;if(ai){var ff;if(ai){var mf="oninput"in document;if(!mf){var w_=document.createElement("div");w_.setAttribute("oninput","return;"),mf=typeof w_.oninput=="function"}ff=mf}else ff=!1;T_=ff&&(!document.documentMode||9<document.documentMode)}function E_(){ql&&(ql.detachEvent("onpropertychange",S_),Hl=ql=null)}function S_(n){if(n.propertyName==="value"&&ku(Hl)){var s=[];v_(s,Hl,n,ri(n)),ir(iS,s)}}function sS(n,s,a){n==="focusin"?(E_(),ql=s,Hl=a,ql.attachEvent("onpropertychange",S_)):n==="focusout"&&E_()}function rS(n){if(n==="selectionchange"||n==="keyup"||n==="keydown")return ku(Hl)}function aS(n,s){if(n==="click")return ku(s)}function oS(n,s){if(n==="input"||n==="change")return ku(s)}function lS(n,s){return n===s&&(n!==0||1/n===1/s)||n!==n&&s!==s}var Qn=typeof Object.is=="function"?Object.is:lS;function Fl(n,s){if(Qn(n,s))return!0;if(typeof n!="object"||n===null||typeof s!="object"||s===null)return!1;var a=Object.keys(n),l=Object.keys(s);if(a.length!==l.length)return!1;for(l=0;l<a.length;l++){var d=a[l];if(!Xt.call(s,d)||!Qn(n[d],s[d]))return!1}return!0}function A_(n){for(;n&&n.firstChild;)n=n.firstChild;return n}function I_(n,s){var a=A_(n);n=0;for(var l;a;){if(a.nodeType===3){if(l=n+a.textContent.length,n<=s&&l>=s)return{node:a,offset:s-n};n=l}e:{for(;a;){if(a.nextSibling){a=a.nextSibling;break e}a=a.parentNode}a=void 0}a=A_(a)}}function C_(n,s){return n&&s?n===s?!0:n&&n.nodeType===3?!1:s&&s.nodeType===3?C_(n,s.parentNode):"contains"in n?n.contains(s):n.compareDocumentPosition?!!(n.compareDocumentPosition(s)&16):!1:!1}function N_(n){n=n!=null&&n.ownerDocument!=null&&n.ownerDocument.defaultView!=null?n.ownerDocument.defaultView:window;for(var s=Qi(n.document);s instanceof n.HTMLIFrameElement;){try{var a=typeof s.contentWindow.location.href=="string"}catch{a=!1}if(a)n=s.contentWindow;else break;s=Qi(n.document)}return s}function pf(n){var s=n&&n.nodeName&&n.nodeName.toLowerCase();return s&&(s==="input"&&(n.type==="text"||n.type==="search"||n.type==="tel"||n.type==="url"||n.type==="password")||s==="textarea"||n.contentEditable==="true")}var cS=ai&&"documentMode"in document&&11>=document.documentMode,po=null,gf=null,$l=null,_f=!1;function x_(n,s,a){var l=a.window===a?a.document:a.nodeType===9?a:a.ownerDocument;_f||po==null||po!==Qi(l)||(l=po,"selectionStart"in l&&pf(l)?l={start:l.selectionStart,end:l.selectionEnd}:(l=(l.ownerDocument&&l.ownerDocument.defaultView||window).getSelection(),l={anchorNode:l.anchorNode,anchorOffset:l.anchorOffset,focusNode:l.focusNode,focusOffset:l.focusOffset}),$l&&Fl($l,l)||($l=l,l=wh(gf,"onSelect"),0<l.length&&(s=new Wi("onSelect","select",null,s,a),n.push({event:s,listeners:l}),s.target=po)))}function pa(n,s){var a={};return a[n.toLowerCase()]=s.toLowerCase(),a["Webkit"+n]="webkit"+s,a["Moz"+n]="moz"+s,a}var go={animationend:pa("Animation","AnimationEnd"),animationiteration:pa("Animation","AnimationIteration"),animationstart:pa("Animation","AnimationStart"),transitionrun:pa("Transition","TransitionRun"),transitionstart:pa("Transition","TransitionStart"),transitioncancel:pa("Transition","TransitionCancel"),transitionend:pa("Transition","TransitionEnd")},yf={},R_={};ai&&(R_=document.createElement("div").style,"AnimationEvent"in window||(delete go.animationend.animation,delete go.animationiteration.animation,delete go.animationstart.animation),"TransitionEvent"in window||delete go.transitionend.transition);function ga(n){if(yf[n])return yf[n];if(!go[n])return n;var s=go[n],a;for(a in s)if(s.hasOwnProperty(a)&&a in R_)return yf[n]=s[a];return n}var D_=ga("animationend"),M_=ga("animationiteration"),O_=ga("animationstart"),uS=ga("transitionrun"),hS=ga("transitionstart"),dS=ga("transitioncancel"),k_=ga("transitionend"),j_=new Map,vf="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");vf.push("scrollEnd");function xi(n,s){j_.set(n,s),Gi(s,[n])}var ju=typeof reportError=="function"?reportError:function(n){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var s=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof n=="object"&&n!==null&&typeof n.message=="string"?String(n.message):String(n),error:n});if(!window.dispatchEvent(s))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",n);return}console.error(n)},li=[],_o=0,bf=0;function Lu(){for(var n=_o,s=bf=_o=0;s<n;){var a=li[s];li[s++]=null;var l=li[s];li[s++]=null;var d=li[s];li[s++]=null;var m=li[s];if(li[s++]=null,l!==null&&d!==null){var v=l.pending;v===null?d.next=d:(d.next=v.next,v.next=d),l.pending=d}m!==0&&L_(a,d,m)}}function Pu(n,s,a,l){li[_o++]=n,li[_o++]=s,li[_o++]=a,li[_o++]=l,bf|=l,n.lanes|=l,n=n.alternate,n!==null&&(n.lanes|=l)}function Tf(n,s,a,l){return Pu(n,s,a,l),Vu(n)}function _a(n,s){return Pu(n,null,null,s),Vu(n)}function L_(n,s,a){n.lanes|=a;var l=n.alternate;l!==null&&(l.lanes|=a);for(var d=!1,m=n.return;m!==null;)m.childLanes|=a,l=m.alternate,l!==null&&(l.childLanes|=a),m.tag===22&&(n=m.stateNode,n===null||n._visibility&1||(d=!0)),n=m,m=m.return;return n.tag===3?(m=n.stateNode,d&&s!==null&&(d=31-qt(a),n=m.hiddenUpdates,l=n[d],l===null?n[d]=[s]:l.push(s),s.lane=a|536870912),m):null}function Vu(n){if(50<fc)throw fc=0,Rm=null,Error(r(185));for(var s=n.return;s!==null;)n=s,s=n.return;return n.tag===3?n.stateNode:null}var yo={};function fS(n,s,a,l){this.tag=n,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=s,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=l,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Kn(n,s,a,l){return new fS(n,s,a,l)}function wf(n){return n=n.prototype,!(!n||!n.isReactComponent)}function As(n,s){var a=n.alternate;return a===null?(a=Kn(n.tag,s,n.key,n.mode),a.elementType=n.elementType,a.type=n.type,a.stateNode=n.stateNode,a.alternate=n,n.alternate=a):(a.pendingProps=s,a.type=n.type,a.flags=0,a.subtreeFlags=0,a.deletions=null),a.flags=n.flags&65011712,a.childLanes=n.childLanes,a.lanes=n.lanes,a.child=n.child,a.memoizedProps=n.memoizedProps,a.memoizedState=n.memoizedState,a.updateQueue=n.updateQueue,s=n.dependencies,a.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext},a.sibling=n.sibling,a.index=n.index,a.ref=n.ref,a.refCleanup=n.refCleanup,a}function P_(n,s){n.flags&=65011714;var a=n.alternate;return a===null?(n.childLanes=0,n.lanes=s,n.child=null,n.subtreeFlags=0,n.memoizedProps=null,n.memoizedState=null,n.updateQueue=null,n.dependencies=null,n.stateNode=null):(n.childLanes=a.childLanes,n.lanes=a.lanes,n.child=a.child,n.subtreeFlags=0,n.deletions=null,n.memoizedProps=a.memoizedProps,n.memoizedState=a.memoizedState,n.updateQueue=a.updateQueue,n.type=a.type,s=a.dependencies,n.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext}),n}function Bu(n,s,a,l,d,m){var v=0;if(l=n,typeof n=="function")wf(n)&&(v=1);else if(typeof n=="string")v=yA(n,a,me.current)?26:n==="html"||n==="head"||n==="body"?27:5;else e:switch(n){case S:return n=Kn(31,a,s,d),n.elementType=S,n.lanes=m,n;case z:return ya(a.children,d,m,s);case j:v=8,d|=24;break;case Y:return n=Kn(12,a,s,d|2),n.elementType=Y,n.lanes=m,n;case B:return n=Kn(13,a,s,d),n.elementType=B,n.lanes=m,n;case ie:return n=Kn(19,a,s,d),n.elementType=ie,n.lanes=m,n;default:if(typeof n=="object"&&n!==null)switch(n.$$typeof){case le:v=10;break e;case F:v=9;break e;case K:v=11;break e;case A:v=14;break e;case w:v=16,l=null;break e}v=29,a=Error(r(130,n===null?"null":typeof n,"")),l=null}return s=Kn(v,a,s,d),s.elementType=n,s.type=l,s.lanes=m,s}function ya(n,s,a,l){return n=Kn(7,n,l,s),n.lanes=a,n}function Ef(n,s,a){return n=Kn(6,n,null,s),n.lanes=a,n}function V_(n){var s=Kn(18,null,null,0);return s.stateNode=n,s}function Sf(n,s,a){return s=Kn(4,n.children!==null?n.children:[],n.key,s),s.lanes=a,s.stateNode={containerInfo:n.containerInfo,pendingChildren:null,implementation:n.implementation},s}var B_=new WeakMap;function ci(n,s){if(typeof n=="object"&&n!==null){var a=B_.get(n);return a!==void 0?a:(s={value:n,source:s,stack:wl(s)},B_.set(n,s),s)}return{value:n,source:s,stack:wl(s)}}var vo=[],bo=0,Uu=null,Gl=0,ui=[],hi=0,or=null,ts=1,ns="";function Is(n,s){vo[bo++]=Gl,vo[bo++]=Uu,Uu=n,Gl=s}function U_(n,s,a){ui[hi++]=ts,ui[hi++]=ns,ui[hi++]=or,or=n;var l=ts;n=ns;var d=32-qt(l)-1;l&=~(1<<d),a+=1;var m=32-qt(s)+d;if(30<m){var v=d-d%5;m=(l&(1<<v)-1).toString(32),l>>=v,d-=v,ts=1<<32-qt(s)+d|a<<d|l,ns=m+n}else ts=1<<m|a<<d|l,ns=n}function Af(n){n.return!==null&&(Is(n,1),U_(n,1,0))}function If(n){for(;n===Uu;)Uu=vo[--bo],vo[bo]=null,Gl=vo[--bo],vo[bo]=null;for(;n===or;)or=ui[--hi],ui[hi]=null,ns=ui[--hi],ui[hi]=null,ts=ui[--hi],ui[hi]=null}function z_(n,s){ui[hi++]=ts,ui[hi++]=ns,ui[hi++]=or,ts=s.id,ns=s.overflow,or=n}var vn=null,It=null,it=!1,lr=null,di=!1,Cf=Error(r(519));function cr(n){var s=Error(r(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw Yl(ci(s,n)),Cf}function q_(n){var s=n.stateNode,a=n.type,l=n.memoizedProps;switch(s[Jt]=n,s[dn]=l,a){case"dialog":Ke("cancel",s),Ke("close",s);break;case"iframe":case"object":case"embed":Ke("load",s);break;case"video":case"audio":for(a=0;a<pc.length;a++)Ke(pc[a],s);break;case"source":Ke("error",s);break;case"img":case"image":case"link":Ke("error",s),Ke("load",s);break;case"details":Ke("toggle",s);break;case"input":Ke("invalid",s),vu(s,l.value,l.defaultValue,l.checked,l.defaultChecked,l.type,l.name,!0);break;case"select":Ke("invalid",s);break;case"textarea":Ke("invalid",s),er(s,l.value,l.defaultValue,l.children)}a=l.children,typeof a!="string"&&typeof a!="number"&&typeof a!="bigint"||s.textContent===""+a||l.suppressHydrationWarning===!0||r1(s.textContent,a)?(l.popover!=null&&(Ke("beforetoggle",s),Ke("toggle",s)),l.onScroll!=null&&Ke("scroll",s),l.onScrollEnd!=null&&Ke("scrollend",s),l.onClick!=null&&(s.onclick=Si),s=!0):s=!1,s||cr(n,!0)}function H_(n){for(vn=n.return;vn;)switch(vn.tag){case 5:case 31:case 13:di=!1;return;case 27:case 3:di=!0;return;default:vn=vn.return}}function To(n){if(n!==vn)return!1;if(!it)return H_(n),it=!0,!1;var s=n.tag,a;if((a=s!==3&&s!==27)&&((a=s===5)&&(a=n.type,a=!(a!=="form"&&a!=="button")||$m(n.type,n.memoizedProps)),a=!a),a&&It&&cr(n),H_(n),s===13){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(r(317));It=m1(n)}else if(s===31){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(r(317));It=m1(n)}else s===27?(s=It,Er(n.type)?(n=Xm,Xm=null,It=n):It=s):It=vn?mi(n.stateNode.nextSibling):null;return!0}function va(){It=vn=null,it=!1}function Nf(){var n=lr;return n!==null&&(zn===null?zn=n:zn.push.apply(zn,n),lr=null),n}function Yl(n){lr===null?lr=[n]:lr.push(n)}var xf=D(null),ba=null,Cs=null;function ur(n,s,a){se(xf,s._currentValue),s._currentValue=a}function Ns(n){n._currentValue=xf.current,G(xf)}function Rf(n,s,a){for(;n!==null;){var l=n.alternate;if((n.childLanes&s)!==s?(n.childLanes|=s,l!==null&&(l.childLanes|=s)):l!==null&&(l.childLanes&s)!==s&&(l.childLanes|=s),n===a)break;n=n.return}}function Df(n,s,a,l){var d=n.child;for(d!==null&&(d.return=n);d!==null;){var m=d.dependencies;if(m!==null){var v=d.child;m=m.firstContext;e:for(;m!==null;){var C=m;m=d;for(var P=0;P<s.length;P++)if(C.context===s[P]){m.lanes|=a,C=m.alternate,C!==null&&(C.lanes|=a),Rf(m.return,a,n),l||(v=null);break e}m=C.next}}else if(d.tag===18){if(v=d.return,v===null)throw Error(r(341));v.lanes|=a,m=v.alternate,m!==null&&(m.lanes|=a),Rf(v,a,n),v=null}else v=d.child;if(v!==null)v.return=d;else for(v=d;v!==null;){if(v===n){v=null;break}if(d=v.sibling,d!==null){d.return=v.return,v=d;break}v=v.return}d=v}}function wo(n,s,a,l){n=null;for(var d=s,m=!1;d!==null;){if(!m){if((d.flags&524288)!==0)m=!0;else if((d.flags&262144)!==0)break}if(d.tag===10){var v=d.alternate;if(v===null)throw Error(r(387));if(v=v.memoizedProps,v!==null){var C=d.type;Qn(d.pendingProps.value,v.value)||(n!==null?n.push(C):n=[C])}}else if(d===we.current){if(v=d.alternate,v===null)throw Error(r(387));v.memoizedState.memoizedState!==d.memoizedState.memoizedState&&(n!==null?n.push(bc):n=[bc])}d=d.return}n!==null&&Df(s,n,a,l),s.flags|=262144}function zu(n){for(n=n.firstContext;n!==null;){if(!Qn(n.context._currentValue,n.memoizedValue))return!0;n=n.next}return!1}function Ta(n){ba=n,Cs=null,n=n.dependencies,n!==null&&(n.firstContext=null)}function bn(n){return F_(ba,n)}function qu(n,s){return ba===null&&Ta(n),F_(n,s)}function F_(n,s){var a=s._currentValue;if(s={context:s,memoizedValue:a,next:null},Cs===null){if(n===null)throw Error(r(308));Cs=s,n.dependencies={lanes:0,firstContext:s},n.flags|=524288}else Cs=Cs.next=s;return a}var mS=typeof AbortController<"u"?AbortController:function(){var n=[],s=this.signal={aborted:!1,addEventListener:function(a,l){n.push(l)}};this.abort=function(){s.aborted=!0,n.forEach(function(a){return a()})}},pS=i.unstable_scheduleCallback,gS=i.unstable_NormalPriority,tn={$$typeof:le,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Mf(){return{controller:new mS,data:new Map,refCount:0}}function Ql(n){n.refCount--,n.refCount===0&&pS(gS,function(){n.controller.abort()})}var Kl=null,Of=0,Eo=0,So=null;function _S(n,s){if(Kl===null){var a=Kl=[];Of=0,Eo=Lm(),So={status:"pending",value:void 0,then:function(l){a.push(l)}}}return Of++,s.then($_,$_),s}function $_(){if(--Of===0&&Kl!==null){So!==null&&(So.status="fulfilled");var n=Kl;Kl=null,Eo=0,So=null;for(var s=0;s<n.length;s++)(0,n[s])()}}function yS(n,s){var a=[],l={status:"pending",value:null,reason:null,then:function(d){a.push(d)}};return n.then(function(){l.status="fulfilled",l.value=s;for(var d=0;d<a.length;d++)(0,a[d])(s)},function(d){for(l.status="rejected",l.reason=d,d=0;d<a.length;d++)(0,a[d])(void 0)}),l}var G_=V.S;V.S=function(n,s){xv=Mn(),typeof s=="object"&&s!==null&&typeof s.then=="function"&&_S(n,s),G_!==null&&G_(n,s)};var wa=D(null);function kf(){var n=wa.current;return n!==null?n:wt.pooledCache}function Hu(n,s){s===null?se(wa,wa.current):se(wa,s.pool)}function Y_(){var n=kf();return n===null?null:{parent:tn._currentValue,pool:n}}var Ao=Error(r(460)),jf=Error(r(474)),Fu=Error(r(542)),$u={then:function(){}};function Q_(n){return n=n.status,n==="fulfilled"||n==="rejected"}function K_(n,s,a){switch(a=n[a],a===void 0?n.push(s):a!==s&&(s.then(Si,Si),s=a),s.status){case"fulfilled":return s.value;case"rejected":throw n=s.reason,W_(n),n;default:if(typeof s.status=="string")s.then(Si,Si);else{if(n=wt,n!==null&&100<n.shellSuspendCounter)throw Error(r(482));n=s,n.status="pending",n.then(function(l){if(s.status==="pending"){var d=s;d.status="fulfilled",d.value=l}},function(l){if(s.status==="pending"){var d=s;d.status="rejected",d.reason=l}})}switch(s.status){case"fulfilled":return s.value;case"rejected":throw n=s.reason,W_(n),n}throw Sa=s,Ao}}function Ea(n){try{var s=n._init;return s(n._payload)}catch(a){throw a!==null&&typeof a=="object"&&typeof a.then=="function"?(Sa=a,Ao):a}}var Sa=null;function X_(){if(Sa===null)throw Error(r(459));var n=Sa;return Sa=null,n}function W_(n){if(n===Ao||n===Fu)throw Error(r(483))}var Io=null,Xl=0;function Gu(n){var s=Xl;return Xl+=1,Io===null&&(Io=[]),K_(Io,n,s)}function Wl(n,s){s=s.props.ref,n.ref=s!==void 0?s:null}function Yu(n,s){throw s.$$typeof===I?Error(r(525)):(n=Object.prototype.toString.call(s),Error(r(31,n==="[object Object]"?"object with keys {"+Object.keys(s).join(", ")+"}":n)))}function J_(n){function s($,U){if(n){var J=$.deletions;J===null?($.deletions=[U],$.flags|=16):J.push(U)}}function a($,U){if(!n)return null;for(;U!==null;)s($,U),U=U.sibling;return null}function l($){for(var U=new Map;$!==null;)$.key!==null?U.set($.key,$):U.set($.index,$),$=$.sibling;return U}function d($,U){return $=As($,U),$.index=0,$.sibling=null,$}function m($,U,J){return $.index=J,n?(J=$.alternate,J!==null?(J=J.index,J<U?($.flags|=67108866,U):J):($.flags|=67108866,U)):($.flags|=1048576,U)}function v($){return n&&$.alternate===null&&($.flags|=67108866),$}function C($,U,J,ue){return U===null||U.tag!==6?(U=Ef(J,$.mode,ue),U.return=$,U):(U=d(U,J),U.return=$,U)}function P($,U,J,ue){var De=J.type;return De===z?ce($,U,J.props.children,ue,J.key):U!==null&&(U.elementType===De||typeof De=="object"&&De!==null&&De.$$typeof===w&&Ea(De)===U.type)?(U=d(U,J.props),Wl(U,J),U.return=$,U):(U=Bu(J.type,J.key,J.props,null,$.mode,ue),Wl(U,J),U.return=$,U)}function Z($,U,J,ue){return U===null||U.tag!==4||U.stateNode.containerInfo!==J.containerInfo||U.stateNode.implementation!==J.implementation?(U=Sf(J,$.mode,ue),U.return=$,U):(U=d(U,J.children||[]),U.return=$,U)}function ce($,U,J,ue,De){return U===null||U.tag!==7?(U=ya(J,$.mode,ue,De),U.return=$,U):(U=d(U,J),U.return=$,U)}function de($,U,J){if(typeof U=="string"&&U!==""||typeof U=="number"||typeof U=="bigint")return U=Ef(""+U,$.mode,J),U.return=$,U;if(typeof U=="object"&&U!==null){switch(U.$$typeof){case O:return J=Bu(U.type,U.key,U.props,null,$.mode,J),Wl(J,U),J.return=$,J;case L:return U=Sf(U,$.mode,J),U.return=$,U;case w:return U=Ea(U),de($,U,J)}if(oe(U)||k(U))return U=ya(U,$.mode,J,null),U.return=$,U;if(typeof U.then=="function")return de($,Gu(U),J);if(U.$$typeof===le)return de($,qu($,U),J);Yu($,U)}return null}function te($,U,J,ue){var De=U!==null?U.key:null;if(typeof J=="string"&&J!==""||typeof J=="number"||typeof J=="bigint")return De!==null?null:C($,U,""+J,ue);if(typeof J=="object"&&J!==null){switch(J.$$typeof){case O:return J.key===De?P($,U,J,ue):null;case L:return J.key===De?Z($,U,J,ue):null;case w:return J=Ea(J),te($,U,J,ue)}if(oe(J)||k(J))return De!==null?null:ce($,U,J,ue,null);if(typeof J.then=="function")return te($,U,Gu(J),ue);if(J.$$typeof===le)return te($,U,qu($,J),ue);Yu($,J)}return null}function ae($,U,J,ue,De){if(typeof ue=="string"&&ue!==""||typeof ue=="number"||typeof ue=="bigint")return $=$.get(J)||null,C(U,$,""+ue,De);if(typeof ue=="object"&&ue!==null){switch(ue.$$typeof){case O:return $=$.get(ue.key===null?J:ue.key)||null,P(U,$,ue,De);case L:return $=$.get(ue.key===null?J:ue.key)||null,Z(U,$,ue,De);case w:return ue=Ea(ue),ae($,U,J,ue,De)}if(oe(ue)||k(ue))return $=$.get(J)||null,ce(U,$,ue,De,null);if(typeof ue.then=="function")return ae($,U,J,Gu(ue),De);if(ue.$$typeof===le)return ae($,U,J,qu(U,ue),De);Yu(U,ue)}return null}function Ce($,U,J,ue){for(var De=null,at=null,xe=U,$e=U=0,Je=null;xe!==null&&$e<J.length;$e++){xe.index>$e?(Je=xe,xe=null):Je=xe.sibling;var ot=te($,xe,J[$e],ue);if(ot===null){xe===null&&(xe=Je);break}n&&xe&&ot.alternate===null&&s($,xe),U=m(ot,U,$e),at===null?De=ot:at.sibling=ot,at=ot,xe=Je}if($e===J.length)return a($,xe),it&&Is($,$e),De;if(xe===null){for(;$e<J.length;$e++)xe=de($,J[$e],ue),xe!==null&&(U=m(xe,U,$e),at===null?De=xe:at.sibling=xe,at=xe);return it&&Is($,$e),De}for(xe=l(xe);$e<J.length;$e++)Je=ae(xe,$,$e,J[$e],ue),Je!==null&&(n&&Je.alternate!==null&&xe.delete(Je.key===null?$e:Je.key),U=m(Je,U,$e),at===null?De=Je:at.sibling=Je,at=Je);return n&&xe.forEach(function(Nr){return s($,Nr)}),it&&Is($,$e),De}function ke($,U,J,ue){if(J==null)throw Error(r(151));for(var De=null,at=null,xe=U,$e=U=0,Je=null,ot=J.next();xe!==null&&!ot.done;$e++,ot=J.next()){xe.index>$e?(Je=xe,xe=null):Je=xe.sibling;var Nr=te($,xe,ot.value,ue);if(Nr===null){xe===null&&(xe=Je);break}n&&xe&&Nr.alternate===null&&s($,xe),U=m(Nr,U,$e),at===null?De=Nr:at.sibling=Nr,at=Nr,xe=Je}if(ot.done)return a($,xe),it&&Is($,$e),De;if(xe===null){for(;!ot.done;$e++,ot=J.next())ot=de($,ot.value,ue),ot!==null&&(U=m(ot,U,$e),at===null?De=ot:at.sibling=ot,at=ot);return it&&Is($,$e),De}for(xe=l(xe);!ot.done;$e++,ot=J.next())ot=ae(xe,$,$e,ot.value,ue),ot!==null&&(n&&ot.alternate!==null&&xe.delete(ot.key===null?$e:ot.key),U=m(ot,U,$e),at===null?De=ot:at.sibling=ot,at=ot);return n&&xe.forEach(function(xA){return s($,xA)}),it&&Is($,$e),De}function Tt($,U,J,ue){if(typeof J=="object"&&J!==null&&J.type===z&&J.key===null&&(J=J.props.children),typeof J=="object"&&J!==null){switch(J.$$typeof){case O:e:{for(var De=J.key;U!==null;){if(U.key===De){if(De=J.type,De===z){if(U.tag===7){a($,U.sibling),ue=d(U,J.props.children),ue.return=$,$=ue;break e}}else if(U.elementType===De||typeof De=="object"&&De!==null&&De.$$typeof===w&&Ea(De)===U.type){a($,U.sibling),ue=d(U,J.props),Wl(ue,J),ue.return=$,$=ue;break e}a($,U);break}else s($,U);U=U.sibling}J.type===z?(ue=ya(J.props.children,$.mode,ue,J.key),ue.return=$,$=ue):(ue=Bu(J.type,J.key,J.props,null,$.mode,ue),Wl(ue,J),ue.return=$,$=ue)}return v($);case L:e:{for(De=J.key;U!==null;){if(U.key===De)if(U.tag===4&&U.stateNode.containerInfo===J.containerInfo&&U.stateNode.implementation===J.implementation){a($,U.sibling),ue=d(U,J.children||[]),ue.return=$,$=ue;break e}else{a($,U);break}else s($,U);U=U.sibling}ue=Sf(J,$.mode,ue),ue.return=$,$=ue}return v($);case w:return J=Ea(J),Tt($,U,J,ue)}if(oe(J))return Ce($,U,J,ue);if(k(J)){if(De=k(J),typeof De!="function")throw Error(r(150));return J=De.call(J),ke($,U,J,ue)}if(typeof J.then=="function")return Tt($,U,Gu(J),ue);if(J.$$typeof===le)return Tt($,U,qu($,J),ue);Yu($,J)}return typeof J=="string"&&J!==""||typeof J=="number"||typeof J=="bigint"?(J=""+J,U!==null&&U.tag===6?(a($,U.sibling),ue=d(U,J),ue.return=$,$=ue):(a($,U),ue=Ef(J,$.mode,ue),ue.return=$,$=ue),v($)):a($,U)}return function($,U,J,ue){try{Xl=0;var De=Tt($,U,J,ue);return Io=null,De}catch(xe){if(xe===Ao||xe===Fu)throw xe;var at=Kn(29,xe,null,$.mode);return at.lanes=ue,at.return=$,at}finally{}}}var Aa=J_(!0),Z_=J_(!1),hr=!1;function Lf(n){n.updateQueue={baseState:n.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Pf(n,s){n=n.updateQueue,s.updateQueue===n&&(s.updateQueue={baseState:n.baseState,firstBaseUpdate:n.firstBaseUpdate,lastBaseUpdate:n.lastBaseUpdate,shared:n.shared,callbacks:null})}function dr(n){return{lane:n,tag:0,payload:null,callback:null,next:null}}function fr(n,s,a){var l=n.updateQueue;if(l===null)return null;if(l=l.shared,(ht&2)!==0){var d=l.pending;return d===null?s.next=s:(s.next=d.next,d.next=s),l.pending=s,s=Vu(n),L_(n,null,a),s}return Pu(n,l,s,a),Vu(n)}function Jl(n,s,a){if(s=s.updateQueue,s!==null&&(s=s.shared,(a&4194048)!==0)){var l=s.lanes;l&=n.pendingLanes,a|=l,s.lanes=a,Al(n,a)}}function Vf(n,s){var a=n.updateQueue,l=n.alternate;if(l!==null&&(l=l.updateQueue,a===l)){var d=null,m=null;if(a=a.firstBaseUpdate,a!==null){do{var v={lane:a.lane,tag:a.tag,payload:a.payload,callback:null,next:null};m===null?d=m=v:m=m.next=v,a=a.next}while(a!==null);m===null?d=m=s:m=m.next=s}else d=m=s;a={baseState:l.baseState,firstBaseUpdate:d,lastBaseUpdate:m,shared:l.shared,callbacks:l.callbacks},n.updateQueue=a;return}n=a.lastBaseUpdate,n===null?a.firstBaseUpdate=s:n.next=s,a.lastBaseUpdate=s}var Bf=!1;function Zl(){if(Bf){var n=So;if(n!==null)throw n}}function ec(n,s,a,l){Bf=!1;var d=n.updateQueue;hr=!1;var m=d.firstBaseUpdate,v=d.lastBaseUpdate,C=d.shared.pending;if(C!==null){d.shared.pending=null;var P=C,Z=P.next;P.next=null,v===null?m=Z:v.next=Z,v=P;var ce=n.alternate;ce!==null&&(ce=ce.updateQueue,C=ce.lastBaseUpdate,C!==v&&(C===null?ce.firstBaseUpdate=Z:C.next=Z,ce.lastBaseUpdate=P))}if(m!==null){var de=d.baseState;v=0,ce=Z=P=null,C=m;do{var te=C.lane&-536870913,ae=te!==C.lane;if(ae?(We&te)===te:(l&te)===te){te!==0&&te===Eo&&(Bf=!0),ce!==null&&(ce=ce.next={lane:0,tag:C.tag,payload:C.payload,callback:null,next:null});e:{var Ce=n,ke=C;te=s;var Tt=a;switch(ke.tag){case 1:if(Ce=ke.payload,typeof Ce=="function"){de=Ce.call(Tt,de,te);break e}de=Ce;break e;case 3:Ce.flags=Ce.flags&-65537|128;case 0:if(Ce=ke.payload,te=typeof Ce=="function"?Ce.call(Tt,de,te):Ce,te==null)break e;de=E({},de,te);break e;case 2:hr=!0}}te=C.callback,te!==null&&(n.flags|=64,ae&&(n.flags|=8192),ae=d.callbacks,ae===null?d.callbacks=[te]:ae.push(te))}else ae={lane:te,tag:C.tag,payload:C.payload,callback:C.callback,next:null},ce===null?(Z=ce=ae,P=de):ce=ce.next=ae,v|=te;if(C=C.next,C===null){if(C=d.shared.pending,C===null)break;ae=C,C=ae.next,ae.next=null,d.lastBaseUpdate=ae,d.shared.pending=null}}while(!0);ce===null&&(P=de),d.baseState=P,d.firstBaseUpdate=Z,d.lastBaseUpdate=ce,m===null&&(d.shared.lanes=0),yr|=v,n.lanes=v,n.memoizedState=de}}function ey(n,s){if(typeof n!="function")throw Error(r(191,n));n.call(s)}function ty(n,s){var a=n.callbacks;if(a!==null)for(n.callbacks=null,n=0;n<a.length;n++)ey(a[n],s)}var Co=D(null),Qu=D(0);function ny(n,s){n=Ps,se(Qu,n),se(Co,s),Ps=n|s.baseLanes}function Uf(){se(Qu,Ps),se(Co,Co.current)}function zf(){Ps=Qu.current,G(Co),G(Qu)}var Xn=D(null),fi=null;function mr(n){var s=n.alternate;se(Ft,Ft.current&1),se(Xn,n),fi===null&&(s===null||Co.current!==null||s.memoizedState!==null)&&(fi=n)}function qf(n){se(Ft,Ft.current),se(Xn,n),fi===null&&(fi=n)}function iy(n){n.tag===22?(se(Ft,Ft.current),se(Xn,n),fi===null&&(fi=n)):pr()}function pr(){se(Ft,Ft.current),se(Xn,Xn.current)}function Wn(n){G(Xn),fi===n&&(fi=null),G(Ft)}var Ft=D(0);function Ku(n){for(var s=n;s!==null;){if(s.tag===13){var a=s.memoizedState;if(a!==null&&(a=a.dehydrated,a===null||Qm(a)||Km(a)))return s}else if(s.tag===19&&(s.memoizedProps.revealOrder==="forwards"||s.memoizedProps.revealOrder==="backwards"||s.memoizedProps.revealOrder==="unstable_legacy-backwards"||s.memoizedProps.revealOrder==="together")){if((s.flags&128)!==0)return s}else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===n)break;for(;s.sibling===null;){if(s.return===null||s.return===n)return null;s=s.return}s.sibling.return=s.return,s=s.sibling}return null}var xs=0,He=null,vt=null,nn=null,Xu=!1,No=!1,Ia=!1,Wu=0,tc=0,xo=null,vS=0;function Lt(){throw Error(r(321))}function Hf(n,s){if(s===null)return!1;for(var a=0;a<s.length&&a<n.length;a++)if(!Qn(n[a],s[a]))return!1;return!0}function Ff(n,s,a,l,d,m){return xs=m,He=s,s.memoizedState=null,s.updateQueue=null,s.lanes=0,V.H=n===null||n.memoizedState===null?Uy:rm,Ia=!1,m=a(l,d),Ia=!1,No&&(m=ry(s,a,l,d)),sy(n),m}function sy(n){V.H=sc;var s=vt!==null&&vt.next!==null;if(xs=0,nn=vt=He=null,Xu=!1,tc=0,xo=null,s)throw Error(r(300));n===null||sn||(n=n.dependencies,n!==null&&zu(n)&&(sn=!0))}function ry(n,s,a,l){He=n;var d=0;do{if(No&&(xo=null),tc=0,No=!1,25<=d)throw Error(r(301));if(d+=1,nn=vt=null,n.updateQueue!=null){var m=n.updateQueue;m.lastEffect=null,m.events=null,m.stores=null,m.memoCache!=null&&(m.memoCache.index=0)}V.H=zy,m=s(a,l)}while(No);return m}function bS(){var n=V.H,s=n.useState()[0];return s=typeof s.then=="function"?nc(s):s,n=n.useState()[0],(vt!==null?vt.memoizedState:null)!==n&&(He.flags|=1024),s}function $f(){var n=Wu!==0;return Wu=0,n}function Gf(n,s,a){s.updateQueue=n.updateQueue,s.flags&=-2053,n.lanes&=~a}function Yf(n){if(Xu){for(n=n.memoizedState;n!==null;){var s=n.queue;s!==null&&(s.pending=null),n=n.next}Xu=!1}xs=0,nn=vt=He=null,No=!1,tc=Wu=0,xo=null}function kn(){var n={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return nn===null?He.memoizedState=nn=n:nn=nn.next=n,nn}function $t(){if(vt===null){var n=He.alternate;n=n!==null?n.memoizedState:null}else n=vt.next;var s=nn===null?He.memoizedState:nn.next;if(s!==null)nn=s,vt=n;else{if(n===null)throw He.alternate===null?Error(r(467)):Error(r(310));vt=n,n={memoizedState:vt.memoizedState,baseState:vt.baseState,baseQueue:vt.baseQueue,queue:vt.queue,next:null},nn===null?He.memoizedState=nn=n:nn=nn.next=n}return nn}function Ju(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function nc(n){var s=tc;return tc+=1,xo===null&&(xo=[]),n=K_(xo,n,s),s=He,(nn===null?s.memoizedState:nn.next)===null&&(s=s.alternate,V.H=s===null||s.memoizedState===null?Uy:rm),n}function Zu(n){if(n!==null&&typeof n=="object"){if(typeof n.then=="function")return nc(n);if(n.$$typeof===le)return bn(n)}throw Error(r(438,String(n)))}function Qf(n){var s=null,a=He.updateQueue;if(a!==null&&(s=a.memoCache),s==null){var l=He.alternate;l!==null&&(l=l.updateQueue,l!==null&&(l=l.memoCache,l!=null&&(s={data:l.data.map(function(d){return d.slice()}),index:0})))}if(s==null&&(s={data:[],index:0}),a===null&&(a=Ju(),He.updateQueue=a),a.memoCache=s,a=s.data[s.index],a===void 0)for(a=s.data[s.index]=Array(n),l=0;l<n;l++)a[l]=M;return s.index++,a}function Rs(n,s){return typeof s=="function"?s(n):s}function eh(n){var s=$t();return Kf(s,vt,n)}function Kf(n,s,a){var l=n.queue;if(l===null)throw Error(r(311));l.lastRenderedReducer=a;var d=n.baseQueue,m=l.pending;if(m!==null){if(d!==null){var v=d.next;d.next=m.next,m.next=v}s.baseQueue=d=m,l.pending=null}if(m=n.baseState,d===null)n.memoizedState=m;else{s=d.next;var C=v=null,P=null,Z=s,ce=!1;do{var de=Z.lane&-536870913;if(de!==Z.lane?(We&de)===de:(xs&de)===de){var te=Z.revertLane;if(te===0)P!==null&&(P=P.next={lane:0,revertLane:0,gesture:null,action:Z.action,hasEagerState:Z.hasEagerState,eagerState:Z.eagerState,next:null}),de===Eo&&(ce=!0);else if((xs&te)===te){Z=Z.next,te===Eo&&(ce=!0);continue}else de={lane:0,revertLane:Z.revertLane,gesture:null,action:Z.action,hasEagerState:Z.hasEagerState,eagerState:Z.eagerState,next:null},P===null?(C=P=de,v=m):P=P.next=de,He.lanes|=te,yr|=te;de=Z.action,Ia&&a(m,de),m=Z.hasEagerState?Z.eagerState:a(m,de)}else te={lane:de,revertLane:Z.revertLane,gesture:Z.gesture,action:Z.action,hasEagerState:Z.hasEagerState,eagerState:Z.eagerState,next:null},P===null?(C=P=te,v=m):P=P.next=te,He.lanes|=de,yr|=de;Z=Z.next}while(Z!==null&&Z!==s);if(P===null?v=m:P.next=C,!Qn(m,n.memoizedState)&&(sn=!0,ce&&(a=So,a!==null)))throw a;n.memoizedState=m,n.baseState=v,n.baseQueue=P,l.lastRenderedState=m}return d===null&&(l.lanes=0),[n.memoizedState,l.dispatch]}function Xf(n){var s=$t(),a=s.queue;if(a===null)throw Error(r(311));a.lastRenderedReducer=n;var l=a.dispatch,d=a.pending,m=s.memoizedState;if(d!==null){a.pending=null;var v=d=d.next;do m=n(m,v.action),v=v.next;while(v!==d);Qn(m,s.memoizedState)||(sn=!0),s.memoizedState=m,s.baseQueue===null&&(s.baseState=m),a.lastRenderedState=m}return[m,l]}function ay(n,s,a){var l=He,d=$t(),m=it;if(m){if(a===void 0)throw Error(r(407));a=a()}else a=s();var v=!Qn((vt||d).memoizedState,a);if(v&&(d.memoizedState=a,sn=!0),d=d.queue,Zf(cy.bind(null,l,d,n),[n]),d.getSnapshot!==s||v||nn!==null&&nn.memoizedState.tag&1){if(l.flags|=2048,Ro(9,{destroy:void 0},ly.bind(null,l,d,a,s),null),wt===null)throw Error(r(349));m||(xs&127)!==0||oy(l,s,a)}return a}function oy(n,s,a){n.flags|=16384,n={getSnapshot:s,value:a},s=He.updateQueue,s===null?(s=Ju(),He.updateQueue=s,s.stores=[n]):(a=s.stores,a===null?s.stores=[n]:a.push(n))}function ly(n,s,a,l){s.value=a,s.getSnapshot=l,uy(s)&&hy(n)}function cy(n,s,a){return a(function(){uy(s)&&hy(n)})}function uy(n){var s=n.getSnapshot;n=n.value;try{var a=s();return!Qn(n,a)}catch{return!0}}function hy(n){var s=_a(n,2);s!==null&&qn(s,n,2)}function Wf(n){var s=kn();if(typeof n=="function"){var a=n;if(n=a(),Ia){ii(!0);try{a()}finally{ii(!1)}}}return s.memoizedState=s.baseState=n,s.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Rs,lastRenderedState:n},s}function dy(n,s,a,l){return n.baseState=a,Kf(n,vt,typeof l=="function"?l:Rs)}function TS(n,s,a,l,d){if(ih(n))throw Error(r(485));if(n=s.action,n!==null){var m={payload:d,action:n,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(v){m.listeners.push(v)}};V.T!==null?a(!0):m.isTransition=!1,l(m),a=s.pending,a===null?(m.next=s.pending=m,fy(s,m)):(m.next=a.next,s.pending=a.next=m)}}function fy(n,s){var a=s.action,l=s.payload,d=n.state;if(s.isTransition){var m=V.T,v={};V.T=v;try{var C=a(d,l),P=V.S;P!==null&&P(v,C),my(n,s,C)}catch(Z){Jf(n,s,Z)}finally{m!==null&&v.types!==null&&(m.types=v.types),V.T=m}}else try{m=a(d,l),my(n,s,m)}catch(Z){Jf(n,s,Z)}}function my(n,s,a){a!==null&&typeof a=="object"&&typeof a.then=="function"?a.then(function(l){py(n,s,l)},function(l){return Jf(n,s,l)}):py(n,s,a)}function py(n,s,a){s.status="fulfilled",s.value=a,gy(s),n.state=a,s=n.pending,s!==null&&(a=s.next,a===s?n.pending=null:(a=a.next,s.next=a,fy(n,a)))}function Jf(n,s,a){var l=n.pending;if(n.pending=null,l!==null){l=l.next;do s.status="rejected",s.reason=a,gy(s),s=s.next;while(s!==l)}n.action=null}function gy(n){n=n.listeners;for(var s=0;s<n.length;s++)(0,n[s])()}function _y(n,s){return s}function yy(n,s){if(it){var a=wt.formState;if(a!==null){e:{var l=He;if(it){if(It){t:{for(var d=It,m=di;d.nodeType!==8;){if(!m){d=null;break t}if(d=mi(d.nextSibling),d===null){d=null;break t}}m=d.data,d=m==="F!"||m==="F"?d:null}if(d){It=mi(d.nextSibling),l=d.data==="F!";break e}}cr(l)}l=!1}l&&(s=a[0])}}return a=kn(),a.memoizedState=a.baseState=s,l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:_y,lastRenderedState:s},a.queue=l,a=Py.bind(null,He,l),l.dispatch=a,l=Wf(!1),m=sm.bind(null,He,!1,l.queue),l=kn(),d={state:s,dispatch:null,action:n,pending:null},l.queue=d,a=TS.bind(null,He,d,m,a),d.dispatch=a,l.memoizedState=n,[s,a,!1]}function vy(n){var s=$t();return by(s,vt,n)}function by(n,s,a){if(s=Kf(n,s,_y)[0],n=eh(Rs)[0],typeof s=="object"&&s!==null&&typeof s.then=="function")try{var l=nc(s)}catch(v){throw v===Ao?Fu:v}else l=s;s=$t();var d=s.queue,m=d.dispatch;return a!==s.memoizedState&&(He.flags|=2048,Ro(9,{destroy:void 0},wS.bind(null,d,a),null)),[l,m,n]}function wS(n,s){n.action=s}function Ty(n){var s=$t(),a=vt;if(a!==null)return by(s,a,n);$t(),s=s.memoizedState,a=$t();var l=a.queue.dispatch;return a.memoizedState=n,[s,l,!1]}function Ro(n,s,a,l){return n={tag:n,create:a,deps:l,inst:s,next:null},s=He.updateQueue,s===null&&(s=Ju(),He.updateQueue=s),a=s.lastEffect,a===null?s.lastEffect=n.next=n:(l=a.next,a.next=n,n.next=l,s.lastEffect=n),n}function wy(){return $t().memoizedState}function th(n,s,a,l){var d=kn();He.flags|=n,d.memoizedState=Ro(1|s,{destroy:void 0},a,l===void 0?null:l)}function nh(n,s,a,l){var d=$t();l=l===void 0?null:l;var m=d.memoizedState.inst;vt!==null&&l!==null&&Hf(l,vt.memoizedState.deps)?d.memoizedState=Ro(s,m,a,l):(He.flags|=n,d.memoizedState=Ro(1|s,m,a,l))}function Ey(n,s){th(8390656,8,n,s)}function Zf(n,s){nh(2048,8,n,s)}function ES(n){He.flags|=4;var s=He.updateQueue;if(s===null)s=Ju(),He.updateQueue=s,s.events=[n];else{var a=s.events;a===null?s.events=[n]:a.push(n)}}function Sy(n){var s=$t().memoizedState;return ES({ref:s,nextImpl:n}),function(){if((ht&2)!==0)throw Error(r(440));return s.impl.apply(void 0,arguments)}}function Ay(n,s){return nh(4,2,n,s)}function Iy(n,s){return nh(4,4,n,s)}function Cy(n,s){if(typeof s=="function"){n=n();var a=s(n);return function(){typeof a=="function"?a():s(null)}}if(s!=null)return n=n(),s.current=n,function(){s.current=null}}function Ny(n,s,a){a=a!=null?a.concat([n]):null,nh(4,4,Cy.bind(null,s,n),a)}function em(){}function xy(n,s){var a=$t();s=s===void 0?null:s;var l=a.memoizedState;return s!==null&&Hf(s,l[1])?l[0]:(a.memoizedState=[n,s],n)}function Ry(n,s){var a=$t();s=s===void 0?null:s;var l=a.memoizedState;if(s!==null&&Hf(s,l[1]))return l[0];if(l=n(),Ia){ii(!0);try{n()}finally{ii(!1)}}return a.memoizedState=[l,s],l}function tm(n,s,a){return a===void 0||(xs&1073741824)!==0&&(We&261930)===0?n.memoizedState=s:(n.memoizedState=a,n=Dv(),He.lanes|=n,yr|=n,a)}function Dy(n,s,a,l){return Qn(a,s)?a:Co.current!==null?(n=tm(n,a,l),Qn(n,s)||(sn=!0),n):(xs&42)===0||(xs&1073741824)!==0&&(We&261930)===0?(sn=!0,n.memoizedState=a):(n=Dv(),He.lanes|=n,yr|=n,s)}function My(n,s,a,l,d){var m=X.p;X.p=m!==0&&8>m?m:8;var v=V.T,C={};V.T=C,sm(n,!1,s,a);try{var P=d(),Z=V.S;if(Z!==null&&Z(C,P),P!==null&&typeof P=="object"&&typeof P.then=="function"){var ce=yS(P,l);ic(n,s,ce,ei(n))}else ic(n,s,l,ei(n))}catch(de){ic(n,s,{then:function(){},status:"rejected",reason:de},ei())}finally{X.p=m,v!==null&&C.types!==null&&(v.types=C.types),V.T=v}}function SS(){}function nm(n,s,a,l){if(n.tag!==5)throw Error(r(476));var d=Oy(n).queue;My(n,d,s,ne,a===null?SS:function(){return ky(n),a(l)})}function Oy(n){var s=n.memoizedState;if(s!==null)return s;s={memoizedState:ne,baseState:ne,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Rs,lastRenderedState:ne},next:null};var a={};return s.next={memoizedState:a,baseState:a,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Rs,lastRenderedState:a},next:null},n.memoizedState=s,n=n.alternate,n!==null&&(n.memoizedState=s),s}function ky(n){var s=Oy(n);s.next===null&&(s=n.alternate.memoizedState),ic(n,s.next.queue,{},ei())}function im(){return bn(bc)}function jy(){return $t().memoizedState}function Ly(){return $t().memoizedState}function AS(n){for(var s=n.return;s!==null;){switch(s.tag){case 24:case 3:var a=ei();n=dr(a);var l=fr(s,n,a);l!==null&&(qn(l,s,a),Jl(l,s,a)),s={cache:Mf()},n.payload=s;return}s=s.return}}function IS(n,s,a){var l=ei();a={lane:l,revertLane:0,gesture:null,action:a,hasEagerState:!1,eagerState:null,next:null},ih(n)?Vy(s,a):(a=Tf(n,s,a,l),a!==null&&(qn(a,n,l),By(a,s,l)))}function Py(n,s,a){var l=ei();ic(n,s,a,l)}function ic(n,s,a,l){var d={lane:l,revertLane:0,gesture:null,action:a,hasEagerState:!1,eagerState:null,next:null};if(ih(n))Vy(s,d);else{var m=n.alternate;if(n.lanes===0&&(m===null||m.lanes===0)&&(m=s.lastRenderedReducer,m!==null))try{var v=s.lastRenderedState,C=m(v,a);if(d.hasEagerState=!0,d.eagerState=C,Qn(C,v))return Pu(n,s,d,0),wt===null&&Lu(),!1}catch{}finally{}if(a=Tf(n,s,d,l),a!==null)return qn(a,n,l),By(a,s,l),!0}return!1}function sm(n,s,a,l){if(l={lane:2,revertLane:Lm(),gesture:null,action:l,hasEagerState:!1,eagerState:null,next:null},ih(n)){if(s)throw Error(r(479))}else s=Tf(n,a,l,2),s!==null&&qn(s,n,2)}function ih(n){var s=n.alternate;return n===He||s!==null&&s===He}function Vy(n,s){No=Xu=!0;var a=n.pending;a===null?s.next=s:(s.next=a.next,a.next=s),n.pending=s}function By(n,s,a){if((a&4194048)!==0){var l=s.lanes;l&=n.pendingLanes,a|=l,s.lanes=a,Al(n,a)}}var sc={readContext:bn,use:Zu,useCallback:Lt,useContext:Lt,useEffect:Lt,useImperativeHandle:Lt,useLayoutEffect:Lt,useInsertionEffect:Lt,useMemo:Lt,useReducer:Lt,useRef:Lt,useState:Lt,useDebugValue:Lt,useDeferredValue:Lt,useTransition:Lt,useSyncExternalStore:Lt,useId:Lt,useHostTransitionStatus:Lt,useFormState:Lt,useActionState:Lt,useOptimistic:Lt,useMemoCache:Lt,useCacheRefresh:Lt};sc.useEffectEvent=Lt;var Uy={readContext:bn,use:Zu,useCallback:function(n,s){return kn().memoizedState=[n,s===void 0?null:s],n},useContext:bn,useEffect:Ey,useImperativeHandle:function(n,s,a){a=a!=null?a.concat([n]):null,th(4194308,4,Cy.bind(null,s,n),a)},useLayoutEffect:function(n,s){return th(4194308,4,n,s)},useInsertionEffect:function(n,s){th(4,2,n,s)},useMemo:function(n,s){var a=kn();s=s===void 0?null:s;var l=n();if(Ia){ii(!0);try{n()}finally{ii(!1)}}return a.memoizedState=[l,s],l},useReducer:function(n,s,a){var l=kn();if(a!==void 0){var d=a(s);if(Ia){ii(!0);try{a(s)}finally{ii(!1)}}}else d=s;return l.memoizedState=l.baseState=d,n={pending:null,lanes:0,dispatch:null,lastRenderedReducer:n,lastRenderedState:d},l.queue=n,n=n.dispatch=IS.bind(null,He,n),[l.memoizedState,n]},useRef:function(n){var s=kn();return n={current:n},s.memoizedState=n},useState:function(n){n=Wf(n);var s=n.queue,a=Py.bind(null,He,s);return s.dispatch=a,[n.memoizedState,a]},useDebugValue:em,useDeferredValue:function(n,s){var a=kn();return tm(a,n,s)},useTransition:function(){var n=Wf(!1);return n=My.bind(null,He,n.queue,!0,!1),kn().memoizedState=n,[!1,n]},useSyncExternalStore:function(n,s,a){var l=He,d=kn();if(it){if(a===void 0)throw Error(r(407));a=a()}else{if(a=s(),wt===null)throw Error(r(349));(We&127)!==0||oy(l,s,a)}d.memoizedState=a;var m={value:a,getSnapshot:s};return d.queue=m,Ey(cy.bind(null,l,m,n),[n]),l.flags|=2048,Ro(9,{destroy:void 0},ly.bind(null,l,m,a,s),null),a},useId:function(){var n=kn(),s=wt.identifierPrefix;if(it){var a=ns,l=ts;a=(l&~(1<<32-qt(l)-1)).toString(32)+a,s="_"+s+"R_"+a,a=Wu++,0<a&&(s+="H"+a.toString(32)),s+="_"}else a=vS++,s="_"+s+"r_"+a.toString(32)+"_";return n.memoizedState=s},useHostTransitionStatus:im,useFormState:yy,useActionState:yy,useOptimistic:function(n){var s=kn();s.memoizedState=s.baseState=n;var a={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return s.queue=a,s=sm.bind(null,He,!0,a),a.dispatch=s,[n,s]},useMemoCache:Qf,useCacheRefresh:function(){return kn().memoizedState=AS.bind(null,He)},useEffectEvent:function(n){var s=kn(),a={impl:n};return s.memoizedState=a,function(){if((ht&2)!==0)throw Error(r(440));return a.impl.apply(void 0,arguments)}}},rm={readContext:bn,use:Zu,useCallback:xy,useContext:bn,useEffect:Zf,useImperativeHandle:Ny,useInsertionEffect:Ay,useLayoutEffect:Iy,useMemo:Ry,useReducer:eh,useRef:wy,useState:function(){return eh(Rs)},useDebugValue:em,useDeferredValue:function(n,s){var a=$t();return Dy(a,vt.memoizedState,n,s)},useTransition:function(){var n=eh(Rs)[0],s=$t().memoizedState;return[typeof n=="boolean"?n:nc(n),s]},useSyncExternalStore:ay,useId:jy,useHostTransitionStatus:im,useFormState:vy,useActionState:vy,useOptimistic:function(n,s){var a=$t();return dy(a,vt,n,s)},useMemoCache:Qf,useCacheRefresh:Ly};rm.useEffectEvent=Sy;var zy={readContext:bn,use:Zu,useCallback:xy,useContext:bn,useEffect:Zf,useImperativeHandle:Ny,useInsertionEffect:Ay,useLayoutEffect:Iy,useMemo:Ry,useReducer:Xf,useRef:wy,useState:function(){return Xf(Rs)},useDebugValue:em,useDeferredValue:function(n,s){var a=$t();return vt===null?tm(a,n,s):Dy(a,vt.memoizedState,n,s)},useTransition:function(){var n=Xf(Rs)[0],s=$t().memoizedState;return[typeof n=="boolean"?n:nc(n),s]},useSyncExternalStore:ay,useId:jy,useHostTransitionStatus:im,useFormState:Ty,useActionState:Ty,useOptimistic:function(n,s){var a=$t();return vt!==null?dy(a,vt,n,s):(a.baseState=n,[n,a.queue.dispatch])},useMemoCache:Qf,useCacheRefresh:Ly};zy.useEffectEvent=Sy;function am(n,s,a,l){s=n.memoizedState,a=a(l,s),a=a==null?s:E({},s,a),n.memoizedState=a,n.lanes===0&&(n.updateQueue.baseState=a)}var om={enqueueSetState:function(n,s,a){n=n._reactInternals;var l=ei(),d=dr(l);d.payload=s,a!=null&&(d.callback=a),s=fr(n,d,l),s!==null&&(qn(s,n,l),Jl(s,n,l))},enqueueReplaceState:function(n,s,a){n=n._reactInternals;var l=ei(),d=dr(l);d.tag=1,d.payload=s,a!=null&&(d.callback=a),s=fr(n,d,l),s!==null&&(qn(s,n,l),Jl(s,n,l))},enqueueForceUpdate:function(n,s){n=n._reactInternals;var a=ei(),l=dr(a);l.tag=2,s!=null&&(l.callback=s),s=fr(n,l,a),s!==null&&(qn(s,n,a),Jl(s,n,a))}};function qy(n,s,a,l,d,m,v){return n=n.stateNode,typeof n.shouldComponentUpdate=="function"?n.shouldComponentUpdate(l,m,v):s.prototype&&s.prototype.isPureReactComponent?!Fl(a,l)||!Fl(d,m):!0}function Hy(n,s,a,l){n=s.state,typeof s.componentWillReceiveProps=="function"&&s.componentWillReceiveProps(a,l),typeof s.UNSAFE_componentWillReceiveProps=="function"&&s.UNSAFE_componentWillReceiveProps(a,l),s.state!==n&&om.enqueueReplaceState(s,s.state,null)}function Ca(n,s){var a=s;if("ref"in s){a={};for(var l in s)l!=="ref"&&(a[l]=s[l])}if(n=n.defaultProps){a===s&&(a=E({},a));for(var d in n)a[d]===void 0&&(a[d]=n[d])}return a}function Fy(n){ju(n)}function $y(n){console.error(n)}function Gy(n){ju(n)}function sh(n,s){try{var a=n.onUncaughtError;a(s.value,{componentStack:s.stack})}catch(l){setTimeout(function(){throw l})}}function Yy(n,s,a){try{var l=n.onCaughtError;l(a.value,{componentStack:a.stack,errorBoundary:s.tag===1?s.stateNode:null})}catch(d){setTimeout(function(){throw d})}}function lm(n,s,a){return a=dr(a),a.tag=3,a.payload={element:null},a.callback=function(){sh(n,s)},a}function Qy(n){return n=dr(n),n.tag=3,n}function Ky(n,s,a,l){var d=a.type.getDerivedStateFromError;if(typeof d=="function"){var m=l.value;n.payload=function(){return d(m)},n.callback=function(){Yy(s,a,l)}}var v=a.stateNode;v!==null&&typeof v.componentDidCatch=="function"&&(n.callback=function(){Yy(s,a,l),typeof d!="function"&&(vr===null?vr=new Set([this]):vr.add(this));var C=l.stack;this.componentDidCatch(l.value,{componentStack:C!==null?C:""})})}function CS(n,s,a,l,d){if(a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){if(s=a.alternate,s!==null&&wo(s,a,d,!0),a=Xn.current,a!==null){switch(a.tag){case 31:case 13:return fi===null?gh():a.alternate===null&&Pt===0&&(Pt=3),a.flags&=-257,a.flags|=65536,a.lanes=d,l===$u?a.flags|=16384:(s=a.updateQueue,s===null?a.updateQueue=new Set([l]):s.add(l),Om(n,l,d)),!1;case 22:return a.flags|=65536,l===$u?a.flags|=16384:(s=a.updateQueue,s===null?(s={transitions:null,markerInstances:null,retryQueue:new Set([l])},a.updateQueue=s):(a=s.retryQueue,a===null?s.retryQueue=new Set([l]):a.add(l)),Om(n,l,d)),!1}throw Error(r(435,a.tag))}return Om(n,l,d),gh(),!1}if(it)return s=Xn.current,s!==null?((s.flags&65536)===0&&(s.flags|=256),s.flags|=65536,s.lanes=d,l!==Cf&&(n=Error(r(422),{cause:l}),Yl(ci(n,a)))):(l!==Cf&&(s=Error(r(423),{cause:l}),Yl(ci(s,a))),n=n.current.alternate,n.flags|=65536,d&=-d,n.lanes|=d,l=ci(l,a),d=lm(n.stateNode,l,d),Vf(n,d),Pt!==4&&(Pt=2)),!1;var m=Error(r(520),{cause:l});if(m=ci(m,a),dc===null?dc=[m]:dc.push(m),Pt!==4&&(Pt=2),s===null)return!0;l=ci(l,a),a=s;do{switch(a.tag){case 3:return a.flags|=65536,n=d&-d,a.lanes|=n,n=lm(a.stateNode,l,n),Vf(a,n),!1;case 1:if(s=a.type,m=a.stateNode,(a.flags&128)===0&&(typeof s.getDerivedStateFromError=="function"||m!==null&&typeof m.componentDidCatch=="function"&&(vr===null||!vr.has(m))))return a.flags|=65536,d&=-d,a.lanes|=d,d=Qy(d),Ky(d,n,a,l),Vf(a,d),!1}a=a.return}while(a!==null);return!1}var cm=Error(r(461)),sn=!1;function Tn(n,s,a,l){s.child=n===null?Z_(s,null,a,l):Aa(s,n.child,a,l)}function Xy(n,s,a,l,d){a=a.render;var m=s.ref;if("ref"in l){var v={};for(var C in l)C!=="ref"&&(v[C]=l[C])}else v=l;return Ta(s),l=Ff(n,s,a,v,m,d),C=$f(),n!==null&&!sn?(Gf(n,s,d),Ds(n,s,d)):(it&&C&&Af(s),s.flags|=1,Tn(n,s,l,d),s.child)}function Wy(n,s,a,l,d){if(n===null){var m=a.type;return typeof m=="function"&&!wf(m)&&m.defaultProps===void 0&&a.compare===null?(s.tag=15,s.type=m,Jy(n,s,m,l,d)):(n=Bu(a.type,null,l,s,s.mode,d),n.ref=s.ref,n.return=s,s.child=n)}if(m=n.child,!_m(n,d)){var v=m.memoizedProps;if(a=a.compare,a=a!==null?a:Fl,a(v,l)&&n.ref===s.ref)return Ds(n,s,d)}return s.flags|=1,n=As(m,l),n.ref=s.ref,n.return=s,s.child=n}function Jy(n,s,a,l,d){if(n!==null){var m=n.memoizedProps;if(Fl(m,l)&&n.ref===s.ref)if(sn=!1,s.pendingProps=l=m,_m(n,d))(n.flags&131072)!==0&&(sn=!0);else return s.lanes=n.lanes,Ds(n,s,d)}return um(n,s,a,l,d)}function Zy(n,s,a,l){var d=l.children,m=n!==null?n.memoizedState:null;if(n===null&&s.stateNode===null&&(s.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),l.mode==="hidden"){if((s.flags&128)!==0){if(m=m!==null?m.baseLanes|a:a,n!==null){for(l=s.child=n.child,d=0;l!==null;)d=d|l.lanes|l.childLanes,l=l.sibling;l=d&~m}else l=0,s.child=null;return ev(n,s,m,a,l)}if((a&536870912)!==0)s.memoizedState={baseLanes:0,cachePool:null},n!==null&&Hu(s,m!==null?m.cachePool:null),m!==null?ny(s,m):Uf(),iy(s);else return l=s.lanes=536870912,ev(n,s,m!==null?m.baseLanes|a:a,a,l)}else m!==null?(Hu(s,m.cachePool),ny(s,m),pr(),s.memoizedState=null):(n!==null&&Hu(s,null),Uf(),pr());return Tn(n,s,d,a),s.child}function rc(n,s){return n!==null&&n.tag===22||s.stateNode!==null||(s.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),s.sibling}function ev(n,s,a,l,d){var m=kf();return m=m===null?null:{parent:tn._currentValue,pool:m},s.memoizedState={baseLanes:a,cachePool:m},n!==null&&Hu(s,null),Uf(),iy(s),n!==null&&wo(n,s,l,!0),s.childLanes=d,null}function rh(n,s){return s=oh({mode:s.mode,children:s.children},n.mode),s.ref=n.ref,n.child=s,s.return=n,s}function tv(n,s,a){return Aa(s,n.child,null,a),n=rh(s,s.pendingProps),n.flags|=2,Wn(s),s.memoizedState=null,n}function NS(n,s,a){var l=s.pendingProps,d=(s.flags&128)!==0;if(s.flags&=-129,n===null){if(it){if(l.mode==="hidden")return n=rh(s,l),s.lanes=536870912,rc(null,n);if(qf(s),(n=It)?(n=f1(n,di),n=n!==null&&n.data==="&"?n:null,n!==null&&(s.memoizedState={dehydrated:n,treeContext:or!==null?{id:ts,overflow:ns}:null,retryLane:536870912,hydrationErrors:null},a=V_(n),a.return=s,s.child=a,vn=s,It=null)):n=null,n===null)throw cr(s);return s.lanes=536870912,null}return rh(s,l)}var m=n.memoizedState;if(m!==null){var v=m.dehydrated;if(qf(s),d)if(s.flags&256)s.flags&=-257,s=tv(n,s,a);else if(s.memoizedState!==null)s.child=n.child,s.flags|=128,s=null;else throw Error(r(558));else if(sn||wo(n,s,a,!1),d=(a&n.childLanes)!==0,sn||d){if(l=wt,l!==null&&(v=Il(l,a),v!==0&&v!==m.retryLane))throw m.retryLane=v,_a(n,v),qn(l,n,v),cm;gh(),s=tv(n,s,a)}else n=m.treeContext,It=mi(v.nextSibling),vn=s,it=!0,lr=null,di=!1,n!==null&&z_(s,n),s=rh(s,l),s.flags|=4096;return s}return n=As(n.child,{mode:l.mode,children:l.children}),n.ref=s.ref,s.child=n,n.return=s,n}function ah(n,s){var a=s.ref;if(a===null)n!==null&&n.ref!==null&&(s.flags|=4194816);else{if(typeof a!="function"&&typeof a!="object")throw Error(r(284));(n===null||n.ref!==a)&&(s.flags|=4194816)}}function um(n,s,a,l,d){return Ta(s),a=Ff(n,s,a,l,void 0,d),l=$f(),n!==null&&!sn?(Gf(n,s,d),Ds(n,s,d)):(it&&l&&Af(s),s.flags|=1,Tn(n,s,a,d),s.child)}function nv(n,s,a,l,d,m){return Ta(s),s.updateQueue=null,a=ry(s,l,a,d),sy(n),l=$f(),n!==null&&!sn?(Gf(n,s,m),Ds(n,s,m)):(it&&l&&Af(s),s.flags|=1,Tn(n,s,a,m),s.child)}function iv(n,s,a,l,d){if(Ta(s),s.stateNode===null){var m=yo,v=a.contextType;typeof v=="object"&&v!==null&&(m=bn(v)),m=new a(l,m),s.memoizedState=m.state!==null&&m.state!==void 0?m.state:null,m.updater=om,s.stateNode=m,m._reactInternals=s,m=s.stateNode,m.props=l,m.state=s.memoizedState,m.refs={},Lf(s),v=a.contextType,m.context=typeof v=="object"&&v!==null?bn(v):yo,m.state=s.memoizedState,v=a.getDerivedStateFromProps,typeof v=="function"&&(am(s,a,v,l),m.state=s.memoizedState),typeof a.getDerivedStateFromProps=="function"||typeof m.getSnapshotBeforeUpdate=="function"||typeof m.UNSAFE_componentWillMount!="function"&&typeof m.componentWillMount!="function"||(v=m.state,typeof m.componentWillMount=="function"&&m.componentWillMount(),typeof m.UNSAFE_componentWillMount=="function"&&m.UNSAFE_componentWillMount(),v!==m.state&&om.enqueueReplaceState(m,m.state,null),ec(s,l,m,d),Zl(),m.state=s.memoizedState),typeof m.componentDidMount=="function"&&(s.flags|=4194308),l=!0}else if(n===null){m=s.stateNode;var C=s.memoizedProps,P=Ca(a,C);m.props=P;var Z=m.context,ce=a.contextType;v=yo,typeof ce=="object"&&ce!==null&&(v=bn(ce));var de=a.getDerivedStateFromProps;ce=typeof de=="function"||typeof m.getSnapshotBeforeUpdate=="function",C=s.pendingProps!==C,ce||typeof m.UNSAFE_componentWillReceiveProps!="function"&&typeof m.componentWillReceiveProps!="function"||(C||Z!==v)&&Hy(s,m,l,v),hr=!1;var te=s.memoizedState;m.state=te,ec(s,l,m,d),Zl(),Z=s.memoizedState,C||te!==Z||hr?(typeof de=="function"&&(am(s,a,de,l),Z=s.memoizedState),(P=hr||qy(s,a,P,l,te,Z,v))?(ce||typeof m.UNSAFE_componentWillMount!="function"&&typeof m.componentWillMount!="function"||(typeof m.componentWillMount=="function"&&m.componentWillMount(),typeof m.UNSAFE_componentWillMount=="function"&&m.UNSAFE_componentWillMount()),typeof m.componentDidMount=="function"&&(s.flags|=4194308)):(typeof m.componentDidMount=="function"&&(s.flags|=4194308),s.memoizedProps=l,s.memoizedState=Z),m.props=l,m.state=Z,m.context=v,l=P):(typeof m.componentDidMount=="function"&&(s.flags|=4194308),l=!1)}else{m=s.stateNode,Pf(n,s),v=s.memoizedProps,ce=Ca(a,v),m.props=ce,de=s.pendingProps,te=m.context,Z=a.contextType,P=yo,typeof Z=="object"&&Z!==null&&(P=bn(Z)),C=a.getDerivedStateFromProps,(Z=typeof C=="function"||typeof m.getSnapshotBeforeUpdate=="function")||typeof m.UNSAFE_componentWillReceiveProps!="function"&&typeof m.componentWillReceiveProps!="function"||(v!==de||te!==P)&&Hy(s,m,l,P),hr=!1,te=s.memoizedState,m.state=te,ec(s,l,m,d),Zl();var ae=s.memoizedState;v!==de||te!==ae||hr||n!==null&&n.dependencies!==null&&zu(n.dependencies)?(typeof C=="function"&&(am(s,a,C,l),ae=s.memoizedState),(ce=hr||qy(s,a,ce,l,te,ae,P)||n!==null&&n.dependencies!==null&&zu(n.dependencies))?(Z||typeof m.UNSAFE_componentWillUpdate!="function"&&typeof m.componentWillUpdate!="function"||(typeof m.componentWillUpdate=="function"&&m.componentWillUpdate(l,ae,P),typeof m.UNSAFE_componentWillUpdate=="function"&&m.UNSAFE_componentWillUpdate(l,ae,P)),typeof m.componentDidUpdate=="function"&&(s.flags|=4),typeof m.getSnapshotBeforeUpdate=="function"&&(s.flags|=1024)):(typeof m.componentDidUpdate!="function"||v===n.memoizedProps&&te===n.memoizedState||(s.flags|=4),typeof m.getSnapshotBeforeUpdate!="function"||v===n.memoizedProps&&te===n.memoizedState||(s.flags|=1024),s.memoizedProps=l,s.memoizedState=ae),m.props=l,m.state=ae,m.context=P,l=ce):(typeof m.componentDidUpdate!="function"||v===n.memoizedProps&&te===n.memoizedState||(s.flags|=4),typeof m.getSnapshotBeforeUpdate!="function"||v===n.memoizedProps&&te===n.memoizedState||(s.flags|=1024),l=!1)}return m=l,ah(n,s),l=(s.flags&128)!==0,m||l?(m=s.stateNode,a=l&&typeof a.getDerivedStateFromError!="function"?null:m.render(),s.flags|=1,n!==null&&l?(s.child=Aa(s,n.child,null,d),s.child=Aa(s,null,a,d)):Tn(n,s,a,d),s.memoizedState=m.state,n=s.child):n=Ds(n,s,d),n}function sv(n,s,a,l){return va(),s.flags|=256,Tn(n,s,a,l),s.child}var hm={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function dm(n){return{baseLanes:n,cachePool:Y_()}}function fm(n,s,a){return n=n!==null?n.childLanes&~a:0,s&&(n|=Zn),n}function rv(n,s,a){var l=s.pendingProps,d=!1,m=(s.flags&128)!==0,v;if((v=m)||(v=n!==null&&n.memoizedState===null?!1:(Ft.current&2)!==0),v&&(d=!0,s.flags&=-129),v=(s.flags&32)!==0,s.flags&=-33,n===null){if(it){if(d?mr(s):pr(),(n=It)?(n=f1(n,di),n=n!==null&&n.data!=="&"?n:null,n!==null&&(s.memoizedState={dehydrated:n,treeContext:or!==null?{id:ts,overflow:ns}:null,retryLane:536870912,hydrationErrors:null},a=V_(n),a.return=s,s.child=a,vn=s,It=null)):n=null,n===null)throw cr(s);return Km(n)?s.lanes=32:s.lanes=536870912,null}var C=l.children;return l=l.fallback,d?(pr(),d=s.mode,C=oh({mode:"hidden",children:C},d),l=ya(l,d,a,null),C.return=s,l.return=s,C.sibling=l,s.child=C,l=s.child,l.memoizedState=dm(a),l.childLanes=fm(n,v,a),s.memoizedState=hm,rc(null,l)):(mr(s),mm(s,C))}var P=n.memoizedState;if(P!==null&&(C=P.dehydrated,C!==null)){if(m)s.flags&256?(mr(s),s.flags&=-257,s=pm(n,s,a)):s.memoizedState!==null?(pr(),s.child=n.child,s.flags|=128,s=null):(pr(),C=l.fallback,d=s.mode,l=oh({mode:"visible",children:l.children},d),C=ya(C,d,a,null),C.flags|=2,l.return=s,C.return=s,l.sibling=C,s.child=l,Aa(s,n.child,null,a),l=s.child,l.memoizedState=dm(a),l.childLanes=fm(n,v,a),s.memoizedState=hm,s=rc(null,l));else if(mr(s),Km(C)){if(v=C.nextSibling&&C.nextSibling.dataset,v)var Z=v.dgst;v=Z,l=Error(r(419)),l.stack="",l.digest=v,Yl({value:l,source:null,stack:null}),s=pm(n,s,a)}else if(sn||wo(n,s,a,!1),v=(a&n.childLanes)!==0,sn||v){if(v=wt,v!==null&&(l=Il(v,a),l!==0&&l!==P.retryLane))throw P.retryLane=l,_a(n,l),qn(v,n,l),cm;Qm(C)||gh(),s=pm(n,s,a)}else Qm(C)?(s.flags|=192,s.child=n.child,s=null):(n=P.treeContext,It=mi(C.nextSibling),vn=s,it=!0,lr=null,di=!1,n!==null&&z_(s,n),s=mm(s,l.children),s.flags|=4096);return s}return d?(pr(),C=l.fallback,d=s.mode,P=n.child,Z=P.sibling,l=As(P,{mode:"hidden",children:l.children}),l.subtreeFlags=P.subtreeFlags&65011712,Z!==null?C=As(Z,C):(C=ya(C,d,a,null),C.flags|=2),C.return=s,l.return=s,l.sibling=C,s.child=l,rc(null,l),l=s.child,C=n.child.memoizedState,C===null?C=dm(a):(d=C.cachePool,d!==null?(P=tn._currentValue,d=d.parent!==P?{parent:P,pool:P}:d):d=Y_(),C={baseLanes:C.baseLanes|a,cachePool:d}),l.memoizedState=C,l.childLanes=fm(n,v,a),s.memoizedState=hm,rc(n.child,l)):(mr(s),a=n.child,n=a.sibling,a=As(a,{mode:"visible",children:l.children}),a.return=s,a.sibling=null,n!==null&&(v=s.deletions,v===null?(s.deletions=[n],s.flags|=16):v.push(n)),s.child=a,s.memoizedState=null,a)}function mm(n,s){return s=oh({mode:"visible",children:s},n.mode),s.return=n,n.child=s}function oh(n,s){return n=Kn(22,n,null,s),n.lanes=0,n}function pm(n,s,a){return Aa(s,n.child,null,a),n=mm(s,s.pendingProps.children),n.flags|=2,s.memoizedState=null,n}function av(n,s,a){n.lanes|=s;var l=n.alternate;l!==null&&(l.lanes|=s),Rf(n.return,s,a)}function gm(n,s,a,l,d,m){var v=n.memoizedState;v===null?n.memoizedState={isBackwards:s,rendering:null,renderingStartTime:0,last:l,tail:a,tailMode:d,treeForkCount:m}:(v.isBackwards=s,v.rendering=null,v.renderingStartTime=0,v.last=l,v.tail=a,v.tailMode=d,v.treeForkCount=m)}function ov(n,s,a){var l=s.pendingProps,d=l.revealOrder,m=l.tail;l=l.children;var v=Ft.current,C=(v&2)!==0;if(C?(v=v&1|2,s.flags|=128):v&=1,se(Ft,v),Tn(n,s,l,a),l=it?Gl:0,!C&&n!==null&&(n.flags&128)!==0)e:for(n=s.child;n!==null;){if(n.tag===13)n.memoizedState!==null&&av(n,a,s);else if(n.tag===19)av(n,a,s);else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===s)break e;for(;n.sibling===null;){if(n.return===null||n.return===s)break e;n=n.return}n.sibling.return=n.return,n=n.sibling}switch(d){case"forwards":for(a=s.child,d=null;a!==null;)n=a.alternate,n!==null&&Ku(n)===null&&(d=a),a=a.sibling;a=d,a===null?(d=s.child,s.child=null):(d=a.sibling,a.sibling=null),gm(s,!1,d,a,m,l);break;case"backwards":case"unstable_legacy-backwards":for(a=null,d=s.child,s.child=null;d!==null;){if(n=d.alternate,n!==null&&Ku(n)===null){s.child=d;break}n=d.sibling,d.sibling=a,a=d,d=n}gm(s,!0,a,null,m,l);break;case"together":gm(s,!1,null,null,void 0,l);break;default:s.memoizedState=null}return s.child}function Ds(n,s,a){if(n!==null&&(s.dependencies=n.dependencies),yr|=s.lanes,(a&s.childLanes)===0)if(n!==null){if(wo(n,s,a,!1),(a&s.childLanes)===0)return null}else return null;if(n!==null&&s.child!==n.child)throw Error(r(153));if(s.child!==null){for(n=s.child,a=As(n,n.pendingProps),s.child=a,a.return=s;n.sibling!==null;)n=n.sibling,a=a.sibling=As(n,n.pendingProps),a.return=s;a.sibling=null}return s.child}function _m(n,s){return(n.lanes&s)!==0?!0:(n=n.dependencies,!!(n!==null&&zu(n)))}function xS(n,s,a){switch(s.tag){case 3:je(s,s.stateNode.containerInfo),ur(s,tn,n.memoizedState.cache),va();break;case 27:case 5:q(s);break;case 4:je(s,s.stateNode.containerInfo);break;case 10:ur(s,s.type,s.memoizedProps.value);break;case 31:if(s.memoizedState!==null)return s.flags|=128,qf(s),null;break;case 13:var l=s.memoizedState;if(l!==null)return l.dehydrated!==null?(mr(s),s.flags|=128,null):(a&s.child.childLanes)!==0?rv(n,s,a):(mr(s),n=Ds(n,s,a),n!==null?n.sibling:null);mr(s);break;case 19:var d=(n.flags&128)!==0;if(l=(a&s.childLanes)!==0,l||(wo(n,s,a,!1),l=(a&s.childLanes)!==0),d){if(l)return ov(n,s,a);s.flags|=128}if(d=s.memoizedState,d!==null&&(d.rendering=null,d.tail=null,d.lastEffect=null),se(Ft,Ft.current),l)break;return null;case 22:return s.lanes=0,Zy(n,s,a,s.pendingProps);case 24:ur(s,tn,n.memoizedState.cache)}return Ds(n,s,a)}function lv(n,s,a){if(n!==null)if(n.memoizedProps!==s.pendingProps)sn=!0;else{if(!_m(n,a)&&(s.flags&128)===0)return sn=!1,xS(n,s,a);sn=(n.flags&131072)!==0}else sn=!1,it&&(s.flags&1048576)!==0&&U_(s,Gl,s.index);switch(s.lanes=0,s.tag){case 16:e:{var l=s.pendingProps;if(n=Ea(s.elementType),s.type=n,typeof n=="function")wf(n)?(l=Ca(n,l),s.tag=1,s=iv(null,s,n,l,a)):(s.tag=0,s=um(null,s,n,l,a));else{if(n!=null){var d=n.$$typeof;if(d===K){s.tag=11,s=Xy(null,s,n,l,a);break e}else if(d===A){s.tag=14,s=Wy(null,s,n,l,a);break e}}throw s=ye(n)||n,Error(r(306,s,""))}}return s;case 0:return um(n,s,s.type,s.pendingProps,a);case 1:return l=s.type,d=Ca(l,s.pendingProps),iv(n,s,l,d,a);case 3:e:{if(je(s,s.stateNode.containerInfo),n===null)throw Error(r(387));l=s.pendingProps;var m=s.memoizedState;d=m.element,Pf(n,s),ec(s,l,null,a);var v=s.memoizedState;if(l=v.cache,ur(s,tn,l),l!==m.cache&&Df(s,[tn],a,!0),Zl(),l=v.element,m.isDehydrated)if(m={element:l,isDehydrated:!1,cache:v.cache},s.updateQueue.baseState=m,s.memoizedState=m,s.flags&256){s=sv(n,s,l,a);break e}else if(l!==d){d=ci(Error(r(424)),s),Yl(d),s=sv(n,s,l,a);break e}else{switch(n=s.stateNode.containerInfo,n.nodeType){case 9:n=n.body;break;default:n=n.nodeName==="HTML"?n.ownerDocument.body:n}for(It=mi(n.firstChild),vn=s,it=!0,lr=null,di=!0,a=Z_(s,null,l,a),s.child=a;a;)a.flags=a.flags&-3|4096,a=a.sibling}else{if(va(),l===d){s=Ds(n,s,a);break e}Tn(n,s,l,a)}s=s.child}return s;case 26:return ah(n,s),n===null?(a=v1(s.type,null,s.pendingProps,null))?s.memoizedState=a:it||(a=s.type,n=s.pendingProps,l=Eh(Se.current).createElement(a),l[Jt]=s,l[dn]=n,wn(l,a,n),Zt(l),s.stateNode=l):s.memoizedState=v1(s.type,n.memoizedProps,s.pendingProps,n.memoizedState),null;case 27:return q(s),n===null&&it&&(l=s.stateNode=g1(s.type,s.pendingProps,Se.current),vn=s,di=!0,d=It,Er(s.type)?(Xm=d,It=mi(l.firstChild)):It=d),Tn(n,s,s.pendingProps.children,a),ah(n,s),n===null&&(s.flags|=4194304),s.child;case 5:return n===null&&it&&((d=l=It)&&(l=rA(l,s.type,s.pendingProps,di),l!==null?(s.stateNode=l,vn=s,It=mi(l.firstChild),di=!1,d=!0):d=!1),d||cr(s)),q(s),d=s.type,m=s.pendingProps,v=n!==null?n.memoizedProps:null,l=m.children,$m(d,m)?l=null:v!==null&&$m(d,v)&&(s.flags|=32),s.memoizedState!==null&&(d=Ff(n,s,bS,null,null,a),bc._currentValue=d),ah(n,s),Tn(n,s,l,a),s.child;case 6:return n===null&&it&&((n=a=It)&&(a=aA(a,s.pendingProps,di),a!==null?(s.stateNode=a,vn=s,It=null,n=!0):n=!1),n||cr(s)),null;case 13:return rv(n,s,a);case 4:return je(s,s.stateNode.containerInfo),l=s.pendingProps,n===null?s.child=Aa(s,null,l,a):Tn(n,s,l,a),s.child;case 11:return Xy(n,s,s.type,s.pendingProps,a);case 7:return Tn(n,s,s.pendingProps,a),s.child;case 8:return Tn(n,s,s.pendingProps.children,a),s.child;case 12:return Tn(n,s,s.pendingProps.children,a),s.child;case 10:return l=s.pendingProps,ur(s,s.type,l.value),Tn(n,s,l.children,a),s.child;case 9:return d=s.type._context,l=s.pendingProps.children,Ta(s),d=bn(d),l=l(d),s.flags|=1,Tn(n,s,l,a),s.child;case 14:return Wy(n,s,s.type,s.pendingProps,a);case 15:return Jy(n,s,s.type,s.pendingProps,a);case 19:return ov(n,s,a);case 31:return NS(n,s,a);case 22:return Zy(n,s,a,s.pendingProps);case 24:return Ta(s),l=bn(tn),n===null?(d=kf(),d===null&&(d=wt,m=Mf(),d.pooledCache=m,m.refCount++,m!==null&&(d.pooledCacheLanes|=a),d=m),s.memoizedState={parent:l,cache:d},Lf(s),ur(s,tn,d)):((n.lanes&a)!==0&&(Pf(n,s),ec(s,null,null,a),Zl()),d=n.memoizedState,m=s.memoizedState,d.parent!==l?(d={parent:l,cache:l},s.memoizedState=d,s.lanes===0&&(s.memoizedState=s.updateQueue.baseState=d),ur(s,tn,l)):(l=m.cache,ur(s,tn,l),l!==d.cache&&Df(s,[tn],a,!0))),Tn(n,s,s.pendingProps.children,a),s.child;case 29:throw s.pendingProps}throw Error(r(156,s.tag))}function Ms(n){n.flags|=4}function ym(n,s,a,l,d){if((s=(n.mode&32)!==0)&&(s=!1),s){if(n.flags|=16777216,(d&335544128)===d)if(n.stateNode.complete)n.flags|=8192;else if(jv())n.flags|=8192;else throw Sa=$u,jf}else n.flags&=-16777217}function cv(n,s){if(s.type!=="stylesheet"||(s.state.loading&4)!==0)n.flags&=-16777217;else if(n.flags|=16777216,!S1(s))if(jv())n.flags|=8192;else throw Sa=$u,jf}function lh(n,s){s!==null&&(n.flags|=4),n.flags&16384&&(s=n.tag!==22?mu():536870912,n.lanes|=s,ko|=s)}function ac(n,s){if(!it)switch(n.tailMode){case"hidden":s=n.tail;for(var a=null;s!==null;)s.alternate!==null&&(a=s),s=s.sibling;a===null?n.tail=null:a.sibling=null;break;case"collapsed":a=n.tail;for(var l=null;a!==null;)a.alternate!==null&&(l=a),a=a.sibling;l===null?s||n.tail===null?n.tail=null:n.tail.sibling=null:l.sibling=null}}function Ct(n){var s=n.alternate!==null&&n.alternate.child===n.child,a=0,l=0;if(s)for(var d=n.child;d!==null;)a|=d.lanes|d.childLanes,l|=d.subtreeFlags&65011712,l|=d.flags&65011712,d.return=n,d=d.sibling;else for(d=n.child;d!==null;)a|=d.lanes|d.childLanes,l|=d.subtreeFlags,l|=d.flags,d.return=n,d=d.sibling;return n.subtreeFlags|=l,n.childLanes=a,s}function RS(n,s,a){var l=s.pendingProps;switch(If(s),s.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ct(s),null;case 1:return Ct(s),null;case 3:return a=s.stateNode,l=null,n!==null&&(l=n.memoizedState.cache),s.memoizedState.cache!==l&&(s.flags|=2048),Ns(tn),Ye(),a.pendingContext&&(a.context=a.pendingContext,a.pendingContext=null),(n===null||n.child===null)&&(To(s)?Ms(s):n===null||n.memoizedState.isDehydrated&&(s.flags&256)===0||(s.flags|=1024,Nf())),Ct(s),null;case 26:var d=s.type,m=s.memoizedState;return n===null?(Ms(s),m!==null?(Ct(s),cv(s,m)):(Ct(s),ym(s,d,null,l,a))):m?m!==n.memoizedState?(Ms(s),Ct(s),cv(s,m)):(Ct(s),s.flags&=-16777217):(n=n.memoizedProps,n!==l&&Ms(s),Ct(s),ym(s,d,n,l,a)),null;case 27:if(pe(s),a=Se.current,d=s.type,n!==null&&s.stateNode!=null)n.memoizedProps!==l&&Ms(s);else{if(!l){if(s.stateNode===null)throw Error(r(166));return Ct(s),null}n=me.current,To(s)?q_(s):(n=g1(d,l,a),s.stateNode=n,Ms(s))}return Ct(s),null;case 5:if(pe(s),d=s.type,n!==null&&s.stateNode!=null)n.memoizedProps!==l&&Ms(s);else{if(!l){if(s.stateNode===null)throw Error(r(166));return Ct(s),null}if(m=me.current,To(s))q_(s);else{var v=Eh(Se.current);switch(m){case 1:m=v.createElementNS("http://www.w3.org/2000/svg",d);break;case 2:m=v.createElementNS("http://www.w3.org/1998/Math/MathML",d);break;default:switch(d){case"svg":m=v.createElementNS("http://www.w3.org/2000/svg",d);break;case"math":m=v.createElementNS("http://www.w3.org/1998/Math/MathML",d);break;case"script":m=v.createElement("div"),m.innerHTML="<script><\/script>",m=m.removeChild(m.firstChild);break;case"select":m=typeof l.is=="string"?v.createElement("select",{is:l.is}):v.createElement("select"),l.multiple?m.multiple=!0:l.size&&(m.size=l.size);break;default:m=typeof l.is=="string"?v.createElement(d,{is:l.is}):v.createElement(d)}}m[Jt]=s,m[dn]=l;e:for(v=s.child;v!==null;){if(v.tag===5||v.tag===6)m.appendChild(v.stateNode);else if(v.tag!==4&&v.tag!==27&&v.child!==null){v.child.return=v,v=v.child;continue}if(v===s)break e;for(;v.sibling===null;){if(v.return===null||v.return===s)break e;v=v.return}v.sibling.return=v.return,v=v.sibling}s.stateNode=m;e:switch(wn(m,d,l),d){case"button":case"input":case"select":case"textarea":l=!!l.autoFocus;break e;case"img":l=!0;break e;default:l=!1}l&&Ms(s)}}return Ct(s),ym(s,s.type,n===null?null:n.memoizedProps,s.pendingProps,a),null;case 6:if(n&&s.stateNode!=null)n.memoizedProps!==l&&Ms(s);else{if(typeof l!="string"&&s.stateNode===null)throw Error(r(166));if(n=Se.current,To(s)){if(n=s.stateNode,a=s.memoizedProps,l=null,d=vn,d!==null)switch(d.tag){case 27:case 5:l=d.memoizedProps}n[Jt]=s,n=!!(n.nodeValue===a||l!==null&&l.suppressHydrationWarning===!0||r1(n.nodeValue,a)),n||cr(s,!0)}else n=Eh(n).createTextNode(l),n[Jt]=s,s.stateNode=n}return Ct(s),null;case 31:if(a=s.memoizedState,n===null||n.memoizedState!==null){if(l=To(s),a!==null){if(n===null){if(!l)throw Error(r(318));if(n=s.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(r(557));n[Jt]=s}else va(),(s.flags&128)===0&&(s.memoizedState=null),s.flags|=4;Ct(s),n=!1}else a=Nf(),n!==null&&n.memoizedState!==null&&(n.memoizedState.hydrationErrors=a),n=!0;if(!n)return s.flags&256?(Wn(s),s):(Wn(s),null);if((s.flags&128)!==0)throw Error(r(558))}return Ct(s),null;case 13:if(l=s.memoizedState,n===null||n.memoizedState!==null&&n.memoizedState.dehydrated!==null){if(d=To(s),l!==null&&l.dehydrated!==null){if(n===null){if(!d)throw Error(r(318));if(d=s.memoizedState,d=d!==null?d.dehydrated:null,!d)throw Error(r(317));d[Jt]=s}else va(),(s.flags&128)===0&&(s.memoizedState=null),s.flags|=4;Ct(s),d=!1}else d=Nf(),n!==null&&n.memoizedState!==null&&(n.memoizedState.hydrationErrors=d),d=!0;if(!d)return s.flags&256?(Wn(s),s):(Wn(s),null)}return Wn(s),(s.flags&128)!==0?(s.lanes=a,s):(a=l!==null,n=n!==null&&n.memoizedState!==null,a&&(l=s.child,d=null,l.alternate!==null&&l.alternate.memoizedState!==null&&l.alternate.memoizedState.cachePool!==null&&(d=l.alternate.memoizedState.cachePool.pool),m=null,l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(m=l.memoizedState.cachePool.pool),m!==d&&(l.flags|=2048)),a!==n&&a&&(s.child.flags|=8192),lh(s,s.updateQueue),Ct(s),null);case 4:return Ye(),n===null&&Um(s.stateNode.containerInfo),Ct(s),null;case 10:return Ns(s.type),Ct(s),null;case 19:if(G(Ft),l=s.memoizedState,l===null)return Ct(s),null;if(d=(s.flags&128)!==0,m=l.rendering,m===null)if(d)ac(l,!1);else{if(Pt!==0||n!==null&&(n.flags&128)!==0)for(n=s.child;n!==null;){if(m=Ku(n),m!==null){for(s.flags|=128,ac(l,!1),n=m.updateQueue,s.updateQueue=n,lh(s,n),s.subtreeFlags=0,n=a,a=s.child;a!==null;)P_(a,n),a=a.sibling;return se(Ft,Ft.current&1|2),it&&Is(s,l.treeForkCount),s.child}n=n.sibling}l.tail!==null&&Mn()>fh&&(s.flags|=128,d=!0,ac(l,!1),s.lanes=4194304)}else{if(!d)if(n=Ku(m),n!==null){if(s.flags|=128,d=!0,n=n.updateQueue,s.updateQueue=n,lh(s,n),ac(l,!0),l.tail===null&&l.tailMode==="hidden"&&!m.alternate&&!it)return Ct(s),null}else 2*Mn()-l.renderingStartTime>fh&&a!==536870912&&(s.flags|=128,d=!0,ac(l,!1),s.lanes=4194304);l.isBackwards?(m.sibling=s.child,s.child=m):(n=l.last,n!==null?n.sibling=m:s.child=m,l.last=m)}return l.tail!==null?(n=l.tail,l.rendering=n,l.tail=n.sibling,l.renderingStartTime=Mn(),n.sibling=null,a=Ft.current,se(Ft,d?a&1|2:a&1),it&&Is(s,l.treeForkCount),n):(Ct(s),null);case 22:case 23:return Wn(s),zf(),l=s.memoizedState!==null,n!==null?n.memoizedState!==null!==l&&(s.flags|=8192):l&&(s.flags|=8192),l?(a&536870912)!==0&&(s.flags&128)===0&&(Ct(s),s.subtreeFlags&6&&(s.flags|=8192)):Ct(s),a=s.updateQueue,a!==null&&lh(s,a.retryQueue),a=null,n!==null&&n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(a=n.memoizedState.cachePool.pool),l=null,s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(l=s.memoizedState.cachePool.pool),l!==a&&(s.flags|=2048),n!==null&&G(wa),null;case 24:return a=null,n!==null&&(a=n.memoizedState.cache),s.memoizedState.cache!==a&&(s.flags|=2048),Ns(tn),Ct(s),null;case 25:return null;case 30:return null}throw Error(r(156,s.tag))}function DS(n,s){switch(If(s),s.tag){case 1:return n=s.flags,n&65536?(s.flags=n&-65537|128,s):null;case 3:return Ns(tn),Ye(),n=s.flags,(n&65536)!==0&&(n&128)===0?(s.flags=n&-65537|128,s):null;case 26:case 27:case 5:return pe(s),null;case 31:if(s.memoizedState!==null){if(Wn(s),s.alternate===null)throw Error(r(340));va()}return n=s.flags,n&65536?(s.flags=n&-65537|128,s):null;case 13:if(Wn(s),n=s.memoizedState,n!==null&&n.dehydrated!==null){if(s.alternate===null)throw Error(r(340));va()}return n=s.flags,n&65536?(s.flags=n&-65537|128,s):null;case 19:return G(Ft),null;case 4:return Ye(),null;case 10:return Ns(s.type),null;case 22:case 23:return Wn(s),zf(),n!==null&&G(wa),n=s.flags,n&65536?(s.flags=n&-65537|128,s):null;case 24:return Ns(tn),null;case 25:return null;default:return null}}function uv(n,s){switch(If(s),s.tag){case 3:Ns(tn),Ye();break;case 26:case 27:case 5:pe(s);break;case 4:Ye();break;case 31:s.memoizedState!==null&&Wn(s);break;case 13:Wn(s);break;case 19:G(Ft);break;case 10:Ns(s.type);break;case 22:case 23:Wn(s),zf(),n!==null&&G(wa);break;case 24:Ns(tn)}}function oc(n,s){try{var a=s.updateQueue,l=a!==null?a.lastEffect:null;if(l!==null){var d=l.next;a=d;do{if((a.tag&n)===n){l=void 0;var m=a.create,v=a.inst;l=m(),v.destroy=l}a=a.next}while(a!==d)}}catch(C){gt(s,s.return,C)}}function gr(n,s,a){try{var l=s.updateQueue,d=l!==null?l.lastEffect:null;if(d!==null){var m=d.next;l=m;do{if((l.tag&n)===n){var v=l.inst,C=v.destroy;if(C!==void 0){v.destroy=void 0,d=s;var P=a,Z=C;try{Z()}catch(ce){gt(d,P,ce)}}}l=l.next}while(l!==m)}}catch(ce){gt(s,s.return,ce)}}function hv(n){var s=n.updateQueue;if(s!==null){var a=n.stateNode;try{ty(s,a)}catch(l){gt(n,n.return,l)}}}function dv(n,s,a){a.props=Ca(n.type,n.memoizedProps),a.state=n.memoizedState;try{a.componentWillUnmount()}catch(l){gt(n,s,l)}}function lc(n,s){try{var a=n.ref;if(a!==null){switch(n.tag){case 26:case 27:case 5:var l=n.stateNode;break;case 30:l=n.stateNode;break;default:l=n.stateNode}typeof a=="function"?n.refCleanup=a(l):a.current=l}}catch(d){gt(n,s,d)}}function is(n,s){var a=n.ref,l=n.refCleanup;if(a!==null)if(typeof l=="function")try{l()}catch(d){gt(n,s,d)}finally{n.refCleanup=null,n=n.alternate,n!=null&&(n.refCleanup=null)}else if(typeof a=="function")try{a(null)}catch(d){gt(n,s,d)}else a.current=null}function fv(n){var s=n.type,a=n.memoizedProps,l=n.stateNode;try{e:switch(s){case"button":case"input":case"select":case"textarea":a.autoFocus&&l.focus();break e;case"img":a.src?l.src=a.src:a.srcSet&&(l.srcset=a.srcSet)}}catch(d){gt(n,n.return,d)}}function vm(n,s,a){try{var l=n.stateNode;ZS(l,n.type,a,s),l[dn]=s}catch(d){gt(n,n.return,d)}}function mv(n){return n.tag===5||n.tag===3||n.tag===26||n.tag===27&&Er(n.type)||n.tag===4}function bm(n){e:for(;;){for(;n.sibling===null;){if(n.return===null||mv(n.return))return null;n=n.return}for(n.sibling.return=n.return,n=n.sibling;n.tag!==5&&n.tag!==6&&n.tag!==18;){if(n.tag===27&&Er(n.type)||n.flags&2||n.child===null||n.tag===4)continue e;n.child.return=n,n=n.child}if(!(n.flags&2))return n.stateNode}}function Tm(n,s,a){var l=n.tag;if(l===5||l===6)n=n.stateNode,s?(a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a).insertBefore(n,s):(s=a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a,s.appendChild(n),a=a._reactRootContainer,a!=null||s.onclick!==null||(s.onclick=Si));else if(l!==4&&(l===27&&Er(n.type)&&(a=n.stateNode,s=null),n=n.child,n!==null))for(Tm(n,s,a),n=n.sibling;n!==null;)Tm(n,s,a),n=n.sibling}function ch(n,s,a){var l=n.tag;if(l===5||l===6)n=n.stateNode,s?a.insertBefore(n,s):a.appendChild(n);else if(l!==4&&(l===27&&Er(n.type)&&(a=n.stateNode),n=n.child,n!==null))for(ch(n,s,a),n=n.sibling;n!==null;)ch(n,s,a),n=n.sibling}function pv(n){var s=n.stateNode,a=n.memoizedProps;try{for(var l=n.type,d=s.attributes;d.length;)s.removeAttributeNode(d[0]);wn(s,l,a),s[Jt]=n,s[dn]=a}catch(m){gt(n,n.return,m)}}var Os=!1,rn=!1,wm=!1,gv=typeof WeakSet=="function"?WeakSet:Set,mn=null;function MS(n,s){if(n=n.containerInfo,Hm=Rh,n=N_(n),pf(n)){if("selectionStart"in n)var a={start:n.selectionStart,end:n.selectionEnd};else e:{a=(a=n.ownerDocument)&&a.defaultView||window;var l=a.getSelection&&a.getSelection();if(l&&l.rangeCount!==0){a=l.anchorNode;var d=l.anchorOffset,m=l.focusNode;l=l.focusOffset;try{a.nodeType,m.nodeType}catch{a=null;break e}var v=0,C=-1,P=-1,Z=0,ce=0,de=n,te=null;t:for(;;){for(var ae;de!==a||d!==0&&de.nodeType!==3||(C=v+d),de!==m||l!==0&&de.nodeType!==3||(P=v+l),de.nodeType===3&&(v+=de.nodeValue.length),(ae=de.firstChild)!==null;)te=de,de=ae;for(;;){if(de===n)break t;if(te===a&&++Z===d&&(C=v),te===m&&++ce===l&&(P=v),(ae=de.nextSibling)!==null)break;de=te,te=de.parentNode}de=ae}a=C===-1||P===-1?null:{start:C,end:P}}else a=null}a=a||{start:0,end:0}}else a=null;for(Fm={focusedElem:n,selectionRange:a},Rh=!1,mn=s;mn!==null;)if(s=mn,n=s.child,(s.subtreeFlags&1028)!==0&&n!==null)n.return=s,mn=n;else for(;mn!==null;){switch(s=mn,m=s.alternate,n=s.flags,s.tag){case 0:if((n&4)!==0&&(n=s.updateQueue,n=n!==null?n.events:null,n!==null))for(a=0;a<n.length;a++)d=n[a],d.ref.impl=d.nextImpl;break;case 11:case 15:break;case 1:if((n&1024)!==0&&m!==null){n=void 0,a=s,d=m.memoizedProps,m=m.memoizedState,l=a.stateNode;try{var Ce=Ca(a.type,d);n=l.getSnapshotBeforeUpdate(Ce,m),l.__reactInternalSnapshotBeforeUpdate=n}catch(ke){gt(a,a.return,ke)}}break;case 3:if((n&1024)!==0){if(n=s.stateNode.containerInfo,a=n.nodeType,a===9)Ym(n);else if(a===1)switch(n.nodeName){case"HEAD":case"HTML":case"BODY":Ym(n);break;default:n.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((n&1024)!==0)throw Error(r(163))}if(n=s.sibling,n!==null){n.return=s.return,mn=n;break}mn=s.return}}function _v(n,s,a){var l=a.flags;switch(a.tag){case 0:case 11:case 15:js(n,a),l&4&&oc(5,a);break;case 1:if(js(n,a),l&4)if(n=a.stateNode,s===null)try{n.componentDidMount()}catch(v){gt(a,a.return,v)}else{var d=Ca(a.type,s.memoizedProps);s=s.memoizedState;try{n.componentDidUpdate(d,s,n.__reactInternalSnapshotBeforeUpdate)}catch(v){gt(a,a.return,v)}}l&64&&hv(a),l&512&&lc(a,a.return);break;case 3:if(js(n,a),l&64&&(n=a.updateQueue,n!==null)){if(s=null,a.child!==null)switch(a.child.tag){case 27:case 5:s=a.child.stateNode;break;case 1:s=a.child.stateNode}try{ty(n,s)}catch(v){gt(a,a.return,v)}}break;case 27:s===null&&l&4&&pv(a);case 26:case 5:js(n,a),s===null&&l&4&&fv(a),l&512&&lc(a,a.return);break;case 12:js(n,a);break;case 31:js(n,a),l&4&&bv(n,a);break;case 13:js(n,a),l&4&&Tv(n,a),l&64&&(n=a.memoizedState,n!==null&&(n=n.dehydrated,n!==null&&(a=zS.bind(null,a),oA(n,a))));break;case 22:if(l=a.memoizedState!==null||Os,!l){s=s!==null&&s.memoizedState!==null||rn,d=Os;var m=rn;Os=l,(rn=s)&&!m?Ls(n,a,(a.subtreeFlags&8772)!==0):js(n,a),Os=d,rn=m}break;case 30:break;default:js(n,a)}}function yv(n){var s=n.alternate;s!==null&&(n.alternate=null,yv(s)),n.child=null,n.deletions=null,n.sibling=null,n.tag===5&&(s=n.stateNode,s!==null&&io(s)),n.stateNode=null,n.return=null,n.dependencies=null,n.memoizedProps=null,n.memoizedState=null,n.pendingProps=null,n.stateNode=null,n.updateQueue=null}var Dt=null,Vn=!1;function ks(n,s,a){for(a=a.child;a!==null;)vv(n,s,a),a=a.sibling}function vv(n,s,a){if(_n&&typeof _n.onCommitFiberUnmount=="function")try{_n.onCommitFiberUnmount(bi,a)}catch{}switch(a.tag){case 26:rn||is(a,s),ks(n,s,a),a.memoizedState?a.memoizedState.count--:a.stateNode&&(a=a.stateNode,a.parentNode.removeChild(a));break;case 27:rn||is(a,s);var l=Dt,d=Vn;Er(a.type)&&(Dt=a.stateNode,Vn=!1),ks(n,s,a),_c(a.stateNode),Dt=l,Vn=d;break;case 5:rn||is(a,s);case 6:if(l=Dt,d=Vn,Dt=null,ks(n,s,a),Dt=l,Vn=d,Dt!==null)if(Vn)try{(Dt.nodeType===9?Dt.body:Dt.nodeName==="HTML"?Dt.ownerDocument.body:Dt).removeChild(a.stateNode)}catch(m){gt(a,s,m)}else try{Dt.removeChild(a.stateNode)}catch(m){gt(a,s,m)}break;case 18:Dt!==null&&(Vn?(n=Dt,h1(n.nodeType===9?n.body:n.nodeName==="HTML"?n.ownerDocument.body:n,a.stateNode),qo(n)):h1(Dt,a.stateNode));break;case 4:l=Dt,d=Vn,Dt=a.stateNode.containerInfo,Vn=!0,ks(n,s,a),Dt=l,Vn=d;break;case 0:case 11:case 14:case 15:gr(2,a,s),rn||gr(4,a,s),ks(n,s,a);break;case 1:rn||(is(a,s),l=a.stateNode,typeof l.componentWillUnmount=="function"&&dv(a,s,l)),ks(n,s,a);break;case 21:ks(n,s,a);break;case 22:rn=(l=rn)||a.memoizedState!==null,ks(n,s,a),rn=l;break;default:ks(n,s,a)}}function bv(n,s){if(s.memoizedState===null&&(n=s.alternate,n!==null&&(n=n.memoizedState,n!==null))){n=n.dehydrated;try{qo(n)}catch(a){gt(s,s.return,a)}}}function Tv(n,s){if(s.memoizedState===null&&(n=s.alternate,n!==null&&(n=n.memoizedState,n!==null&&(n=n.dehydrated,n!==null))))try{qo(n)}catch(a){gt(s,s.return,a)}}function OS(n){switch(n.tag){case 31:case 13:case 19:var s=n.stateNode;return s===null&&(s=n.stateNode=new gv),s;case 22:return n=n.stateNode,s=n._retryCache,s===null&&(s=n._retryCache=new gv),s;default:throw Error(r(435,n.tag))}}function uh(n,s){var a=OS(n);s.forEach(function(l){if(!a.has(l)){a.add(l);var d=qS.bind(null,n,l);l.then(d,d)}})}function Bn(n,s){var a=s.deletions;if(a!==null)for(var l=0;l<a.length;l++){var d=a[l],m=n,v=s,C=v;e:for(;C!==null;){switch(C.tag){case 27:if(Er(C.type)){Dt=C.stateNode,Vn=!1;break e}break;case 5:Dt=C.stateNode,Vn=!1;break e;case 3:case 4:Dt=C.stateNode.containerInfo,Vn=!0;break e}C=C.return}if(Dt===null)throw Error(r(160));vv(m,v,d),Dt=null,Vn=!1,m=d.alternate,m!==null&&(m.return=null),d.return=null}if(s.subtreeFlags&13886)for(s=s.child;s!==null;)wv(s,n),s=s.sibling}var Ri=null;function wv(n,s){var a=n.alternate,l=n.flags;switch(n.tag){case 0:case 11:case 14:case 15:Bn(s,n),Un(n),l&4&&(gr(3,n,n.return),oc(3,n),gr(5,n,n.return));break;case 1:Bn(s,n),Un(n),l&512&&(rn||a===null||is(a,a.return)),l&64&&Os&&(n=n.updateQueue,n!==null&&(l=n.callbacks,l!==null&&(a=n.shared.hiddenCallbacks,n.shared.hiddenCallbacks=a===null?l:a.concat(l))));break;case 26:var d=Ri;if(Bn(s,n),Un(n),l&512&&(rn||a===null||is(a,a.return)),l&4){var m=a!==null?a.memoizedState:null;if(l=n.memoizedState,a===null)if(l===null)if(n.stateNode===null){e:{l=n.type,a=n.memoizedProps,d=d.ownerDocument||d;t:switch(l){case"title":m=d.getElementsByTagName("title")[0],(!m||m[Hi]||m[Jt]||m.namespaceURI==="http://www.w3.org/2000/svg"||m.hasAttribute("itemprop"))&&(m=d.createElement(l),d.head.insertBefore(m,d.querySelector("head > title"))),wn(m,l,a),m[Jt]=n,Zt(m),l=m;break e;case"link":var v=w1("link","href",d).get(l+(a.href||""));if(v){for(var C=0;C<v.length;C++)if(m=v[C],m.getAttribute("href")===(a.href==null||a.href===""?null:a.href)&&m.getAttribute("rel")===(a.rel==null?null:a.rel)&&m.getAttribute("title")===(a.title==null?null:a.title)&&m.getAttribute("crossorigin")===(a.crossOrigin==null?null:a.crossOrigin)){v.splice(C,1);break t}}m=d.createElement(l),wn(m,l,a),d.head.appendChild(m);break;case"meta":if(v=w1("meta","content",d).get(l+(a.content||""))){for(C=0;C<v.length;C++)if(m=v[C],m.getAttribute("content")===(a.content==null?null:""+a.content)&&m.getAttribute("name")===(a.name==null?null:a.name)&&m.getAttribute("property")===(a.property==null?null:a.property)&&m.getAttribute("http-equiv")===(a.httpEquiv==null?null:a.httpEquiv)&&m.getAttribute("charset")===(a.charSet==null?null:a.charSet)){v.splice(C,1);break t}}m=d.createElement(l),wn(m,l,a),d.head.appendChild(m);break;default:throw Error(r(468,l))}m[Jt]=n,Zt(m),l=m}n.stateNode=l}else E1(d,n.type,n.stateNode);else n.stateNode=T1(d,l,n.memoizedProps);else m!==l?(m===null?a.stateNode!==null&&(a=a.stateNode,a.parentNode.removeChild(a)):m.count--,l===null?E1(d,n.type,n.stateNode):T1(d,l,n.memoizedProps)):l===null&&n.stateNode!==null&&vm(n,n.memoizedProps,a.memoizedProps)}break;case 27:Bn(s,n),Un(n),l&512&&(rn||a===null||is(a,a.return)),a!==null&&l&4&&vm(n,n.memoizedProps,a.memoizedProps);break;case 5:if(Bn(s,n),Un(n),l&512&&(rn||a===null||is(a,a.return)),n.flags&32){d=n.stateNode;try{Pn(d,"")}catch(Ce){gt(n,n.return,Ce)}}l&4&&n.stateNode!=null&&(d=n.memoizedProps,vm(n,d,a!==null?a.memoizedProps:d)),l&1024&&(wm=!0);break;case 6:if(Bn(s,n),Un(n),l&4){if(n.stateNode===null)throw Error(r(162));l=n.memoizedProps,a=n.stateNode;try{a.nodeValue=l}catch(Ce){gt(n,n.return,Ce)}}break;case 3:if(Ih=null,d=Ri,Ri=Sh(s.containerInfo),Bn(s,n),Ri=d,Un(n),l&4&&a!==null&&a.memoizedState.isDehydrated)try{qo(s.containerInfo)}catch(Ce){gt(n,n.return,Ce)}wm&&(wm=!1,Ev(n));break;case 4:l=Ri,Ri=Sh(n.stateNode.containerInfo),Bn(s,n),Un(n),Ri=l;break;case 12:Bn(s,n),Un(n);break;case 31:Bn(s,n),Un(n),l&4&&(l=n.updateQueue,l!==null&&(n.updateQueue=null,uh(n,l)));break;case 13:Bn(s,n),Un(n),n.child.flags&8192&&n.memoizedState!==null!=(a!==null&&a.memoizedState!==null)&&(dh=Mn()),l&4&&(l=n.updateQueue,l!==null&&(n.updateQueue=null,uh(n,l)));break;case 22:d=n.memoizedState!==null;var P=a!==null&&a.memoizedState!==null,Z=Os,ce=rn;if(Os=Z||d,rn=ce||P,Bn(s,n),rn=ce,Os=Z,Un(n),l&8192)e:for(s=n.stateNode,s._visibility=d?s._visibility&-2:s._visibility|1,d&&(a===null||P||Os||rn||Na(n)),a=null,s=n;;){if(s.tag===5||s.tag===26){if(a===null){P=a=s;try{if(m=P.stateNode,d)v=m.style,typeof v.setProperty=="function"?v.setProperty("display","none","important"):v.display="none";else{C=P.stateNode;var de=P.memoizedProps.style,te=de!=null&&de.hasOwnProperty("display")?de.display:null;C.style.display=te==null||typeof te=="boolean"?"":(""+te).trim()}}catch(Ce){gt(P,P.return,Ce)}}}else if(s.tag===6){if(a===null){P=s;try{P.stateNode.nodeValue=d?"":P.memoizedProps}catch(Ce){gt(P,P.return,Ce)}}}else if(s.tag===18){if(a===null){P=s;try{var ae=P.stateNode;d?d1(ae,!0):d1(P.stateNode,!1)}catch(Ce){gt(P,P.return,Ce)}}}else if((s.tag!==22&&s.tag!==23||s.memoizedState===null||s===n)&&s.child!==null){s.child.return=s,s=s.child;continue}if(s===n)break e;for(;s.sibling===null;){if(s.return===null||s.return===n)break e;a===s&&(a=null),s=s.return}a===s&&(a=null),s.sibling.return=s.return,s=s.sibling}l&4&&(l=n.updateQueue,l!==null&&(a=l.retryQueue,a!==null&&(l.retryQueue=null,uh(n,a))));break;case 19:Bn(s,n),Un(n),l&4&&(l=n.updateQueue,l!==null&&(n.updateQueue=null,uh(n,l)));break;case 30:break;case 21:break;default:Bn(s,n),Un(n)}}function Un(n){var s=n.flags;if(s&2){try{for(var a,l=n.return;l!==null;){if(mv(l)){a=l;break}l=l.return}if(a==null)throw Error(r(160));switch(a.tag){case 27:var d=a.stateNode,m=bm(n);ch(n,m,d);break;case 5:var v=a.stateNode;a.flags&32&&(Pn(v,""),a.flags&=-33);var C=bm(n);ch(n,C,v);break;case 3:case 4:var P=a.stateNode.containerInfo,Z=bm(n);Tm(n,Z,P);break;default:throw Error(r(161))}}catch(ce){gt(n,n.return,ce)}n.flags&=-3}s&4096&&(n.flags&=-4097)}function Ev(n){if(n.subtreeFlags&1024)for(n=n.child;n!==null;){var s=n;Ev(s),s.tag===5&&s.flags&1024&&s.stateNode.reset(),n=n.sibling}}function js(n,s){if(s.subtreeFlags&8772)for(s=s.child;s!==null;)_v(n,s.alternate,s),s=s.sibling}function Na(n){for(n=n.child;n!==null;){var s=n;switch(s.tag){case 0:case 11:case 14:case 15:gr(4,s,s.return),Na(s);break;case 1:is(s,s.return);var a=s.stateNode;typeof a.componentWillUnmount=="function"&&dv(s,s.return,a),Na(s);break;case 27:_c(s.stateNode);case 26:case 5:is(s,s.return),Na(s);break;case 22:s.memoizedState===null&&Na(s);break;case 30:Na(s);break;default:Na(s)}n=n.sibling}}function Ls(n,s,a){for(a=a&&(s.subtreeFlags&8772)!==0,s=s.child;s!==null;){var l=s.alternate,d=n,m=s,v=m.flags;switch(m.tag){case 0:case 11:case 15:Ls(d,m,a),oc(4,m);break;case 1:if(Ls(d,m,a),l=m,d=l.stateNode,typeof d.componentDidMount=="function")try{d.componentDidMount()}catch(Z){gt(l,l.return,Z)}if(l=m,d=l.updateQueue,d!==null){var C=l.stateNode;try{var P=d.shared.hiddenCallbacks;if(P!==null)for(d.shared.hiddenCallbacks=null,d=0;d<P.length;d++)ey(P[d],C)}catch(Z){gt(l,l.return,Z)}}a&&v&64&&hv(m),lc(m,m.return);break;case 27:pv(m);case 26:case 5:Ls(d,m,a),a&&l===null&&v&4&&fv(m),lc(m,m.return);break;case 12:Ls(d,m,a);break;case 31:Ls(d,m,a),a&&v&4&&bv(d,m);break;case 13:Ls(d,m,a),a&&v&4&&Tv(d,m);break;case 22:m.memoizedState===null&&Ls(d,m,a),lc(m,m.return);break;case 30:break;default:Ls(d,m,a)}s=s.sibling}}function Em(n,s){var a=null;n!==null&&n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(a=n.memoizedState.cachePool.pool),n=null,s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(n=s.memoizedState.cachePool.pool),n!==a&&(n!=null&&n.refCount++,a!=null&&Ql(a))}function Sm(n,s){n=null,s.alternate!==null&&(n=s.alternate.memoizedState.cache),s=s.memoizedState.cache,s!==n&&(s.refCount++,n!=null&&Ql(n))}function Di(n,s,a,l){if(s.subtreeFlags&10256)for(s=s.child;s!==null;)Sv(n,s,a,l),s=s.sibling}function Sv(n,s,a,l){var d=s.flags;switch(s.tag){case 0:case 11:case 15:Di(n,s,a,l),d&2048&&oc(9,s);break;case 1:Di(n,s,a,l);break;case 3:Di(n,s,a,l),d&2048&&(n=null,s.alternate!==null&&(n=s.alternate.memoizedState.cache),s=s.memoizedState.cache,s!==n&&(s.refCount++,n!=null&&Ql(n)));break;case 12:if(d&2048){Di(n,s,a,l),n=s.stateNode;try{var m=s.memoizedProps,v=m.id,C=m.onPostCommit;typeof C=="function"&&C(v,s.alternate===null?"mount":"update",n.passiveEffectDuration,-0)}catch(P){gt(s,s.return,P)}}else Di(n,s,a,l);break;case 31:Di(n,s,a,l);break;case 13:Di(n,s,a,l);break;case 23:break;case 22:m=s.stateNode,v=s.alternate,s.memoizedState!==null?m._visibility&2?Di(n,s,a,l):cc(n,s):m._visibility&2?Di(n,s,a,l):(m._visibility|=2,Do(n,s,a,l,(s.subtreeFlags&10256)!==0||!1)),d&2048&&Em(v,s);break;case 24:Di(n,s,a,l),d&2048&&Sm(s.alternate,s);break;default:Di(n,s,a,l)}}function Do(n,s,a,l,d){for(d=d&&((s.subtreeFlags&10256)!==0||!1),s=s.child;s!==null;){var m=n,v=s,C=a,P=l,Z=v.flags;switch(v.tag){case 0:case 11:case 15:Do(m,v,C,P,d),oc(8,v);break;case 23:break;case 22:var ce=v.stateNode;v.memoizedState!==null?ce._visibility&2?Do(m,v,C,P,d):cc(m,v):(ce._visibility|=2,Do(m,v,C,P,d)),d&&Z&2048&&Em(v.alternate,v);break;case 24:Do(m,v,C,P,d),d&&Z&2048&&Sm(v.alternate,v);break;default:Do(m,v,C,P,d)}s=s.sibling}}function cc(n,s){if(s.subtreeFlags&10256)for(s=s.child;s!==null;){var a=n,l=s,d=l.flags;switch(l.tag){case 22:cc(a,l),d&2048&&Em(l.alternate,l);break;case 24:cc(a,l),d&2048&&Sm(l.alternate,l);break;default:cc(a,l)}s=s.sibling}}var uc=8192;function Mo(n,s,a){if(n.subtreeFlags&uc)for(n=n.child;n!==null;)Av(n,s,a),n=n.sibling}function Av(n,s,a){switch(n.tag){case 26:Mo(n,s,a),n.flags&uc&&n.memoizedState!==null&&vA(a,Ri,n.memoizedState,n.memoizedProps);break;case 5:Mo(n,s,a);break;case 3:case 4:var l=Ri;Ri=Sh(n.stateNode.containerInfo),Mo(n,s,a),Ri=l;break;case 22:n.memoizedState===null&&(l=n.alternate,l!==null&&l.memoizedState!==null?(l=uc,uc=16777216,Mo(n,s,a),uc=l):Mo(n,s,a));break;default:Mo(n,s,a)}}function Iv(n){var s=n.alternate;if(s!==null&&(n=s.child,n!==null)){s.child=null;do s=n.sibling,n.sibling=null,n=s;while(n!==null)}}function hc(n){var s=n.deletions;if((n.flags&16)!==0){if(s!==null)for(var a=0;a<s.length;a++){var l=s[a];mn=l,Nv(l,n)}Iv(n)}if(n.subtreeFlags&10256)for(n=n.child;n!==null;)Cv(n),n=n.sibling}function Cv(n){switch(n.tag){case 0:case 11:case 15:hc(n),n.flags&2048&&gr(9,n,n.return);break;case 3:hc(n);break;case 12:hc(n);break;case 22:var s=n.stateNode;n.memoizedState!==null&&s._visibility&2&&(n.return===null||n.return.tag!==13)?(s._visibility&=-3,hh(n)):hc(n);break;default:hc(n)}}function hh(n){var s=n.deletions;if((n.flags&16)!==0){if(s!==null)for(var a=0;a<s.length;a++){var l=s[a];mn=l,Nv(l,n)}Iv(n)}for(n=n.child;n!==null;){switch(s=n,s.tag){case 0:case 11:case 15:gr(8,s,s.return),hh(s);break;case 22:a=s.stateNode,a._visibility&2&&(a._visibility&=-3,hh(s));break;default:hh(s)}n=n.sibling}}function Nv(n,s){for(;mn!==null;){var a=mn;switch(a.tag){case 0:case 11:case 15:gr(8,a,s);break;case 23:case 22:if(a.memoizedState!==null&&a.memoizedState.cachePool!==null){var l=a.memoizedState.cachePool.pool;l!=null&&l.refCount++}break;case 24:Ql(a.memoizedState.cache)}if(l=a.child,l!==null)l.return=a,mn=l;else e:for(a=n;mn!==null;){l=mn;var d=l.sibling,m=l.return;if(yv(l),l===a){mn=null;break e}if(d!==null){d.return=m,mn=d;break e}mn=m}}}var kS={getCacheForType:function(n){var s=bn(tn),a=s.data.get(n);return a===void 0&&(a=n(),s.data.set(n,a)),a},cacheSignal:function(){return bn(tn).controller.signal}},jS=typeof WeakMap=="function"?WeakMap:Map,ht=0,wt=null,Qe=null,We=0,pt=0,Jn=null,_r=!1,Oo=!1,Am=!1,Ps=0,Pt=0,yr=0,xa=0,Im=0,Zn=0,ko=0,dc=null,zn=null,Cm=!1,dh=0,xv=0,fh=1/0,mh=null,vr=null,un=0,br=null,jo=null,Vs=0,Nm=0,xm=null,Rv=null,fc=0,Rm=null;function ei(){return(ht&2)!==0&&We!==0?We&-We:V.T!==null?Lm():pu()}function Dv(){if(Zn===0)if((We&536870912)===0||it){var n=na;na<<=1,(na&3932160)===0&&(na=262144),Zn=n}else Zn=536870912;return n=Xn.current,n!==null&&(n.flags|=32),Zn}function qn(n,s,a){(n===wt&&(pt===2||pt===9)||n.cancelPendingCommit!==null)&&(Lo(n,0),Tr(n,We,Zn,!1)),ia(n,a),((ht&2)===0||n!==wt)&&(n===wt&&((ht&2)===0&&(xa|=a),Pt===4&&Tr(n,We,Zn,!1)),ss(n))}function Mv(n,s,a){if((ht&6)!==0)throw Error(r(327));var l=!a&&(s&127)===0&&(s&n.expiredLanes)===0||Ti(n,s),d=l?VS(n,s):Mm(n,s,!0),m=l;do{if(d===0){Oo&&!l&&Tr(n,s,0,!1);break}else{if(a=n.current.alternate,m&&!LS(a)){d=Mm(n,s,!1),m=!1;continue}if(d===2){if(m=s,n.errorRecoveryDisabledLanes&m)var v=0;else v=n.pendingLanes&-536870913,v=v!==0?v:v&536870912?536870912:0;if(v!==0){s=v;e:{var C=n;d=dc;var P=C.current.memoizedState.isDehydrated;if(P&&(Lo(C,v).flags|=256),v=Mm(C,v,!1),v!==2){if(Am&&!P){C.errorRecoveryDisabledLanes|=m,xa|=m,d=4;break e}m=zn,zn=d,m!==null&&(zn===null?zn=m:zn.push.apply(zn,m))}d=v}if(m=!1,d!==2)continue}}if(d===1){Lo(n,0),Tr(n,s,0,!0);break}e:{switch(l=n,m=d,m){case 0:case 1:throw Error(r(345));case 4:if((s&4194048)!==s)break;case 6:Tr(l,s,Zn,!_r);break e;case 2:zn=null;break;case 3:case 5:break;default:throw Error(r(329))}if((s&62914560)===s&&(d=dh+300-Mn(),10<d)){if(Tr(l,s,Zn,!_r),Ui(l,0,!0)!==0)break e;Vs=s,l.timeoutHandle=c1(Ov.bind(null,l,a,zn,mh,Cm,s,Zn,xa,ko,_r,m,"Throttled",-0,0),d);break e}Ov(l,a,zn,mh,Cm,s,Zn,xa,ko,_r,m,null,-0,0)}}break}while(!0);ss(n)}function Ov(n,s,a,l,d,m,v,C,P,Z,ce,de,te,ae){if(n.timeoutHandle=-1,de=s.subtreeFlags,de&8192||(de&16785408)===16785408){de={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:Si},Av(s,m,de);var Ce=(m&62914560)===m?dh-Mn():(m&4194048)===m?xv-Mn():0;if(Ce=bA(de,Ce),Ce!==null){Vs=m,n.cancelPendingCommit=Ce(zv.bind(null,n,s,m,a,l,d,v,C,P,ce,de,null,te,ae)),Tr(n,m,v,!Z);return}}zv(n,s,m,a,l,d,v,C,P)}function LS(n){for(var s=n;;){var a=s.tag;if((a===0||a===11||a===15)&&s.flags&16384&&(a=s.updateQueue,a!==null&&(a=a.stores,a!==null)))for(var l=0;l<a.length;l++){var d=a[l],m=d.getSnapshot;d=d.value;try{if(!Qn(m(),d))return!1}catch{return!1}}if(a=s.child,s.subtreeFlags&16384&&a!==null)a.return=s,s=a;else{if(s===n)break;for(;s.sibling===null;){if(s.return===null||s.return===n)return!0;s=s.return}s.sibling.return=s.return,s=s.sibling}}return!0}function Tr(n,s,a,l){s&=~Im,s&=~xa,n.suspendedLanes|=s,n.pingedLanes&=~s,l&&(n.warmLanes|=s),l=n.expirationTimes;for(var d=s;0<d;){var m=31-qt(d),v=1<<m;l[m]=-1,d&=~v}a!==0&&sa(n,a,s)}function ph(){return(ht&6)===0?(mc(0),!1):!0}function Dm(){if(Qe!==null){if(pt===0)var n=Qe.return;else n=Qe,Cs=ba=null,Yf(n),Io=null,Xl=0,n=Qe;for(;n!==null;)uv(n.alternate,n),n=n.return;Qe=null}}function Lo(n,s){var a=n.timeoutHandle;a!==-1&&(n.timeoutHandle=-1,nA(a)),a=n.cancelPendingCommit,a!==null&&(n.cancelPendingCommit=null,a()),Vs=0,Dm(),wt=n,Qe=a=As(n.current,null),We=s,pt=0,Jn=null,_r=!1,Oo=Ti(n,s),Am=!1,ko=Zn=Im=xa=yr=Pt=0,zn=dc=null,Cm=!1,(s&8)!==0&&(s|=s&32);var l=n.entangledLanes;if(l!==0)for(n=n.entanglements,l&=s;0<l;){var d=31-qt(l),m=1<<d;s|=n[d],l&=~m}return Ps=s,Lu(),a}function kv(n,s){He=null,V.H=sc,s===Ao||s===Fu?(s=X_(),pt=3):s===jf?(s=X_(),pt=4):pt=s===cm?8:s!==null&&typeof s=="object"&&typeof s.then=="function"?6:1,Jn=s,Qe===null&&(Pt=1,sh(n,ci(s,n.current)))}function jv(){var n=Xn.current;return n===null?!0:(We&4194048)===We?fi===null:(We&62914560)===We||(We&536870912)!==0?n===fi:!1}function Lv(){var n=V.H;return V.H=sc,n===null?sc:n}function Pv(){var n=V.A;return V.A=kS,n}function gh(){Pt=4,_r||(We&4194048)!==We&&Xn.current!==null||(Oo=!0),(yr&134217727)===0&&(xa&134217727)===0||wt===null||Tr(wt,We,Zn,!1)}function Mm(n,s,a){var l=ht;ht|=2;var d=Lv(),m=Pv();(wt!==n||We!==s)&&(mh=null,Lo(n,s)),s=!1;var v=Pt;e:do try{if(pt!==0&&Qe!==null){var C=Qe,P=Jn;switch(pt){case 8:Dm(),v=6;break e;case 3:case 2:case 9:case 6:Xn.current===null&&(s=!0);var Z=pt;if(pt=0,Jn=null,Po(n,C,P,Z),a&&Oo){v=0;break e}break;default:Z=pt,pt=0,Jn=null,Po(n,C,P,Z)}}PS(),v=Pt;break}catch(ce){kv(n,ce)}while(!0);return s&&n.shellSuspendCounter++,Cs=ba=null,ht=l,V.H=d,V.A=m,Qe===null&&(wt=null,We=0,Lu()),v}function PS(){for(;Qe!==null;)Vv(Qe)}function VS(n,s){var a=ht;ht|=2;var l=Lv(),d=Pv();wt!==n||We!==s?(mh=null,fh=Mn()+500,Lo(n,s)):Oo=Ti(n,s);e:do try{if(pt!==0&&Qe!==null){s=Qe;var m=Jn;t:switch(pt){case 1:pt=0,Jn=null,Po(n,s,m,1);break;case 2:case 9:if(Q_(m)){pt=0,Jn=null,Bv(s);break}s=function(){pt!==2&&pt!==9||wt!==n||(pt=7),ss(n)},m.then(s,s);break e;case 3:pt=7;break e;case 4:pt=5;break e;case 7:Q_(m)?(pt=0,Jn=null,Bv(s)):(pt=0,Jn=null,Po(n,s,m,7));break;case 5:var v=null;switch(Qe.tag){case 26:v=Qe.memoizedState;case 5:case 27:var C=Qe;if(v?S1(v):C.stateNode.complete){pt=0,Jn=null;var P=C.sibling;if(P!==null)Qe=P;else{var Z=C.return;Z!==null?(Qe=Z,_h(Z)):Qe=null}break t}}pt=0,Jn=null,Po(n,s,m,5);break;case 6:pt=0,Jn=null,Po(n,s,m,6);break;case 8:Dm(),Pt=6;break e;default:throw Error(r(462))}}BS();break}catch(ce){kv(n,ce)}while(!0);return Cs=ba=null,V.H=l,V.A=d,ht=a,Qe!==null?0:(wt=null,We=0,Lu(),Pt)}function BS(){for(;Qe!==null&&!lf();)Vv(Qe)}function Vv(n){var s=lv(n.alternate,n,Ps);n.memoizedProps=n.pendingProps,s===null?_h(n):Qe=s}function Bv(n){var s=n,a=s.alternate;switch(s.tag){case 15:case 0:s=nv(a,s,s.pendingProps,s.type,void 0,We);break;case 11:s=nv(a,s,s.pendingProps,s.type.render,s.ref,We);break;case 5:Yf(s);default:uv(a,s),s=Qe=P_(s,Ps),s=lv(a,s,Ps)}n.memoizedProps=n.pendingProps,s===null?_h(n):Qe=s}function Po(n,s,a,l){Cs=ba=null,Yf(s),Io=null,Xl=0;var d=s.return;try{if(CS(n,d,s,a,We)){Pt=1,sh(n,ci(a,n.current)),Qe=null;return}}catch(m){if(d!==null)throw Qe=d,m;Pt=1,sh(n,ci(a,n.current)),Qe=null;return}s.flags&32768?(it||l===1?n=!0:Oo||(We&536870912)!==0?n=!1:(_r=n=!0,(l===2||l===9||l===3||l===6)&&(l=Xn.current,l!==null&&l.tag===13&&(l.flags|=16384))),Uv(s,n)):_h(s)}function _h(n){var s=n;do{if((s.flags&32768)!==0){Uv(s,_r);return}n=s.return;var a=RS(s.alternate,s,Ps);if(a!==null){Qe=a;return}if(s=s.sibling,s!==null){Qe=s;return}Qe=s=n}while(s!==null);Pt===0&&(Pt=5)}function Uv(n,s){do{var a=DS(n.alternate,n);if(a!==null){a.flags&=32767,Qe=a;return}if(a=n.return,a!==null&&(a.flags|=32768,a.subtreeFlags=0,a.deletions=null),!s&&(n=n.sibling,n!==null)){Qe=n;return}Qe=n=a}while(n!==null);Pt=6,Qe=null}function zv(n,s,a,l,d,m,v,C,P){n.cancelPendingCommit=null;do yh();while(un!==0);if((ht&6)!==0)throw Error(r(327));if(s!==null){if(s===n.current)throw Error(r(177));if(m=s.lanes|s.childLanes,m|=bf,hf(n,a,m,v,C,P),n===wt&&(Qe=wt=null,We=0),jo=s,br=n,Vs=a,Nm=m,xm=d,Rv=l,(s.subtreeFlags&10256)!==0||(s.flags&10256)!==0?(n.callbackNode=null,n.callbackPriority=0,HS(Ws,function(){return Gv(),null})):(n.callbackNode=null,n.callbackPriority=0),l=(s.flags&13878)!==0,(s.subtreeFlags&13878)!==0||l){l=V.T,V.T=null,d=X.p,X.p=2,v=ht,ht|=4;try{MS(n,s,a)}finally{ht=v,X.p=d,V.T=l}}un=1,qv(),Hv(),Fv()}}function qv(){if(un===1){un=0;var n=br,s=jo,a=(s.flags&13878)!==0;if((s.subtreeFlags&13878)!==0||a){a=V.T,V.T=null;var l=X.p;X.p=2;var d=ht;ht|=4;try{wv(s,n);var m=Fm,v=N_(n.containerInfo),C=m.focusedElem,P=m.selectionRange;if(v!==C&&C&&C.ownerDocument&&C_(C.ownerDocument.documentElement,C)){if(P!==null&&pf(C)){var Z=P.start,ce=P.end;if(ce===void 0&&(ce=Z),"selectionStart"in C)C.selectionStart=Z,C.selectionEnd=Math.min(ce,C.value.length);else{var de=C.ownerDocument||document,te=de&&de.defaultView||window;if(te.getSelection){var ae=te.getSelection(),Ce=C.textContent.length,ke=Math.min(P.start,Ce),Tt=P.end===void 0?ke:Math.min(P.end,Ce);!ae.extend&&ke>Tt&&(v=Tt,Tt=ke,ke=v);var $=I_(C,ke),U=I_(C,Tt);if($&&U&&(ae.rangeCount!==1||ae.anchorNode!==$.node||ae.anchorOffset!==$.offset||ae.focusNode!==U.node||ae.focusOffset!==U.offset)){var J=de.createRange();J.setStart($.node,$.offset),ae.removeAllRanges(),ke>Tt?(ae.addRange(J),ae.extend(U.node,U.offset)):(J.setEnd(U.node,U.offset),ae.addRange(J))}}}}for(de=[],ae=C;ae=ae.parentNode;)ae.nodeType===1&&de.push({element:ae,left:ae.scrollLeft,top:ae.scrollTop});for(typeof C.focus=="function"&&C.focus(),C=0;C<de.length;C++){var ue=de[C];ue.element.scrollLeft=ue.left,ue.element.scrollTop=ue.top}}Rh=!!Hm,Fm=Hm=null}finally{ht=d,X.p=l,V.T=a}}n.current=s,un=2}}function Hv(){if(un===2){un=0;var n=br,s=jo,a=(s.flags&8772)!==0;if((s.subtreeFlags&8772)!==0||a){a=V.T,V.T=null;var l=X.p;X.p=2;var d=ht;ht|=4;try{_v(n,s.alternate,s)}finally{ht=d,X.p=l,V.T=a}}un=3}}function Fv(){if(un===4||un===3){un=0,lu();var n=br,s=jo,a=Vs,l=Rv;(s.subtreeFlags&10256)!==0||(s.flags&10256)!==0?un=5:(un=0,jo=br=null,$v(n,n.pendingLanes));var d=n.pendingLanes;if(d===0&&(vr=null),Ts(a),s=s.stateNode,_n&&typeof _n.onCommitFiberRoot=="function")try{_n.onCommitFiberRoot(bi,s,void 0,(s.current.flags&128)===128)}catch{}if(l!==null){s=V.T,d=X.p,X.p=2,V.T=null;try{for(var m=n.onRecoverableError,v=0;v<l.length;v++){var C=l[v];m(C.value,{componentStack:C.stack})}}finally{V.T=s,X.p=d}}(Vs&3)!==0&&yh(),ss(n),d=n.pendingLanes,(a&261930)!==0&&(d&42)!==0?n===Rm?fc++:(fc=0,Rm=n):fc=0,mc(0)}}function $v(n,s){(n.pooledCacheLanes&=s)===0&&(s=n.pooledCache,s!=null&&(n.pooledCache=null,Ql(s)))}function yh(){return qv(),Hv(),Fv(),Gv()}function Gv(){if(un!==5)return!1;var n=br,s=Nm;Nm=0;var a=Ts(Vs),l=V.T,d=X.p;try{X.p=32>a?32:a,V.T=null,a=xm,xm=null;var m=br,v=Vs;if(un=0,jo=br=null,Vs=0,(ht&6)!==0)throw Error(r(331));var C=ht;if(ht|=4,Cv(m.current),Sv(m,m.current,v,a),ht=C,mc(0,!1),_n&&typeof _n.onPostCommitFiberRoot=="function")try{_n.onPostCommitFiberRoot(bi,m)}catch{}return!0}finally{X.p=d,V.T=l,$v(n,s)}}function Yv(n,s,a){s=ci(a,s),s=lm(n.stateNode,s,2),n=fr(n,s,2),n!==null&&(ia(n,2),ss(n))}function gt(n,s,a){if(n.tag===3)Yv(n,n,a);else for(;s!==null;){if(s.tag===3){Yv(s,n,a);break}else if(s.tag===1){var l=s.stateNode;if(typeof s.type.getDerivedStateFromError=="function"||typeof l.componentDidCatch=="function"&&(vr===null||!vr.has(l))){n=ci(a,n),a=Qy(2),l=fr(s,a,2),l!==null&&(Ky(a,l,s,n),ia(l,2),ss(l));break}}s=s.return}}function Om(n,s,a){var l=n.pingCache;if(l===null){l=n.pingCache=new jS;var d=new Set;l.set(s,d)}else d=l.get(s),d===void 0&&(d=new Set,l.set(s,d));d.has(a)||(Am=!0,d.add(a),n=US.bind(null,n,s,a),s.then(n,n))}function US(n,s,a){var l=n.pingCache;l!==null&&l.delete(s),n.pingedLanes|=n.suspendedLanes&a,n.warmLanes&=~a,wt===n&&(We&a)===a&&(Pt===4||Pt===3&&(We&62914560)===We&&300>Mn()-dh?(ht&2)===0&&Lo(n,0):Im|=a,ko===We&&(ko=0)),ss(n)}function Qv(n,s){s===0&&(s=mu()),n=_a(n,s),n!==null&&(ia(n,s),ss(n))}function zS(n){var s=n.memoizedState,a=0;s!==null&&(a=s.retryLane),Qv(n,a)}function qS(n,s){var a=0;switch(n.tag){case 31:case 13:var l=n.stateNode,d=n.memoizedState;d!==null&&(a=d.retryLane);break;case 19:l=n.stateNode;break;case 22:l=n.stateNode._retryCache;break;default:throw Error(r(314))}l!==null&&l.delete(s),Qv(n,a)}function HS(n,s){return cn(n,s)}var vh=null,Vo=null,km=!1,bh=!1,jm=!1,wr=0;function ss(n){n!==Vo&&n.next===null&&(Vo===null?vh=Vo=n:Vo=Vo.next=n),bh=!0,km||(km=!0,$S())}function mc(n,s){if(!jm&&bh){jm=!0;do for(var a=!1,l=vh;l!==null;){if(n!==0){var d=l.pendingLanes;if(d===0)var m=0;else{var v=l.suspendedLanes,C=l.pingedLanes;m=(1<<31-qt(42|n)+1)-1,m&=d&~(v&~C),m=m&201326741?m&201326741|1:m?m|2:0}m!==0&&(a=!0,Jv(l,m))}else m=We,m=Ui(l,l===wt?m:0,l.cancelPendingCommit!==null||l.timeoutHandle!==-1),(m&3)===0||Ti(l,m)||(a=!0,Jv(l,m));l=l.next}while(a);jm=!1}}function FS(){Kv()}function Kv(){bh=km=!1;var n=0;wr!==0&&tA()&&(n=wr);for(var s=Mn(),a=null,l=vh;l!==null;){var d=l.next,m=Xv(l,s);m===0?(l.next=null,a===null?vh=d:a.next=d,d===null&&(Vo=a)):(a=l,(n!==0||(m&3)!==0)&&(bh=!0)),l=d}un!==0&&un!==5||mc(n),wr!==0&&(wr=0)}function Xv(n,s){for(var a=n.suspendedLanes,l=n.pingedLanes,d=n.expirationTimes,m=n.pendingLanes&-62914561;0<m;){var v=31-qt(m),C=1<<v,P=d[v];P===-1?((C&a)===0||(C&l)!==0)&&(d[v]=uf(C,s)):P<=s&&(n.expiredLanes|=C),m&=~C}if(s=wt,a=We,a=Ui(n,n===s?a:0,n.cancelPendingCommit!==null||n.timeoutHandle!==-1),l=n.callbackNode,a===0||n===s&&(pt===2||pt===9)||n.cancelPendingCommit!==null)return l!==null&&l!==null&&Xs(l),n.callbackNode=null,n.callbackPriority=0;if((a&3)===0||Ti(n,a)){if(s=a&-a,s===n.callbackPriority)return s;switch(l!==null&&Xs(l),Ts(a)){case 2:case 8:a=Sl;break;case 32:a=Ws;break;case 268435456:a=cu;break;default:a=Ws}return l=Wv.bind(null,n),a=cn(a,l),n.callbackPriority=s,n.callbackNode=a,s}return l!==null&&l!==null&&Xs(l),n.callbackPriority=2,n.callbackNode=null,2}function Wv(n,s){if(un!==0&&un!==5)return n.callbackNode=null,n.callbackPriority=0,null;var a=n.callbackNode;if(yh()&&n.callbackNode!==a)return null;var l=We;return l=Ui(n,n===wt?l:0,n.cancelPendingCommit!==null||n.timeoutHandle!==-1),l===0?null:(Mv(n,l,s),Xv(n,Mn()),n.callbackNode!=null&&n.callbackNode===a?Wv.bind(null,n):null)}function Jv(n,s){if(yh())return null;Mv(n,s,!0)}function $S(){iA(function(){(ht&6)!==0?cn(El,FS):Kv()})}function Lm(){if(wr===0){var n=Eo;n===0&&(n=Vi,Vi<<=1,(Vi&261888)===0&&(Vi=256)),wr=n}return wr}function Zv(n){return n==null||typeof n=="symbol"||typeof n=="boolean"?null:typeof n=="function"?n:oo(""+n)}function e1(n,s){var a=s.ownerDocument.createElement("input");return a.name=s.name,a.value=s.value,n.id&&a.setAttribute("form",n.id),s.parentNode.insertBefore(a,s),n=new FormData(n),a.parentNode.removeChild(a),n}function GS(n,s,a,l,d){if(s==="submit"&&a&&a.stateNode===d){var m=Zv((d[dn]||null).action),v=l.submitter;v&&(s=(s=v[dn]||null)?Zv(s.formAction):v.getAttribute("formAction"),s!==null&&(m=s,v=null));var C=new Wi("action","action",null,l,d);n.push({event:C,listeners:[{instance:null,listener:function(){if(l.defaultPrevented){if(wr!==0){var P=v?e1(d,v):new FormData(d);nm(a,{pending:!0,data:P,method:d.method,action:m},null,P)}}else typeof m=="function"&&(C.preventDefault(),P=v?e1(d,v):new FormData(d),nm(a,{pending:!0,data:P,method:d.method,action:m},m,P))},currentTarget:d}]})}}for(var Pm=0;Pm<vf.length;Pm++){var Vm=vf[Pm],YS=Vm.toLowerCase(),QS=Vm[0].toUpperCase()+Vm.slice(1);xi(YS,"on"+QS)}xi(D_,"onAnimationEnd"),xi(M_,"onAnimationIteration"),xi(O_,"onAnimationStart"),xi("dblclick","onDoubleClick"),xi("focusin","onFocus"),xi("focusout","onBlur"),xi(uS,"onTransitionRun"),xi(hS,"onTransitionStart"),xi(dS,"onTransitionCancel"),xi(k_,"onTransitionEnd"),Yi("onMouseEnter",["mouseout","mouseover"]),Yi("onMouseLeave",["mouseout","mouseover"]),Yi("onPointerEnter",["pointerout","pointerover"]),Yi("onPointerLeave",["pointerout","pointerover"]),Gi("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Gi("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Gi("onBeforeInput",["compositionend","keypress","textInput","paste"]),Gi("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Gi("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Gi("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var pc="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),KS=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(pc));function t1(n,s){s=(s&4)!==0;for(var a=0;a<n.length;a++){var l=n[a],d=l.event;l=l.listeners;e:{var m=void 0;if(s)for(var v=l.length-1;0<=v;v--){var C=l[v],P=C.instance,Z=C.currentTarget;if(C=C.listener,P!==m&&d.isPropagationStopped())break e;m=C,d.currentTarget=Z;try{m(d)}catch(ce){ju(ce)}d.currentTarget=null,m=P}else for(v=0;v<l.length;v++){if(C=l[v],P=C.instance,Z=C.currentTarget,C=C.listener,P!==m&&d.isPropagationStopped())break e;m=C,d.currentTarget=Z;try{m(d)}catch(ce){ju(ce)}d.currentTarget=null,m=P}}}}function Ke(n,s){var a=s[no];a===void 0&&(a=s[no]=new Set);var l=n+"__bubble";a.has(l)||(n1(s,n,2,!1),a.add(l))}function Bm(n,s,a){var l=0;s&&(l|=4),n1(a,n,l,s)}var Th="_reactListening"+Math.random().toString(36).slice(2);function Um(n){if(!n[Th]){n[Th]=!0,Cl.forEach(function(a){a!=="selectionchange"&&(KS.has(a)||Bm(a,!1,n),Bm(a,!0,n))});var s=n.nodeType===9?n:n.ownerDocument;s===null||s[Th]||(s[Th]=!0,Bm("selectionchange",!1,s))}}function n1(n,s,a,l){switch(D1(s)){case 2:var d=EA;break;case 8:d=SA;break;default:d=tp}a=d.bind(null,s,a,n),d=void 0,!ca||s!=="touchstart"&&s!=="touchmove"&&s!=="wheel"||(d=!0),l?d!==void 0?n.addEventListener(s,a,{capture:!0,passive:d}):n.addEventListener(s,a,!0):d!==void 0?n.addEventListener(s,a,{passive:d}):n.addEventListener(s,a,!1)}function zm(n,s,a,l,d){var m=l;if((s&1)===0&&(s&2)===0&&l!==null)e:for(;;){if(l===null)return;var v=l.tag;if(v===3||v===4){var C=l.stateNode.containerInfo;if(C===d)break;if(v===4)for(v=l.return;v!==null;){var P=v.tag;if((P===3||P===4)&&v.stateNode.containerInfo===d)return;v=v.return}for(;C!==null;){if(v=Fi(C),v===null)return;if(P=v.tag,P===5||P===6||P===26||P===27){l=m=v;continue e}C=C.parentNode}}l=l.return}ir(function(){var Z=m,ce=ri(a),de=[];e:{var te=j_.get(n);if(te!==void 0){var ae=Wi,Ce=n;switch(n){case"keypress":if(ha(a)===0)break e;case"keydown":case"keyup":ae=Mu;break;case"focusin":Ce="focus",ae=fa;break;case"focusout":Ce="blur",ae=fa;break;case"beforeblur":case"afterblur":ae=fa;break;case"click":if(a.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":ae=Ul;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":ae=Eu;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":ae=y;break;case D_:case M_:case O_:ae=Au;break;case k_:ae=x;break;case"scroll":case"scrollend":ae=Bl;break;case"wheel":ae=re;break;case"copy":case"cut":case"paste":ae=Iu;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":ae=Ss;break;case"toggle":case"beforetoggle":ae=qe}var ke=(s&4)!==0,Tt=!ke&&(n==="scroll"||n==="scrollend"),$=ke?te!==null?te+"Capture":null:te;ke=[];for(var U=Z,J;U!==null;){var ue=U;if(J=ue.stateNode,ue=ue.tag,ue!==5&&ue!==26&&ue!==27||J===null||$===null||(ue=Ai(U,$),ue!=null&&ke.push(gc(U,ue,J))),Tt)break;U=U.return}0<ke.length&&(te=new ae(te,Ce,null,a,ce),de.push({event:te,listeners:ke}))}}if((s&7)===0){e:{if(te=n==="mouseover"||n==="pointerover",ae=n==="mouseout"||n==="pointerout",te&&a!==Ll&&(Ce=a.relatedTarget||a.fromElement)&&(Fi(Ce)||Ce[qi]))break e;if((ae||te)&&(te=ce.window===ce?ce:(te=ce.ownerDocument)?te.defaultView||te.parentWindow:window,ae?(Ce=a.relatedTarget||a.toElement,ae=Z,Ce=Ce?Fi(Ce):null,Ce!==null&&(Tt=c(Ce),ke=Ce.tag,Ce!==Tt||ke!==5&&ke!==27&&ke!==6)&&(Ce=null)):(ae=null,Ce=Z),ae!==Ce)){if(ke=Ul,ue="onMouseLeave",$="onMouseEnter",U="mouse",(n==="pointerout"||n==="pointerover")&&(ke=Ss,ue="onPointerLeave",$="onPointerEnter",U="pointer"),Tt=ae==null?te:Gn(ae),J=Ce==null?te:Gn(Ce),te=new ke(ue,U+"leave",ae,a,ce),te.target=Tt,te.relatedTarget=J,ue=null,Fi(ce)===Z&&(ke=new ke($,U+"enter",Ce,a,ce),ke.target=J,ke.relatedTarget=Tt,ue=ke),Tt=ue,ae&&Ce)t:{for(ke=XS,$=ae,U=Ce,J=0,ue=$;ue;ue=ke(ue))J++;ue=0;for(var De=U;De;De=ke(De))ue++;for(;0<J-ue;)$=ke($),J--;for(;0<ue-J;)U=ke(U),ue--;for(;J--;){if($===U||U!==null&&$===U.alternate){ke=$;break t}$=ke($),U=ke(U)}ke=null}else ke=null;ae!==null&&i1(de,te,ae,ke,!1),Ce!==null&&Tt!==null&&i1(de,Tt,Ce,ke,!0)}}e:{if(te=Z?Gn(Z):window,ae=te.nodeName&&te.nodeName.toLowerCase(),ae==="select"||ae==="input"&&te.type==="file")var at=b_;else if(y_(te))if(T_)at=oS;else{at=rS;var xe=sS}else ae=te.nodeName,!ae||ae.toLowerCase()!=="input"||te.type!=="checkbox"&&te.type!=="radio"?Z&&ao(Z.elementType)&&(at=b_):at=aS;if(at&&(at=at(n,Z))){v_(de,at,a,ce);break e}xe&&xe(n,te,Z),n==="focusout"&&Z&&te.type==="number"&&Z.memoizedProps.value!=null&&Ol(te,"number",te.value)}switch(xe=Z?Gn(Z):window,n){case"focusin":(y_(xe)||xe.contentEditable==="true")&&(po=xe,gf=Z,$l=null);break;case"focusout":$l=gf=po=null;break;case"mousedown":_f=!0;break;case"contextmenu":case"mouseup":case"dragend":_f=!1,x_(de,a,ce);break;case"selectionchange":if(cS)break;case"keydown":case"keyup":x_(de,a,ce)}var $e;if(ut)e:{switch(n){case"compositionstart":var Je="onCompositionStart";break e;case"compositionend":Je="onCompositionEnd";break e;case"compositionupdate":Je="onCompositionUpdate";break e}Je=void 0}else mo?ma(n,a)&&(Je="onCompositionEnd"):n==="keydown"&&a.keyCode===229&&(Je="onCompositionStart");Je&&(es&&a.locale!=="ko"&&(mo||Je!=="onCompositionStart"?Je==="onCompositionEnd"&&mo&&($e=Vl()):(Xi=ce,Pl="value"in Xi?Xi.value:Xi.textContent,mo=!0)),xe=wh(Z,Je),0<xe.length&&(Je=new Zi(Je,n,null,a,ce),de.push({event:Je,listeners:xe}),$e?Je.data=$e:($e=fo(a),$e!==null&&(Je.data=$e)))),($e=oi?eS(n,a):tS(n,a))&&(Je=wh(Z,"onBeforeInput"),0<Je.length&&(xe=new Zi("onBeforeInput","beforeinput",null,a,ce),de.push({event:xe,listeners:Je}),xe.data=$e)),GS(de,n,Z,a,ce)}t1(de,s)})}function gc(n,s,a){return{instance:n,listener:s,currentTarget:a}}function wh(n,s){for(var a=s+"Capture",l=[];n!==null;){var d=n,m=d.stateNode;if(d=d.tag,d!==5&&d!==26&&d!==27||m===null||(d=Ai(n,a),d!=null&&l.unshift(gc(n,d,m)),d=Ai(n,s),d!=null&&l.push(gc(n,d,m))),n.tag===3)return l;n=n.return}return[]}function XS(n){if(n===null)return null;do n=n.return;while(n&&n.tag!==5&&n.tag!==27);return n||null}function i1(n,s,a,l,d){for(var m=s._reactName,v=[];a!==null&&a!==l;){var C=a,P=C.alternate,Z=C.stateNode;if(C=C.tag,P!==null&&P===l)break;C!==5&&C!==26&&C!==27||Z===null||(P=Z,d?(Z=Ai(a,m),Z!=null&&v.unshift(gc(a,Z,P))):d||(Z=Ai(a,m),Z!=null&&v.push(gc(a,Z,P)))),a=a.return}v.length!==0&&n.push({event:s,listeners:v})}var WS=/\r\n?/g,JS=/\u0000|\uFFFD/g;function s1(n){return(typeof n=="string"?n:""+n).replace(WS,`
`).replace(JS,"")}function r1(n,s){return s=s1(s),s1(n)===s}function bt(n,s,a,l,d,m){switch(a){case"children":typeof l=="string"?s==="body"||s==="textarea"&&l===""||Pn(n,l):(typeof l=="number"||typeof l=="bigint")&&s!=="body"&&Pn(n,""+l);break;case"className":Yn(n,"class",l);break;case"tabIndex":Yn(n,"tabindex",l);break;case"dir":case"role":case"viewBox":case"width":case"height":Yn(n,a,l);break;case"style":jl(n,l,m);break;case"data":if(s!=="object"){Yn(n,"data",l);break}case"src":case"href":if(l===""&&(s!=="a"||a!=="href")){n.removeAttribute(a);break}if(l==null||typeof l=="function"||typeof l=="symbol"||typeof l=="boolean"){n.removeAttribute(a);break}l=oo(""+l),n.setAttribute(a,l);break;case"action":case"formAction":if(typeof l=="function"){n.setAttribute(a,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof m=="function"&&(a==="formAction"?(s!=="input"&&bt(n,s,"name",d.name,d,null),bt(n,s,"formEncType",d.formEncType,d,null),bt(n,s,"formMethod",d.formMethod,d,null),bt(n,s,"formTarget",d.formTarget,d,null)):(bt(n,s,"encType",d.encType,d,null),bt(n,s,"method",d.method,d,null),bt(n,s,"target",d.target,d,null)));if(l==null||typeof l=="symbol"||typeof l=="boolean"){n.removeAttribute(a);break}l=oo(""+l),n.setAttribute(a,l);break;case"onClick":l!=null&&(n.onclick=Si);break;case"onScroll":l!=null&&Ke("scroll",n);break;case"onScrollEnd":l!=null&&Ke("scrollend",n);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(r(61));if(a=l.__html,a!=null){if(d.children!=null)throw Error(r(60));n.innerHTML=a}}break;case"multiple":n.multiple=l&&typeof l!="function"&&typeof l!="symbol";break;case"muted":n.muted=l&&typeof l!="function"&&typeof l!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(l==null||typeof l=="function"||typeof l=="boolean"||typeof l=="symbol"){n.removeAttribute("xlink:href");break}a=oo(""+l),n.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",a);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":l!=null&&typeof l!="function"&&typeof l!="symbol"?n.setAttribute(a,""+l):n.removeAttribute(a);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":l&&typeof l!="function"&&typeof l!="symbol"?n.setAttribute(a,""):n.removeAttribute(a);break;case"capture":case"download":l===!0?n.setAttribute(a,""):l!==!1&&l!=null&&typeof l!="function"&&typeof l!="symbol"?n.setAttribute(a,l):n.removeAttribute(a);break;case"cols":case"rows":case"size":case"span":l!=null&&typeof l!="function"&&typeof l!="symbol"&&!isNaN(l)&&1<=l?n.setAttribute(a,l):n.removeAttribute(a);break;case"rowSpan":case"start":l==null||typeof l=="function"||typeof l=="symbol"||isNaN(l)?n.removeAttribute(a):n.setAttribute(a,l);break;case"popover":Ke("beforetoggle",n),Ke("toggle",n),so(n,"popover",l);break;case"xlinkActuate":en(n,"http://www.w3.org/1999/xlink","xlink:actuate",l);break;case"xlinkArcrole":en(n,"http://www.w3.org/1999/xlink","xlink:arcrole",l);break;case"xlinkRole":en(n,"http://www.w3.org/1999/xlink","xlink:role",l);break;case"xlinkShow":en(n,"http://www.w3.org/1999/xlink","xlink:show",l);break;case"xlinkTitle":en(n,"http://www.w3.org/1999/xlink","xlink:title",l);break;case"xlinkType":en(n,"http://www.w3.org/1999/xlink","xlink:type",l);break;case"xmlBase":en(n,"http://www.w3.org/XML/1998/namespace","xml:base",l);break;case"xmlLang":en(n,"http://www.w3.org/XML/1998/namespace","xml:lang",l);break;case"xmlSpace":en(n,"http://www.w3.org/XML/1998/namespace","xml:space",l);break;case"is":so(n,"is",l);break;case"innerText":case"textContent":break;default:(!(2<a.length)||a[0]!=="o"&&a[0]!=="O"||a[1]!=="n"&&a[1]!=="N")&&(a=wu.get(a)||a,so(n,a,l))}}function qm(n,s,a,l,d,m){switch(a){case"style":jl(n,l,m);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(r(61));if(a=l.__html,a!=null){if(d.children!=null)throw Error(r(60));n.innerHTML=a}}break;case"children":typeof l=="string"?Pn(n,l):(typeof l=="number"||typeof l=="bigint")&&Pn(n,""+l);break;case"onScroll":l!=null&&Ke("scroll",n);break;case"onScrollEnd":l!=null&&Ke("scrollend",n);break;case"onClick":l!=null&&(n.onclick=Si);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Nl.hasOwnProperty(a))e:{if(a[0]==="o"&&a[1]==="n"&&(d=a.endsWith("Capture"),s=a.slice(2,d?a.length-7:void 0),m=n[dn]||null,m=m!=null?m[a]:null,typeof m=="function"&&n.removeEventListener(s,m,d),typeof l=="function")){typeof m!="function"&&m!==null&&(a in n?n[a]=null:n.hasAttribute(a)&&n.removeAttribute(a)),n.addEventListener(s,l,d);break e}a in n?n[a]=l:l===!0?n.setAttribute(a,""):so(n,a,l)}}}function wn(n,s,a){switch(s){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Ke("error",n),Ke("load",n);var l=!1,d=!1,m;for(m in a)if(a.hasOwnProperty(m)){var v=a[m];if(v!=null)switch(m){case"src":l=!0;break;case"srcSet":d=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(r(137,s));default:bt(n,s,m,v,a,null)}}d&&bt(n,s,"srcSet",a.srcSet,a,null),l&&bt(n,s,"src",a.src,a,null);return;case"input":Ke("invalid",n);var C=m=v=d=null,P=null,Z=null;for(l in a)if(a.hasOwnProperty(l)){var ce=a[l];if(ce!=null)switch(l){case"name":d=ce;break;case"type":v=ce;break;case"checked":P=ce;break;case"defaultChecked":Z=ce;break;case"value":m=ce;break;case"defaultValue":C=ce;break;case"children":case"dangerouslySetInnerHTML":if(ce!=null)throw Error(r(137,s));break;default:bt(n,s,l,ce,a,null)}}vu(n,m,C,P,Z,v,d,!1);return;case"select":Ke("invalid",n),l=v=m=null;for(d in a)if(a.hasOwnProperty(d)&&(C=a[d],C!=null))switch(d){case"value":m=C;break;case"defaultValue":v=C;break;case"multiple":l=C;default:bt(n,s,d,C,a,null)}s=m,a=v,n.multiple=!!l,s!=null?Zs(n,!!l,s,!1):a!=null&&Zs(n,!!l,a,!0);return;case"textarea":Ke("invalid",n),m=d=l=null;for(v in a)if(a.hasOwnProperty(v)&&(C=a[v],C!=null))switch(v){case"value":l=C;break;case"defaultValue":d=C;break;case"children":m=C;break;case"dangerouslySetInnerHTML":if(C!=null)throw Error(r(91));break;default:bt(n,s,v,C,a,null)}er(n,l,d,m);return;case"option":for(P in a)if(a.hasOwnProperty(P)&&(l=a[P],l!=null))switch(P){case"selected":n.selected=l&&typeof l!="function"&&typeof l!="symbol";break;default:bt(n,s,P,l,a,null)}return;case"dialog":Ke("beforetoggle",n),Ke("toggle",n),Ke("cancel",n),Ke("close",n);break;case"iframe":case"object":Ke("load",n);break;case"video":case"audio":for(l=0;l<pc.length;l++)Ke(pc[l],n);break;case"image":Ke("error",n),Ke("load",n);break;case"details":Ke("toggle",n);break;case"embed":case"source":case"link":Ke("error",n),Ke("load",n);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(Z in a)if(a.hasOwnProperty(Z)&&(l=a[Z],l!=null))switch(Z){case"children":case"dangerouslySetInnerHTML":throw Error(r(137,s));default:bt(n,s,Z,l,a,null)}return;default:if(ao(s)){for(ce in a)a.hasOwnProperty(ce)&&(l=a[ce],l!==void 0&&qm(n,s,ce,l,a,void 0));return}}for(C in a)a.hasOwnProperty(C)&&(l=a[C],l!=null&&bt(n,s,C,l,a,null))}function ZS(n,s,a,l){switch(s){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var d=null,m=null,v=null,C=null,P=null,Z=null,ce=null;for(ae in a){var de=a[ae];if(a.hasOwnProperty(ae)&&de!=null)switch(ae){case"checked":break;case"value":break;case"defaultValue":P=de;default:l.hasOwnProperty(ae)||bt(n,s,ae,null,l,de)}}for(var te in l){var ae=l[te];if(de=a[te],l.hasOwnProperty(te)&&(ae!=null||de!=null))switch(te){case"type":m=ae;break;case"name":d=ae;break;case"checked":Z=ae;break;case"defaultChecked":ce=ae;break;case"value":v=ae;break;case"defaultValue":C=ae;break;case"children":case"dangerouslySetInnerHTML":if(ae!=null)throw Error(r(137,s));break;default:ae!==de&&bt(n,s,te,ae,l,de)}}ro(n,v,C,P,Z,ce,m,d);return;case"select":ae=v=C=te=null;for(m in a)if(P=a[m],a.hasOwnProperty(m)&&P!=null)switch(m){case"value":break;case"multiple":ae=P;default:l.hasOwnProperty(m)||bt(n,s,m,null,l,P)}for(d in l)if(m=l[d],P=a[d],l.hasOwnProperty(d)&&(m!=null||P!=null))switch(d){case"value":te=m;break;case"defaultValue":C=m;break;case"multiple":v=m;default:m!==P&&bt(n,s,d,m,l,P)}s=C,a=v,l=ae,te!=null?Zs(n,!!a,te,!1):!!l!=!!a&&(s!=null?Zs(n,!!a,s,!0):Zs(n,!!a,a?[]:"",!1));return;case"textarea":ae=te=null;for(C in a)if(d=a[C],a.hasOwnProperty(C)&&d!=null&&!l.hasOwnProperty(C))switch(C){case"value":break;case"children":break;default:bt(n,s,C,null,l,d)}for(v in l)if(d=l[v],m=a[v],l.hasOwnProperty(v)&&(d!=null||m!=null))switch(v){case"value":te=d;break;case"defaultValue":ae=d;break;case"children":break;case"dangerouslySetInnerHTML":if(d!=null)throw Error(r(91));break;default:d!==m&&bt(n,s,v,d,l,m)}bu(n,te,ae);return;case"option":for(var Ce in a)if(te=a[Ce],a.hasOwnProperty(Ce)&&te!=null&&!l.hasOwnProperty(Ce))switch(Ce){case"selected":n.selected=!1;break;default:bt(n,s,Ce,null,l,te)}for(P in l)if(te=l[P],ae=a[P],l.hasOwnProperty(P)&&te!==ae&&(te!=null||ae!=null))switch(P){case"selected":n.selected=te&&typeof te!="function"&&typeof te!="symbol";break;default:bt(n,s,P,te,l,ae)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var ke in a)te=a[ke],a.hasOwnProperty(ke)&&te!=null&&!l.hasOwnProperty(ke)&&bt(n,s,ke,null,l,te);for(Z in l)if(te=l[Z],ae=a[Z],l.hasOwnProperty(Z)&&te!==ae&&(te!=null||ae!=null))switch(Z){case"children":case"dangerouslySetInnerHTML":if(te!=null)throw Error(r(137,s));break;default:bt(n,s,Z,te,l,ae)}return;default:if(ao(s)){for(var Tt in a)te=a[Tt],a.hasOwnProperty(Tt)&&te!==void 0&&!l.hasOwnProperty(Tt)&&qm(n,s,Tt,void 0,l,te);for(ce in l)te=l[ce],ae=a[ce],!l.hasOwnProperty(ce)||te===ae||te===void 0&&ae===void 0||qm(n,s,ce,te,l,ae);return}}for(var $ in a)te=a[$],a.hasOwnProperty($)&&te!=null&&!l.hasOwnProperty($)&&bt(n,s,$,null,l,te);for(de in l)te=l[de],ae=a[de],!l.hasOwnProperty(de)||te===ae||te==null&&ae==null||bt(n,s,de,te,l,ae)}function a1(n){switch(n){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function eA(){if(typeof performance.getEntriesByType=="function"){for(var n=0,s=0,a=performance.getEntriesByType("resource"),l=0;l<a.length;l++){var d=a[l],m=d.transferSize,v=d.initiatorType,C=d.duration;if(m&&C&&a1(v)){for(v=0,C=d.responseEnd,l+=1;l<a.length;l++){var P=a[l],Z=P.startTime;if(Z>C)break;var ce=P.transferSize,de=P.initiatorType;ce&&a1(de)&&(P=P.responseEnd,v+=ce*(P<C?1:(C-Z)/(P-Z)))}if(--l,s+=8*(m+v)/(d.duration/1e3),n++,10<n)break}}if(0<n)return s/n/1e6}return navigator.connection&&(n=navigator.connection.downlink,typeof n=="number")?n:5}var Hm=null,Fm=null;function Eh(n){return n.nodeType===9?n:n.ownerDocument}function o1(n){switch(n){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function l1(n,s){if(n===0)switch(s){case"svg":return 1;case"math":return 2;default:return 0}return n===1&&s==="foreignObject"?0:n}function $m(n,s){return n==="textarea"||n==="noscript"||typeof s.children=="string"||typeof s.children=="number"||typeof s.children=="bigint"||typeof s.dangerouslySetInnerHTML=="object"&&s.dangerouslySetInnerHTML!==null&&s.dangerouslySetInnerHTML.__html!=null}var Gm=null;function tA(){var n=window.event;return n&&n.type==="popstate"?n===Gm?!1:(Gm=n,!0):(Gm=null,!1)}var c1=typeof setTimeout=="function"?setTimeout:void 0,nA=typeof clearTimeout=="function"?clearTimeout:void 0,u1=typeof Promise=="function"?Promise:void 0,iA=typeof queueMicrotask=="function"?queueMicrotask:typeof u1<"u"?function(n){return u1.resolve(null).then(n).catch(sA)}:c1;function sA(n){setTimeout(function(){throw n})}function Er(n){return n==="head"}function h1(n,s){var a=s,l=0;do{var d=a.nextSibling;if(n.removeChild(a),d&&d.nodeType===8)if(a=d.data,a==="/$"||a==="/&"){if(l===0){n.removeChild(d),qo(s);return}l--}else if(a==="$"||a==="$?"||a==="$~"||a==="$!"||a==="&")l++;else if(a==="html")_c(n.ownerDocument.documentElement);else if(a==="head"){a=n.ownerDocument.head,_c(a);for(var m=a.firstChild;m;){var v=m.nextSibling,C=m.nodeName;m[Hi]||C==="SCRIPT"||C==="STYLE"||C==="LINK"&&m.rel.toLowerCase()==="stylesheet"||a.removeChild(m),m=v}}else a==="body"&&_c(n.ownerDocument.body);a=d}while(a);qo(s)}function d1(n,s){var a=n;n=0;do{var l=a.nextSibling;if(a.nodeType===1?s?(a._stashedDisplay=a.style.display,a.style.display="none"):(a.style.display=a._stashedDisplay||"",a.getAttribute("style")===""&&a.removeAttribute("style")):a.nodeType===3&&(s?(a._stashedText=a.nodeValue,a.nodeValue=""):a.nodeValue=a._stashedText||""),l&&l.nodeType===8)if(a=l.data,a==="/$"){if(n===0)break;n--}else a!=="$"&&a!=="$?"&&a!=="$~"&&a!=="$!"||n++;a=l}while(a)}function Ym(n){var s=n.firstChild;for(s&&s.nodeType===10&&(s=s.nextSibling);s;){var a=s;switch(s=s.nextSibling,a.nodeName){case"HTML":case"HEAD":case"BODY":Ym(a),io(a);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(a.rel.toLowerCase()==="stylesheet")continue}n.removeChild(a)}}function rA(n,s,a,l){for(;n.nodeType===1;){var d=a;if(n.nodeName.toLowerCase()!==s.toLowerCase()){if(!l&&(n.nodeName!=="INPUT"||n.type!=="hidden"))break}else if(l){if(!n[Hi])switch(s){case"meta":if(!n.hasAttribute("itemprop"))break;return n;case"link":if(m=n.getAttribute("rel"),m==="stylesheet"&&n.hasAttribute("data-precedence"))break;if(m!==d.rel||n.getAttribute("href")!==(d.href==null||d.href===""?null:d.href)||n.getAttribute("crossorigin")!==(d.crossOrigin==null?null:d.crossOrigin)||n.getAttribute("title")!==(d.title==null?null:d.title))break;return n;case"style":if(n.hasAttribute("data-precedence"))break;return n;case"script":if(m=n.getAttribute("src"),(m!==(d.src==null?null:d.src)||n.getAttribute("type")!==(d.type==null?null:d.type)||n.getAttribute("crossorigin")!==(d.crossOrigin==null?null:d.crossOrigin))&&m&&n.hasAttribute("async")&&!n.hasAttribute("itemprop"))break;return n;default:return n}}else if(s==="input"&&n.type==="hidden"){var m=d.name==null?null:""+d.name;if(d.type==="hidden"&&n.getAttribute("name")===m)return n}else return n;if(n=mi(n.nextSibling),n===null)break}return null}function aA(n,s,a){if(s==="")return null;for(;n.nodeType!==3;)if((n.nodeType!==1||n.nodeName!=="INPUT"||n.type!=="hidden")&&!a||(n=mi(n.nextSibling),n===null))return null;return n}function f1(n,s){for(;n.nodeType!==8;)if((n.nodeType!==1||n.nodeName!=="INPUT"||n.type!=="hidden")&&!s||(n=mi(n.nextSibling),n===null))return null;return n}function Qm(n){return n.data==="$?"||n.data==="$~"}function Km(n){return n.data==="$!"||n.data==="$?"&&n.ownerDocument.readyState!=="loading"}function oA(n,s){var a=n.ownerDocument;if(n.data==="$~")n._reactRetry=s;else if(n.data!=="$?"||a.readyState!=="loading")s();else{var l=function(){s(),a.removeEventListener("DOMContentLoaded",l)};a.addEventListener("DOMContentLoaded",l),n._reactRetry=l}}function mi(n){for(;n!=null;n=n.nextSibling){var s=n.nodeType;if(s===1||s===3)break;if(s===8){if(s=n.data,s==="$"||s==="$!"||s==="$?"||s==="$~"||s==="&"||s==="F!"||s==="F")break;if(s==="/$"||s==="/&")return null}}return n}var Xm=null;function m1(n){n=n.nextSibling;for(var s=0;n;){if(n.nodeType===8){var a=n.data;if(a==="/$"||a==="/&"){if(s===0)return mi(n.nextSibling);s--}else a!=="$"&&a!=="$!"&&a!=="$?"&&a!=="$~"&&a!=="&"||s++}n=n.nextSibling}return null}function p1(n){n=n.previousSibling;for(var s=0;n;){if(n.nodeType===8){var a=n.data;if(a==="$"||a==="$!"||a==="$?"||a==="$~"||a==="&"){if(s===0)return n;s--}else a!=="/$"&&a!=="/&"||s++}n=n.previousSibling}return null}function g1(n,s,a){switch(s=Eh(a),n){case"html":if(n=s.documentElement,!n)throw Error(r(452));return n;case"head":if(n=s.head,!n)throw Error(r(453));return n;case"body":if(n=s.body,!n)throw Error(r(454));return n;default:throw Error(r(451))}}function _c(n){for(var s=n.attributes;s.length;)n.removeAttributeNode(s[0]);io(n)}var pi=new Map,_1=new Set;function Sh(n){return typeof n.getRootNode=="function"?n.getRootNode():n.nodeType===9?n:n.ownerDocument}var Bs=X.d;X.d={f:lA,r:cA,D:uA,C:hA,L:dA,m:fA,X:pA,S:mA,M:gA};function lA(){var n=Bs.f(),s=ph();return n||s}function cA(n){var s=si(n);s!==null&&s.tag===5&&s.type==="form"?ky(s):Bs.r(n)}var Bo=typeof document>"u"?null:document;function y1(n,s,a){var l=Bo;if(l&&typeof s=="string"&&s){var d=Ln(s);d='link[rel="'+n+'"][href="'+d+'"]',typeof a=="string"&&(d+='[crossorigin="'+a+'"]'),_1.has(d)||(_1.add(d),n={rel:n,crossOrigin:a,href:s},l.querySelector(d)===null&&(s=l.createElement("link"),wn(s,"link",n),Zt(s),l.head.appendChild(s)))}}function uA(n){Bs.D(n),y1("dns-prefetch",n,null)}function hA(n,s){Bs.C(n,s),y1("preconnect",n,s)}function dA(n,s,a){Bs.L(n,s,a);var l=Bo;if(l&&n&&s){var d='link[rel="preload"][as="'+Ln(s)+'"]';s==="image"&&a&&a.imageSrcSet?(d+='[imagesrcset="'+Ln(a.imageSrcSet)+'"]',typeof a.imageSizes=="string"&&(d+='[imagesizes="'+Ln(a.imageSizes)+'"]')):d+='[href="'+Ln(n)+'"]';var m=d;switch(s){case"style":m=Uo(n);break;case"script":m=zo(n)}pi.has(m)||(n=E({rel:"preload",href:s==="image"&&a&&a.imageSrcSet?void 0:n,as:s},a),pi.set(m,n),l.querySelector(d)!==null||s==="style"&&l.querySelector(yc(m))||s==="script"&&l.querySelector(vc(m))||(s=l.createElement("link"),wn(s,"link",n),Zt(s),l.head.appendChild(s)))}}function fA(n,s){Bs.m(n,s);var a=Bo;if(a&&n){var l=s&&typeof s.as=="string"?s.as:"script",d='link[rel="modulepreload"][as="'+Ln(l)+'"][href="'+Ln(n)+'"]',m=d;switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":m=zo(n)}if(!pi.has(m)&&(n=E({rel:"modulepreload",href:n},s),pi.set(m,n),a.querySelector(d)===null)){switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(a.querySelector(vc(m)))return}l=a.createElement("link"),wn(l,"link",n),Zt(l),a.head.appendChild(l)}}}function mA(n,s,a){Bs.S(n,s,a);var l=Bo;if(l&&n){var d=$i(l).hoistableStyles,m=Uo(n);s=s||"default";var v=d.get(m);if(!v){var C={loading:0,preload:null};if(v=l.querySelector(yc(m)))C.loading=5;else{n=E({rel:"stylesheet",href:n,"data-precedence":s},a),(a=pi.get(m))&&Wm(n,a);var P=v=l.createElement("link");Zt(P),wn(P,"link",n),P._p=new Promise(function(Z,ce){P.onload=Z,P.onerror=ce}),P.addEventListener("load",function(){C.loading|=1}),P.addEventListener("error",function(){C.loading|=2}),C.loading|=4,Ah(v,s,l)}v={type:"stylesheet",instance:v,count:1,state:C},d.set(m,v)}}}function pA(n,s){Bs.X(n,s);var a=Bo;if(a&&n){var l=$i(a).hoistableScripts,d=zo(n),m=l.get(d);m||(m=a.querySelector(vc(d)),m||(n=E({src:n,async:!0},s),(s=pi.get(d))&&Jm(n,s),m=a.createElement("script"),Zt(m),wn(m,"link",n),a.head.appendChild(m)),m={type:"script",instance:m,count:1,state:null},l.set(d,m))}}function gA(n,s){Bs.M(n,s);var a=Bo;if(a&&n){var l=$i(a).hoistableScripts,d=zo(n),m=l.get(d);m||(m=a.querySelector(vc(d)),m||(n=E({src:n,async:!0,type:"module"},s),(s=pi.get(d))&&Jm(n,s),m=a.createElement("script"),Zt(m),wn(m,"link",n),a.head.appendChild(m)),m={type:"script",instance:m,count:1,state:null},l.set(d,m))}}function v1(n,s,a,l){var d=(d=Se.current)?Sh(d):null;if(!d)throw Error(r(446));switch(n){case"meta":case"title":return null;case"style":return typeof a.precedence=="string"&&typeof a.href=="string"?(s=Uo(a.href),a=$i(d).hoistableStyles,l=a.get(s),l||(l={type:"style",instance:null,count:0,state:null},a.set(s,l)),l):{type:"void",instance:null,count:0,state:null};case"link":if(a.rel==="stylesheet"&&typeof a.href=="string"&&typeof a.precedence=="string"){n=Uo(a.href);var m=$i(d).hoistableStyles,v=m.get(n);if(v||(d=d.ownerDocument||d,v={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},m.set(n,v),(m=d.querySelector(yc(n)))&&!m._p&&(v.instance=m,v.state.loading=5),pi.has(n)||(a={rel:"preload",as:"style",href:a.href,crossOrigin:a.crossOrigin,integrity:a.integrity,media:a.media,hrefLang:a.hrefLang,referrerPolicy:a.referrerPolicy},pi.set(n,a),m||_A(d,n,a,v.state))),s&&l===null)throw Error(r(528,""));return v}if(s&&l!==null)throw Error(r(529,""));return null;case"script":return s=a.async,a=a.src,typeof a=="string"&&s&&typeof s!="function"&&typeof s!="symbol"?(s=zo(a),a=$i(d).hoistableScripts,l=a.get(s),l||(l={type:"script",instance:null,count:0,state:null},a.set(s,l)),l):{type:"void",instance:null,count:0,state:null};default:throw Error(r(444,n))}}function Uo(n){return'href="'+Ln(n)+'"'}function yc(n){return'link[rel="stylesheet"]['+n+"]"}function b1(n){return E({},n,{"data-precedence":n.precedence,precedence:null})}function _A(n,s,a,l){n.querySelector('link[rel="preload"][as="style"]['+s+"]")?l.loading=1:(s=n.createElement("link"),l.preload=s,s.addEventListener("load",function(){return l.loading|=1}),s.addEventListener("error",function(){return l.loading|=2}),wn(s,"link",a),Zt(s),n.head.appendChild(s))}function zo(n){return'[src="'+Ln(n)+'"]'}function vc(n){return"script[async]"+n}function T1(n,s,a){if(s.count++,s.instance===null)switch(s.type){case"style":var l=n.querySelector('style[data-href~="'+Ln(a.href)+'"]');if(l)return s.instance=l,Zt(l),l;var d=E({},a,{"data-href":a.href,"data-precedence":a.precedence,href:null,precedence:null});return l=(n.ownerDocument||n).createElement("style"),Zt(l),wn(l,"style",d),Ah(l,a.precedence,n),s.instance=l;case"stylesheet":d=Uo(a.href);var m=n.querySelector(yc(d));if(m)return s.state.loading|=4,s.instance=m,Zt(m),m;l=b1(a),(d=pi.get(d))&&Wm(l,d),m=(n.ownerDocument||n).createElement("link"),Zt(m);var v=m;return v._p=new Promise(function(C,P){v.onload=C,v.onerror=P}),wn(m,"link",l),s.state.loading|=4,Ah(m,a.precedence,n),s.instance=m;case"script":return m=zo(a.src),(d=n.querySelector(vc(m)))?(s.instance=d,Zt(d),d):(l=a,(d=pi.get(m))&&(l=E({},a),Jm(l,d)),n=n.ownerDocument||n,d=n.createElement("script"),Zt(d),wn(d,"link",l),n.head.appendChild(d),s.instance=d);case"void":return null;default:throw Error(r(443,s.type))}else s.type==="stylesheet"&&(s.state.loading&4)===0&&(l=s.instance,s.state.loading|=4,Ah(l,a.precedence,n));return s.instance}function Ah(n,s,a){for(var l=a.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),d=l.length?l[l.length-1]:null,m=d,v=0;v<l.length;v++){var C=l[v];if(C.dataset.precedence===s)m=C;else if(m!==d)break}m?m.parentNode.insertBefore(n,m.nextSibling):(s=a.nodeType===9?a.head:a,s.insertBefore(n,s.firstChild))}function Wm(n,s){n.crossOrigin==null&&(n.crossOrigin=s.crossOrigin),n.referrerPolicy==null&&(n.referrerPolicy=s.referrerPolicy),n.title==null&&(n.title=s.title)}function Jm(n,s){n.crossOrigin==null&&(n.crossOrigin=s.crossOrigin),n.referrerPolicy==null&&(n.referrerPolicy=s.referrerPolicy),n.integrity==null&&(n.integrity=s.integrity)}var Ih=null;function w1(n,s,a){if(Ih===null){var l=new Map,d=Ih=new Map;d.set(a,l)}else d=Ih,l=d.get(a),l||(l=new Map,d.set(a,l));if(l.has(n))return l;for(l.set(n,null),a=a.getElementsByTagName(n),d=0;d<a.length;d++){var m=a[d];if(!(m[Hi]||m[Jt]||n==="link"&&m.getAttribute("rel")==="stylesheet")&&m.namespaceURI!=="http://www.w3.org/2000/svg"){var v=m.getAttribute(s)||"";v=n+v;var C=l.get(v);C?C.push(m):l.set(v,[m])}}return l}function E1(n,s,a){n=n.ownerDocument||n,n.head.insertBefore(a,s==="title"?n.querySelector("head > title"):null)}function yA(n,s,a){if(a===1||s.itemProp!=null)return!1;switch(n){case"meta":case"title":return!0;case"style":if(typeof s.precedence!="string"||typeof s.href!="string"||s.href==="")break;return!0;case"link":if(typeof s.rel!="string"||typeof s.href!="string"||s.href===""||s.onLoad||s.onError)break;switch(s.rel){case"stylesheet":return n=s.disabled,typeof s.precedence=="string"&&n==null;default:return!0}case"script":if(s.async&&typeof s.async!="function"&&typeof s.async!="symbol"&&!s.onLoad&&!s.onError&&s.src&&typeof s.src=="string")return!0}return!1}function S1(n){return!(n.type==="stylesheet"&&(n.state.loading&3)===0)}function vA(n,s,a,l){if(a.type==="stylesheet"&&(typeof l.media!="string"||matchMedia(l.media).matches!==!1)&&(a.state.loading&4)===0){if(a.instance===null){var d=Uo(l.href),m=s.querySelector(yc(d));if(m){s=m._p,s!==null&&typeof s=="object"&&typeof s.then=="function"&&(n.count++,n=Ch.bind(n),s.then(n,n)),a.state.loading|=4,a.instance=m,Zt(m);return}m=s.ownerDocument||s,l=b1(l),(d=pi.get(d))&&Wm(l,d),m=m.createElement("link"),Zt(m);var v=m;v._p=new Promise(function(C,P){v.onload=C,v.onerror=P}),wn(m,"link",l),a.instance=m}n.stylesheets===null&&(n.stylesheets=new Map),n.stylesheets.set(a,s),(s=a.state.preload)&&(a.state.loading&3)===0&&(n.count++,a=Ch.bind(n),s.addEventListener("load",a),s.addEventListener("error",a))}}var Zm=0;function bA(n,s){return n.stylesheets&&n.count===0&&xh(n,n.stylesheets),0<n.count||0<n.imgCount?function(a){var l=setTimeout(function(){if(n.stylesheets&&xh(n,n.stylesheets),n.unsuspend){var m=n.unsuspend;n.unsuspend=null,m()}},6e4+s);0<n.imgBytes&&Zm===0&&(Zm=62500*eA());var d=setTimeout(function(){if(n.waitingForImages=!1,n.count===0&&(n.stylesheets&&xh(n,n.stylesheets),n.unsuspend)){var m=n.unsuspend;n.unsuspend=null,m()}},(n.imgBytes>Zm?50:800)+s);return n.unsuspend=a,function(){n.unsuspend=null,clearTimeout(l),clearTimeout(d)}}:null}function Ch(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)xh(this,this.stylesheets);else if(this.unsuspend){var n=this.unsuspend;this.unsuspend=null,n()}}}var Nh=null;function xh(n,s){n.stylesheets=null,n.unsuspend!==null&&(n.count++,Nh=new Map,s.forEach(TA,n),Nh=null,Ch.call(n))}function TA(n,s){if(!(s.state.loading&4)){var a=Nh.get(n);if(a)var l=a.get(null);else{a=new Map,Nh.set(n,a);for(var d=n.querySelectorAll("link[data-precedence],style[data-precedence]"),m=0;m<d.length;m++){var v=d[m];(v.nodeName==="LINK"||v.getAttribute("media")!=="not all")&&(a.set(v.dataset.precedence,v),l=v)}l&&a.set(null,l)}d=s.instance,v=d.getAttribute("data-precedence"),m=a.get(v)||l,m===l&&a.set(null,d),a.set(v,d),this.count++,l=Ch.bind(this),d.addEventListener("load",l),d.addEventListener("error",l),m?m.parentNode.insertBefore(d,m.nextSibling):(n=n.nodeType===9?n.head:n,n.insertBefore(d,n.firstChild)),s.state.loading|=4}}var bc={$$typeof:le,Provider:null,Consumer:null,_currentValue:ne,_currentValue2:ne,_threadCount:0};function wA(n,s,a,l,d,m,v,C,P){this.tag=1,this.containerInfo=n,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=zi(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=zi(0),this.hiddenUpdates=zi(null),this.identifierPrefix=l,this.onUncaughtError=d,this.onCaughtError=m,this.onRecoverableError=v,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=P,this.incompleteTransitions=new Map}function A1(n,s,a,l,d,m,v,C,P,Z,ce,de){return n=new wA(n,s,a,v,P,Z,ce,de,C),s=1,m===!0&&(s|=24),m=Kn(3,null,null,s),n.current=m,m.stateNode=n,s=Mf(),s.refCount++,n.pooledCache=s,s.refCount++,m.memoizedState={element:l,isDehydrated:a,cache:s},Lf(m),n}function I1(n){return n?(n=yo,n):yo}function C1(n,s,a,l,d,m){d=I1(d),l.context===null?l.context=d:l.pendingContext=d,l=dr(s),l.payload={element:a},m=m===void 0?null:m,m!==null&&(l.callback=m),a=fr(n,l,s),a!==null&&(qn(a,n,s),Jl(a,n,s))}function N1(n,s){if(n=n.memoizedState,n!==null&&n.dehydrated!==null){var a=n.retryLane;n.retryLane=a!==0&&a<s?a:s}}function ep(n,s){N1(n,s),(n=n.alternate)&&N1(n,s)}function x1(n){if(n.tag===13||n.tag===31){var s=_a(n,67108864);s!==null&&qn(s,n,67108864),ep(n,67108864)}}function R1(n){if(n.tag===13||n.tag===31){var s=ei();s=ra(s);var a=_a(n,s);a!==null&&qn(a,n,s),ep(n,s)}}var Rh=!0;function EA(n,s,a,l){var d=V.T;V.T=null;var m=X.p;try{X.p=2,tp(n,s,a,l)}finally{X.p=m,V.T=d}}function SA(n,s,a,l){var d=V.T;V.T=null;var m=X.p;try{X.p=8,tp(n,s,a,l)}finally{X.p=m,V.T=d}}function tp(n,s,a,l){if(Rh){var d=np(l);if(d===null)zm(n,s,l,Dh,a),M1(n,l);else if(IA(d,n,s,a,l))l.stopPropagation();else if(M1(n,l),s&4&&-1<AA.indexOf(n)){for(;d!==null;){var m=si(d);if(m!==null)switch(m.tag){case 3:if(m=m.stateNode,m.current.memoizedState.isDehydrated){var v=Bi(m.pendingLanes);if(v!==0){var C=m;for(C.pendingLanes|=2,C.entangledLanes|=2;v;){var P=1<<31-qt(v);C.entanglements[1]|=P,v&=~P}ss(m),(ht&6)===0&&(fh=Mn()+500,mc(0))}}break;case 31:case 13:C=_a(m,2),C!==null&&qn(C,m,2),ph(),ep(m,2)}if(m=np(l),m===null&&zm(n,s,l,Dh,a),m===d)break;d=m}d!==null&&l.stopPropagation()}else zm(n,s,l,null,a)}}function np(n){return n=ri(n),ip(n)}var Dh=null;function ip(n){if(Dh=null,n=Fi(n),n!==null){var s=c(n);if(s===null)n=null;else{var a=s.tag;if(a===13){if(n=h(s),n!==null)return n;n=null}else if(a===31){if(n=p(s),n!==null)return n;n=null}else if(a===3){if(s.stateNode.current.memoizedState.isDehydrated)return s.tag===3?s.stateNode.containerInfo:null;n=null}else s!==n&&(n=null)}}return Dh=n,null}function D1(n){switch(n){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(ta()){case El:return 2;case Sl:return 8;case Ws:case cf:return 32;case cu:return 268435456;default:return 32}default:return 32}}var sp=!1,Sr=null,Ar=null,Ir=null,Tc=new Map,wc=new Map,Cr=[],AA="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function M1(n,s){switch(n){case"focusin":case"focusout":Sr=null;break;case"dragenter":case"dragleave":Ar=null;break;case"mouseover":case"mouseout":Ir=null;break;case"pointerover":case"pointerout":Tc.delete(s.pointerId);break;case"gotpointercapture":case"lostpointercapture":wc.delete(s.pointerId)}}function Ec(n,s,a,l,d,m){return n===null||n.nativeEvent!==m?(n={blockedOn:s,domEventName:a,eventSystemFlags:l,nativeEvent:m,targetContainers:[d]},s!==null&&(s=si(s),s!==null&&x1(s)),n):(n.eventSystemFlags|=l,s=n.targetContainers,d!==null&&s.indexOf(d)===-1&&s.push(d),n)}function IA(n,s,a,l,d){switch(s){case"focusin":return Sr=Ec(Sr,n,s,a,l,d),!0;case"dragenter":return Ar=Ec(Ar,n,s,a,l,d),!0;case"mouseover":return Ir=Ec(Ir,n,s,a,l,d),!0;case"pointerover":var m=d.pointerId;return Tc.set(m,Ec(Tc.get(m)||null,n,s,a,l,d)),!0;case"gotpointercapture":return m=d.pointerId,wc.set(m,Ec(wc.get(m)||null,n,s,a,l,d)),!0}return!1}function O1(n){var s=Fi(n.target);if(s!==null){var a=c(s);if(a!==null){if(s=a.tag,s===13){if(s=h(a),s!==null){n.blockedOn=s,wi(n.priority,function(){R1(a)});return}}else if(s===31){if(s=p(a),s!==null){n.blockedOn=s,wi(n.priority,function(){R1(a)});return}}else if(s===3&&a.stateNode.current.memoizedState.isDehydrated){n.blockedOn=a.tag===3?a.stateNode.containerInfo:null;return}}}n.blockedOn=null}function Mh(n){if(n.blockedOn!==null)return!1;for(var s=n.targetContainers;0<s.length;){var a=np(n.nativeEvent);if(a===null){a=n.nativeEvent;var l=new a.constructor(a.type,a);Ll=l,a.target.dispatchEvent(l),Ll=null}else return s=si(a),s!==null&&x1(s),n.blockedOn=a,!1;s.shift()}return!0}function k1(n,s,a){Mh(n)&&a.delete(s)}function CA(){sp=!1,Sr!==null&&Mh(Sr)&&(Sr=null),Ar!==null&&Mh(Ar)&&(Ar=null),Ir!==null&&Mh(Ir)&&(Ir=null),Tc.forEach(k1),wc.forEach(k1)}function Oh(n,s){n.blockedOn===s&&(n.blockedOn=null,sp||(sp=!0,i.unstable_scheduleCallback(i.unstable_NormalPriority,CA)))}var kh=null;function j1(n){kh!==n&&(kh=n,i.unstable_scheduleCallback(i.unstable_NormalPriority,function(){kh===n&&(kh=null);for(var s=0;s<n.length;s+=3){var a=n[s],l=n[s+1],d=n[s+2];if(typeof l!="function"){if(ip(l||a)===null)continue;break}var m=si(a);m!==null&&(n.splice(s,3),s-=3,nm(m,{pending:!0,data:d,method:a.method,action:l},l,d))}}))}function qo(n){function s(P){return Oh(P,n)}Sr!==null&&Oh(Sr,n),Ar!==null&&Oh(Ar,n),Ir!==null&&Oh(Ir,n),Tc.forEach(s),wc.forEach(s);for(var a=0;a<Cr.length;a++){var l=Cr[a];l.blockedOn===n&&(l.blockedOn=null)}for(;0<Cr.length&&(a=Cr[0],a.blockedOn===null);)O1(a),a.blockedOn===null&&Cr.shift();if(a=(n.ownerDocument||n).$$reactFormReplay,a!=null)for(l=0;l<a.length;l+=3){var d=a[l],m=a[l+1],v=d[dn]||null;if(typeof m=="function")v||j1(a);else if(v){var C=null;if(m&&m.hasAttribute("formAction")){if(d=m,v=m[dn]||null)C=v.formAction;else if(ip(d)!==null)continue}else C=v.action;typeof C=="function"?a[l+1]=C:(a.splice(l,3),l-=3),j1(a)}}}function L1(){function n(m){m.canIntercept&&m.info==="react-transition"&&m.intercept({handler:function(){return new Promise(function(v){return d=v})},focusReset:"manual",scroll:"manual"})}function s(){d!==null&&(d(),d=null),l||setTimeout(a,20)}function a(){if(!l&&!navigation.transition){var m=navigation.currentEntry;m&&m.url!=null&&navigation.navigate(m.url,{state:m.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var l=!1,d=null;return navigation.addEventListener("navigate",n),navigation.addEventListener("navigatesuccess",s),navigation.addEventListener("navigateerror",s),setTimeout(a,100),function(){l=!0,navigation.removeEventListener("navigate",n),navigation.removeEventListener("navigatesuccess",s),navigation.removeEventListener("navigateerror",s),d!==null&&(d(),d=null)}}}function rp(n){this._internalRoot=n}jh.prototype.render=rp.prototype.render=function(n){var s=this._internalRoot;if(s===null)throw Error(r(409));var a=s.current,l=ei();C1(a,l,n,s,null,null)},jh.prototype.unmount=rp.prototype.unmount=function(){var n=this._internalRoot;if(n!==null){this._internalRoot=null;var s=n.containerInfo;C1(n.current,2,null,n,null,null),ph(),s[qi]=null}};function jh(n){this._internalRoot=n}jh.prototype.unstable_scheduleHydration=function(n){if(n){var s=pu();n={blockedOn:null,target:n,priority:s};for(var a=0;a<Cr.length&&s!==0&&s<Cr[a].priority;a++);Cr.splice(a,0,n),a===0&&O1(n)}};var P1=e.version;if(P1!=="19.2.0")throw Error(r(527,P1,"19.2.0"));X.findDOMNode=function(n){var s=n._reactInternals;if(s===void 0)throw typeof n.render=="function"?Error(r(188)):(n=Object.keys(n).join(","),Error(r(268,n)));return n=_(s),n=n!==null?T(n):null,n=n===null?null:n.stateNode,n};var NA={bundleType:0,version:"19.2.0",rendererPackageName:"react-dom",currentDispatcherRef:V,reconcilerVersion:"19.2.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Lh=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Lh.isDisabled&&Lh.supportsFiber)try{bi=Lh.inject(NA),_n=Lh}catch{}}return Ac.createRoot=function(n,s){if(!o(n))throw Error(r(299));var a=!1,l="",d=Fy,m=$y,v=Gy;return s!=null&&(s.unstable_strictMode===!0&&(a=!0),s.identifierPrefix!==void 0&&(l=s.identifierPrefix),s.onUncaughtError!==void 0&&(d=s.onUncaughtError),s.onCaughtError!==void 0&&(m=s.onCaughtError),s.onRecoverableError!==void 0&&(v=s.onRecoverableError)),s=A1(n,1,!1,null,null,a,l,null,d,m,v,L1),n[qi]=s.current,Um(n),new rp(s)},Ac.hydrateRoot=function(n,s,a){if(!o(n))throw Error(r(299));var l=!1,d="",m=Fy,v=$y,C=Gy,P=null;return a!=null&&(a.unstable_strictMode===!0&&(l=!0),a.identifierPrefix!==void 0&&(d=a.identifierPrefix),a.onUncaughtError!==void 0&&(m=a.onUncaughtError),a.onCaughtError!==void 0&&(v=a.onCaughtError),a.onRecoverableError!==void 0&&(C=a.onRecoverableError),a.formState!==void 0&&(P=a.formState)),s=A1(n,1,!0,s,a??null,l,d,P,m,v,C,L1),s.context=I1(null),a=s.current,l=ei(),l=ra(l),d=dr(l),d.callback=null,fr(a,d,l),a=l,s.current.lanes=a,ia(s,a),ss(s),n[qi]=s.current,Um(n),new jh(s)},Ac.version="19.2.0",Ac}var Q1;function BA(){if(Q1)return cp.exports;Q1=1;function i(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(i)}catch(e){console.error(e)}}return i(),cp.exports=VA(),cp.exports}var UA=BA();const zA=()=>{};var K1={};const z0=function(i){const e=[];let t=0;for(let r=0;r<i.length;r++){let o=i.charCodeAt(r);o<128?e[t++]=o:o<2048?(e[t++]=o>>6|192,e[t++]=o&63|128):(o&64512)===55296&&r+1<i.length&&(i.charCodeAt(r+1)&64512)===56320?(o=65536+((o&1023)<<10)+(i.charCodeAt(++r)&1023),e[t++]=o>>18|240,e[t++]=o>>12&63|128,e[t++]=o>>6&63|128,e[t++]=o&63|128):(e[t++]=o>>12|224,e[t++]=o>>6&63|128,e[t++]=o&63|128)}return e},qA=function(i){const e=[];let t=0,r=0;for(;t<i.length;){const o=i[t++];if(o<128)e[r++]=String.fromCharCode(o);else if(o>191&&o<224){const c=i[t++];e[r++]=String.fromCharCode((o&31)<<6|c&63)}else if(o>239&&o<365){const c=i[t++],h=i[t++],p=i[t++],g=((o&7)<<18|(c&63)<<12|(h&63)<<6|p&63)-65536;e[r++]=String.fromCharCode(55296+(g>>10)),e[r++]=String.fromCharCode(56320+(g&1023))}else{const c=i[t++],h=i[t++];e[r++]=String.fromCharCode((o&15)<<12|(c&63)<<6|h&63)}}return e.join("")},q0={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(i,e){if(!Array.isArray(i))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let o=0;o<i.length;o+=3){const c=i[o],h=o+1<i.length,p=h?i[o+1]:0,g=o+2<i.length,_=g?i[o+2]:0,T=c>>2,E=(c&3)<<4|p>>4;let I=(p&15)<<2|_>>6,O=_&63;g||(O=64,h||(I=64)),r.push(t[T],t[E],t[I],t[O])}return r.join("")},encodeString(i,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(i):this.encodeByteArray(z0(i),e)},decodeString(i,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(i):qA(this.decodeStringToByteArray(i,e))},decodeStringToByteArray(i,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let o=0;o<i.length;){const c=t[i.charAt(o++)],p=o<i.length?t[i.charAt(o)]:0;++o;const _=o<i.length?t[i.charAt(o)]:64;++o;const E=o<i.length?t[i.charAt(o)]:64;if(++o,c==null||p==null||_==null||E==null)throw new HA;const I=c<<2|p>>4;if(r.push(I),_!==64){const O=p<<4&240|_>>2;if(r.push(O),E!==64){const L=_<<6&192|E;r.push(L)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let i=0;i<this.ENCODED_VALS.length;i++)this.byteToCharMap_[i]=this.ENCODED_VALS.charAt(i),this.charToByteMap_[this.byteToCharMap_[i]]=i,this.byteToCharMapWebSafe_[i]=this.ENCODED_VALS_WEBSAFE.charAt(i),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[i]]=i,i>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(i)]=i,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(i)]=i)}}};class HA extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const FA=function(i){const e=z0(i);return q0.encodeByteArray(e,!0)},ad=function(i){return FA(i).replace(/\./g,"")},H0=function(i){try{return q0.decodeString(i,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function $A(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}const GA=()=>$A().__FIREBASE_DEFAULTS__,YA=()=>{if(typeof process>"u"||typeof K1>"u")return;const i=K1.__FIREBASE_DEFAULTS__;if(i)return JSON.parse(i)},QA=()=>{if(typeof document>"u")return;let i;try{i=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=i&&H0(i[1]);return e&&JSON.parse(e)},Dd=()=>{try{return zA()||GA()||YA()||QA()}catch(i){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${i}`);return}},F0=i=>Dd()?.emulatorHosts?.[i],$0=i=>{const e=F0(i);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),r]:[e.substring(0,t),r]},G0=()=>Dd()?.config,Y0=i=>Dd()?.[`_${i}`];class KA{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,r)=>{t?this.reject(t):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,r))}}}function Wr(i){try{return(i.startsWith("http://")||i.startsWith("https://")?new URL(i).hostname:i).endsWith(".cloudworkstations.dev")}catch{return!1}}async function lg(i){return(await fetch(i,{credentials:"include"})).ok}function Q0(i,e){if(i.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},r=e||"demo-project",o=i.iat||0,c=i.sub||i.user_id;if(!c)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const h={iss:`https://securetoken.google.com/${r}`,aud:r,iat:o,exp:o+3600,auth_time:o,sub:c,user_id:c,firebase:{sign_in_provider:"custom",identities:{}},...i};return[ad(JSON.stringify(t)),ad(JSON.stringify(h)),""].join(".")}const Dc={};function XA(){const i={prod:[],emulator:[]};for(const e of Object.keys(Dc))Dc[e]?i.emulator.push(e):i.prod.push(e);return i}function WA(i){let e=document.getElementById(i),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",i),t=!0),{created:t,element:e}}let X1=!1;function cg(i,e){if(typeof window>"u"||typeof document>"u"||!Wr(window.location.host)||Dc[i]===e||Dc[i]||X1)return;Dc[i]=e;function t(I){return`__firebase__banner__${I}`}const r="__firebase__banner",c=XA().prod.length>0;function h(){const I=document.getElementById(r);I&&I.remove()}function p(I){I.style.display="flex",I.style.background="#7faaf0",I.style.position="fixed",I.style.bottom="5px",I.style.left="5px",I.style.padding=".5em",I.style.borderRadius="5px",I.style.alignItems="center"}function g(I,O){I.setAttribute("width","24"),I.setAttribute("id",O),I.setAttribute("height","24"),I.setAttribute("viewBox","0 0 24 24"),I.setAttribute("fill","none"),I.style.marginLeft="-6px"}function _(){const I=document.createElement("span");return I.style.cursor="pointer",I.style.marginLeft="16px",I.style.fontSize="24px",I.innerHTML=" &times;",I.onclick=()=>{X1=!0,h()},I}function T(I,O){I.setAttribute("id",O),I.innerText="Learn more",I.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",I.setAttribute("target","__blank"),I.style.paddingLeft="5px",I.style.textDecoration="underline"}function E(){const I=WA(r),O=t("text"),L=document.getElementById(O)||document.createElement("span"),z=t("learnmore"),j=document.getElementById(z)||document.createElement("a"),Y=t("preprendIcon"),F=document.getElementById(Y)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(I.created){const le=I.element;p(le),T(j,z);const K=_();g(F,Y),le.append(F,L,j,K),document.body.appendChild(le)}c?(L.innerText="Preview backend disconnected.",F.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(F.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,L.innerText="Preview backend running in this workspace."),L.setAttribute("id",O)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",E):E()}function Rn(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function JA(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Rn())}function ZA(){const i=Dd()?.forceEnvironment;if(i==="node")return!0;if(i==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function eI(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function tI(){const i=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof i=="object"&&i.id!==void 0}function nI(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function iI(){const i=Rn();return i.indexOf("MSIE ")>=0||i.indexOf("Trident/")>=0}function sI(){return!ZA()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function rI(){try{return typeof indexedDB=="object"}catch{return!1}}function aI(){return new Promise((i,e)=>{try{let t=!0;const r="validate-browser-context-for-indexeddb-analytics-module",o=self.indexedDB.open(r);o.onsuccess=()=>{o.result.close(),t||self.indexedDB.deleteDatabase(r),i(!0)},o.onupgradeneeded=()=>{t=!1},o.onerror=()=>{e(o.error?.message||"")}}catch(t){e(t)}})}const oI="FirebaseError";class bs extends Error{constructor(e,t,r){super(t),this.code=e,this.customData=r,this.name=oI,Object.setPrototypeOf(this,bs.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Xc.prototype.create)}}class Xc{constructor(e,t,r){this.service=e,this.serviceName=t,this.errors=r}create(e,...t){const r=t[0]||{},o=`${this.service}/${e}`,c=this.errors[e],h=c?lI(c,r):"Error",p=`${this.serviceName}: ${h} (${o}).`;return new bs(o,p,r)}}function lI(i,e){return i.replace(cI,(t,r)=>{const o=e[r];return o!=null?String(o):`<${r}?>`})}const cI=/\{\$([^}]+)}/g;function uI(i){for(const e in i)if(Object.prototype.hasOwnProperty.call(i,e))return!1;return!0}function Hr(i,e){if(i===e)return!0;const t=Object.keys(i),r=Object.keys(e);for(const o of t){if(!r.includes(o))return!1;const c=i[o],h=e[o];if(W1(c)&&W1(h)){if(!Hr(c,h))return!1}else if(c!==h)return!1}for(const o of r)if(!t.includes(o))return!1;return!0}function W1(i){return i!==null&&typeof i=="object"}function Wc(i){const e=[];for(const[t,r]of Object.entries(i))Array.isArray(r)?r.forEach(o=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(o))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function hI(i,e){const t=new dI(i,e);return t.subscribe.bind(t)}class dI{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,r){let o;if(e===void 0&&t===void 0&&r===void 0)throw new Error("Missing Observer.");fI(e,["next","error","complete"])?o=e:o={next:e,error:t,complete:r},o.next===void 0&&(o.next=fp),o.error===void 0&&(o.error=fp),o.complete===void 0&&(o.complete=fp);const c=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?o.error(this.finalError):o.complete()}catch{}}),this.observers.push(o),c}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function fI(i,e){if(typeof i!="object"||i===null)return!1;for(const t of e)if(t in i&&typeof i[t]=="function")return!0;return!1}function fp(){}function Vt(i){return i&&i._delegate?i._delegate:i}class Fr{constructor(e,t,r){this.name=e,this.instanceFactory=t,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const Da="[DEFAULT]";class mI{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const r=new KA;if(this.instancesDeferred.set(t,r),this.isInitialized(t)||this.shouldAutoInitialize())try{const o=this.getOrInitializeService({instanceIdentifier:t});o&&r.resolve(o)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){const t=this.normalizeInstanceIdentifier(e?.identifier),r=e?.optional??!1;if(this.isInitialized(t)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:t})}catch(o){if(r)return null;throw o}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(gI(e))try{this.getOrInitializeService({instanceIdentifier:Da})}catch{}for(const[t,r]of this.instancesDeferred.entries()){const o=this.normalizeInstanceIdentifier(t);try{const c=this.getOrInitializeService({instanceIdentifier:o});r.resolve(c)}catch{}}}}clearInstance(e=Da){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Da){return this.instances.has(e)}getOptions(e=Da){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const o=this.getOrInitializeService({instanceIdentifier:r,options:t});for(const[c,h]of this.instancesDeferred.entries()){const p=this.normalizeInstanceIdentifier(c);r===p&&h.resolve(o)}return o}onInit(e,t){const r=this.normalizeInstanceIdentifier(t),o=this.onInitCallbacks.get(r)??new Set;o.add(e),this.onInitCallbacks.set(r,o);const c=this.instances.get(r);return c&&e(c,r),()=>{o.delete(e)}}invokeOnInitCallbacks(e,t){const r=this.onInitCallbacks.get(t);if(r)for(const o of r)try{o(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:pI(e),options:t}),this.instances.set(e,r),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Da){return this.component?this.component.multipleInstances?e:Da:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function pI(i){return i===Da?void 0:i}function gI(i){return i.instantiationMode==="EAGER"}class _I{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new mI(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}var Ze;(function(i){i[i.DEBUG=0]="DEBUG",i[i.VERBOSE=1]="VERBOSE",i[i.INFO=2]="INFO",i[i.WARN=3]="WARN",i[i.ERROR=4]="ERROR",i[i.SILENT=5]="SILENT"})(Ze||(Ze={}));const yI={debug:Ze.DEBUG,verbose:Ze.VERBOSE,info:Ze.INFO,warn:Ze.WARN,error:Ze.ERROR,silent:Ze.SILENT},vI=Ze.INFO,bI={[Ze.DEBUG]:"log",[Ze.VERBOSE]:"log",[Ze.INFO]:"info",[Ze.WARN]:"warn",[Ze.ERROR]:"error"},TI=(i,e,...t)=>{if(e<i.logLevel)return;const r=new Date().toISOString(),o=bI[e];if(o)console[o](`[${r}]  ${i.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class ug{constructor(e){this.name=e,this._logLevel=vI,this._logHandler=TI,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Ze))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?yI[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Ze.DEBUG,...e),this._logHandler(this,Ze.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Ze.VERBOSE,...e),this._logHandler(this,Ze.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Ze.INFO,...e),this._logHandler(this,Ze.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Ze.WARN,...e),this._logHandler(this,Ze.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Ze.ERROR,...e),this._logHandler(this,Ze.ERROR,...e)}}const wI=(i,e)=>e.some(t=>i instanceof t);let J1,Z1;function EI(){return J1||(J1=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function SI(){return Z1||(Z1=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const K0=new WeakMap,Rp=new WeakMap,X0=new WeakMap,mp=new WeakMap,hg=new WeakMap;function AI(i){const e=new Promise((t,r)=>{const o=()=>{i.removeEventListener("success",c),i.removeEventListener("error",h)},c=()=>{t(Br(i.result)),o()},h=()=>{r(i.error),o()};i.addEventListener("success",c),i.addEventListener("error",h)});return e.then(t=>{t instanceof IDBCursor&&K0.set(t,i)}).catch(()=>{}),hg.set(e,i),e}function II(i){if(Rp.has(i))return;const e=new Promise((t,r)=>{const o=()=>{i.removeEventListener("complete",c),i.removeEventListener("error",h),i.removeEventListener("abort",h)},c=()=>{t(),o()},h=()=>{r(i.error||new DOMException("AbortError","AbortError")),o()};i.addEventListener("complete",c),i.addEventListener("error",h),i.addEventListener("abort",h)});Rp.set(i,e)}let Dp={get(i,e,t){if(i instanceof IDBTransaction){if(e==="done")return Rp.get(i);if(e==="objectStoreNames")return i.objectStoreNames||X0.get(i);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return Br(i[e])},set(i,e,t){return i[e]=t,!0},has(i,e){return i instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in i}};function CI(i){Dp=i(Dp)}function NI(i){return i===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const r=i.call(pp(this),e,...t);return X0.set(r,e.sort?e.sort():[e]),Br(r)}:SI().includes(i)?function(...e){return i.apply(pp(this),e),Br(K0.get(this))}:function(...e){return Br(i.apply(pp(this),e))}}function xI(i){return typeof i=="function"?NI(i):(i instanceof IDBTransaction&&II(i),wI(i,EI())?new Proxy(i,Dp):i)}function Br(i){if(i instanceof IDBRequest)return AI(i);if(mp.has(i))return mp.get(i);const e=xI(i);return e!==i&&(mp.set(i,e),hg.set(e,i)),e}const pp=i=>hg.get(i);function RI(i,e,{blocked:t,upgrade:r,blocking:o,terminated:c}={}){const h=indexedDB.open(i,e),p=Br(h);return r&&h.addEventListener("upgradeneeded",g=>{r(Br(h.result),g.oldVersion,g.newVersion,Br(h.transaction),g)}),t&&h.addEventListener("blocked",g=>t(g.oldVersion,g.newVersion,g)),p.then(g=>{c&&g.addEventListener("close",()=>c()),o&&g.addEventListener("versionchange",_=>o(_.oldVersion,_.newVersion,_))}).catch(()=>{}),p}const DI=["get","getKey","getAll","getAllKeys","count"],MI=["put","add","delete","clear"],gp=new Map;function eb(i,e){if(!(i instanceof IDBDatabase&&!(e in i)&&typeof e=="string"))return;if(gp.get(e))return gp.get(e);const t=e.replace(/FromIndex$/,""),r=e!==t,o=MI.includes(t);if(!(t in(r?IDBIndex:IDBObjectStore).prototype)||!(o||DI.includes(t)))return;const c=async function(h,...p){const g=this.transaction(h,o?"readwrite":"readonly");let _=g.store;return r&&(_=_.index(p.shift())),(await Promise.all([_[t](...p),o&&g.done]))[0]};return gp.set(e,c),c}CI(i=>({...i,get:(e,t,r)=>eb(e,t)||i.get(e,t,r),has:(e,t)=>!!eb(e,t)||i.has(e,t)}));class OI{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(kI(t)){const r=t.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(t=>t).join(" ")}}function kI(i){return i.getComponent()?.type==="VERSION"}const Mp="@firebase/app",tb="0.14.6";const Gs=new ug("@firebase/app"),jI="@firebase/app-compat",LI="@firebase/analytics-compat",PI="@firebase/analytics",VI="@firebase/app-check-compat",BI="@firebase/app-check",UI="@firebase/auth",zI="@firebase/auth-compat",qI="@firebase/database",HI="@firebase/data-connect",FI="@firebase/database-compat",$I="@firebase/functions",GI="@firebase/functions-compat",YI="@firebase/installations",QI="@firebase/installations-compat",KI="@firebase/messaging",XI="@firebase/messaging-compat",WI="@firebase/performance",JI="@firebase/performance-compat",ZI="@firebase/remote-config",eC="@firebase/remote-config-compat",tC="@firebase/storage",nC="@firebase/storage-compat",iC="@firebase/firestore",sC="@firebase/ai",rC="@firebase/firestore-compat",aC="firebase",oC="12.6.0";const Op="[DEFAULT]",lC={[Mp]:"fire-core",[jI]:"fire-core-compat",[PI]:"fire-analytics",[LI]:"fire-analytics-compat",[BI]:"fire-app-check",[VI]:"fire-app-check-compat",[UI]:"fire-auth",[zI]:"fire-auth-compat",[qI]:"fire-rtdb",[HI]:"fire-data-connect",[FI]:"fire-rtdb-compat",[$I]:"fire-fn",[GI]:"fire-fn-compat",[YI]:"fire-iid",[QI]:"fire-iid-compat",[KI]:"fire-fcm",[XI]:"fire-fcm-compat",[WI]:"fire-perf",[JI]:"fire-perf-compat",[ZI]:"fire-rc",[eC]:"fire-rc-compat",[tC]:"fire-gcs",[nC]:"fire-gcs-compat",[iC]:"fire-fst",[rC]:"fire-fst-compat",[sC]:"fire-vertex","fire-js":"fire-js",[aC]:"fire-js-all"};const od=new Map,cC=new Map,kp=new Map;function nb(i,e){try{i.container.addComponent(e)}catch(t){Gs.debug(`Component ${e.name} failed to register with FirebaseApp ${i.name}`,t)}}function qa(i){const e=i.name;if(kp.has(e))return Gs.debug(`There were multiple attempts to register component ${e}.`),!1;kp.set(e,i);for(const t of od.values())nb(t,i);for(const t of cC.values())nb(t,i);return!0}function Md(i,e){const t=i.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),i.container.getProvider(e)}function _i(i){return i==null?!1:i.settings!==void 0}const uC={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Ur=new Xc("app","Firebase",uC);class hC{constructor(e,t,r){this._isDeleted=!1,this._options={...e},this._config={...t},this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Fr("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Ur.create("app-deleted",{appName:this._name})}}const Ya=oC;function W0(i,e={}){let t=i;typeof e!="object"&&(e={name:e});const r={name:Op,automaticDataCollectionEnabled:!0,...e},o=r.name;if(typeof o!="string"||!o)throw Ur.create("bad-app-name",{appName:String(o)});if(t||(t=G0()),!t)throw Ur.create("no-options");const c=od.get(o);if(c){if(Hr(t,c.options)&&Hr(r,c.config))return c;throw Ur.create("duplicate-app",{appName:o})}const h=new _I(o);for(const g of kp.values())h.addComponent(g);const p=new hC(t,r,h);return od.set(o,p),p}function dg(i=Op){const e=od.get(i);if(!e&&i===Op&&G0())return W0();if(!e)throw Ur.create("no-app",{appName:i});return e}function ds(i,e,t){let r=lC[i]??i;t&&(r+=`-${t}`);const o=r.match(/\s|\//),c=e.match(/\s|\//);if(o||c){const h=[`Unable to register library "${r}" with version "${e}":`];o&&h.push(`library name "${r}" contains illegal characters (whitespace or "/")`),o&&c&&h.push("and"),c&&h.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Gs.warn(h.join(" "));return}qa(new Fr(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}const dC="firebase-heartbeat-database",fC=1,zc="firebase-heartbeat-store";let _p=null;function J0(){return _p||(_p=RI(dC,fC,{upgrade:(i,e)=>{switch(e){case 0:try{i.createObjectStore(zc)}catch(t){console.warn(t)}}}}).catch(i=>{throw Ur.create("idb-open",{originalErrorMessage:i.message})})),_p}async function mC(i){try{const t=(await J0()).transaction(zc),r=await t.objectStore(zc).get(Z0(i));return await t.done,r}catch(e){if(e instanceof bs)Gs.warn(e.message);else{const t=Ur.create("idb-get",{originalErrorMessage:e?.message});Gs.warn(t.message)}}}async function ib(i,e){try{const r=(await J0()).transaction(zc,"readwrite");await r.objectStore(zc).put(e,Z0(i)),await r.done}catch(t){if(t instanceof bs)Gs.warn(t.message);else{const r=Ur.create("idb-set",{originalErrorMessage:t?.message});Gs.warn(r.message)}}}function Z0(i){return`${i.name}!${i.options.appId}`}const pC=1024,gC=30;class _C{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new vC(t),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){try{const t=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=sb();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===r||this._heartbeatsCache.heartbeats.some(o=>o.date===r))return;if(this._heartbeatsCache.heartbeats.push({date:r,agent:t}),this._heartbeatsCache.heartbeats.length>gC){const o=bC(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(o,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(e){Gs.warn(e)}}async getHeartbeatsHeader(){try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";const e=sb(),{heartbeatsToSend:t,unsentEntries:r}=yC(this._heartbeatsCache.heartbeats),o=ad(JSON.stringify({version:2,heartbeats:t}));return this._heartbeatsCache.lastSentHeartbeatDate=e,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),o}catch(e){return Gs.warn(e),""}}}function sb(){return new Date().toISOString().substring(0,10)}function yC(i,e=pC){const t=[];let r=i.slice();for(const o of i){const c=t.find(h=>h.agent===o.agent);if(c){if(c.dates.push(o.date),rb(t)>e){c.dates.pop();break}}else if(t.push({agent:o.agent,dates:[o.date]}),rb(t)>e){t.pop();break}r=r.slice(1)}return{heartbeatsToSend:t,unsentEntries:r}}class vC{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return rI()?aI().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await mC(this.app);return t?.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return ib(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return ib(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return}}function rb(i){return ad(JSON.stringify({version:2,heartbeats:i})).length}function bC(i){if(i.length===0)return-1;let e=0,t=i[0].date;for(let r=1;r<i.length;r++)i[r].date<t&&(t=i[r].date,e=r);return e}function TC(i){qa(new Fr("platform-logger",e=>new OI(e),"PRIVATE")),qa(new Fr("heartbeat",e=>new _C(e),"PRIVATE")),ds(Mp,tb,i),ds(Mp,tb,"esm2020"),ds("fire-js","")}TC("");function eT(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const wC=eT,tT=new Xc("auth","Firebase",eT());const ld=new ug("@firebase/auth");function EC(i,...e){ld.logLevel<=Ze.WARN&&ld.warn(`Auth (${Ya}): ${i}`,...e)}function Qh(i,...e){ld.logLevel<=Ze.ERROR&&ld.error(`Auth (${Ya}): ${i}`,...e)}function ys(i,...e){throw mg(i,...e)}function Oi(i,...e){return mg(i,...e)}function fg(i,e,t){const r={...wC(),[e]:t};return new Xc("auth","Firebase",r).create(e,{appName:i.name})}function Va(i){return fg(i,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function SC(i,e,t){const r=t;if(!(e instanceof r))throw r.name!==e.constructor.name&&ys(i,"argument-error"),fg(i,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function mg(i,...e){if(typeof i!="string"){const t=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=i.name),i._errorFactory.create(t,...r)}return tT.create(i,...e)}function Pe(i,e,...t){if(!i)throw mg(e,...t)}function qs(i){const e="INTERNAL ASSERTION FAILED: "+i;throw Qh(e),new Error(e)}function Ys(i,e){i||qs(e)}function jp(){return typeof self<"u"&&self.location?.href||""}function AC(){return ab()==="http:"||ab()==="https:"}function ab(){return typeof self<"u"&&self.location?.protocol||null}function IC(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(AC()||tI()||"connection"in navigator)?navigator.onLine:!0}function CC(){if(typeof navigator>"u")return null;const i=navigator;return i.languages&&i.languages[0]||i.language||null}class Jc{constructor(e,t){this.shortDelay=e,this.longDelay=t,Ys(t>e,"Short delay should be less than long delay!"),this.isMobile=JA()||nI()}get(){return IC()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function pg(i,e){Ys(i.emulator,"Emulator should always be set here");const{url:t}=i.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}class nT{static initialize(e,t,r){this.fetchImpl=e,t&&(this.headersImpl=t),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;qs("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;qs("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;qs("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const NC={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};const xC=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],RC=new Jc(3e4,6e4);function gg(i,e){return i.tenantId&&!e.tenantId?{...e,tenantId:i.tenantId}:e}async function ml(i,e,t,r,o={}){return iT(i,o,async()=>{let c={},h={};r&&(e==="GET"?h=r:c={body:JSON.stringify(r)});const p=Wc({key:i.config.apiKey,...h}).slice(1),g=await i._getAdditionalHeaders();g["Content-Type"]="application/json",i.languageCode&&(g["X-Firebase-Locale"]=i.languageCode);const _={method:e,headers:g,...c};return eI()||(_.referrerPolicy="no-referrer"),i.emulatorConfig&&Wr(i.emulatorConfig.host)&&(_.credentials="include"),nT.fetch()(await sT(i,i.config.apiHost,t,p),_)})}async function iT(i,e,t){i._canInitEmulator=!1;const r={...NC,...e};try{const o=new MC(i),c=await Promise.race([t(),o.promise]);o.clearNetworkTimeout();const h=await c.json();if("needConfirmation"in h)throw Vh(i,"account-exists-with-different-credential",h);if(c.ok&&!("errorMessage"in h))return h;{const p=c.ok?h.errorMessage:h.error.message,[g,_]=p.split(" : ");if(g==="FEDERATED_USER_ID_ALREADY_LINKED")throw Vh(i,"credential-already-in-use",h);if(g==="EMAIL_EXISTS")throw Vh(i,"email-already-in-use",h);if(g==="USER_DISABLED")throw Vh(i,"user-disabled",h);const T=r[g]||g.toLowerCase().replace(/[_\s]+/g,"-");if(_)throw fg(i,T,_);ys(i,T)}}catch(o){if(o instanceof bs)throw o;ys(i,"network-request-failed",{message:String(o)})}}async function DC(i,e,t,r,o={}){const c=await ml(i,e,t,r,o);return"mfaPendingCredential"in c&&ys(i,"multi-factor-auth-required",{_serverResponse:c}),c}async function sT(i,e,t,r){const o=`${e}${t}?${r}`,c=i,h=c.config.emulator?pg(i.config,o):`${i.config.apiScheme}://${o}`;return xC.includes(t)&&(await c._persistenceManagerAvailable,c._getPersistenceType()==="COOKIE")?c._getPersistence()._getFinalTarget(h).toString():h}class MC{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,r)=>{this.timer=setTimeout(()=>r(Oi(this.auth,"network-request-failed")),RC.get())})}}function Vh(i,e,t){const r={appName:i.name};t.email&&(r.email=t.email),t.phoneNumber&&(r.phoneNumber=t.phoneNumber);const o=Oi(i,e,r);return o.customData._tokenResponse=t,o}async function OC(i,e){return ml(i,"POST","/v1/accounts:delete",e)}async function cd(i,e){return ml(i,"POST","/v1/accounts:lookup",e)}function Mc(i){if(i)try{const e=new Date(Number(i));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function kC(i,e=!1){const t=Vt(i),r=await t.getIdToken(e),o=_g(r);Pe(o&&o.exp&&o.auth_time&&o.iat,t.auth,"internal-error");const c=typeof o.firebase=="object"?o.firebase:void 0,h=c?.sign_in_provider;return{claims:o,token:r,authTime:Mc(yp(o.auth_time)),issuedAtTime:Mc(yp(o.iat)),expirationTime:Mc(yp(o.exp)),signInProvider:h||null,signInSecondFactor:c?.sign_in_second_factor||null}}function yp(i){return Number(i)*1e3}function _g(i){const[e,t,r]=i.split(".");if(e===void 0||t===void 0||r===void 0)return Qh("JWT malformed, contained fewer than 3 sections"),null;try{const o=H0(t);return o?JSON.parse(o):(Qh("Failed to decode base64 JWT payload"),null)}catch(o){return Qh("Caught error parsing JWT payload as JSON",o?.toString()),null}}function ob(i){const e=_g(i);return Pe(e,"internal-error"),Pe(typeof e.exp<"u","internal-error"),Pe(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}async function qc(i,e,t=!1){if(t)return e;try{return await e}catch(r){throw r instanceof bs&&jC(r)&&i.auth.currentUser===i&&await i.auth.signOut(),r}}function jC({code:i}){return i==="auth/user-disabled"||i==="auth/user-token-expired"}class LC{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const t=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),t}else{this.errorBackoff=3e4;const r=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,r)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}class Lp{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=Mc(this.lastLoginAt),this.creationTime=Mc(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}async function ud(i){const e=i.auth,t=await i.getIdToken(),r=await qc(i,cd(e,{idToken:t}));Pe(r?.users.length,e,"internal-error");const o=r.users[0];i._notifyReloadListener(o);const c=o.providerUserInfo?.length?rT(o.providerUserInfo):[],h=VC(i.providerData,c),p=i.isAnonymous,g=!(i.email&&o.passwordHash)&&!h?.length,_=p?g:!1,T={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:h,metadata:new Lp(o.createdAt,o.lastLoginAt),isAnonymous:_};Object.assign(i,T)}async function PC(i){const e=Vt(i);await ud(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function VC(i,e){return[...i.filter(r=>!e.some(o=>o.providerId===r.providerId)),...e]}function rT(i){return i.map(({providerId:e,...t})=>({providerId:e,uid:t.rawId||"",displayName:t.displayName||null,email:t.email||null,phoneNumber:t.phoneNumber||null,photoURL:t.photoUrl||null}))}async function BC(i,e){const t=await iT(i,{},async()=>{const r=Wc({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:o,apiKey:c}=i.config,h=await sT(i,o,"/v1/token",`key=${c}`),p=await i._getAdditionalHeaders();p["Content-Type"]="application/x-www-form-urlencoded";const g={method:"POST",headers:p,body:r};return i.emulatorConfig&&Wr(i.emulatorConfig.host)&&(g.credentials="include"),nT.fetch()(h,g)});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function UC(i,e){return ml(i,"POST","/v2/accounts:revokeToken",gg(i,e))}class Wo{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Pe(e.idToken,"internal-error"),Pe(typeof e.idToken<"u","internal-error"),Pe(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):ob(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){Pe(e.length!==0,"internal-error");const t=ob(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(Pe(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:r,refreshToken:o,expiresIn:c}=await BC(e,t);this.updateTokensAndExpiration(r,o,Number(c))}updateTokensAndExpiration(e,t,r){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,t){const{refreshToken:r,accessToken:o,expirationTime:c}=t,h=new Wo;return r&&(Pe(typeof r=="string","internal-error",{appName:e}),h.refreshToken=r),o&&(Pe(typeof o=="string","internal-error",{appName:e}),h.accessToken=o),c&&(Pe(typeof c=="number","internal-error",{appName:e}),h.expirationTime=c),h}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Wo,this.toJSON())}_performRefresh(){return qs("not implemented")}}function xr(i,e){Pe(typeof i=="string"||typeof i>"u","internal-error",{appName:e})}class Mi{constructor({uid:e,auth:t,stsTokenManager:r,...o}){this.providerId="firebase",this.proactiveRefresh=new LC(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=t,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=o.displayName||null,this.email=o.email||null,this.emailVerified=o.emailVerified||!1,this.phoneNumber=o.phoneNumber||null,this.photoURL=o.photoURL||null,this.isAnonymous=o.isAnonymous||!1,this.tenantId=o.tenantId||null,this.providerData=o.providerData?[...o.providerData]:[],this.metadata=new Lp(o.createdAt||void 0,o.lastLoginAt||void 0)}async getIdToken(e){const t=await qc(this,this.stsTokenManager.getToken(this.auth,e));return Pe(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return kC(this,e)}reload(){return PC(this)}_assign(e){this!==e&&(Pe(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>({...t})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new Mi({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return t.metadata._copy(this.metadata),t}_onReload(e){Pe(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),t&&await ud(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(_i(this.auth.app))return Promise.reject(Va(this.auth));const e=await this.getIdToken();return await qc(this,OC(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){const r=t.displayName??void 0,o=t.email??void 0,c=t.phoneNumber??void 0,h=t.photoURL??void 0,p=t.tenantId??void 0,g=t._redirectEventId??void 0,_=t.createdAt??void 0,T=t.lastLoginAt??void 0,{uid:E,emailVerified:I,isAnonymous:O,providerData:L,stsTokenManager:z}=t;Pe(E&&z,e,"internal-error");const j=Wo.fromJSON(this.name,z);Pe(typeof E=="string",e,"internal-error"),xr(r,e.name),xr(o,e.name),Pe(typeof I=="boolean",e,"internal-error"),Pe(typeof O=="boolean",e,"internal-error"),xr(c,e.name),xr(h,e.name),xr(p,e.name),xr(g,e.name),xr(_,e.name),xr(T,e.name);const Y=new Mi({uid:E,auth:e,email:o,emailVerified:I,displayName:r,isAnonymous:O,photoURL:h,phoneNumber:c,tenantId:p,stsTokenManager:j,createdAt:_,lastLoginAt:T});return L&&Array.isArray(L)&&(Y.providerData=L.map(F=>({...F}))),g&&(Y._redirectEventId=g),Y}static async _fromIdTokenResponse(e,t,r=!1){const o=new Wo;o.updateFromServerResponse(t);const c=new Mi({uid:t.localId,auth:e,stsTokenManager:o,isAnonymous:r});return await ud(c),c}static async _fromGetAccountInfoResponse(e,t,r){const o=t.users[0];Pe(o.localId!==void 0,"internal-error");const c=o.providerUserInfo!==void 0?rT(o.providerUserInfo):[],h=!(o.email&&o.passwordHash)&&!c?.length,p=new Wo;p.updateFromIdToken(r);const g=new Mi({uid:o.localId,auth:e,stsTokenManager:p,isAnonymous:h}),_={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:c,metadata:new Lp(o.createdAt,o.lastLoginAt),isAnonymous:!(o.email&&o.passwordHash)&&!c?.length};return Object.assign(g,_),g}}const lb=new Map;function Hs(i){Ys(i instanceof Function,"Expected a class definition");let e=lb.get(i);return e?(Ys(e instanceof i,"Instance stored in cache mismatched with class"),e):(e=new i,lb.set(i,e),e)}class aT{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}aT.type="NONE";const cb=aT;function Kh(i,e,t){return`firebase:${i}:${e}:${t}`}class Jo{constructor(e,t,r){this.persistence=e,this.auth=t,this.userKey=r;const{config:o,name:c}=this.auth;this.fullUserKey=Kh(this.userKey,o.apiKey,c),this.fullPersistenceKey=Kh("persistence",o.apiKey,c),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const t=await cd(this.auth,{idToken:e}).catch(()=>{});return t?Mi._fromGetAccountInfoResponse(this.auth,t,e):null}return Mi._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,r="authUser"){if(!t.length)return new Jo(Hs(cb),e,r);const o=(await Promise.all(t.map(async _=>{if(await _._isAvailable())return _}))).filter(_=>_);let c=o[0]||Hs(cb);const h=Kh(r,e.config.apiKey,e.name);let p=null;for(const _ of t)try{const T=await _._get(h);if(T){let E;if(typeof T=="string"){const I=await cd(e,{idToken:T}).catch(()=>{});if(!I)break;E=await Mi._fromGetAccountInfoResponse(e,I,T)}else E=Mi._fromJSON(e,T);_!==c&&(p=E),c=_;break}}catch{}const g=o.filter(_=>_._shouldAllowMigration);return!c._shouldAllowMigration||!g.length?new Jo(c,e,r):(c=g[0],p&&await c._set(h,p.toJSON()),await Promise.all(t.map(async _=>{if(_!==c)try{await _._remove(h)}catch{}})),new Jo(c,e,r))}}function ub(i){const e=i.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(uT(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(oT(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(dT(e))return"Blackberry";if(fT(e))return"Webos";if(lT(e))return"Safari";if((e.includes("chrome/")||cT(e))&&!e.includes("edge/"))return"Chrome";if(hT(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=i.match(t);if(r?.length===2)return r[1]}return"Other"}function oT(i=Rn()){return/firefox\//i.test(i)}function lT(i=Rn()){const e=i.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function cT(i=Rn()){return/crios\//i.test(i)}function uT(i=Rn()){return/iemobile/i.test(i)}function hT(i=Rn()){return/android/i.test(i)}function dT(i=Rn()){return/blackberry/i.test(i)}function fT(i=Rn()){return/webos/i.test(i)}function yg(i=Rn()){return/iphone|ipad|ipod/i.test(i)||/macintosh/i.test(i)&&/mobile/i.test(i)}function zC(i=Rn()){return yg(i)&&!!window.navigator?.standalone}function qC(){return iI()&&document.documentMode===10}function mT(i=Rn()){return yg(i)||hT(i)||fT(i)||dT(i)||/windows phone/i.test(i)||uT(i)}function pT(i,e=[]){let t;switch(i){case"Browser":t=ub(Rn());break;case"Worker":t=`${ub(Rn())}-${i}`;break;default:t=i}const r=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${Ya}/${r}`}class HC{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const r=c=>new Promise((h,p)=>{try{const g=e(c);h(g)}catch(g){p(g)}});r.onAbort=t,this.queue.push(r);const o=this.queue.length-1;return()=>{this.queue[o]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const r of this.queue)await r(e),r.onAbort&&t.push(r.onAbort)}catch(r){t.reverse();for(const o of t)try{o()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r?.message})}}}async function FC(i,e={}){return ml(i,"GET","/v2/passwordPolicy",gg(i,e))}const $C=6;class GC{constructor(e){const t=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=t.minPasswordLength??$C,t.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=t.maxPasswordLength),t.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=t.containsLowercaseCharacter),t.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=t.containsUppercaseCharacter),t.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=t.containsNumericCharacter),t.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=t.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=e.allowedNonAlphanumericCharacters?.join("")??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const t={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,t),this.validatePasswordCharacterOptions(e,t),t.isValid&&(t.isValid=t.meetsMinPasswordLength??!0),t.isValid&&(t.isValid=t.meetsMaxPasswordLength??!0),t.isValid&&(t.isValid=t.containsLowercaseLetter??!0),t.isValid&&(t.isValid=t.containsUppercaseLetter??!0),t.isValid&&(t.isValid=t.containsNumericCharacter??!0),t.isValid&&(t.isValid=t.containsNonAlphanumericCharacter??!0),t}validatePasswordLengthOptions(e,t){const r=this.customStrengthOptions.minPasswordLength,o=this.customStrengthOptions.maxPasswordLength;r&&(t.meetsMinPasswordLength=e.length>=r),o&&(t.meetsMaxPasswordLength=e.length<=o)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let r;for(let o=0;o<e.length;o++)r=e.charAt(o),this.updatePasswordCharacterOptionsStatuses(t,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,t,r,o,c){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=o)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=c))}}class YC{constructor(e,t,r,o){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=r,this.config=o,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new hb(this),this.idTokenSubscription=new hb(this),this.beforeStateQueue=new HC(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=tT,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=o.sdkClientVersion,this._persistenceManagerAvailable=new Promise(c=>this._resolvePersistenceManagerAvailable=c)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=Hs(t)),this._initializationPromise=this.queue(async()=>{if(!this._deleted&&(this.persistenceManager=await Jo.create(this,e),this._resolvePersistenceManagerAvailable?.(),!this._deleted)){if(this._popupRedirectResolver?._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=this.currentUser?.uid||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await cd(this,{idToken:e}),r=await Mi._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(r)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){if(_i(this.app)){const c=this.app.settings.authIdToken;return c?new Promise(h=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(c).then(h,h))}):this.directlySetCurrentUser(null)}const t=await this.assertedPersistence.getCurrentUser();let r=t,o=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const c=this.redirectUser?._redirectEventId,h=r?._redirectEventId,p=await this.tryRedirectSignIn(e);(!c||c===h)&&p?.user&&(r=p.user,o=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(o)try{await this.beforeStateQueue.runMiddleware(r)}catch(c){r=t,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(c))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return Pe(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await ud(e)}catch(t){if(t?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=CC()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(_i(this.app))return Promise.reject(Va(this));const t=e?Vt(e):null;return t&&Pe(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&Pe(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return _i(this.app)?Promise.reject(Va(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return _i(this.app)?Promise.reject(Va(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Hs(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await FC(this),t=new GC(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Xc("auth","Firebase",e())}onAuthStateChanged(e,t,r){return this.registerStateListener(this.authStateSubscription,e,t,r)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,r){return this.registerStateListener(this.idTokenSubscription,e,t,r)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(r.tenantId=this.tenantId),await UC(this,r)}}toJSON(){return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:this._currentUser?.toJSON()}}async _setRedirectUser(e,t){const r=await this.getOrInitRedirectPersistenceManager(t);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&Hs(e)||this._popupRedirectResolver;Pe(t,this,"argument-error"),this.redirectPersistenceManager=await Jo.create(this,[Hs(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){return this._isInitialized&&await this.queue(async()=>{}),this._currentUser?._redirectEventId===e?this._currentUser:this.redirectUser?._redirectEventId===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=this.currentUser?.uid??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,r,o){if(this._deleted)return()=>{};const c=typeof t=="function"?t:t.next.bind(t);let h=!1;const p=this._isInitialized?Promise.resolve():this._initializationPromise;if(Pe(p,this,"internal-error"),p.then(()=>{h||c(this.currentUser)}),typeof t=="function"){const g=e.addObserver(t,r,o);return()=>{h=!0,g()}}else{const g=e.addObserver(t);return()=>{h=!0,g()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Pe(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=pT(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const t=await this.heartbeatServiceProvider.getImmediate({optional:!0})?.getHeartbeatsHeader();t&&(e["X-Firebase-Client"]=t);const r=await this._getAppCheckToken();return r&&(e["X-Firebase-AppCheck"]=r),e}async _getAppCheckToken(){if(_i(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await this.appCheckServiceProvider.getImmediate({optional:!0})?.getToken();return e?.error&&EC(`Error while retrieving App Check token: ${e.error}`),e?.token}}function Od(i){return Vt(i)}class hb{constructor(e){this.auth=e,this.observer=null,this.addObserver=hI(t=>this.observer=t)}get next(){return Pe(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}let vg={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function QC(i){vg=i}function KC(i){return vg.loadJS(i)}function XC(){return vg.gapiScript}function WC(i){return`__${i}${Math.floor(Math.random()*1e6)}`}function JC(i,e){const t=Md(i,"auth");if(t.isInitialized()){const o=t.getImmediate(),c=t.getOptions();if(Hr(c,e??{}))return o;ys(o,"already-initialized")}return t.initialize({options:e})}function ZC(i,e){const t=e?.persistence||[],r=(Array.isArray(t)?t:[t]).map(Hs);e?.errorMap&&i._updateErrorMap(e.errorMap),i._initializeWithPersistence(r,e?.popupRedirectResolver)}function eN(i,e,t){const r=Od(i);Pe(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const o=!1,c=gT(e),{host:h,port:p}=tN(e),g=p===null?"":`:${p}`,_={url:`${c}//${h}${g}/`},T=Object.freeze({host:h,port:p,protocol:c.replace(":",""),options:Object.freeze({disableWarnings:o})});if(!r._canInitEmulator){Pe(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),Pe(Hr(_,r.config.emulator)&&Hr(T,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=_,r.emulatorConfig=T,r.settings.appVerificationDisabledForTesting=!0,Wr(h)?(lg(`${c}//${h}${g}`),cg("Auth",!0)):nN()}function gT(i){const e=i.indexOf(":");return e<0?"":i.substr(0,e+1)}function tN(i){const e=gT(i),t=/(\/\/)?([^?#/]+)/.exec(i.substr(e.length));if(!t)return{host:"",port:null};const r=t[2].split("@").pop()||"",o=/^(\[[^\]]+\])(:|$)/.exec(r);if(o){const c=o[1];return{host:c,port:db(r.substr(c.length+1))}}else{const[c,h]=r.split(":");return{host:c,port:db(h)}}}function db(i){if(!i)return null;const e=Number(i);return isNaN(e)?null:e}function nN(){function i(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",i):i())}class _T{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return qs("not implemented")}_getIdTokenResponse(e){return qs("not implemented")}_linkToIdToken(e,t){return qs("not implemented")}_getReauthenticationResolver(e){return qs("not implemented")}}async function Zo(i,e){return DC(i,"POST","/v1/accounts:signInWithIdp",gg(i,e))}const iN="http://localhost";class Ha extends _T{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new Ha(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):ys("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:o,...c}=t;if(!r||!o)return null;const h=new Ha(r,o);return h.idToken=c.idToken||void 0,h.accessToken=c.accessToken||void 0,h.secret=c.secret,h.nonce=c.nonce,h.pendingToken=c.pendingToken||null,h}_getIdTokenResponse(e){const t=this.buildRequest();return Zo(e,t)}_linkToIdToken(e,t){const r=this.buildRequest();return r.idToken=t,Zo(e,r)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,Zo(e,t)}buildRequest(){const e={requestUri:iN,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=Wc(t)}return e}}class bg{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}class Zc extends bg{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class Or extends Zc{constructor(){super("facebook.com")}static credential(e){return Ha._fromParams({providerId:Or.PROVIDER_ID,signInMethod:Or.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Or.credentialFromTaggedObject(e)}static credentialFromError(e){return Or.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Or.credential(e.oauthAccessToken)}catch{return null}}}Or.FACEBOOK_SIGN_IN_METHOD="facebook.com";Or.PROVIDER_ID="facebook.com";class zs extends Zc{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return Ha._fromParams({providerId:zs.PROVIDER_ID,signInMethod:zs.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return zs.credentialFromTaggedObject(e)}static credentialFromError(e){return zs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:r}=e;if(!t&&!r)return null;try{return zs.credential(t,r)}catch{return null}}}zs.GOOGLE_SIGN_IN_METHOD="google.com";zs.PROVIDER_ID="google.com";class kr extends Zc{constructor(){super("github.com")}static credential(e){return Ha._fromParams({providerId:kr.PROVIDER_ID,signInMethod:kr.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return kr.credentialFromTaggedObject(e)}static credentialFromError(e){return kr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return kr.credential(e.oauthAccessToken)}catch{return null}}}kr.GITHUB_SIGN_IN_METHOD="github.com";kr.PROVIDER_ID="github.com";class jr extends Zc{constructor(){super("twitter.com")}static credential(e,t){return Ha._fromParams({providerId:jr.PROVIDER_ID,signInMethod:jr.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return jr.credentialFromTaggedObject(e)}static credentialFromError(e){return jr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:r}=e;if(!t||!r)return null;try{return jr.credential(t,r)}catch{return null}}}jr.TWITTER_SIGN_IN_METHOD="twitter.com";jr.PROVIDER_ID="twitter.com";class sl{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,r,o=!1){const c=await Mi._fromIdTokenResponse(e,r,o),h=fb(r);return new sl({user:c,providerId:h,_tokenResponse:r,operationType:t})}static async _forOperation(e,t,r){await e._updateTokensIfNecessary(r,!0);const o=fb(r);return new sl({user:e,providerId:o,_tokenResponse:r,operationType:t})}}function fb(i){return i.providerId?i.providerId:"phoneNumber"in i?"phone":null}class hd extends bs{constructor(e,t,r,o){super(t.code,t.message),this.operationType=r,this.user=o,Object.setPrototypeOf(this,hd.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:t.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,t,r,o){return new hd(e,t,r,o)}}function yT(i,e,t,r){return(e==="reauthenticate"?t._getReauthenticationResolver(i):t._getIdTokenResponse(i)).catch(c=>{throw c.code==="auth/multi-factor-auth-required"?hd._fromErrorAndOperation(i,c,e,r):c})}async function sN(i,e,t=!1){const r=await qc(i,e._linkToIdToken(i.auth,await i.getIdToken()),t);return sl._forOperation(i,"link",r)}async function rN(i,e,t=!1){const{auth:r}=i;if(_i(r.app))return Promise.reject(Va(r));const o="reauthenticate";try{const c=await qc(i,yT(r,o,e,i),t);Pe(c.idToken,r,"internal-error");const h=_g(c.idToken);Pe(h,r,"internal-error");const{sub:p}=h;return Pe(i.uid===p,r,"user-mismatch"),sl._forOperation(i,o,c)}catch(c){throw c?.code==="auth/user-not-found"&&ys(r,"user-mismatch"),c}}async function aN(i,e,t=!1){if(_i(i.app))return Promise.reject(Va(i));const r="signIn",o=await yT(i,r,e),c=await sl._fromIdTokenResponse(i,r,o);return t||await i._updateCurrentUser(c.user),c}function oN(i,e,t,r){return Vt(i).onIdTokenChanged(e,t,r)}function lN(i,e,t){return Vt(i).beforeAuthStateChanged(e,t)}function cN(i,e,t,r){return Vt(i).onAuthStateChanged(e,t,r)}function uN(i){return Vt(i).signOut()}const dd="__sak";class vT{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(dd,"1"),this.storage.removeItem(dd),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}const hN=1e3,dN=10;class bT extends vT{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=mT(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const r=this.storage.getItem(t),o=this.localCache[t];r!==o&&e(t,o,r)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((h,p,g)=>{this.notifyListeners(h,g)});return}const r=e.key;t?this.detachListener():this.stopPolling();const o=()=>{const h=this.storage.getItem(r);!t&&this.localCache[r]===h||this.notifyListeners(r,h)},c=this.storage.getItem(r);qC()&&c!==e.newValue&&e.newValue!==e.oldValue?setTimeout(o,dN):o()}notifyListeners(e,t){this.localCache[e]=t;const r=this.listeners[e];if(r)for(const o of Array.from(r))o(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:r}),!0)})},hN)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}bT.type="LOCAL";const fN=bT;class TT extends vT{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}TT.type="SESSION";const wT=TT;function mN(i){return Promise.all(i.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}class kd{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(o=>o.isListeningto(e));if(t)return t;const r=new kd(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:r,eventType:o,data:c}=t.data,h=this.handlersMap[o];if(!h?.size)return;t.ports[0].postMessage({status:"ack",eventId:r,eventType:o});const p=Array.from(h).map(async _=>_(t.origin,c)),g=await mN(p);t.ports[0].postMessage({status:"done",eventId:r,eventType:o,response:g})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}kd.receivers=[];function Tg(i="",e=10){let t="";for(let r=0;r<e;r++)t+=Math.floor(Math.random()*10);return i+t}class pN{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,r=50){const o=typeof MessageChannel<"u"?new MessageChannel:null;if(!o)throw new Error("connection_unavailable");let c,h;return new Promise((p,g)=>{const _=Tg("",20);o.port1.start();const T=setTimeout(()=>{g(new Error("unsupported_event"))},r);h={messageChannel:o,onMessage(E){const I=E;if(I.data.eventId===_)switch(I.data.status){case"ack":clearTimeout(T),c=setTimeout(()=>{g(new Error("timeout"))},3e3);break;case"done":clearTimeout(c),p(I.data.response);break;default:clearTimeout(T),clearTimeout(c),g(new Error("invalid_response"));break}}},this.handlers.add(h),o.port1.addEventListener("message",h.onMessage),this.target.postMessage({eventType:e,eventId:_,data:t},[o.port2])}).finally(()=>{h&&this.removeMessageHandler(h)})}}function fs(){return window}function gN(i){fs().location.href=i}function ET(){return typeof fs().WorkerGlobalScope<"u"&&typeof fs().importScripts=="function"}async function _N(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function yN(){return navigator?.serviceWorker?.controller||null}function vN(){return ET()?self:null}const ST="firebaseLocalStorageDb",bN=1,fd="firebaseLocalStorage",AT="fbase_key";class eu{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function jd(i,e){return i.transaction([fd],e?"readwrite":"readonly").objectStore(fd)}function TN(){const i=indexedDB.deleteDatabase(ST);return new eu(i).toPromise()}function Pp(){const i=indexedDB.open(ST,bN);return new Promise((e,t)=>{i.addEventListener("error",()=>{t(i.error)}),i.addEventListener("upgradeneeded",()=>{const r=i.result;try{r.createObjectStore(fd,{keyPath:AT})}catch(o){t(o)}}),i.addEventListener("success",async()=>{const r=i.result;r.objectStoreNames.contains(fd)?e(r):(r.close(),await TN(),e(await Pp()))})})}async function mb(i,e,t){const r=jd(i,!0).put({[AT]:e,value:t});return new eu(r).toPromise()}async function wN(i,e){const t=jd(i,!1).get(e),r=await new eu(t).toPromise();return r===void 0?null:r.value}function pb(i,e){const t=jd(i,!0).delete(e);return new eu(t).toPromise()}const EN=800,SN=3;class IT{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Pp(),this.db)}async _withRetries(e){let t=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(t++>SN)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return ET()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=kd._getInstance(vN()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){if(this.activeServiceWorker=await _N(),!this.activeServiceWorker)return;this.sender=new pN(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&e[0]?.fulfilled&&e[0]?.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||yN()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Pp();return await mb(e,dd,"1"),await pb(e,dd),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(r=>mb(r,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(r=>wN(r,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>pb(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(o=>{const c=jd(o,!1).getAll();return new eu(c).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],r=new Set;if(e.length!==0)for(const{fbase_key:o,value:c}of e)r.add(o),JSON.stringify(this.localCache[o])!==JSON.stringify(c)&&(this.notifyListeners(o,c),t.push(o));for(const o of Object.keys(this.localCache))this.localCache[o]&&!r.has(o)&&(this.notifyListeners(o,null),t.push(o));return t}notifyListeners(e,t){this.localCache[e]=t;const r=this.listeners[e];if(r)for(const o of Array.from(r))o(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),EN)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}IT.type="LOCAL";const AN=IT;new Jc(3e4,6e4);function CT(i,e){return e?Hs(e):(Pe(i._popupRedirectResolver,i,"argument-error"),i._popupRedirectResolver)}class wg extends _T{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Zo(e,this._buildIdpRequest())}_linkToIdToken(e,t){return Zo(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return Zo(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function IN(i){return aN(i.auth,new wg(i),i.bypassAuthState)}function CN(i){const{auth:e,user:t}=i;return Pe(t,e,"internal-error"),rN(t,new wg(i),i.bypassAuthState)}async function NN(i){const{auth:e,user:t}=i;return Pe(t,e,"internal-error"),sN(t,new wg(i),i.bypassAuthState)}class NT{constructor(e,t,r,o,c=!1){this.auth=e,this.resolver=r,this.user=o,this.bypassAuthState=c,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:r,postBody:o,tenantId:c,error:h,type:p}=e;if(h){this.reject(h);return}const g={auth:this.auth,requestUri:t,sessionId:r,tenantId:c||void 0,postBody:o||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(p)(g))}catch(_){this.reject(_)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return IN;case"linkViaPopup":case"linkViaRedirect":return NN;case"reauthViaPopup":case"reauthViaRedirect":return CN;default:ys(this.auth,"internal-error")}}resolve(e){Ys(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Ys(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const xN=new Jc(2e3,1e4);async function RN(i,e,t){if(_i(i.app))return Promise.reject(Oi(i,"operation-not-supported-in-this-environment"));const r=Od(i);SC(i,e,bg);const o=CT(r,t);return new ja(r,"signInViaPopup",e,o).executeNotNull()}class ja extends NT{constructor(e,t,r,o,c){super(e,t,o,c),this.provider=r,this.authWindow=null,this.pollId=null,ja.currentPopupAction&&ja.currentPopupAction.cancel(),ja.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Pe(e,this.auth,"internal-error"),e}async onExecution(){Ys(this.filter.length===1,"Popup operations only handle one event");const e=Tg();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(Oi(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){return this.authWindow?.associatedEvent||null}cancel(){this.reject(Oi(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,ja.currentPopupAction=null}pollUserCancellation(){const e=()=>{if(this.authWindow?.window?.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Oi(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,xN.get())};e()}}ja.currentPopupAction=null;const DN="pendingRedirect",Xh=new Map;class MN extends NT{constructor(e,t,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,r),this.eventId=null}async execute(){let e=Xh.get(this.auth._key());if(!e){try{const r=await ON(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(t){e=()=>Promise.reject(t)}Xh.set(this.auth._key(),e)}return this.bypassAuthState||Xh.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function ON(i,e){const t=LN(e),r=jN(i);if(!await r._isAvailable())return!1;const o=await r._get(t)==="true";return await r._remove(t),o}function kN(i,e){Xh.set(i._key(),e)}function jN(i){return Hs(i._redirectPersistence)}function LN(i){return Kh(DN,i.config.apiKey,i.name)}async function PN(i,e,t=!1){if(_i(i.app))return Promise.reject(Va(i));const r=Od(i),o=CT(r,e),h=await new MN(r,o,t).execute();return h&&!t&&(delete h.user._redirectEventId,await r._persistUserIfCurrent(h.user),await r._setRedirectUser(null,e)),h}const VN=600*1e3;class BN{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(t=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!UN(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){if(e.error&&!xT(e)){const r=e.error.code?.split("auth/")[1]||"internal-error";t.onError(Oi(this.auth,r))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const r=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=VN&&this.cachedEventUids.clear(),this.cachedEventUids.has(gb(e))}saveEventToCache(e){this.cachedEventUids.add(gb(e)),this.lastProcessedEventTime=Date.now()}}function gb(i){return[i.type,i.eventId,i.sessionId,i.tenantId].filter(e=>e).join("-")}function xT({type:i,error:e}){return i==="unknown"&&e?.code==="auth/no-auth-event"}function UN(i){switch(i.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return xT(i);default:return!1}}async function zN(i,e={}){return ml(i,"GET","/v1/projects",e)}const qN=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,HN=/^https?/;async function FN(i){if(i.config.emulator)return;const{authorizedDomains:e}=await zN(i);for(const t of e)try{if($N(t))return}catch{}ys(i,"unauthorized-domain")}function $N(i){const e=jp(),{protocol:t,hostname:r}=new URL(e);if(i.startsWith("chrome-extension://")){const h=new URL(i);return h.hostname===""&&r===""?t==="chrome-extension:"&&i.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&h.hostname===r}if(!HN.test(t))return!1;if(qN.test(i))return r===i;const o=i.replace(/\./g,"\\.");return new RegExp("^(.+\\."+o+"|"+o+")$","i").test(r)}const GN=new Jc(3e4,6e4);function _b(){const i=fs().___jsl;if(i?.H){for(const e of Object.keys(i.H))if(i.H[e].r=i.H[e].r||[],i.H[e].L=i.H[e].L||[],i.H[e].r=[...i.H[e].L],i.CP)for(let t=0;t<i.CP.length;t++)i.CP[t]=null}}function YN(i){return new Promise((e,t)=>{function r(){_b(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{_b(),t(Oi(i,"network-request-failed"))},timeout:GN.get()})}if(fs().gapi?.iframes?.Iframe)e(gapi.iframes.getContext());else if(fs().gapi?.load)r();else{const o=WC("iframefcb");return fs()[o]=()=>{gapi.load?r():t(Oi(i,"network-request-failed"))},KC(`${XC()}?onload=${o}`).catch(c=>t(c))}}).catch(e=>{throw Wh=null,e})}let Wh=null;function QN(i){return Wh=Wh||YN(i),Wh}const KN=new Jc(5e3,15e3),XN="__/auth/iframe",WN="emulator/auth/iframe",JN={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},ZN=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function ex(i){const e=i.config;Pe(e.authDomain,i,"auth-domain-config-required");const t=e.emulator?pg(e,WN):`https://${i.config.authDomain}/${XN}`,r={apiKey:e.apiKey,appName:i.name,v:Ya},o=ZN.get(i.config.apiHost);o&&(r.eid=o);const c=i._getFrameworks();return c.length&&(r.fw=c.join(",")),`${t}?${Wc(r).slice(1)}`}async function tx(i){const e=await QN(i),t=fs().gapi;return Pe(t,i,"internal-error"),e.open({where:document.body,url:ex(i),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:JN,dontclear:!0},r=>new Promise(async(o,c)=>{await r.restyle({setHideOnLeave:!1});const h=Oi(i,"network-request-failed"),p=fs().setTimeout(()=>{c(h)},KN.get());function g(){fs().clearTimeout(p),o(r)}r.ping(g).then(g,()=>{c(h)})}))}const nx={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},ix=500,sx=600,rx="_blank",ax="http://localhost";class yb{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function ox(i,e,t,r=ix,o=sx){const c=Math.max((window.screen.availHeight-o)/2,0).toString(),h=Math.max((window.screen.availWidth-r)/2,0).toString();let p="";const g={...nx,width:r.toString(),height:o.toString(),top:c,left:h},_=Rn().toLowerCase();t&&(p=cT(_)?rx:t),oT(_)&&(e=e||ax,g.scrollbars="yes");const T=Object.entries(g).reduce((I,[O,L])=>`${I}${O}=${L},`,"");if(zC(_)&&p!=="_self")return lx(e||"",p),new yb(null);const E=window.open(e||"",p,T);Pe(E,i,"popup-blocked");try{E.focus()}catch{}return new yb(E)}function lx(i,e){const t=document.createElement("a");t.href=i,t.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(r)}const cx="__/auth/handler",ux="emulator/auth/handler",hx=encodeURIComponent("fac");async function vb(i,e,t,r,o,c){Pe(i.config.authDomain,i,"auth-domain-config-required"),Pe(i.config.apiKey,i,"invalid-api-key");const h={apiKey:i.config.apiKey,appName:i.name,authType:t,redirectUrl:r,v:Ya,eventId:o};if(e instanceof bg){e.setDefaultLanguage(i.languageCode),h.providerId=e.providerId||"",uI(e.getCustomParameters())||(h.customParameters=JSON.stringify(e.getCustomParameters()));for(const[T,E]of Object.entries({}))h[T]=E}if(e instanceof Zc){const T=e.getScopes().filter(E=>E!=="");T.length>0&&(h.scopes=T.join(","))}i.tenantId&&(h.tid=i.tenantId);const p=h;for(const T of Object.keys(p))p[T]===void 0&&delete p[T];const g=await i._getAppCheckToken(),_=g?`#${hx}=${encodeURIComponent(g)}`:"";return`${dx(i)}?${Wc(p).slice(1)}${_}`}function dx({config:i}){return i.emulator?pg(i,ux):`https://${i.authDomain}/${cx}`}const vp="webStorageSupport";class fx{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=wT,this._completeRedirectFn=PN,this._overrideRedirectResult=kN}async _openPopup(e,t,r,o){Ys(this.eventManagers[e._key()]?.manager,"_initialize() not called before _openPopup()");const c=await vb(e,t,r,jp(),o);return ox(e,c,Tg())}async _openRedirect(e,t,r,o){await this._originValidation(e);const c=await vb(e,t,r,jp(),o);return gN(c),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:o,promise:c}=this.eventManagers[t];return o?Promise.resolve(o):(Ys(c,"If manager is not set, promise should be"),c)}const r=this.initAndGetManager(e);return this.eventManagers[t]={promise:r},r.catch(()=>{delete this.eventManagers[t]}),r}async initAndGetManager(e){const t=await tx(e),r=new BN(e);return t.register("authEvent",o=>(Pe(o?.authEvent,e,"invalid-auth-event"),{status:r.onEvent(o.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=t,r}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(vp,{type:vp},o=>{const c=o?.[0]?.[vp];c!==void 0&&t(!!c),ys(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=FN(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return mT()||lT()||yg()}}const mx=fx;var bb="@firebase/auth",Tb="1.11.1";class px{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){return this.assertAuthConfigured(),this.auth.currentUser?.uid||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(r=>{e(r?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){Pe(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function gx(i){switch(i){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function _x(i){qa(new Fr("auth",(e,{options:t})=>{const r=e.getProvider("app").getImmediate(),o=e.getProvider("heartbeat"),c=e.getProvider("app-check-internal"),{apiKey:h,authDomain:p}=r.options;Pe(h&&!h.includes(":"),"invalid-api-key",{appName:r.name});const g={apiKey:h,authDomain:p,clientPlatform:i,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:pT(i)},_=new YC(r,o,c,g);return ZC(_,t),_},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,r)=>{e.getProvider("auth-internal").initialize()})),qa(new Fr("auth-internal",e=>{const t=Od(e.getProvider("auth").getImmediate());return(r=>new px(r))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),ds(bb,Tb,gx(i)),ds(bb,Tb,"esm2020")}const yx=300,vx=Y0("authIdTokenMaxAge")||yx;let wb=null;const bx=i=>async e=>{const t=e&&await e.getIdTokenResult(),r=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(r&&r>vx)return;const o=t?.token;wb!==o&&(wb=o,await fetch(i,{method:o?"POST":"DELETE",headers:o?{Authorization:`Bearer ${o}`}:{}}))};function Tx(i=dg()){const e=Md(i,"auth");if(e.isInitialized())return e.getImmediate();const t=JC(i,{popupRedirectResolver:mx,persistence:[AN,fN,wT]}),r=Y0("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const c=new URL(r,location.origin);if(location.origin===c.origin){const h=bx(c.toString());lN(t,h,()=>h(t.currentUser)),oN(t,p=>h(p))}}const o=F0("auth");return o&&eN(t,`http://${o}`),t}function wx(){return document.getElementsByTagName("head")?.[0]??document}QC({loadJS(i){return new Promise((e,t)=>{const r=document.createElement("script");r.setAttribute("src",i),r.onload=e,r.onerror=o=>{const c=Oi("internal-error");c.customData=o,t(c)},r.type="text/javascript",r.charset="UTF-8",wx().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});_x("Browser");var Ex="firebase",Sx="12.6.0";ds(Ex,Sx,"app");var Eb=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var zr,RT;(function(){var i;function e(A,w){function S(){}S.prototype=w.prototype,A.F=w.prototype,A.prototype=new S,A.prototype.constructor=A,A.D=function(M,R,k){for(var N=Array(arguments.length-2),ye=2;ye<arguments.length;ye++)N[ye-2]=arguments[ye];return w.prototype[R].apply(M,N)}}function t(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(r,t),r.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function o(A,w,S){S||(S=0);const M=Array(16);if(typeof w=="string")for(var R=0;R<16;++R)M[R]=w.charCodeAt(S++)|w.charCodeAt(S++)<<8|w.charCodeAt(S++)<<16|w.charCodeAt(S++)<<24;else for(R=0;R<16;++R)M[R]=w[S++]|w[S++]<<8|w[S++]<<16|w[S++]<<24;w=A.g[0],S=A.g[1],R=A.g[2];let k=A.g[3],N;N=w+(k^S&(R^k))+M[0]+3614090360&4294967295,w=S+(N<<7&4294967295|N>>>25),N=k+(R^w&(S^R))+M[1]+3905402710&4294967295,k=w+(N<<12&4294967295|N>>>20),N=R+(S^k&(w^S))+M[2]+606105819&4294967295,R=k+(N<<17&4294967295|N>>>15),N=S+(w^R&(k^w))+M[3]+3250441966&4294967295,S=R+(N<<22&4294967295|N>>>10),N=w+(k^S&(R^k))+M[4]+4118548399&4294967295,w=S+(N<<7&4294967295|N>>>25),N=k+(R^w&(S^R))+M[5]+1200080426&4294967295,k=w+(N<<12&4294967295|N>>>20),N=R+(S^k&(w^S))+M[6]+2821735955&4294967295,R=k+(N<<17&4294967295|N>>>15),N=S+(w^R&(k^w))+M[7]+4249261313&4294967295,S=R+(N<<22&4294967295|N>>>10),N=w+(k^S&(R^k))+M[8]+1770035416&4294967295,w=S+(N<<7&4294967295|N>>>25),N=k+(R^w&(S^R))+M[9]+2336552879&4294967295,k=w+(N<<12&4294967295|N>>>20),N=R+(S^k&(w^S))+M[10]+4294925233&4294967295,R=k+(N<<17&4294967295|N>>>15),N=S+(w^R&(k^w))+M[11]+2304563134&4294967295,S=R+(N<<22&4294967295|N>>>10),N=w+(k^S&(R^k))+M[12]+1804603682&4294967295,w=S+(N<<7&4294967295|N>>>25),N=k+(R^w&(S^R))+M[13]+4254626195&4294967295,k=w+(N<<12&4294967295|N>>>20),N=R+(S^k&(w^S))+M[14]+2792965006&4294967295,R=k+(N<<17&4294967295|N>>>15),N=S+(w^R&(k^w))+M[15]+1236535329&4294967295,S=R+(N<<22&4294967295|N>>>10),N=w+(R^k&(S^R))+M[1]+4129170786&4294967295,w=S+(N<<5&4294967295|N>>>27),N=k+(S^R&(w^S))+M[6]+3225465664&4294967295,k=w+(N<<9&4294967295|N>>>23),N=R+(w^S&(k^w))+M[11]+643717713&4294967295,R=k+(N<<14&4294967295|N>>>18),N=S+(k^w&(R^k))+M[0]+3921069994&4294967295,S=R+(N<<20&4294967295|N>>>12),N=w+(R^k&(S^R))+M[5]+3593408605&4294967295,w=S+(N<<5&4294967295|N>>>27),N=k+(S^R&(w^S))+M[10]+38016083&4294967295,k=w+(N<<9&4294967295|N>>>23),N=R+(w^S&(k^w))+M[15]+3634488961&4294967295,R=k+(N<<14&4294967295|N>>>18),N=S+(k^w&(R^k))+M[4]+3889429448&4294967295,S=R+(N<<20&4294967295|N>>>12),N=w+(R^k&(S^R))+M[9]+568446438&4294967295,w=S+(N<<5&4294967295|N>>>27),N=k+(S^R&(w^S))+M[14]+3275163606&4294967295,k=w+(N<<9&4294967295|N>>>23),N=R+(w^S&(k^w))+M[3]+4107603335&4294967295,R=k+(N<<14&4294967295|N>>>18),N=S+(k^w&(R^k))+M[8]+1163531501&4294967295,S=R+(N<<20&4294967295|N>>>12),N=w+(R^k&(S^R))+M[13]+2850285829&4294967295,w=S+(N<<5&4294967295|N>>>27),N=k+(S^R&(w^S))+M[2]+4243563512&4294967295,k=w+(N<<9&4294967295|N>>>23),N=R+(w^S&(k^w))+M[7]+1735328473&4294967295,R=k+(N<<14&4294967295|N>>>18),N=S+(k^w&(R^k))+M[12]+2368359562&4294967295,S=R+(N<<20&4294967295|N>>>12),N=w+(S^R^k)+M[5]+4294588738&4294967295,w=S+(N<<4&4294967295|N>>>28),N=k+(w^S^R)+M[8]+2272392833&4294967295,k=w+(N<<11&4294967295|N>>>21),N=R+(k^w^S)+M[11]+1839030562&4294967295,R=k+(N<<16&4294967295|N>>>16),N=S+(R^k^w)+M[14]+4259657740&4294967295,S=R+(N<<23&4294967295|N>>>9),N=w+(S^R^k)+M[1]+2763975236&4294967295,w=S+(N<<4&4294967295|N>>>28),N=k+(w^S^R)+M[4]+1272893353&4294967295,k=w+(N<<11&4294967295|N>>>21),N=R+(k^w^S)+M[7]+4139469664&4294967295,R=k+(N<<16&4294967295|N>>>16),N=S+(R^k^w)+M[10]+3200236656&4294967295,S=R+(N<<23&4294967295|N>>>9),N=w+(S^R^k)+M[13]+681279174&4294967295,w=S+(N<<4&4294967295|N>>>28),N=k+(w^S^R)+M[0]+3936430074&4294967295,k=w+(N<<11&4294967295|N>>>21),N=R+(k^w^S)+M[3]+3572445317&4294967295,R=k+(N<<16&4294967295|N>>>16),N=S+(R^k^w)+M[6]+76029189&4294967295,S=R+(N<<23&4294967295|N>>>9),N=w+(S^R^k)+M[9]+3654602809&4294967295,w=S+(N<<4&4294967295|N>>>28),N=k+(w^S^R)+M[12]+3873151461&4294967295,k=w+(N<<11&4294967295|N>>>21),N=R+(k^w^S)+M[15]+530742520&4294967295,R=k+(N<<16&4294967295|N>>>16),N=S+(R^k^w)+M[2]+3299628645&4294967295,S=R+(N<<23&4294967295|N>>>9),N=w+(R^(S|~k))+M[0]+4096336452&4294967295,w=S+(N<<6&4294967295|N>>>26),N=k+(S^(w|~R))+M[7]+1126891415&4294967295,k=w+(N<<10&4294967295|N>>>22),N=R+(w^(k|~S))+M[14]+2878612391&4294967295,R=k+(N<<15&4294967295|N>>>17),N=S+(k^(R|~w))+M[5]+4237533241&4294967295,S=R+(N<<21&4294967295|N>>>11),N=w+(R^(S|~k))+M[12]+1700485571&4294967295,w=S+(N<<6&4294967295|N>>>26),N=k+(S^(w|~R))+M[3]+2399980690&4294967295,k=w+(N<<10&4294967295|N>>>22),N=R+(w^(k|~S))+M[10]+4293915773&4294967295,R=k+(N<<15&4294967295|N>>>17),N=S+(k^(R|~w))+M[1]+2240044497&4294967295,S=R+(N<<21&4294967295|N>>>11),N=w+(R^(S|~k))+M[8]+1873313359&4294967295,w=S+(N<<6&4294967295|N>>>26),N=k+(S^(w|~R))+M[15]+4264355552&4294967295,k=w+(N<<10&4294967295|N>>>22),N=R+(w^(k|~S))+M[6]+2734768916&4294967295,R=k+(N<<15&4294967295|N>>>17),N=S+(k^(R|~w))+M[13]+1309151649&4294967295,S=R+(N<<21&4294967295|N>>>11),N=w+(R^(S|~k))+M[4]+4149444226&4294967295,w=S+(N<<6&4294967295|N>>>26),N=k+(S^(w|~R))+M[11]+3174756917&4294967295,k=w+(N<<10&4294967295|N>>>22),N=R+(w^(k|~S))+M[2]+718787259&4294967295,R=k+(N<<15&4294967295|N>>>17),N=S+(k^(R|~w))+M[9]+3951481745&4294967295,A.g[0]=A.g[0]+w&4294967295,A.g[1]=A.g[1]+(R+(N<<21&4294967295|N>>>11))&4294967295,A.g[2]=A.g[2]+R&4294967295,A.g[3]=A.g[3]+k&4294967295}r.prototype.v=function(A,w){w===void 0&&(w=A.length);const S=w-this.blockSize,M=this.C;let R=this.h,k=0;for(;k<w;){if(R==0)for(;k<=S;)o(this,A,k),k+=this.blockSize;if(typeof A=="string"){for(;k<w;)if(M[R++]=A.charCodeAt(k++),R==this.blockSize){o(this,M),R=0;break}}else for(;k<w;)if(M[R++]=A[k++],R==this.blockSize){o(this,M),R=0;break}}this.h=R,this.o+=w},r.prototype.A=function(){var A=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);A[0]=128;for(var w=1;w<A.length-8;++w)A[w]=0;w=this.o*8;for(var S=A.length-8;S<A.length;++S)A[S]=w&255,w/=256;for(this.v(A),A=Array(16),w=0,S=0;S<4;++S)for(let M=0;M<32;M+=8)A[w++]=this.g[S]>>>M&255;return A};function c(A,w){var S=p;return Object.prototype.hasOwnProperty.call(S,A)?S[A]:S[A]=w(A)}function h(A,w){this.h=w;const S=[];let M=!0;for(let R=A.length-1;R>=0;R--){const k=A[R]|0;M&&k==w||(S[R]=k,M=!1)}this.g=S}var p={};function g(A){return-128<=A&&A<128?c(A,function(w){return new h([w|0],w<0?-1:0)}):new h([A|0],A<0?-1:0)}function _(A){if(isNaN(A)||!isFinite(A))return E;if(A<0)return j(_(-A));const w=[];let S=1;for(let M=0;A>=S;M++)w[M]=A/S|0,S*=4294967296;return new h(w,0)}function T(A,w){if(A.length==0)throw Error("number format error: empty string");if(w=w||10,w<2||36<w)throw Error("radix out of range: "+w);if(A.charAt(0)=="-")return j(T(A.substring(1),w));if(A.indexOf("-")>=0)throw Error('number format error: interior "-" character');const S=_(Math.pow(w,8));let M=E;for(let k=0;k<A.length;k+=8){var R=Math.min(8,A.length-k);const N=parseInt(A.substring(k,k+R),w);R<8?(R=_(Math.pow(w,R)),M=M.j(R).add(_(N))):(M=M.j(S),M=M.add(_(N)))}return M}var E=g(0),I=g(1),O=g(16777216);i=h.prototype,i.m=function(){if(z(this))return-j(this).m();let A=0,w=1;for(let S=0;S<this.g.length;S++){const M=this.i(S);A+=(M>=0?M:4294967296+M)*w,w*=4294967296}return A},i.toString=function(A){if(A=A||10,A<2||36<A)throw Error("radix out of range: "+A);if(L(this))return"0";if(z(this))return"-"+j(this).toString(A);const w=_(Math.pow(A,6));var S=this;let M="";for(;;){const R=K(S,w).g;S=Y(S,R.j(w));let k=((S.g.length>0?S.g[0]:S.h)>>>0).toString(A);if(S=R,L(S))return k+M;for(;k.length<6;)k="0"+k;M=k+M}},i.i=function(A){return A<0?0:A<this.g.length?this.g[A]:this.h};function L(A){if(A.h!=0)return!1;for(let w=0;w<A.g.length;w++)if(A.g[w]!=0)return!1;return!0}function z(A){return A.h==-1}i.l=function(A){return A=Y(this,A),z(A)?-1:L(A)?0:1};function j(A){const w=A.g.length,S=[];for(let M=0;M<w;M++)S[M]=~A.g[M];return new h(S,~A.h).add(I)}i.abs=function(){return z(this)?j(this):this},i.add=function(A){const w=Math.max(this.g.length,A.g.length),S=[];let M=0;for(let R=0;R<=w;R++){let k=M+(this.i(R)&65535)+(A.i(R)&65535),N=(k>>>16)+(this.i(R)>>>16)+(A.i(R)>>>16);M=N>>>16,k&=65535,N&=65535,S[R]=N<<16|k}return new h(S,S[S.length-1]&-2147483648?-1:0)};function Y(A,w){return A.add(j(w))}i.j=function(A){if(L(this)||L(A))return E;if(z(this))return z(A)?j(this).j(j(A)):j(j(this).j(A));if(z(A))return j(this.j(j(A)));if(this.l(O)<0&&A.l(O)<0)return _(this.m()*A.m());const w=this.g.length+A.g.length,S=[];for(var M=0;M<2*w;M++)S[M]=0;for(M=0;M<this.g.length;M++)for(let R=0;R<A.g.length;R++){const k=this.i(M)>>>16,N=this.i(M)&65535,ye=A.i(R)>>>16,oe=A.i(R)&65535;S[2*M+2*R]+=N*oe,F(S,2*M+2*R),S[2*M+2*R+1]+=k*oe,F(S,2*M+2*R+1),S[2*M+2*R+1]+=N*ye,F(S,2*M+2*R+1),S[2*M+2*R+2]+=k*ye,F(S,2*M+2*R+2)}for(A=0;A<w;A++)S[A]=S[2*A+1]<<16|S[2*A];for(A=w;A<2*w;A++)S[A]=0;return new h(S,0)};function F(A,w){for(;(A[w]&65535)!=A[w];)A[w+1]+=A[w]>>>16,A[w]&=65535,w++}function le(A,w){this.g=A,this.h=w}function K(A,w){if(L(w))throw Error("division by zero");if(L(A))return new le(E,E);if(z(A))return w=K(j(A),w),new le(j(w.g),j(w.h));if(z(w))return w=K(A,j(w)),new le(j(w.g),w.h);if(A.g.length>30){if(z(A)||z(w))throw Error("slowDivide_ only works with positive integers.");for(var S=I,M=w;M.l(A)<=0;)S=B(S),M=B(M);var R=ie(S,1),k=ie(M,1);for(M=ie(M,2),S=ie(S,2);!L(M);){var N=k.add(M);N.l(A)<=0&&(R=R.add(S),k=N),M=ie(M,1),S=ie(S,1)}return w=Y(A,R.j(w)),new le(R,w)}for(R=E;A.l(w)>=0;){for(S=Math.max(1,Math.floor(A.m()/w.m())),M=Math.ceil(Math.log(S)/Math.LN2),M=M<=48?1:Math.pow(2,M-48),k=_(S),N=k.j(w);z(N)||N.l(A)>0;)S-=M,k=_(S),N=k.j(w);L(k)&&(k=I),R=R.add(k),A=Y(A,N)}return new le(R,A)}i.B=function(A){return K(this,A).h},i.and=function(A){const w=Math.max(this.g.length,A.g.length),S=[];for(let M=0;M<w;M++)S[M]=this.i(M)&A.i(M);return new h(S,this.h&A.h)},i.or=function(A){const w=Math.max(this.g.length,A.g.length),S=[];for(let M=0;M<w;M++)S[M]=this.i(M)|A.i(M);return new h(S,this.h|A.h)},i.xor=function(A){const w=Math.max(this.g.length,A.g.length),S=[];for(let M=0;M<w;M++)S[M]=this.i(M)^A.i(M);return new h(S,this.h^A.h)};function B(A){const w=A.g.length+1,S=[];for(let M=0;M<w;M++)S[M]=A.i(M)<<1|A.i(M-1)>>>31;return new h(S,A.h)}function ie(A,w){const S=w>>5;w%=32;const M=A.g.length-S,R=[];for(let k=0;k<M;k++)R[k]=w>0?A.i(k+S)>>>w|A.i(k+S+1)<<32-w:A.i(k+S);return new h(R,A.h)}r.prototype.digest=r.prototype.A,r.prototype.reset=r.prototype.u,r.prototype.update=r.prototype.v,RT=r,h.prototype.add=h.prototype.add,h.prototype.multiply=h.prototype.j,h.prototype.modulo=h.prototype.B,h.prototype.compare=h.prototype.l,h.prototype.toNumber=h.prototype.m,h.prototype.toString=h.prototype.toString,h.prototype.getBits=h.prototype.i,h.fromNumber=_,h.fromString=T,zr=h}).apply(typeof Eb<"u"?Eb:typeof self<"u"?self:typeof window<"u"?window:{});var Bh=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var DT,Cc,MT,Jh,Vp,OT,kT,jT;(function(){var i,e=Object.defineProperty;function t(u){u=[typeof globalThis=="object"&&globalThis,u,typeof window=="object"&&window,typeof self=="object"&&self,typeof Bh=="object"&&Bh];for(var y=0;y<u.length;++y){var b=u[y];if(b&&b.Math==Math)return b}throw Error("Cannot find global object")}var r=t(this);function o(u,y){if(y)e:{var b=r;u=u.split(".");for(var x=0;x<u.length-1;x++){var Q=u[x];if(!(Q in b))break e;b=b[Q]}u=u[u.length-1],x=b[u],y=y(x),y!=x&&y!=null&&e(b,u,{configurable:!0,writable:!0,value:y})}}o("Symbol.dispose",function(u){return u||Symbol("Symbol.dispose")}),o("Array.prototype.values",function(u){return u||function(){return this[Symbol.iterator]()}}),o("Object.entries",function(u){return u||function(y){var b=[],x;for(x in y)Object.prototype.hasOwnProperty.call(y,x)&&b.push([x,y[x]]);return b}});var c=c||{},h=this||self;function p(u){var y=typeof u;return y=="object"&&u!=null||y=="function"}function g(u,y,b){return u.call.apply(u.bind,arguments)}function _(u,y,b){return _=g,_.apply(null,arguments)}function T(u,y){var b=Array.prototype.slice.call(arguments,1);return function(){var x=b.slice();return x.push.apply(x,arguments),u.apply(this,x)}}function E(u,y){function b(){}b.prototype=y.prototype,u.Z=y.prototype,u.prototype=new b,u.prototype.constructor=u,u.Ob=function(x,Q,re){for(var ge=Array(arguments.length-2),qe=2;qe<arguments.length;qe++)ge[qe-2]=arguments[qe];return y.prototype[Q].apply(x,ge)}}var I=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?u=>u&&AsyncContext.Snapshot.wrap(u):u=>u;function O(u){const y=u.length;if(y>0){const b=Array(y);for(let x=0;x<y;x++)b[x]=u[x];return b}return[]}function L(u,y){for(let x=1;x<arguments.length;x++){const Q=arguments[x];var b=typeof Q;if(b=b!="object"?b:Q?Array.isArray(Q)?"array":b:"null",b=="array"||b=="object"&&typeof Q.length=="number"){b=u.length||0;const re=Q.length||0;u.length=b+re;for(let ge=0;ge<re;ge++)u[b+ge]=Q[ge]}else u.push(Q)}}class z{constructor(y,b){this.i=y,this.j=b,this.h=0,this.g=null}get(){let y;return this.h>0?(this.h--,y=this.g,this.g=y.next,y.next=null):y=this.i(),y}}function j(u){h.setTimeout(()=>{throw u},0)}function Y(){var u=A;let y=null;return u.g&&(y=u.g,u.g=u.g.next,u.g||(u.h=null),y.next=null),y}class F{constructor(){this.h=this.g=null}add(y,b){const x=le.get();x.set(y,b),this.h?this.h.next=x:this.g=x,this.h=x}}var le=new z(()=>new K,u=>u.reset());class K{constructor(){this.next=this.g=this.h=null}set(y,b){this.h=y,this.g=b,this.next=null}reset(){this.next=this.g=this.h=null}}let B,ie=!1,A=new F,w=()=>{const u=Promise.resolve(void 0);B=()=>{u.then(S)}};function S(){for(var u;u=Y();){try{u.h.call(u.g)}catch(b){j(b)}var y=le;y.j(u),y.h<100&&(y.h++,u.next=y.g,y.g=u)}ie=!1}function M(){this.u=this.u,this.C=this.C}M.prototype.u=!1,M.prototype.dispose=function(){this.u||(this.u=!0,this.N())},M.prototype[Symbol.dispose]=function(){this.dispose()},M.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function R(u,y){this.type=u,this.g=this.target=y,this.defaultPrevented=!1}R.prototype.h=function(){this.defaultPrevented=!0};var k=(function(){if(!h.addEventListener||!Object.defineProperty)return!1;var u=!1,y=Object.defineProperty({},"passive",{get:function(){u=!0}});try{const b=()=>{};h.addEventListener("test",b,y),h.removeEventListener("test",b,y)}catch{}return u})();function N(u){return/^[\s\xa0]*$/.test(u)}function ye(u,y){R.call(this,u?u.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,u&&this.init(u,y)}E(ye,R),ye.prototype.init=function(u,y){const b=this.type=u.type,x=u.changedTouches&&u.changedTouches.length?u.changedTouches[0]:null;this.target=u.target||u.srcElement,this.g=y,y=u.relatedTarget,y||(b=="mouseover"?y=u.fromElement:b=="mouseout"&&(y=u.toElement)),this.relatedTarget=y,x?(this.clientX=x.clientX!==void 0?x.clientX:x.pageX,this.clientY=x.clientY!==void 0?x.clientY:x.pageY,this.screenX=x.screenX||0,this.screenY=x.screenY||0):(this.clientX=u.clientX!==void 0?u.clientX:u.pageX,this.clientY=u.clientY!==void 0?u.clientY:u.pageY,this.screenX=u.screenX||0,this.screenY=u.screenY||0),this.button=u.button,this.key=u.key||"",this.ctrlKey=u.ctrlKey,this.altKey=u.altKey,this.shiftKey=u.shiftKey,this.metaKey=u.metaKey,this.pointerId=u.pointerId||0,this.pointerType=u.pointerType,this.state=u.state,this.i=u,u.defaultPrevented&&ye.Z.h.call(this)},ye.prototype.h=function(){ye.Z.h.call(this);const u=this.i;u.preventDefault?u.preventDefault():u.returnValue=!1};var oe="closure_listenable_"+(Math.random()*1e6|0),V=0;function X(u,y,b,x,Q){this.listener=u,this.proxy=null,this.src=y,this.type=b,this.capture=!!x,this.ha=Q,this.key=++V,this.da=this.fa=!1}function ne(u){u.da=!0,u.listener=null,u.proxy=null,u.src=null,u.ha=null}function H(u,y,b){for(const x in u)y.call(b,u[x],x,u)}function W(u,y){for(const b in u)y.call(void 0,u[b],b,u)}function D(u){const y={};for(const b in u)y[b]=u[b];return y}const G="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function se(u,y){let b,x;for(let Q=1;Q<arguments.length;Q++){x=arguments[Q];for(b in x)u[b]=x[b];for(let re=0;re<G.length;re++)b=G[re],Object.prototype.hasOwnProperty.call(x,b)&&(u[b]=x[b])}}function me(u){this.src=u,this.g={},this.h=0}me.prototype.add=function(u,y,b,x,Q){const re=u.toString();u=this.g[re],u||(u=this.g[re]=[],this.h++);const ge=Se(u,y,x,Q);return ge>-1?(y=u[ge],b||(y.fa=!1)):(y=new X(y,this.src,re,!!x,Q),y.fa=b,u.push(y)),y};function Ee(u,y){const b=y.type;if(b in u.g){var x=u.g[b],Q=Array.prototype.indexOf.call(x,y,void 0),re;(re=Q>=0)&&Array.prototype.splice.call(x,Q,1),re&&(ne(y),u.g[b].length==0&&(delete u.g[b],u.h--))}}function Se(u,y,b,x){for(let Q=0;Q<u.length;++Q){const re=u[Q];if(!re.da&&re.listener==y&&re.capture==!!b&&re.ha==x)return Q}return-1}var we="closure_lm_"+(Math.random()*1e6|0),je={};function Ye(u,y,b,x,Q){if(Array.isArray(y)){for(let re=0;re<y.length;re++)Ye(u,y[re],b,x,Q);return null}return b=wl(b),u&&u[oe]?u.J(y,b,p(x)?!!x.capture:!1,Q):q(u,y,b,!1,x,Q)}function q(u,y,b,x,Q,re){if(!y)throw Error("Invalid event type");const ge=p(Q)?!!Q.capture:!!Q;let qe=ea(u);if(qe||(u[we]=qe=new me(u)),b=qe.add(y,b,x,ge,re),b.proxy)return b;if(x=pe(),b.proxy=x,x.src=u,x.listener=b,u.addEventListener)k||(Q=ge),Q===void 0&&(Q=!1),u.addEventListener(y.toString(),x,Q);else if(u.attachEvent)u.attachEvent(jt(y.toString()),x);else if(u.addListener&&u.removeListener)u.addListener(x);else throw Error("addEventListener and attachEvent are unavailable.");return b}function pe(){function u(b){return y.call(u.src,u.listener,b)}const y=Dn;return u}function nt(u,y,b,x,Q){if(Array.isArray(y))for(var re=0;re<y.length;re++)nt(u,y[re],b,x,Q);else x=p(x)?!!x.capture:!!x,b=wl(b),u&&u[oe]?(u=u.i,re=String(y).toString(),re in u.g&&(y=u.g[re],b=Se(y,b,x,Q),b>-1&&(ne(y[b]),Array.prototype.splice.call(y,b,1),y.length==0&&(delete u.g[re],u.h--)))):u&&(u=ea(u))&&(y=u.g[y.toString()],u=-1,y&&(u=Se(y,b,x,Q)),(b=u>-1?y[u]:null)&&At(b))}function At(u){if(typeof u!="number"&&u&&!u.da){var y=u.src;if(y&&y[oe])Ee(y.i,u);else{var b=u.type,x=u.proxy;y.removeEventListener?y.removeEventListener(b,x,u.capture):y.detachEvent?y.detachEvent(jt(b),x):y.addListener&&y.removeListener&&y.removeListener(x),(b=ea(y))?(Ee(b,u),b.h==0&&(b.src=null,y[we]=null)):ne(u)}}}function jt(u){return u in je?je[u]:je[u]="on"+u}function Dn(u,y){if(u.da)u=!0;else{y=new ye(y,this);const b=u.listener,x=u.ha||u.src;u.fa&&At(u),u=b.call(x,y)}return u}function ea(u){return u=u[we],u instanceof me?u:null}var Tl="__closure_events_fn_"+(Math.random()*1e9>>>0);function wl(u){return typeof u=="function"?u:(u[Tl]||(u[Tl]=function(y){return u.handleEvent(y)}),u[Tl])}function Xt(){M.call(this),this.i=new me(this),this.M=this,this.G=null}E(Xt,M),Xt.prototype[oe]=!0,Xt.prototype.removeEventListener=function(u,y,b,x){nt(this,u,y,b,x)};function cn(u,y){var b,x=u.G;if(x)for(b=[];x;x=x.G)b.push(x);if(u=u.M,x=y.type||y,typeof y=="string")y=new R(y,u);else if(y instanceof R)y.target=y.target||u;else{var Q=y;y=new R(x,u),se(y,Q)}Q=!0;let re,ge;if(b)for(ge=b.length-1;ge>=0;ge--)re=y.g=b[ge],Q=Xs(re,x,!0,y)&&Q;if(re=y.g=u,Q=Xs(re,x,!0,y)&&Q,Q=Xs(re,x,!1,y)&&Q,b)for(ge=0;ge<b.length;ge++)re=y.g=b[ge],Q=Xs(re,x,!1,y)&&Q}Xt.prototype.N=function(){if(Xt.Z.N.call(this),this.i){var u=this.i;for(const y in u.g){const b=u.g[y];for(let x=0;x<b.length;x++)ne(b[x]);delete u.g[y],u.h--}}this.G=null},Xt.prototype.J=function(u,y,b,x){return this.i.add(String(u),y,!1,b,x)},Xt.prototype.K=function(u,y,b,x){return this.i.add(String(u),y,!0,b,x)};function Xs(u,y,b,x){if(y=u.i.g[String(y)],!y)return!0;y=y.concat();let Q=!0;for(let re=0;re<y.length;++re){const ge=y[re];if(ge&&!ge.da&&ge.capture==b){const qe=ge.listener,Ht=ge.ha||ge.src;ge.fa&&Ee(u.i,ge),Q=qe.call(Ht,x)!==!1&&Q}}return Q&&!x.defaultPrevented}function lf(u,y){if(typeof u!="function")if(u&&typeof u.handleEvent=="function")u=_(u.handleEvent,u);else throw Error("Invalid listener argument");return Number(y)>2147483647?-1:h.setTimeout(u,y||0)}function lu(u){u.g=lf(()=>{u.g=null,u.i&&(u.i=!1,lu(u))},u.l);const y=u.h;u.h=null,u.m.apply(null,y)}class Mn extends M{constructor(y,b){super(),this.m=y,this.l=b,this.h=null,this.i=!1,this.g=null}j(y){this.h=arguments,this.g?this.i=!0:lu(this)}N(){super.N(),this.g&&(h.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function ta(u){M.call(this),this.h=u,this.g={}}E(ta,M);var El=[];function Sl(u){H(u.g,function(y,b){this.g.hasOwnProperty(b)&&At(y)},u),u.g={}}ta.prototype.N=function(){ta.Z.N.call(this),Sl(this)},ta.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Ws=h.JSON.stringify,cf=h.JSON.parse,cu=class{stringify(u){return h.JSON.stringify(u,void 0)}parse(u){return h.JSON.parse(u,void 0)}};function uu(){}function hu(){}var bi={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function _n(){R.call(this,"d")}E(_n,R);function ii(){R.call(this,"c")}E(ii,R);var qt={},du=null;function to(){return du=du||new Xt}qt.Ia="serverreachability";function fu(u){R.call(this,qt.Ia,u)}E(fu,R);function Vi(u){const y=to();cn(y,new fu(y))}qt.STAT_EVENT="statevent";function na(u,y){R.call(this,qt.STAT_EVENT,u),this.stat=y}E(na,R);function Wt(u){const y=to();cn(y,new na(y,u))}qt.Ja="timingevent";function Bi(u,y){R.call(this,qt.Ja,u),this.size=y}E(Bi,R);function Ui(u,y){if(typeof u!="function")throw Error("Fn must not be null and must be a function");return h.setTimeout(function(){u()},y)}function Ti(){this.g=!0}Ti.prototype.ua=function(){this.g=!1};function uf(u,y,b,x,Q,re){u.info(function(){if(u.g)if(re){var ge="",qe=re.split("&");for(let ut=0;ut<qe.length;ut++){var Ht=qe[ut].split("=");if(Ht.length>1){const Rt=Ht[0];Ht=Ht[1];const oi=Rt.split("_");ge=oi.length>=2&&oi[1]=="type"?ge+(Rt+"="+Ht+"&"):ge+(Rt+"=redacted&")}}}else ge=null;else ge=re;return"XMLHTTP REQ ("+x+") [attempt "+Q+"]: "+y+`
`+b+`
`+ge})}function mu(u,y,b,x,Q,re,ge){u.info(function(){return"XMLHTTP RESP ("+x+") [ attempt "+Q+"]: "+y+`
`+b+`
`+re+" "+ge})}function zi(u,y,b,x){u.info(function(){return"XMLHTTP TEXT ("+y+"): "+hf(u,b)+(x?" "+x:"")})}function ia(u,y){u.info(function(){return"TIMEOUT: "+y})}Ti.prototype.info=function(){};function hf(u,y){if(!u.g)return y;if(!y)return null;try{const re=JSON.parse(y);if(re){for(u=0;u<re.length;u++)if(Array.isArray(re[u])){var b=re[u];if(!(b.length<2)){var x=b[1];if(Array.isArray(x)&&!(x.length<1)){var Q=x[0];if(Q!="noop"&&Q!="stop"&&Q!="close")for(let ge=1;ge<x.length;ge++)x[ge]=""}}}}return Ws(re)}catch{return y}}var sa={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},Al={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},Il;function ra(){}E(ra,uu),ra.prototype.g=function(){return new XMLHttpRequest},Il=new ra;function Ts(u){return encodeURIComponent(String(u))}function pu(u){var y=1;u=u.split(":");const b=[];for(;y>0&&u.length;)b.push(u.shift()),y--;return u.length&&b.push(u.join(":")),b}function wi(u,y,b,x){this.j=u,this.i=y,this.l=b,this.S=x||1,this.V=new ta(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new Ei}function Ei(){this.i=null,this.g="",this.h=!1}var Jt={},dn={};function qi(u,y,b){u.M=1,u.A=aa(en(y)),u.u=b,u.R=!0,no(u,null)}function no(u,y){u.F=Date.now(),Hi(u),u.B=en(u.A);var b=u.B,x=u.S;Array.isArray(x)||(x=[String(x)]),ao(b.i,"t",x),u.C=0,b=u.j.L,u.h=new Ei,u.g=Ru(u.j,b?y:null,!u.u),u.P>0&&(u.O=new Mn(_(u.Y,u,u.g),u.P)),y=u.V,b=u.g,x=u.ba;var Q="readystatechange";Array.isArray(Q)||(Q&&(El[0]=Q.toString()),Q=El);for(let re=0;re<Q.length;re++){const ge=Ye(b,Q[re],x||y.handleEvent,!1,y.h||y);if(!ge)break;y.g[ge.key]=ge}y=u.J?D(u.J):{},u.u?(u.v||(u.v="POST"),y["Content-Type"]="application/x-www-form-urlencoded",u.g.ea(u.B,u.v,u.u,y)):(u.v="GET",u.g.ea(u.B,u.v,null,y)),Vi(),uf(u.i,u.v,u.B,u.l,u.S,u.u)}wi.prototype.ba=function(u){u=u.target;const y=this.O;y&&Ii(u)==3?y.j():this.Y(u)},wi.prototype.Y=function(u){try{if(u==this.g)e:{const qe=Ii(this.g),Ht=this.g.ya(),ut=this.g.ca();if(!(qe<3)&&(qe!=3||this.g&&(this.h.h||this.g.la()||yn(this.g)))){this.K||qe!=4||Ht==7||(Ht==8||ut<=0?Vi(3):Vi(2)),Fi(this);var y=this.g.ca();this.X=y;var b=df(this);if(this.o=y==200,mu(this.i,this.v,this.B,this.l,this.S,qe,y),this.o){if(this.U&&!this.L){t:{if(this.g){var x,Q=this.g;if((x=Q.g?Q.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!N(x)){var re=x;break t}}re=null}if(u=re)zi(this.i,this.l,u,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,$i(this,u);else{this.o=!1,this.m=3,Wt(12),Gn(this),si(this);break e}}if(this.R){u=!0;let Rt;for(;!this.K&&this.C<b.length;)if(Rt=_u(this,b),Rt==dn){qe==4&&(this.m=4,Wt(14),u=!1),zi(this.i,this.l,null,"[Incomplete Response]");break}else if(Rt==Jt){this.m=4,Wt(15),zi(this.i,this.l,b,"[Invalid Chunk]"),u=!1;break}else zi(this.i,this.l,Rt,null),$i(this,Rt);if(gu(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),qe!=4||b.length!=0||this.h.h||(this.m=1,Wt(16),u=!1),this.o=this.o&&u,!u)zi(this.i,this.l,b,"[Invalid Chunked Response]"),Gn(this),si(this);else if(b.length>0&&!this.W){this.W=!0;var ge=this.j;ge.g==this&&ge.aa&&!ge.P&&(ge.j.info("Great, no buffering proxy detected. Bytes received: "+b.length),zl(ge),ge.P=!0,Wt(11))}}else zi(this.i,this.l,b,null),$i(this,b);qe==4&&Gn(this),this.o&&!this.K&&(qe==4?Iu(this.j,this):(this.o=!1,Hi(this)))}else Es(this.g),y==400&&b.indexOf("Unknown SID")>0?(this.m=3,Wt(12)):(this.m=0,Wt(13)),Gn(this),si(this)}}}catch{}finally{}};function df(u){if(!gu(u))return u.g.la();const y=yn(u.g);if(y==="")return"";let b="";const x=y.length,Q=Ii(u.g)==4;if(!u.h.i){if(typeof TextDecoder>"u")return Gn(u),si(u),"";u.h.i=new h.TextDecoder}for(let re=0;re<x;re++)u.h.h=!0,b+=u.h.i.decode(y[re],{stream:!(Q&&re==x-1)});return y.length=0,u.h.g+=b,u.C=0,u.h.g}function gu(u){return u.g?u.v=="GET"&&u.M!=2&&u.j.Aa:!1}function _u(u,y){var b=u.C,x=y.indexOf(`
`,b);return x==-1?dn:(b=Number(y.substring(b,x)),isNaN(b)?Jt:(x+=1,x+b>y.length?dn:(y=y.slice(x,x+b),u.C=x+b,y)))}wi.prototype.cancel=function(){this.K=!0,Gn(this)};function Hi(u){u.T=Date.now()+u.H,io(u,u.H)}function io(u,y){if(u.D!=null)throw Error("WatchDog timer not null");u.D=Ui(_(u.aa,u),y)}function Fi(u){u.D&&(h.clearTimeout(u.D),u.D=null)}wi.prototype.aa=function(){this.D=null;const u=Date.now();u-this.T>=0?(ia(this.i,this.B),this.M!=2&&(Vi(),Wt(17)),Gn(this),this.m=2,si(this)):io(this,this.T-u)};function si(u){u.j.I==0||u.K||Iu(u.j,u)}function Gn(u){Fi(u);var y=u.O;y&&typeof y.dispose=="function"&&y.dispose(),u.O=null,Sl(u.V),u.g&&(y=u.g,u.g=null,y.abort(),y.dispose())}function $i(u,y){try{var b=u.j;if(b.I!=0&&(b.g==u||Yi(b.h,u))){if(!u.L&&Yi(b.h,u)&&b.I==3){try{var x=b.Ba.g.parse(y)}catch{x=null}if(Array.isArray(x)&&x.length==3){var Q=x;if(Q[0]==0){e:if(!b.v){if(b.g)if(b.g.F+3e3<u.F)ho(b),rr(b);else break e;fa(b),Wt(18)}}else b.xa=Q[1],0<b.xa-b.K&&Q[2]<37500&&b.F&&b.A==0&&!b.C&&(b.C=Ui(_(b.Va,b),6e3));Gi(b.h)<=1&&b.ta&&(b.ta=void 0)}else Zi(b,11)}else if((u.L||b.g==u)&&ho(b),!N(y))for(Q=b.Ba.g.parse(y),y=0;y<Q.length;y++){let ut=Q[y];const Rt=ut[0];if(!(Rt<=b.K))if(b.K=Rt,ut=ut[1],b.I==2)if(ut[0]=="c"){b.M=ut[1],b.ba=ut[2];const oi=ut[3];oi!=null&&(b.ka=oi,b.j.info("VER="+b.ka));const es=ut[4];es!=null&&(b.za=es,b.j.info("SVER="+b.za));const Ci=ut[5];Ci!=null&&typeof Ci=="number"&&Ci>0&&(x=1.5*Ci,b.O=x,b.j.info("backChannelRequestTimeoutMs_="+x)),x=b;const Ni=u.g;if(Ni){const ma=Ni.g?Ni.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(ma){var re=x.h;re.g||ma.indexOf("spdy")==-1&&ma.indexOf("quic")==-1&&ma.indexOf("h2")==-1||(re.j=re.l,re.g=new Set,re.h&&(xl(re,re.h),re.h=null))}if(x.G){const fo=Ni.g?Ni.g.getResponseHeader("X-HTTP-Session-Id"):null;fo&&(x.wa=fo,mt(x.J,x.G,fo))}}b.I=3,b.l&&b.l.ra(),b.aa&&(b.T=Date.now()-u.F,b.j.info("Handshake RTT: "+b.T+"ms")),x=b;var ge=u;if(x.na=xu(x,x.L?x.ba:null,x.W),ge.L){Rl(x.h,ge);var qe=ge,Ht=x.O;Ht&&(qe.H=Ht),qe.D&&(Fi(qe),Hi(qe)),x.g=ge}else Su(x);b.i.length>0&&Ji(b)}else ut[0]!="stop"&&ut[0]!="close"||Zi(b,7);else b.I==3&&(ut[0]=="stop"||ut[0]=="close"?ut[0]=="stop"?Zi(b,7):Bl(b):ut[0]!="noop"&&b.l&&b.l.qa(ut),b.A=0)}}Vi(4)}catch{}}var Zt=class{constructor(u,y){this.g=u,this.map=y}};function Cl(u){this.l=u||10,h.PerformanceNavigationTiming?(u=h.performance.getEntriesByType("navigation"),u=u.length>0&&(u[0].nextHopProtocol=="hq"||u[0].nextHopProtocol=="h2")):u=!!(h.chrome&&h.chrome.loadTimes&&h.chrome.loadTimes()&&h.chrome.loadTimes().wasFetchedViaSpdy),this.j=u?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function Nl(u){return u.h?!0:u.g?u.g.size>=u.j:!1}function Gi(u){return u.h?1:u.g?u.g.size:0}function Yi(u,y){return u.h?u.h==y:u.g?u.g.has(y):!1}function xl(u,y){u.g?u.g.add(y):u.h=y}function Rl(u,y){u.h&&u.h==y?u.h=null:u.g&&u.g.has(y)&&u.g.delete(y)}Cl.prototype.cancel=function(){if(this.i=Dl(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const u of this.g.values())u.cancel();this.g.clear()}};function Dl(u){if(u.h!=null)return u.i.concat(u.h.G);if(u.g!=null&&u.g.size!==0){let y=u.i;for(const b of u.g.values())y=y.concat(b.G);return y}return O(u.i)}var yu=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function so(u,y){if(u){u=u.split("&");for(let b=0;b<u.length;b++){const x=u[b].indexOf("=");let Q,re=null;x>=0?(Q=u[b].substring(0,x),re=u[b].substring(x+1)):Q=u[b],y(Q,re?decodeURIComponent(re.replace(/\+/g," ")):"")}}}function Yn(u){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let y;u instanceof Yn?(this.l=u.l,fn(this,u.j),this.o=u.o,this.g=u.g,Js(this,u.u),this.h=u.h,Ml(this,wu(u.i)),this.m=u.m):u&&(y=String(u).match(yu))?(this.l=!1,fn(this,y[1]||"",!0),this.o=Qi(y[2]||""),this.g=Qi(y[3]||"",!0),Js(this,y[4]),this.h=Qi(y[5]||"",!0),Ml(this,y[6]||"",!0),this.m=Qi(y[7]||"")):(this.l=!1,this.i=new er(null,this.l))}Yn.prototype.toString=function(){const u=[];var y=this.j;y&&u.push(oa(y,ro,!0),":");var b=this.g;return(b||y=="file")&&(u.push("//"),(y=this.o)&&u.push(oa(y,ro,!0),"@"),u.push(Ts(b).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),b=this.u,b!=null&&u.push(":",String(b))),(b=this.h)&&(this.g&&b.charAt(0)!="/"&&u.push("/"),u.push(oa(b,b.charAt(0)=="/"?Ol:vu,!0))),(b=this.i.toString())&&u.push("?",b),(b=this.m)&&u.push("#",oa(b,bu)),u.join("")},Yn.prototype.resolve=function(u){const y=en(this);let b=!!u.j;b?fn(y,u.j):b=!!u.o,b?y.o=u.o:b=!!u.g,b?y.g=u.g:b=u.u!=null;var x=u.h;if(b)Js(y,u.u);else if(b=!!u.h){if(x.charAt(0)!="/")if(this.g&&!this.h)x="/"+x;else{var Q=y.h.lastIndexOf("/");Q!=-1&&(x=y.h.slice(0,Q+1)+x)}if(Q=x,Q==".."||Q==".")x="";else if(Q.indexOf("./")!=-1||Q.indexOf("/.")!=-1){x=Q.lastIndexOf("/",0)==0,Q=Q.split("/");const re=[];for(let ge=0;ge<Q.length;){const qe=Q[ge++];qe=="."?x&&ge==Q.length&&re.push(""):qe==".."?((re.length>1||re.length==1&&re[0]!="")&&re.pop(),x&&ge==Q.length&&re.push("")):(re.push(qe),x=!0)}x=re.join("/")}else x=Q}return b?y.h=x:b=u.i.toString()!=="",b?Ml(y,wu(u.i)):b=!!u.m,b&&(y.m=u.m),y};function en(u){return new Yn(u)}function fn(u,y,b){u.j=b?Qi(y,!0):y,u.j&&(u.j=u.j.replace(/:$/,""))}function Js(u,y){if(y){if(y=Number(y),isNaN(y)||y<0)throw Error("Bad port number "+y);u.u=y}else u.u=null}function Ml(u,y,b){y instanceof er?(u.i=y,oo(u.i,u.l)):(b||(y=oa(y,Zs)),u.i=new er(y,u.l))}function mt(u,y,b){u.i.set(y,b)}function aa(u){return mt(u,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),u}function Qi(u,y){return u?y?decodeURI(u.replace(/%25/g,"%2525")):decodeURIComponent(u):""}function oa(u,y,b){return typeof u=="string"?(u=encodeURI(u).replace(y,Ln),b&&(u=u.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),u):null}function Ln(u){return u=u.charCodeAt(0),"%"+(u>>4&15).toString(16)+(u&15).toString(16)}var ro=/[#\/\?@]/g,vu=/[#\?:]/g,Ol=/[#\?]/g,Zs=/[#\?@]/g,bu=/#/g;function er(u,y){this.h=this.g=null,this.i=u||null,this.j=!!y}function Pn(u){u.g||(u.g=new Map,u.h=0,u.i&&so(u.i,function(y,b){u.add(decodeURIComponent(y.replace(/\+/g," ")),b)}))}i=er.prototype,i.add=function(u,y){Pn(this),this.i=null,u=tr(this,u);let b=this.g.get(u);return b||this.g.set(u,b=[]),b.push(y),this.h+=1,this};function Tu(u,y){Pn(u),y=tr(u,y),u.g.has(y)&&(u.i=null,u.h-=u.g.get(y).length,u.g.delete(y))}function kl(u,y){return Pn(u),y=tr(u,y),u.g.has(y)}i.forEach=function(u,y){Pn(this),this.g.forEach(function(b,x){b.forEach(function(Q){u.call(y,Q,x,this)},this)},this)};function jl(u,y){Pn(u);let b=[];if(typeof y=="string")kl(u,y)&&(b=b.concat(u.g.get(tr(u,y))));else for(u=Array.from(u.g.values()),y=0;y<u.length;y++)b=b.concat(u[y]);return b}i.set=function(u,y){return Pn(this),this.i=null,u=tr(this,u),kl(this,u)&&(this.h-=this.g.get(u).length),this.g.set(u,[y]),this.h+=1,this},i.get=function(u,y){return u?(u=jl(this,u),u.length>0?String(u[0]):y):y};function ao(u,y,b){Tu(u,y),b.length>0&&(u.i=null,u.g.set(tr(u,y),O(b)),u.h+=b.length)}i.toString=function(){if(this.i)return this.i;if(!this.g)return"";const u=[],y=Array.from(this.g.keys());for(let x=0;x<y.length;x++){var b=y[x];const Q=Ts(b);b=jl(this,b);for(let re=0;re<b.length;re++){let ge=Q;b[re]!==""&&(ge+="="+Ts(b[re])),u.push(ge)}}return this.i=u.join("&")};function wu(u){const y=new er;return y.i=u.i,u.g&&(y.g=new Map(u.g),y.h=u.h),y}function tr(u,y){return y=String(y),u.j&&(y=y.toLowerCase()),y}function oo(u,y){y&&!u.j&&(Pn(u),u.i=null,u.g.forEach(function(b,x){const Q=x.toLowerCase();x!=Q&&(Tu(this,x),ao(this,Q,b))},u)),u.j=y}function Si(u,y){const b=new Ti;if(h.Image){const x=new Image;x.onload=T(ri,b,"TestLoadImage: loaded",!0,y,x),x.onerror=T(ri,b,"TestLoadImage: error",!1,y,x),x.onabort=T(ri,b,"TestLoadImage: abort",!1,y,x),x.ontimeout=T(ri,b,"TestLoadImage: timeout",!1,y,x),h.setTimeout(function(){x.ontimeout&&x.ontimeout()},1e4),x.src=u}else y(!1)}function Ll(u,y){const b=new Ti,x=new AbortController,Q=setTimeout(()=>{x.abort(),ri(b,"TestPingServer: timeout",!1,y)},1e4);fetch(u,{signal:x.signal}).then(re=>{clearTimeout(Q),re.ok?ri(b,"TestPingServer: ok",!0,y):ri(b,"TestPingServer: server error",!1,y)}).catch(()=>{clearTimeout(Q),ri(b,"TestPingServer: error",!1,y)})}function ri(u,y,b,x,Q){try{Q&&(Q.onload=null,Q.onerror=null,Q.onabort=null,Q.ontimeout=null),x(b)}catch{}}function nr(){this.g=new cu}function Ki(u){this.i=u.Sb||null,this.h=u.ab||!1}E(Ki,uu),Ki.prototype.g=function(){return new la(this.i,this.h)};function la(u,y){Xt.call(this),this.H=u,this.o=y,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}E(la,Xt),i=la.prototype,i.open=function(u,y){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=u,this.D=y,this.readyState=1,Ai(this)},i.send=function(u){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const y={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};u&&(y.body=u),(this.H||h).fetch(new Request(this.D,y)).then(this.Pa.bind(this),this.ga.bind(this))},i.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,ir(this)),this.readyState=0},i.Pa=function(u){if(this.g&&(this.l=u,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=u.headers,this.readyState=2,Ai(this)),this.g&&(this.readyState=3,Ai(this),this.g)))if(this.responseType==="arraybuffer")u.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof h.ReadableStream<"u"&&"body"in u){if(this.j=u.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;lo(this)}else u.text().then(this.Oa.bind(this),this.ga.bind(this))};function lo(u){u.j.read().then(u.Ma.bind(u)).catch(u.ga.bind(u))}i.Ma=function(u){if(this.g){if(this.o&&u.value)this.response.push(u.value);else if(!this.o){var y=u.value?u.value:new Uint8Array(0);(y=this.B.decode(y,{stream:!u.done}))&&(this.response=this.responseText+=y)}u.done?ir(this):Ai(this),this.readyState==3&&lo(this)}},i.Oa=function(u){this.g&&(this.response=this.responseText=u,ir(this))},i.Na=function(u){this.g&&(this.response=u,ir(this))},i.ga=function(){this.g&&ir(this)};function ir(u){u.readyState=4,u.l=null,u.j=null,u.B=null,Ai(u)}i.setRequestHeader=function(u,y){this.A.append(u,y)},i.getResponseHeader=function(u){return this.h&&this.h.get(u.toLowerCase())||""},i.getAllResponseHeaders=function(){if(!this.h)return"";const u=[],y=this.h.entries();for(var b=y.next();!b.done;)b=b.value,u.push(b[0]+": "+b[1]),b=y.next();return u.join(`\r
`)};function Ai(u){u.onreadystatechange&&u.onreadystatechange.call(u)}Object.defineProperty(la.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(u){this.m=u?"include":"same-origin"}});function ai(u){let y="";return H(u,function(b,x){y+=x,y+=":",y+=b,y+=`\r
`}),y}function ca(u,y,b){e:{for(x in b){var x=!1;break e}x=!0}x||(b=ai(b),typeof u=="string"?b!=null&&Ts(b):mt(u,y,b))}function yt(u){Xt.call(this),this.headers=new Map,this.L=u||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}E(yt,Xt);var Xi=/^https?$/i,Pl=["POST","PUT"];i=yt.prototype,i.Fa=function(u){this.H=u},i.ea=function(u,y,b,x){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+u);y=y?y.toUpperCase():"GET",this.D=u,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():Il.g(),this.g.onreadystatechange=I(_(this.Ca,this));try{this.B=!0,this.g.open(y,String(u),!0),this.B=!1}catch(re){ua(this,re);return}if(u=b||"",b=new Map(this.headers),x)if(Object.getPrototypeOf(x)===Object.prototype)for(var Q in x)b.set(Q,x[Q]);else if(typeof x.keys=="function"&&typeof x.get=="function")for(const re of x.keys())b.set(re,x.get(re));else throw Error("Unknown input type for opt_headers: "+String(x));x=Array.from(b.keys()).find(re=>re.toLowerCase()=="content-type"),Q=h.FormData&&u instanceof h.FormData,!(Array.prototype.indexOf.call(Pl,y,void 0)>=0)||x||Q||b.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[re,ge]of b)this.g.setRequestHeader(re,ge);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(u),this.v=!1}catch(re){ua(this,re)}};function ua(u,y){u.h=!1,u.g&&(u.j=!0,u.g.abort(),u.j=!1),u.l=y,u.o=5,Vl(u),ws(u)}function Vl(u){u.A||(u.A=!0,cn(u,"complete"),cn(u,"error"))}i.abort=function(u){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=u||7,cn(this,"complete"),cn(this,"abort"),ws(this))},i.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),ws(this,!0)),yt.Z.N.call(this)},i.Ca=function(){this.u||(this.B||this.v||this.j?ha(this):this.Xa())},i.Xa=function(){ha(this)};function ha(u){if(u.h&&typeof c<"u"){if(u.v&&Ii(u)==4)setTimeout(u.Ca.bind(u),0);else if(cn(u,"readystatechange"),Ii(u)==4){u.h=!1;try{const re=u.ca();e:switch(re){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var y=!0;break e;default:y=!1}var b;if(!(b=y)){var x;if(x=re===0){let ge=String(u.D).match(yu)[1]||null;!ge&&h.self&&h.self.location&&(ge=h.self.location.protocol.slice(0,-1)),x=!Xi.test(ge?ge.toLowerCase():"")}b=x}if(b)cn(u,"complete"),cn(u,"success");else{u.o=6;try{var Q=Ii(u)>2?u.g.statusText:""}catch{Q=""}u.l=Q+" ["+u.ca()+"]",Vl(u)}}finally{ws(u)}}}}function ws(u,y){if(u.g){u.m&&(clearTimeout(u.m),u.m=null);const b=u.g;u.g=null,y||cn(u,"ready");try{b.onreadystatechange=null}catch{}}}i.isActive=function(){return!!this.g};function Ii(u){return u.g?u.g.readyState:0}i.ca=function(){try{return Ii(this)>2?this.g.status:-1}catch{return-1}},i.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},i.La=function(u){if(this.g){var y=this.g.responseText;return u&&y.indexOf(u)==0&&(y=y.substring(u.length)),cf(y)}};function yn(u){try{if(!u.g)return null;if("response"in u.g)return u.g.response;switch(u.F){case"":case"text":return u.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in u.g)return u.g.mozResponseArrayBuffer}return null}catch{return null}}function Es(u){const y={};u=(u.g&&Ii(u)>=2&&u.g.getAllResponseHeaders()||"").split(`\r
`);for(let x=0;x<u.length;x++){if(N(u[x]))continue;var b=pu(u[x]);const Q=b[0];if(b=b[1],typeof b!="string")continue;b=b.trim();const re=y[Q]||[];y[Q]=re,re.push(b)}W(y,function(x){return x.join(", ")})}i.ya=function(){return this.o},i.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function Wi(u,y,b){return b&&b.internalChannelParams&&b.internalChannelParams[u]||y}function sr(u){this.za=0,this.i=[],this.j=new Ti,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=Wi("failFast",!1,u),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=Wi("baseRetryDelayMs",5e3,u),this.Za=Wi("retryDelaySeedMs",1e4,u),this.Ta=Wi("forwardChannelMaxRetries",2,u),this.va=Wi("forwardChannelRequestTimeoutMs",2e4,u),this.ma=u&&u.xmlHttpFactory||void 0,this.Ua=u&&u.Rb||void 0,this.Aa=u&&u.useFetchStreams||!1,this.O=void 0,this.L=u&&u.supportsCrossDomainXhr||!1,this.M="",this.h=new Cl(u&&u.concurrentRequestLimit),this.Ba=new nr,this.S=u&&u.fastHandshake||!1,this.R=u&&u.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=u&&u.Pb||!1,u&&u.ua&&this.j.ua(),u&&u.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&u&&u.detectBufferingProxy||!1,this.ia=void 0,u&&u.longPollingTimeout&&u.longPollingTimeout>0&&(this.ia=u.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}i=sr.prototype,i.ka=8,i.I=1,i.connect=function(u,y,b,x){Wt(0),this.W=u,this.H=y||{},b&&x!==void 0&&(this.H.OSID=b,this.H.OAID=x),this.F=this.X,this.J=xu(this,null,this.W),Ji(this)};function Bl(u){if(co(u),u.I==3){var y=u.V++,b=en(u.J);if(mt(b,"SID",u.M),mt(b,"RID",y),mt(b,"TYPE","terminate"),da(u,b),y=new wi(u,u.j,y),y.M=2,y.A=aa(en(b)),b=!1,h.navigator&&h.navigator.sendBeacon)try{b=h.navigator.sendBeacon(y.A.toString(),"")}catch{}!b&&h.Image&&(new Image().src=y.A,b=!0),b||(y.g=Ru(y.j,null),y.g.ea(y.A)),y.F=Date.now(),Hi(y)}Nu(u)}function rr(u){u.g&&(zl(u),u.g.cancel(),u.g=null)}function co(u){rr(u),u.v&&(h.clearTimeout(u.v),u.v=null),ho(u),u.h.cancel(),u.m&&(typeof u.m=="number"&&h.clearTimeout(u.m),u.m=null)}function Ji(u){if(!Nl(u.h)&&!u.m){u.m=!0;var y=u.Ea;B||w(),ie||(B(),ie=!0),A.add(y,u),u.D=0}}function uo(u,y){return Gi(u.h)>=u.h.j-(u.m?1:0)?!1:u.m?(u.i=y.G.concat(u.i),!0):u.I==1||u.I==2||u.D>=(u.Sa?0:u.Ta)?!1:(u.m=Ui(_(u.Ea,u,y),Cu(u,u.D)),u.D++,!0)}i.Ea=function(u){if(this.m)if(this.m=null,this.I==1){if(!u){this.V=Math.floor(Math.random()*1e5),u=this.V++;const Q=new wi(this,this.j,u);let re=this.o;if(this.U&&(re?(re=D(re),se(re,this.U)):re=this.U),this.u!==null||this.R||(Q.J=re,re=null),this.S)e:{for(var y=0,b=0;b<this.i.length;b++){t:{var x=this.i[b];if("__data__"in x.map&&(x=x.map.__data__,typeof x=="string")){x=x.length;break t}x=void 0}if(x===void 0)break;if(y+=x,y>4096){y=b;break e}if(y===4096||b===this.i.length-1){y=b+1;break e}}y=1e3}else y=1e3;y=Eu(this,Q,y),b=en(this.J),mt(b,"RID",u),mt(b,"CVER",22),this.G&&mt(b,"X-HTTP-Session-Id",this.G),da(this,b),re&&(this.R?y="headers="+Ts(ai(re))+"&"+y:this.u&&ca(b,this.u,re)),xl(this.h,Q),this.Ra&&mt(b,"TYPE","init"),this.S?(mt(b,"$req",y),mt(b,"SID","null"),Q.U=!0,qi(Q,b,null)):qi(Q,b,y),this.I=2}}else this.I==3&&(u?Ul(this,u):this.i.length==0||Nl(this.h)||Ul(this))};function Ul(u,y){var b;y?b=y.l:b=u.V++;const x=en(u.J);mt(x,"SID",u.M),mt(x,"RID",b),mt(x,"AID",u.K),da(u,x),u.u&&u.o&&ca(x,u.u,u.o),b=new wi(u,u.j,b,u.D+1),u.u===null&&(b.J=u.o),y&&(u.i=y.G.concat(u.i)),y=Eu(u,b,1e3),b.H=Math.round(u.va*.5)+Math.round(u.va*.5*Math.random()),xl(u.h,b),qi(b,x,y)}function da(u,y){u.H&&H(u.H,function(b,x){mt(y,x,b)}),u.l&&H({},function(b,x){mt(y,x,b)})}function Eu(u,y,b){b=Math.min(u.i.length,b);const x=u.l?_(u.l.Ka,u.l,u):null;e:{var Q=u.i;let qe=-1;for(;;){const Ht=["count="+b];qe==-1?b>0?(qe=Q[0].g,Ht.push("ofs="+qe)):qe=0:Ht.push("ofs="+qe);let ut=!0;for(let Rt=0;Rt<b;Rt++){var re=Q[Rt].g;const oi=Q[Rt].map;if(re-=qe,re<0)qe=Math.max(0,Q[Rt].g-100),ut=!1;else try{re="req"+re+"_"||"";try{var ge=oi instanceof Map?oi:Object.entries(oi);for(const[es,Ci]of ge){let Ni=Ci;p(Ci)&&(Ni=Ws(Ci)),Ht.push(re+es+"="+encodeURIComponent(Ni))}}catch(es){throw Ht.push(re+"type="+encodeURIComponent("_badmap")),es}}catch{x&&x(oi)}}if(ut){ge=Ht.join("&");break e}}ge=void 0}return u=u.i.splice(0,b),y.G=u,ge}function Su(u){if(!u.g&&!u.v){u.Y=1;var y=u.Da;B||w(),ie||(B(),ie=!0),A.add(y,u),u.A=0}}function fa(u){return u.g||u.v||u.A>=3?!1:(u.Y++,u.v=Ui(_(u.Da,u),Cu(u,u.A)),u.A++,!0)}i.Da=function(){if(this.v=null,Au(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var u=4*this.T;this.j.info("BP detection timer enabled: "+u),this.B=Ui(_(this.Wa,this),u)}},i.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,Wt(10),rr(this),Au(this))};function zl(u){u.B!=null&&(h.clearTimeout(u.B),u.B=null)}function Au(u){u.g=new wi(u,u.j,"rpc",u.Y),u.u===null&&(u.g.J=u.o),u.g.P=0;var y=en(u.na);mt(y,"RID","rpc"),mt(y,"SID",u.M),mt(y,"AID",u.K),mt(y,"CI",u.F?"0":"1"),!u.F&&u.ia&&mt(y,"TO",u.ia),mt(y,"TYPE","xmlhttp"),da(u,y),u.u&&u.o&&ca(y,u.u,u.o),u.O&&(u.g.H=u.O);var b=u.g;u=u.ba,b.M=1,b.A=aa(en(y)),b.u=null,b.R=!0,no(b,u)}i.Va=function(){this.C!=null&&(this.C=null,rr(this),fa(this),Wt(19))};function ho(u){u.C!=null&&(h.clearTimeout(u.C),u.C=null)}function Iu(u,y){var b=null;if(u.g==y){ho(u),zl(u),u.g=null;var x=2}else if(Yi(u.h,y))b=y.G,Rl(u.h,y),x=1;else return;if(u.I!=0){if(y.o)if(x==1){b=y.u?y.u.length:0,y=Date.now()-y.F;var Q=u.D;x=to(),cn(x,new Bi(x,b)),Ji(u)}else Su(u);else if(Q=y.m,Q==3||Q==0&&y.X>0||!(x==1&&uo(u,y)||x==2&&fa(u)))switch(b&&b.length>0&&(y=u.h,y.i=y.i.concat(b)),Q){case 1:Zi(u,5);break;case 4:Zi(u,10);break;case 3:Zi(u,6);break;default:Zi(u,2)}}}function Cu(u,y){let b=u.Qa+Math.floor(Math.random()*u.Za);return u.isActive()||(b*=2),b*y}function Zi(u,y){if(u.j.info("Error code "+y),y==2){var b=_(u.bb,u),x=u.Ua;const Q=!x;x=new Yn(x||"//www.google.com/images/cleardot.gif"),h.location&&h.location.protocol=="http"||fn(x,"https"),aa(x),Q?Si(x.toString(),b):Ll(x.toString(),b)}else Wt(2);u.I=0,u.l&&u.l.pa(y),Nu(u),co(u)}i.bb=function(u){u?(this.j.info("Successfully pinged google.com"),Wt(2)):(this.j.info("Failed to ping google.com"),Wt(1))};function Nu(u){if(u.I=0,u.ja=[],u.l){const y=Dl(u.h);(y.length!=0||u.i.length!=0)&&(L(u.ja,y),L(u.ja,u.i),u.h.i.length=0,O(u.i),u.i.length=0),u.l.oa()}}function xu(u,y,b){var x=b instanceof Yn?en(b):new Yn(b);if(x.g!="")y&&(x.g=y+"."+x.g),Js(x,x.u);else{var Q=h.location;x=Q.protocol,y=y?y+"."+Q.hostname:Q.hostname,Q=+Q.port;const re=new Yn(null);x&&fn(re,x),y&&(re.g=y),Q&&Js(re,Q),b&&(re.h=b),x=re}return b=u.G,y=u.wa,b&&y&&mt(x,b,y),mt(x,"VER",u.ka),da(u,x),x}function Ru(u,y,b){if(y&&!u.L)throw Error("Can't create secondary domain capable XhrIo object.");return y=u.Aa&&!u.ma?new yt(new Ki({ab:b})):new yt(u.ma),y.Fa(u.L),y}i.isActive=function(){return!!this.l&&this.l.isActive(this)};function Du(){}i=Du.prototype,i.ra=function(){},i.qa=function(){},i.pa=function(){},i.oa=function(){},i.isActive=function(){return!0},i.Ka=function(){};function ar(){}ar.prototype.g=function(u,y){return new On(u,y)};function On(u,y){Xt.call(this),this.g=new sr(y),this.l=u,this.h=y&&y.messageUrlParams||null,u=y&&y.messageHeaders||null,y&&y.clientProtocolHeaderRequired&&(u?u["X-Client-Protocol"]="webchannel":u={"X-Client-Protocol":"webchannel"}),this.g.o=u,u=y&&y.initMessageHeaders||null,y&&y.messageContentType&&(u?u["X-WebChannel-Content-Type"]=y.messageContentType:u={"X-WebChannel-Content-Type":y.messageContentType}),y&&y.sa&&(u?u["X-WebChannel-Client-Profile"]=y.sa:u={"X-WebChannel-Client-Profile":y.sa}),this.g.U=u,(u=y&&y.Qb)&&!N(u)&&(this.g.u=u),this.A=y&&y.supportsCrossDomainXhr||!1,this.v=y&&y.sendRawJson||!1,(y=y&&y.httpSessionIdParam)&&!N(y)&&(this.g.G=y,u=this.h,u!==null&&y in u&&(u=this.h,y in u&&delete u[y])),this.j=new Ss(this)}E(On,Xt),On.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},On.prototype.close=function(){Bl(this.g)},On.prototype.o=function(u){var y=this.g;if(typeof u=="string"){var b={};b.__data__=u,u=b}else this.v&&(b={},b.__data__=Ws(u),u=b);y.i.push(new Zt(y.Ya++,u)),y.I==3&&Ji(y)},On.prototype.N=function(){this.g.l=null,delete this.j,Bl(this.g),delete this.g,On.Z.N.call(this)};function Mu(u){_n.call(this),u.__headers__&&(this.headers=u.__headers__,this.statusCode=u.__status__,delete u.__headers__,delete u.__status__);var y=u.__sm__;if(y){e:{for(const b in y){u=b;break e}u=void 0}(this.i=u)&&(u=this.i,y=y!==null&&u in y?y[u]:void 0),this.data=y}else this.data=u}E(Mu,_n);function Ou(){ii.call(this),this.status=1}E(Ou,ii);function Ss(u){this.g=u}E(Ss,Du),Ss.prototype.ra=function(){cn(this.g,"a")},Ss.prototype.qa=function(u){cn(this.g,new Mu(u))},Ss.prototype.pa=function(u){cn(this.g,new Ou)},Ss.prototype.oa=function(){cn(this.g,"b")},ar.prototype.createWebChannel=ar.prototype.g,On.prototype.send=On.prototype.o,On.prototype.open=On.prototype.m,On.prototype.close=On.prototype.close,jT=function(){return new ar},kT=function(){return to()},OT=qt,Vp={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},sa.NO_ERROR=0,sa.TIMEOUT=8,sa.HTTP_ERROR=6,Jh=sa,Al.COMPLETE="complete",MT=Al,hu.EventType=bi,bi.OPEN="a",bi.CLOSE="b",bi.ERROR="c",bi.MESSAGE="d",Xt.prototype.listen=Xt.prototype.J,Cc=hu,yt.prototype.listenOnce=yt.prototype.K,yt.prototype.getLastError=yt.prototype.Ha,yt.prototype.getLastErrorCode=yt.prototype.ya,yt.prototype.getStatus=yt.prototype.ca,yt.prototype.getResponseJson=yt.prototype.La,yt.prototype.getResponseText=yt.prototype.la,yt.prototype.send=yt.prototype.ea,yt.prototype.setWithCredentials=yt.prototype.Fa,DT=yt}).apply(typeof Bh<"u"?Bh:typeof self<"u"?self:typeof window<"u"?window:{});const Sb="@firebase/firestore",Ab="4.9.2";class Nn{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Nn.UNAUTHENTICATED=new Nn(null),Nn.GOOGLE_CREDENTIALS=new Nn("google-credentials-uid"),Nn.FIRST_PARTY=new Nn("first-party-uid"),Nn.MOCK_USER=new Nn("mock-user");let pl="12.3.0";const Fa=new ug("@firebase/firestore");function $o(){return Fa.logLevel}function Ae(i,...e){if(Fa.logLevel<=Ze.DEBUG){const t=e.map(Eg);Fa.debug(`Firestore (${pl}): ${i}`,...t)}}function Qs(i,...e){if(Fa.logLevel<=Ze.ERROR){const t=e.map(Eg);Fa.error(`Firestore (${pl}): ${i}`,...t)}}function rl(i,...e){if(Fa.logLevel<=Ze.WARN){const t=e.map(Eg);Fa.warn(`Firestore (${pl}): ${i}`,...t)}}function Eg(i){if(typeof i=="string")return i;try{return(function(t){return JSON.stringify(t)})(i)}catch{return i}}function Le(i,e,t){let r="Unexpected state";typeof e=="string"?r=e:t=e,LT(i,r,t)}function LT(i,e,t){let r=`FIRESTORE (${pl}) INTERNAL ASSERTION FAILED: ${e} (ID: ${i.toString(16)})`;if(t!==void 0)try{r+=" CONTEXT: "+JSON.stringify(t)}catch{r+=" CONTEXT: "+t}throw Qs(r),new Error(r)}function ft(i,e,t,r){let o="Unexpected state";typeof t=="string"?o=t:r=t,i||LT(e,o,r)}function Ue(i,e){return i}const he={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Te extends bs{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class $s{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}}class PT{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class Ax{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable((()=>t(Nn.UNAUTHENTICATED)))}shutdown(){}}class Ix{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable((()=>t(this.token.user)))}shutdown(){this.changeListener=null}}class Cx{constructor(e){this.t=e,this.currentUser=Nn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){ft(this.o===void 0,42304);let r=this.i;const o=g=>this.i!==r?(r=this.i,t(g)):Promise.resolve();let c=new $s;this.o=()=>{this.i++,this.currentUser=this.u(),c.resolve(),c=new $s,e.enqueueRetryable((()=>o(this.currentUser)))};const h=()=>{const g=c;e.enqueueRetryable((async()=>{await g.promise,await o(this.currentUser)}))},p=g=>{Ae("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=g,this.o&&(this.auth.addAuthTokenListener(this.o),h())};this.t.onInit((g=>p(g))),setTimeout((()=>{if(!this.auth){const g=this.t.getImmediate({optional:!0});g?p(g):(Ae("FirebaseAuthCredentialsProvider","Auth not yet detected"),c.resolve(),c=new $s)}}),0),h()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then((r=>this.i!==e?(Ae("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(ft(typeof r.accessToken=="string",31837,{l:r}),new PT(r.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return ft(e===null||typeof e=="string",2055,{h:e}),new Nn(e)}}class Nx{constructor(e,t,r){this.P=e,this.T=t,this.I=r,this.type="FirstParty",this.user=Nn.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class xx{constructor(e,t,r){this.P=e,this.T=t,this.I=r}getToken(){return Promise.resolve(new Nx(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable((()=>t(Nn.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class Ib{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class Rx{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,_i(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){ft(this.o===void 0,3512);const r=c=>{c.error!=null&&Ae("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${c.error.message}`);const h=c.token!==this.m;return this.m=c.token,Ae("FirebaseAppCheckTokenProvider",`Received ${h?"new":"existing"} token.`),h?t(c.token):Promise.resolve()};this.o=c=>{e.enqueueRetryable((()=>r(c)))};const o=c=>{Ae("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=c,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((c=>o(c))),setTimeout((()=>{if(!this.appCheck){const c=this.V.getImmediate({optional:!0});c?o(c):Ae("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new Ib(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((t=>t?(ft(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new Ib(t.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}function Dx(i){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(i);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let r=0;r<i;r++)t[r]=Math.floor(256*Math.random());return t}class Sg{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const o=Dx(40);for(let c=0;c<o.length;++c)r.length<20&&o[c]<t&&(r+=e.charAt(o[c]%62))}return r}}function et(i,e){return i<e?-1:i>e?1:0}function Bp(i,e){const t=Math.min(i.length,e.length);for(let r=0;r<t;r++){const o=i.charAt(r),c=e.charAt(r);if(o!==c)return bp(o)===bp(c)?et(o,c):bp(o)?1:-1}return et(i.length,e.length)}const Mx=55296,Ox=57343;function bp(i){const e=i.charCodeAt(0);return e>=Mx&&e<=Ox}function al(i,e,t){return i.length===e.length&&i.every(((r,o)=>t(r,e[o])))}const Cb="__name__";class rs{constructor(e,t,r){t===void 0?t=0:t>e.length&&Le(637,{offset:t,range:e.length}),r===void 0?r=e.length-t:r>e.length-t&&Le(1746,{length:r,range:e.length-t}),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return rs.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof rs?e.forEach((r=>{t.push(r)})):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let o=0;o<r;o++){const c=rs.compareSegments(e.get(o),t.get(o));if(c!==0)return c}return et(e.length,t.length)}static compareSegments(e,t){const r=rs.isNumericId(e),o=rs.isNumericId(t);return r&&!o?-1:!r&&o?1:r&&o?rs.extractNumericId(e).compare(rs.extractNumericId(t)):Bp(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return zr.fromString(e.substring(4,e.length-2))}}class St extends rs{construct(e,t,r){return new St(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new Te(he.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter((o=>o.length>0)))}return new St(t)}static emptyPath(){return new St([])}}const kx=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Sn extends rs{construct(e,t,r){return new Sn(e,t,r)}static isValidIdentifier(e){return kx.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Sn.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===Cb}static keyField(){return new Sn([Cb])}static fromServerFormat(e){const t=[];let r="",o=0;const c=()=>{if(r.length===0)throw new Te(he.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let h=!1;for(;o<e.length;){const p=e[o];if(p==="\\"){if(o+1===e.length)throw new Te(he.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const g=e[o+1];if(g!=="\\"&&g!=="."&&g!=="`")throw new Te(he.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=g,o+=2}else p==="`"?(h=!h,o++):p!=="."||h?(r+=p,o++):(c(),o++)}if(c(),h)throw new Te(he.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Sn(t)}static emptyPath(){return new Sn([])}}class Me{constructor(e){this.path=e}static fromPath(e){return new Me(St.fromString(e))}static fromName(e){return new Me(St.fromString(e).popFirst(5))}static empty(){return new Me(St.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&St.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return St.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Me(new St(e.slice()))}}function VT(i,e,t){if(!t)throw new Te(he.INVALID_ARGUMENT,`Function ${i}() cannot be called with an empty ${e}.`)}function jx(i,e,t,r){if(e===!0&&r===!0)throw new Te(he.INVALID_ARGUMENT,`${i} and ${t} cannot be used together.`)}function Nb(i){if(!Me.isDocumentKey(i))throw new Te(he.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${i} has ${i.length}.`)}function xb(i){if(Me.isDocumentKey(i))throw new Te(he.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${i} has ${i.length}.`)}function BT(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}function Ld(i){if(i===void 0)return"undefined";if(i===null)return"null";if(typeof i=="string")return i.length>20&&(i=`${i.substring(0,20)}...`),JSON.stringify(i);if(typeof i=="number"||typeof i=="boolean")return""+i;if(typeof i=="object"){if(i instanceof Array)return"an array";{const e=(function(r){return r.constructor?r.constructor.name:null})(i);return e?`a custom ${e} object`:"an object"}}return typeof i=="function"?"a function":Le(12329,{type:typeof i})}function ki(i,e){if("_delegate"in i&&(i=i._delegate),!(i instanceof e)){if(e.name===i.constructor.name)throw new Te(he.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=Ld(i);throw new Te(he.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return i}function ln(i,e){const t={typeString:i};return e&&(t.value=e),t}function tu(i,e){if(!BT(i))throw new Te(he.INVALID_ARGUMENT,"JSON must be an object");let t;for(const r in e)if(e[r]){const o=e[r].typeString,c="value"in e[r]?{value:e[r].value}:void 0;if(!(r in i)){t=`JSON missing required field: '${r}'`;break}const h=i[r];if(o&&typeof h!==o){t=`JSON field '${r}' must be a ${o}.`;break}if(c!==void 0&&h!==c.value){t=`Expected '${r}' field to equal '${c.value}'`;break}}if(t)throw new Te(he.INVALID_ARGUMENT,t);return!0}const Rb=-62135596800,Db=1e6;class xt{static now(){return xt.fromMillis(Date.now())}static fromDate(e){return xt.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor((e-1e3*t)*Db);return new xt(t,r)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new Te(he.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new Te(he.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<Rb)throw new Te(he.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Te(he.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/Db}_compareTo(e){return this.seconds===e.seconds?et(this.nanoseconds,e.nanoseconds):et(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:xt._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(tu(e,xt._jsonSchema))return new xt(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-Rb;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}xt._jsonSchemaVersion="firestore/timestamp/1.0",xt._jsonSchema={type:ln("string",xt._jsonSchemaVersion),seconds:ln("number"),nanoseconds:ln("number")};class Ve{static fromTimestamp(e){return new Ve(e)}static min(){return new Ve(new xt(0,0))}static max(){return new Ve(new xt(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}const Hc=-1;function Lx(i,e){const t=i.toTimestamp().seconds,r=i.toTimestamp().nanoseconds+1,o=Ve.fromTimestamp(r===1e9?new xt(t+1,0):new xt(t,r));return new $r(o,Me.empty(),e)}function Px(i){return new $r(i.readTime,i.key,Hc)}class $r{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new $r(Ve.min(),Me.empty(),Hc)}static max(){return new $r(Ve.max(),Me.empty(),Hc)}}function Vx(i,e){let t=i.readTime.compareTo(e.readTime);return t!==0?t:(t=Me.comparator(i.documentKey,e.documentKey),t!==0?t:et(i.largestBatchId,e.largestBatchId))}const Bx="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class Ux{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}async function gl(i){if(i.code!==he.FAILED_PRECONDITION||i.message!==Bx)throw i;Ae("LocalStore","Unexpectedly lost primary lease")}class fe{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)}),(t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)}))}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Le(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new fe(((r,o)=>{this.nextCallback=c=>{this.wrapSuccess(e,c).next(r,o)},this.catchCallback=c=>{this.wrapFailure(t,c).next(r,o)}}))}toPromise(){return new Promise(((e,t)=>{this.next(e,t)}))}wrapUserFunction(e){try{const t=e();return t instanceof fe?t:fe.resolve(t)}catch(t){return fe.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction((()=>e(t))):fe.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction((()=>e(t))):fe.reject(t)}static resolve(e){return new fe(((t,r)=>{t(e)}))}static reject(e){return new fe(((t,r)=>{r(e)}))}static waitFor(e){return new fe(((t,r)=>{let o=0,c=0,h=!1;e.forEach((p=>{++o,p.next((()=>{++c,h&&c===o&&t()}),(g=>r(g)))})),h=!0,c===o&&t()}))}static or(e){let t=fe.resolve(!1);for(const r of e)t=t.next((o=>o?fe.resolve(o):r()));return t}static forEach(e,t){const r=[];return e.forEach(((o,c)=>{r.push(t.call(this,o,c))})),this.waitFor(r)}static mapArray(e,t){return new fe(((r,o)=>{const c=e.length,h=new Array(c);let p=0;for(let g=0;g<c;g++){const _=g;t(e[_]).next((T=>{h[_]=T,++p,p===c&&r(h)}),(T=>o(T)))}}))}static doWhile(e,t){return new fe(((r,o)=>{const c=()=>{e()===!0?t().next((()=>{c()}),o):r()};c()}))}}function zx(i){const e=i.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function _l(i){return i.name==="IndexedDbTransactionError"}class Pd{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=r=>this.ae(r),this.ue=r=>t.writeSequenceNumber(r))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}Pd.ce=-1;const Ag=-1;function Vd(i){return i==null}function md(i){return i===0&&1/i==-1/0}function qx(i){return typeof i=="number"&&Number.isInteger(i)&&!md(i)&&i<=Number.MAX_SAFE_INTEGER&&i>=Number.MIN_SAFE_INTEGER}const UT="";function Hx(i){let e="";for(let t=0;t<i.length;t++)e.length>0&&(e=Mb(e)),e=Fx(i.get(t),e);return Mb(e)}function Fx(i,e){let t=e;const r=i.length;for(let o=0;o<r;o++){const c=i.charAt(o);switch(c){case"\0":t+="";break;case UT:t+="";break;default:t+=c}}return t}function Mb(i){return i+UT+""}function Ob(i){let e=0;for(const t in i)Object.prototype.hasOwnProperty.call(i,t)&&e++;return e}function Jr(i,e){for(const t in i)Object.prototype.hasOwnProperty.call(i,t)&&e(t,i[t])}function zT(i){for(const e in i)if(Object.prototype.hasOwnProperty.call(i,e))return!1;return!0}class Ot{constructor(e,t){this.comparator=e,this.root=t||En.EMPTY}insert(e,t){return new Ot(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,En.BLACK,null,null))}remove(e){return new Ot(this.comparator,this.root.remove(e,this.comparator).copy(null,null,En.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(r===0)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const o=this.comparator(e,r.key);if(o===0)return t+r.left.size;o<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((t,r)=>(e(t,r),!1)))}toString(){const e=[];return this.inorderTraversal(((t,r)=>(e.push(`${t}:${r}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Uh(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Uh(this.root,e,this.comparator,!1)}getReverseIterator(){return new Uh(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Uh(this.root,e,this.comparator,!0)}}class Uh{constructor(e,t,r,o){this.isReverse=o,this.nodeStack=[];let c=1;for(;!e.isEmpty();)if(c=t?r(e.key,t):1,t&&o&&(c*=-1),c<0)e=this.isReverse?e.left:e.right;else{if(c===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class En{constructor(e,t,r,o,c){this.key=e,this.value=t,this.color=r??En.RED,this.left=o??En.EMPTY,this.right=c??En.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,o,c){return new En(e??this.key,t??this.value,r??this.color,o??this.left,c??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let o=this;const c=r(e,o.key);return o=c<0?o.copy(null,null,null,o.left.insert(e,t,r),null):c===0?o.copy(null,t,null,null,null):o.copy(null,null,null,null,o.right.insert(e,t,r)),o.fixUp()}removeMin(){if(this.left.isEmpty())return En.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,o=this;if(t(e,o.key)<0)o.left.isEmpty()||o.left.isRed()||o.left.left.isRed()||(o=o.moveRedLeft()),o=o.copy(null,null,null,o.left.remove(e,t),null);else{if(o.left.isRed()&&(o=o.rotateRight()),o.right.isEmpty()||o.right.isRed()||o.right.left.isRed()||(o=o.moveRedRight()),t(e,o.key)===0){if(o.right.isEmpty())return En.EMPTY;r=o.right.min(),o=o.copy(r.key,r.value,null,null,o.right.removeMin())}o=o.copy(null,null,null,null,o.right.remove(e,t))}return o.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,En.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,En.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Le(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Le(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw Le(27949);return e+(this.isRed()?0:1)}}En.EMPTY=null,En.RED=!0,En.BLACK=!1;En.EMPTY=new class{constructor(){this.size=0}get key(){throw Le(57766)}get value(){throw Le(16141)}get color(){throw Le(16727)}get left(){throw Le(29726)}get right(){throw Le(36894)}copy(e,t,r,o,c){return this}insert(e,t,r){return new En(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class hn{constructor(e){this.comparator=e,this.data=new Ot(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((t,r)=>(e(t),!1)))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const o=r.getNext();if(this.comparator(o.key,e[1])>=0)return;t(o.key)}}forEachWhile(e,t){let r;for(r=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new kb(this.data.getIterator())}getIteratorFrom(e){return new kb(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach((r=>{t=t.add(r)})),t}isEqual(e){if(!(e instanceof hn)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const o=t.getNext().key,c=r.getNext().key;if(this.comparator(o,c)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((t=>{e.push(t)})),e}toString(){const e=[];return this.forEach((t=>e.push(t))),"SortedSet("+e.toString()+")"}copy(e){const t=new hn(this.comparator);return t.data=e,t}}class kb{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}class ti{constructor(e){this.fields=e,e.sort(Sn.comparator)}static empty(){return new ti([])}unionWith(e){let t=new hn(Sn.comparator);for(const r of this.fields)t=t.add(r);for(const r of e)t=t.add(r);return new ti(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return al(this.fields,e.fields,((t,r)=>t.isEqual(r)))}}class qT extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class An{constructor(e){this.binaryString=e}static fromBase64String(e){const t=(function(o){try{return atob(o)}catch(c){throw typeof DOMException<"u"&&c instanceof DOMException?new qT("Invalid base64 string: "+c):c}})(e);return new An(t)}static fromUint8Array(e){const t=(function(o){let c="";for(let h=0;h<o.length;++h)c+=String.fromCharCode(o[h]);return c})(e);return new An(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(t){return btoa(t)})(this.binaryString)}toUint8Array(){return(function(t){const r=new Uint8Array(t.length);for(let o=0;o<t.length;o++)r[o]=t.charCodeAt(o);return r})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return et(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}An.EMPTY_BYTE_STRING=new An("");const $x=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Gr(i){if(ft(!!i,39018),typeof i=="string"){let e=0;const t=$x.exec(i);if(ft(!!t,46558,{timestamp:i}),t[1]){let o=t[1];o=(o+"000000000").substr(0,9),e=Number(o)}const r=new Date(i);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Gt(i.seconds),nanos:Gt(i.nanos)}}function Gt(i){return typeof i=="number"?i:typeof i=="string"?Number(i):0}function Yr(i){return typeof i=="string"?An.fromBase64String(i):An.fromUint8Array(i)}const HT="server_timestamp",FT="__type__",$T="__previous_value__",GT="__local_write_time__";function Ig(i){return(i?.mapValue?.fields||{})[FT]?.stringValue===HT}function Bd(i){const e=i.mapValue.fields[$T];return Ig(e)?Bd(e):e}function Fc(i){const e=Gr(i.mapValue.fields[GT].timestampValue);return new xt(e.seconds,e.nanos)}class Gx{constructor(e,t,r,o,c,h,p,g,_,T){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=o,this.ssl=c,this.forceLongPolling=h,this.autoDetectLongPolling=p,this.longPollingOptions=g,this.useFetchStreams=_,this.isUsingEmulator=T}}const pd="(default)";class $c{constructor(e,t){this.projectId=e,this.database=t||pd}static empty(){return new $c("","")}get isDefaultDatabase(){return this.database===pd}isEqual(e){return e instanceof $c&&e.projectId===this.projectId&&e.database===this.database}}const YT="__type__",Yx="__max__",zh={mapValue:{}},QT="__vector__",gd="value";function Qr(i){return"nullValue"in i?0:"booleanValue"in i?1:"integerValue"in i||"doubleValue"in i?2:"timestampValue"in i?3:"stringValue"in i?5:"bytesValue"in i?6:"referenceValue"in i?7:"geoPointValue"in i?8:"arrayValue"in i?9:"mapValue"in i?Ig(i)?4:Kx(i)?9007199254740991:Qx(i)?10:11:Le(28295,{value:i})}function vs(i,e){if(i===e)return!0;const t=Qr(i);if(t!==Qr(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return i.booleanValue===e.booleanValue;case 4:return Fc(i).isEqual(Fc(e));case 3:return(function(o,c){if(typeof o.timestampValue=="string"&&typeof c.timestampValue=="string"&&o.timestampValue.length===c.timestampValue.length)return o.timestampValue===c.timestampValue;const h=Gr(o.timestampValue),p=Gr(c.timestampValue);return h.seconds===p.seconds&&h.nanos===p.nanos})(i,e);case 5:return i.stringValue===e.stringValue;case 6:return(function(o,c){return Yr(o.bytesValue).isEqual(Yr(c.bytesValue))})(i,e);case 7:return i.referenceValue===e.referenceValue;case 8:return(function(o,c){return Gt(o.geoPointValue.latitude)===Gt(c.geoPointValue.latitude)&&Gt(o.geoPointValue.longitude)===Gt(c.geoPointValue.longitude)})(i,e);case 2:return(function(o,c){if("integerValue"in o&&"integerValue"in c)return Gt(o.integerValue)===Gt(c.integerValue);if("doubleValue"in o&&"doubleValue"in c){const h=Gt(o.doubleValue),p=Gt(c.doubleValue);return h===p?md(h)===md(p):isNaN(h)&&isNaN(p)}return!1})(i,e);case 9:return al(i.arrayValue.values||[],e.arrayValue.values||[],vs);case 10:case 11:return(function(o,c){const h=o.mapValue.fields||{},p=c.mapValue.fields||{};if(Ob(h)!==Ob(p))return!1;for(const g in h)if(h.hasOwnProperty(g)&&(p[g]===void 0||!vs(h[g],p[g])))return!1;return!0})(i,e);default:return Le(52216,{left:i})}}function Gc(i,e){return(i.values||[]).find((t=>vs(t,e)))!==void 0}function ol(i,e){if(i===e)return 0;const t=Qr(i),r=Qr(e);if(t!==r)return et(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return et(i.booleanValue,e.booleanValue);case 2:return(function(c,h){const p=Gt(c.integerValue||c.doubleValue),g=Gt(h.integerValue||h.doubleValue);return p<g?-1:p>g?1:p===g?0:isNaN(p)?isNaN(g)?0:-1:1})(i,e);case 3:return jb(i.timestampValue,e.timestampValue);case 4:return jb(Fc(i),Fc(e));case 5:return Bp(i.stringValue,e.stringValue);case 6:return(function(c,h){const p=Yr(c),g=Yr(h);return p.compareTo(g)})(i.bytesValue,e.bytesValue);case 7:return(function(c,h){const p=c.split("/"),g=h.split("/");for(let _=0;_<p.length&&_<g.length;_++){const T=et(p[_],g[_]);if(T!==0)return T}return et(p.length,g.length)})(i.referenceValue,e.referenceValue);case 8:return(function(c,h){const p=et(Gt(c.latitude),Gt(h.latitude));return p!==0?p:et(Gt(c.longitude),Gt(h.longitude))})(i.geoPointValue,e.geoPointValue);case 9:return Lb(i.arrayValue,e.arrayValue);case 10:return(function(c,h){const p=c.fields||{},g=h.fields||{},_=p[gd]?.arrayValue,T=g[gd]?.arrayValue,E=et(_?.values?.length||0,T?.values?.length||0);return E!==0?E:Lb(_,T)})(i.mapValue,e.mapValue);case 11:return(function(c,h){if(c===zh.mapValue&&h===zh.mapValue)return 0;if(c===zh.mapValue)return 1;if(h===zh.mapValue)return-1;const p=c.fields||{},g=Object.keys(p),_=h.fields||{},T=Object.keys(_);g.sort(),T.sort();for(let E=0;E<g.length&&E<T.length;++E){const I=Bp(g[E],T[E]);if(I!==0)return I;const O=ol(p[g[E]],_[T[E]]);if(O!==0)return O}return et(g.length,T.length)})(i.mapValue,e.mapValue);default:throw Le(23264,{he:t})}}function jb(i,e){if(typeof i=="string"&&typeof e=="string"&&i.length===e.length)return et(i,e);const t=Gr(i),r=Gr(e),o=et(t.seconds,r.seconds);return o!==0?o:et(t.nanos,r.nanos)}function Lb(i,e){const t=i.values||[],r=e.values||[];for(let o=0;o<t.length&&o<r.length;++o){const c=ol(t[o],r[o]);if(c)return c}return et(t.length,r.length)}function ll(i){return Up(i)}function Up(i){return"nullValue"in i?"null":"booleanValue"in i?""+i.booleanValue:"integerValue"in i?""+i.integerValue:"doubleValue"in i?""+i.doubleValue:"timestampValue"in i?(function(t){const r=Gr(t);return`time(${r.seconds},${r.nanos})`})(i.timestampValue):"stringValue"in i?i.stringValue:"bytesValue"in i?(function(t){return Yr(t).toBase64()})(i.bytesValue):"referenceValue"in i?(function(t){return Me.fromName(t).toString()})(i.referenceValue):"geoPointValue"in i?(function(t){return`geo(${t.latitude},${t.longitude})`})(i.geoPointValue):"arrayValue"in i?(function(t){let r="[",o=!0;for(const c of t.values||[])o?o=!1:r+=",",r+=Up(c);return r+"]"})(i.arrayValue):"mapValue"in i?(function(t){const r=Object.keys(t.fields||{}).sort();let o="{",c=!0;for(const h of r)c?c=!1:o+=",",o+=`${h}:${Up(t.fields[h])}`;return o+"}"})(i.mapValue):Le(61005,{value:i})}function Zh(i){switch(Qr(i)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Bd(i);return e?16+Zh(e):16;case 5:return 2*i.stringValue.length;case 6:return Yr(i.bytesValue).approximateByteSize();case 7:return i.referenceValue.length;case 9:return(function(r){return(r.values||[]).reduce(((o,c)=>o+Zh(c)),0)})(i.arrayValue);case 10:case 11:return(function(r){let o=0;return Jr(r.fields,((c,h)=>{o+=c.length+Zh(h)})),o})(i.mapValue);default:throw Le(13486,{value:i})}}function Pb(i,e){return{referenceValue:`projects/${i.projectId}/databases/${i.database}/documents/${e.path.canonicalString()}`}}function zp(i){return!!i&&"integerValue"in i}function Cg(i){return!!i&&"arrayValue"in i}function Vb(i){return!!i&&"nullValue"in i}function Bb(i){return!!i&&"doubleValue"in i&&isNaN(Number(i.doubleValue))}function ed(i){return!!i&&"mapValue"in i}function Qx(i){return(i?.mapValue?.fields||{})[YT]?.stringValue===QT}function Oc(i){if(i.geoPointValue)return{geoPointValue:{...i.geoPointValue}};if(i.timestampValue&&typeof i.timestampValue=="object")return{timestampValue:{...i.timestampValue}};if(i.mapValue){const e={mapValue:{fields:{}}};return Jr(i.mapValue.fields,((t,r)=>e.mapValue.fields[t]=Oc(r))),e}if(i.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(i.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Oc(i.arrayValue.values[t]);return e}return{...i}}function Kx(i){return(((i.mapValue||{}).fields||{}).__type__||{}).stringValue===Yx}class $n{constructor(e){this.value=e}static empty(){return new $n({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!ed(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Oc(t)}setAll(e){let t=Sn.emptyPath(),r={},o=[];e.forEach(((h,p)=>{if(!t.isImmediateParentOf(p)){const g=this.getFieldsMap(t);this.applyChanges(g,r,o),r={},o=[],t=p.popLast()}h?r[p.lastSegment()]=Oc(h):o.push(p.lastSegment())}));const c=this.getFieldsMap(t);this.applyChanges(c,r,o)}delete(e){const t=this.field(e.popLast());ed(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return vs(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let o=t.mapValue.fields[e.get(r)];ed(o)&&o.mapValue.fields||(o={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=o),t=o}return t.mapValue.fields}applyChanges(e,t,r){Jr(t,((o,c)=>e[o]=c));for(const o of r)delete e[o]}clone(){return new $n(Oc(this.value))}}function KT(i){const e=[];return Jr(i.fields,((t,r)=>{const o=new Sn([t]);if(ed(r)){const c=KT(r.mapValue).fields;if(c.length===0)e.push(o);else for(const h of c)e.push(o.child(h))}else e.push(o)})),new ti(e)}class xn{constructor(e,t,r,o,c,h,p){this.key=e,this.documentType=t,this.version=r,this.readTime=o,this.createTime=c,this.data=h,this.documentState=p}static newInvalidDocument(e){return new xn(e,0,Ve.min(),Ve.min(),Ve.min(),$n.empty(),0)}static newFoundDocument(e,t,r,o){return new xn(e,1,t,Ve.min(),r,o,0)}static newNoDocument(e,t){return new xn(e,2,t,Ve.min(),Ve.min(),$n.empty(),0)}static newUnknownDocument(e,t){return new xn(e,3,t,Ve.min(),Ve.min(),$n.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Ve.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=$n.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=$n.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Ve.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof xn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new xn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class _d{constructor(e,t){this.position=e,this.inclusive=t}}function Ub(i,e,t){let r=0;for(let o=0;o<i.position.length;o++){const c=e[o],h=i.position[o];if(c.field.isKeyField()?r=Me.comparator(Me.fromName(h.referenceValue),t.key):r=ol(h,t.data.field(c.field)),c.dir==="desc"&&(r*=-1),r!==0)break}return r}function zb(i,e){if(i===null)return e===null;if(e===null||i.inclusive!==e.inclusive||i.position.length!==e.position.length)return!1;for(let t=0;t<i.position.length;t++)if(!vs(i.position[t],e.position[t]))return!1;return!0}class Yc{constructor(e,t="asc"){this.field=e,this.dir=t}}function Xx(i,e){return i.dir===e.dir&&i.field.isEqual(e.field)}class XT{}class on extends XT{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,r):new Jx(e,t,r):t==="array-contains"?new tR(e,r):t==="in"?new nR(e,r):t==="not-in"?new iR(e,r):t==="array-contains-any"?new sR(e,r):new on(e,t,r)}static createKeyFieldInFilter(e,t,r){return t==="in"?new Zx(e,r):new eR(e,r)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(ol(t,this.value)):t!==null&&Qr(this.value)===Qr(t)&&this.matchesComparison(ol(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Le(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class ji extends XT{constructor(e,t){super(),this.filters=e,this.op=t,this.Pe=null}static create(e,t){return new ji(e,t)}matches(e){return WT(this)?this.filters.find((t=>!t.matches(e)))===void 0:this.filters.find((t=>t.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,t)=>e.concat(t.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function WT(i){return i.op==="and"}function JT(i){return Wx(i)&&WT(i)}function Wx(i){for(const e of i.filters)if(e instanceof ji)return!1;return!0}function qp(i){if(i instanceof on)return i.field.canonicalString()+i.op.toString()+ll(i.value);if(JT(i))return i.filters.map((e=>qp(e))).join(",");{const e=i.filters.map((t=>qp(t))).join(",");return`${i.op}(${e})`}}function ZT(i,e){return i instanceof on?(function(r,o){return o instanceof on&&r.op===o.op&&r.field.isEqual(o.field)&&vs(r.value,o.value)})(i,e):i instanceof ji?(function(r,o){return o instanceof ji&&r.op===o.op&&r.filters.length===o.filters.length?r.filters.reduce(((c,h,p)=>c&&ZT(h,o.filters[p])),!0):!1})(i,e):void Le(19439)}function ew(i){return i instanceof on?(function(t){return`${t.field.canonicalString()} ${t.op} ${ll(t.value)}`})(i):i instanceof ji?(function(t){return t.op.toString()+" {"+t.getFilters().map(ew).join(" ,")+"}"})(i):"Filter"}class Jx extends on{constructor(e,t,r){super(e,t,r),this.key=Me.fromName(r.referenceValue)}matches(e){const t=Me.comparator(e.key,this.key);return this.matchesComparison(t)}}class Zx extends on{constructor(e,t){super(e,"in",t),this.keys=tw("in",t)}matches(e){return this.keys.some((t=>t.isEqual(e.key)))}}class eR extends on{constructor(e,t){super(e,"not-in",t),this.keys=tw("not-in",t)}matches(e){return!this.keys.some((t=>t.isEqual(e.key)))}}function tw(i,e){return(e.arrayValue?.values||[]).map((t=>Me.fromName(t.referenceValue)))}class tR extends on{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return Cg(t)&&Gc(t.arrayValue,this.value)}}class nR extends on{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&Gc(this.value.arrayValue,t)}}class iR extends on{constructor(e,t){super(e,"not-in",t)}matches(e){if(Gc(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!Gc(this.value.arrayValue,t)}}class sR extends on{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!Cg(t)||!t.arrayValue.values)&&t.arrayValue.values.some((r=>Gc(this.value.arrayValue,r)))}}class rR{constructor(e,t=null,r=[],o=[],c=null,h=null,p=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=o,this.limit=c,this.startAt=h,this.endAt=p,this.Te=null}}function qb(i,e=null,t=[],r=[],o=null,c=null,h=null){return new rR(i,e,t,r,o,c,h)}function Ng(i){const e=Ue(i);if(e.Te===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map((r=>qp(r))).join(","),t+="|ob:",t+=e.orderBy.map((r=>(function(c){return c.field.canonicalString()+c.dir})(r))).join(","),Vd(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((r=>ll(r))).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((r=>ll(r))).join(",")),e.Te=t}return e.Te}function xg(i,e){if(i.limit!==e.limit||i.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<i.orderBy.length;t++)if(!Xx(i.orderBy[t],e.orderBy[t]))return!1;if(i.filters.length!==e.filters.length)return!1;for(let t=0;t<i.filters.length;t++)if(!ZT(i.filters[t],e.filters[t]))return!1;return i.collectionGroup===e.collectionGroup&&!!i.path.isEqual(e.path)&&!!zb(i.startAt,e.startAt)&&zb(i.endAt,e.endAt)}function Hp(i){return Me.isDocumentKey(i.path)&&i.collectionGroup===null&&i.filters.length===0}class yl{constructor(e,t=null,r=[],o=[],c=null,h="F",p=null,g=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=o,this.limit=c,this.limitType=h,this.startAt=p,this.endAt=g,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function aR(i,e,t,r,o,c,h,p){return new yl(i,e,t,r,o,c,h,p)}function Rg(i){return new yl(i)}function Hb(i){return i.filters.length===0&&i.limit===null&&i.startAt==null&&i.endAt==null&&(i.explicitOrderBy.length===0||i.explicitOrderBy.length===1&&i.explicitOrderBy[0].field.isKeyField())}function nw(i){return i.collectionGroup!==null}function kc(i){const e=Ue(i);if(e.Ie===null){e.Ie=[];const t=new Set;for(const c of e.explicitOrderBy)e.Ie.push(c),t.add(c.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(h){let p=new hn(Sn.comparator);return h.filters.forEach((g=>{g.getFlattenedFilters().forEach((_=>{_.isInequality()&&(p=p.add(_.field))}))})),p})(e).forEach((c=>{t.has(c.canonicalString())||c.isKeyField()||e.Ie.push(new Yc(c,r))})),t.has(Sn.keyField().canonicalString())||e.Ie.push(new Yc(Sn.keyField(),r))}return e.Ie}function ms(i){const e=Ue(i);return e.Ee||(e.Ee=oR(e,kc(i))),e.Ee}function oR(i,e){if(i.limitType==="F")return qb(i.path,i.collectionGroup,e,i.filters,i.limit,i.startAt,i.endAt);{e=e.map((o=>{const c=o.dir==="desc"?"asc":"desc";return new Yc(o.field,c)}));const t=i.endAt?new _d(i.endAt.position,i.endAt.inclusive):null,r=i.startAt?new _d(i.startAt.position,i.startAt.inclusive):null;return qb(i.path,i.collectionGroup,e,i.filters,i.limit,t,r)}}function Fp(i,e){const t=i.filters.concat([e]);return new yl(i.path,i.collectionGroup,i.explicitOrderBy.slice(),t,i.limit,i.limitType,i.startAt,i.endAt)}function $p(i,e,t){return new yl(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),e,t,i.startAt,i.endAt)}function Ud(i,e){return xg(ms(i),ms(e))&&i.limitType===e.limitType}function iw(i){return`${Ng(ms(i))}|lt:${i.limitType}`}function Go(i){return`Query(target=${(function(t){let r=t.path.canonicalString();return t.collectionGroup!==null&&(r+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(r+=`, filters: [${t.filters.map((o=>ew(o))).join(", ")}]`),Vd(t.limit)||(r+=", limit: "+t.limit),t.orderBy.length>0&&(r+=`, orderBy: [${t.orderBy.map((o=>(function(h){return`${h.field.canonicalString()} (${h.dir})`})(o))).join(", ")}]`),t.startAt&&(r+=", startAt: ",r+=t.startAt.inclusive?"b:":"a:",r+=t.startAt.position.map((o=>ll(o))).join(",")),t.endAt&&(r+=", endAt: ",r+=t.endAt.inclusive?"a:":"b:",r+=t.endAt.position.map((o=>ll(o))).join(",")),`Target(${r})`})(ms(i))}; limitType=${i.limitType})`}function zd(i,e){return e.isFoundDocument()&&(function(r,o){const c=o.key.path;return r.collectionGroup!==null?o.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(c):Me.isDocumentKey(r.path)?r.path.isEqual(c):r.path.isImmediateParentOf(c)})(i,e)&&(function(r,o){for(const c of kc(r))if(!c.field.isKeyField()&&o.data.field(c.field)===null)return!1;return!0})(i,e)&&(function(r,o){for(const c of r.filters)if(!c.matches(o))return!1;return!0})(i,e)&&(function(r,o){return!(r.startAt&&!(function(h,p,g){const _=Ub(h,p,g);return h.inclusive?_<=0:_<0})(r.startAt,kc(r),o)||r.endAt&&!(function(h,p,g){const _=Ub(h,p,g);return h.inclusive?_>=0:_>0})(r.endAt,kc(r),o))})(i,e)}function lR(i){return i.collectionGroup||(i.path.length%2==1?i.path.lastSegment():i.path.get(i.path.length-2))}function sw(i){return(e,t)=>{let r=!1;for(const o of kc(i)){const c=cR(o,e,t);if(c!==0)return c;r=r||o.field.isKeyField()}return 0}}function cR(i,e,t){const r=i.field.isKeyField()?Me.comparator(e.key,t.key):(function(c,h,p){const g=h.data.field(c),_=p.data.field(c);return g!==null&&_!==null?ol(g,_):Le(42886)})(i.field,e,t);switch(i.dir){case"asc":return r;case"desc":return-1*r;default:return Le(19790,{direction:i.dir})}}class Qa{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(r!==void 0){for(const[o,c]of r)if(this.equalsFn(o,e))return c}}has(e){return this.get(e)!==void 0}set(e,t){const r=this.mapKeyFn(e),o=this.inner[r];if(o===void 0)return this.inner[r]=[[e,t]],void this.innerSize++;for(let c=0;c<o.length;c++)if(this.equalsFn(o[c][0],e))return void(o[c]=[e,t]);o.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(r===void 0)return!1;for(let o=0;o<r.length;o++)if(this.equalsFn(r[o][0],e))return r.length===1?delete this.inner[t]:r.splice(o,1),this.innerSize--,!0;return!1}forEach(e){Jr(this.inner,((t,r)=>{for(const[o,c]of r)e(o,c)}))}isEmpty(){return zT(this.inner)}size(){return this.innerSize}}const uR=new Ot(Me.comparator);function Ks(){return uR}const rw=new Ot(Me.comparator);function Nc(...i){let e=rw;for(const t of i)e=e.insert(t.key,t);return e}function aw(i){let e=rw;return i.forEach(((t,r)=>e=e.insert(t,r.overlayedDocument))),e}function La(){return jc()}function ow(){return jc()}function jc(){return new Qa((i=>i.toString()),((i,e)=>i.isEqual(e)))}const hR=new Ot(Me.comparator),dR=new hn(Me.comparator);function tt(...i){let e=dR;for(const t of i)e=e.add(t);return e}const fR=new hn(et);function mR(){return fR}function Dg(i,e){if(i.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:md(e)?"-0":e}}function lw(i){return{integerValue:""+i}}function pR(i,e){return qx(e)?lw(e):Dg(i,e)}class qd{constructor(){this._=void 0}}function gR(i,e,t){return i instanceof yd?(function(o,c){const h={fields:{[FT]:{stringValue:HT},[GT]:{timestampValue:{seconds:o.seconds,nanos:o.nanoseconds}}}};return c&&Ig(c)&&(c=Bd(c)),c&&(h.fields[$T]=c),{mapValue:h}})(t,e):i instanceof cl?uw(i,e):i instanceof Qc?hw(i,e):(function(o,c){const h=cw(o,c),p=Fb(h)+Fb(o.Ae);return zp(h)&&zp(o.Ae)?lw(p):Dg(o.serializer,p)})(i,e)}function _R(i,e,t){return i instanceof cl?uw(i,e):i instanceof Qc?hw(i,e):t}function cw(i,e){return i instanceof vd?(function(r){return zp(r)||(function(c){return!!c&&"doubleValue"in c})(r)})(e)?e:{integerValue:0}:null}class yd extends qd{}class cl extends qd{constructor(e){super(),this.elements=e}}function uw(i,e){const t=dw(e);for(const r of i.elements)t.some((o=>vs(o,r)))||t.push(r);return{arrayValue:{values:t}}}class Qc extends qd{constructor(e){super(),this.elements=e}}function hw(i,e){let t=dw(e);for(const r of i.elements)t=t.filter((o=>!vs(o,r)));return{arrayValue:{values:t}}}class vd extends qd{constructor(e,t){super(),this.serializer=e,this.Ae=t}}function Fb(i){return Gt(i.integerValue||i.doubleValue)}function dw(i){return Cg(i)&&i.arrayValue.values?i.arrayValue.values.slice():[]}class yR{constructor(e,t){this.field=e,this.transform=t}}function vR(i,e){return i.field.isEqual(e.field)&&(function(r,o){return r instanceof cl&&o instanceof cl||r instanceof Qc&&o instanceof Qc?al(r.elements,o.elements,vs):r instanceof vd&&o instanceof vd?vs(r.Ae,o.Ae):r instanceof yd&&o instanceof yd})(i.transform,e.transform)}class bR{constructor(e,t){this.version=e,this.transformResults=t}}class vi{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new vi}static exists(e){return new vi(void 0,e)}static updateTime(e){return new vi(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function td(i,e){return i.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(i.updateTime):i.exists===void 0||i.exists===e.isFoundDocument()}class Hd{}function fw(i,e){if(!i.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return i.isNoDocument()?new Mg(i.key,vi.none()):new nu(i.key,i.data,vi.none());{const t=i.data,r=$n.empty();let o=new hn(Sn.comparator);for(let c of e.fields)if(!o.has(c)){let h=t.field(c);h===null&&c.length>1&&(c=c.popLast(),h=t.field(c)),h===null?r.delete(c):r.set(c,h),o=o.add(c)}return new Zr(i.key,r,new ti(o.toArray()),vi.none())}}function TR(i,e,t){i instanceof nu?(function(o,c,h){const p=o.value.clone(),g=Gb(o.fieldTransforms,c,h.transformResults);p.setAll(g),c.convertToFoundDocument(h.version,p).setHasCommittedMutations()})(i,e,t):i instanceof Zr?(function(o,c,h){if(!td(o.precondition,c))return void c.convertToUnknownDocument(h.version);const p=Gb(o.fieldTransforms,c,h.transformResults),g=c.data;g.setAll(mw(o)),g.setAll(p),c.convertToFoundDocument(h.version,g).setHasCommittedMutations()})(i,e,t):(function(o,c,h){c.convertToNoDocument(h.version).setHasCommittedMutations()})(0,e,t)}function Lc(i,e,t,r){return i instanceof nu?(function(c,h,p,g){if(!td(c.precondition,h))return p;const _=c.value.clone(),T=Yb(c.fieldTransforms,g,h);return _.setAll(T),h.convertToFoundDocument(h.version,_).setHasLocalMutations(),null})(i,e,t,r):i instanceof Zr?(function(c,h,p,g){if(!td(c.precondition,h))return p;const _=Yb(c.fieldTransforms,g,h),T=h.data;return T.setAll(mw(c)),T.setAll(_),h.convertToFoundDocument(h.version,T).setHasLocalMutations(),p===null?null:p.unionWith(c.fieldMask.fields).unionWith(c.fieldTransforms.map((E=>E.field)))})(i,e,t,r):(function(c,h,p){return td(c.precondition,h)?(h.convertToNoDocument(h.version).setHasLocalMutations(),null):p})(i,e,t)}function wR(i,e){let t=null;for(const r of i.fieldTransforms){const o=e.data.field(r.field),c=cw(r.transform,o||null);c!=null&&(t===null&&(t=$n.empty()),t.set(r.field,c))}return t||null}function $b(i,e){return i.type===e.type&&!!i.key.isEqual(e.key)&&!!i.precondition.isEqual(e.precondition)&&!!(function(r,o){return r===void 0&&o===void 0||!(!r||!o)&&al(r,o,((c,h)=>vR(c,h)))})(i.fieldTransforms,e.fieldTransforms)&&(i.type===0?i.value.isEqual(e.value):i.type!==1||i.data.isEqual(e.data)&&i.fieldMask.isEqual(e.fieldMask))}class nu extends Hd{constructor(e,t,r,o=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=o,this.type=0}getFieldMask(){return null}}class Zr extends Hd{constructor(e,t,r,o,c=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=o,this.fieldTransforms=c,this.type=1}getFieldMask(){return this.fieldMask}}function mw(i){const e=new Map;return i.fieldMask.fields.forEach((t=>{if(!t.isEmpty()){const r=i.data.field(t);e.set(t,r)}})),e}function Gb(i,e,t){const r=new Map;ft(i.length===t.length,32656,{Re:t.length,Ve:i.length});for(let o=0;o<t.length;o++){const c=i[o],h=c.transform,p=e.data.field(c.field);r.set(c.field,_R(h,p,t[o]))}return r}function Yb(i,e,t){const r=new Map;for(const o of i){const c=o.transform,h=t.data.field(o.field);r.set(o.field,gR(c,h,e))}return r}class Mg extends Hd{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class ER extends Hd{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class SR{constructor(e,t,r,o){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=o}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let o=0;o<this.mutations.length;o++){const c=this.mutations[o];c.key.isEqual(e.key)&&TR(c,e,r[o])}}applyToLocalView(e,t){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(t=Lc(r,e,t,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(t=Lc(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const r=ow();return this.mutations.forEach((o=>{const c=e.get(o.key),h=c.overlayedDocument;let p=this.applyToLocalView(h,c.mutatedFields);p=t.has(o.key)?null:p;const g=fw(h,p);g!==null&&r.set(o.key,g),h.isValidDocument()||h.convertToNoDocument(Ve.min())})),r}keys(){return this.mutations.reduce(((e,t)=>e.add(t.key)),tt())}isEqual(e){return this.batchId===e.batchId&&al(this.mutations,e.mutations,((t,r)=>$b(t,r)))&&al(this.baseMutations,e.baseMutations,((t,r)=>$b(t,r)))}}class Og{constructor(e,t,r,o){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=o}static from(e,t,r){ft(e.mutations.length===r.length,58842,{me:e.mutations.length,fe:r.length});let o=(function(){return hR})();const c=e.mutations;for(let h=0;h<c.length;h++)o=o.insert(c[h].key,r[h].version);return new Og(e,t,r,o)}}class AR{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}class IR{constructor(e,t){this.count=e,this.unchangedNames=t}}var an,st;function CR(i){switch(i){case he.OK:return Le(64938);case he.CANCELLED:case he.UNKNOWN:case he.DEADLINE_EXCEEDED:case he.RESOURCE_EXHAUSTED:case he.INTERNAL:case he.UNAVAILABLE:case he.UNAUTHENTICATED:return!1;case he.INVALID_ARGUMENT:case he.NOT_FOUND:case he.ALREADY_EXISTS:case he.PERMISSION_DENIED:case he.FAILED_PRECONDITION:case he.ABORTED:case he.OUT_OF_RANGE:case he.UNIMPLEMENTED:case he.DATA_LOSS:return!0;default:return Le(15467,{code:i})}}function pw(i){if(i===void 0)return Qs("GRPC error has no .code"),he.UNKNOWN;switch(i){case an.OK:return he.OK;case an.CANCELLED:return he.CANCELLED;case an.UNKNOWN:return he.UNKNOWN;case an.DEADLINE_EXCEEDED:return he.DEADLINE_EXCEEDED;case an.RESOURCE_EXHAUSTED:return he.RESOURCE_EXHAUSTED;case an.INTERNAL:return he.INTERNAL;case an.UNAVAILABLE:return he.UNAVAILABLE;case an.UNAUTHENTICATED:return he.UNAUTHENTICATED;case an.INVALID_ARGUMENT:return he.INVALID_ARGUMENT;case an.NOT_FOUND:return he.NOT_FOUND;case an.ALREADY_EXISTS:return he.ALREADY_EXISTS;case an.PERMISSION_DENIED:return he.PERMISSION_DENIED;case an.FAILED_PRECONDITION:return he.FAILED_PRECONDITION;case an.ABORTED:return he.ABORTED;case an.OUT_OF_RANGE:return he.OUT_OF_RANGE;case an.UNIMPLEMENTED:return he.UNIMPLEMENTED;case an.DATA_LOSS:return he.DATA_LOSS;default:return Le(39323,{code:i})}}(st=an||(an={}))[st.OK=0]="OK",st[st.CANCELLED=1]="CANCELLED",st[st.UNKNOWN=2]="UNKNOWN",st[st.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",st[st.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",st[st.NOT_FOUND=5]="NOT_FOUND",st[st.ALREADY_EXISTS=6]="ALREADY_EXISTS",st[st.PERMISSION_DENIED=7]="PERMISSION_DENIED",st[st.UNAUTHENTICATED=16]="UNAUTHENTICATED",st[st.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",st[st.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",st[st.ABORTED=10]="ABORTED",st[st.OUT_OF_RANGE=11]="OUT_OF_RANGE",st[st.UNIMPLEMENTED=12]="UNIMPLEMENTED",st[st.INTERNAL=13]="INTERNAL",st[st.UNAVAILABLE=14]="UNAVAILABLE",st[st.DATA_LOSS=15]="DATA_LOSS";function NR(){return new TextEncoder}const xR=new zr([4294967295,4294967295],0);function Qb(i){const e=NR().encode(i),t=new RT;return t.update(e),new Uint8Array(t.digest())}function Kb(i){const e=new DataView(i.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),o=e.getUint32(8,!0),c=e.getUint32(12,!0);return[new zr([t,r],0),new zr([o,c],0)]}class kg{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new xc(`Invalid padding: ${t}`);if(r<0)throw new xc(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new xc(`Invalid hash count: ${r}`);if(e.length===0&&t!==0)throw new xc(`Invalid padding when bitmap length is 0: ${t}`);this.ge=8*e.length-t,this.pe=zr.fromNumber(this.ge)}ye(e,t,r){let o=e.add(t.multiply(zr.fromNumber(r)));return o.compare(xR)===1&&(o=new zr([o.getBits(0),o.getBits(1)],0)),o.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const t=Qb(e),[r,o]=Kb(t);for(let c=0;c<this.hashCount;c++){const h=this.ye(r,o,c);if(!this.we(h))return!1}return!0}static create(e,t,r){const o=e%8==0?0:8-e%8,c=new Uint8Array(Math.ceil(e/8)),h=new kg(c,o,t);return r.forEach((p=>h.insert(p))),h}insert(e){if(this.ge===0)return;const t=Qb(e),[r,o]=Kb(t);for(let c=0;c<this.hashCount;c++){const h=this.ye(r,o,c);this.Se(h)}}Se(e){const t=Math.floor(e/8),r=e%8;this.bitmap[t]|=1<<r}}class xc extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class Fd{constructor(e,t,r,o,c){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=o,this.resolvedLimboDocuments=c}static createSynthesizedRemoteEventForCurrentChange(e,t,r){const o=new Map;return o.set(e,iu.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new Fd(Ve.min(),o,new Ot(et),Ks(),tt())}}class iu{constructor(e,t,r,o,c){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=o,this.removedDocuments=c}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new iu(r,t,tt(),tt(),tt())}}class nd{constructor(e,t,r,o){this.be=e,this.removedTargetIds=t,this.key=r,this.De=o}}class gw{constructor(e,t){this.targetId=e,this.Ce=t}}class _w{constructor(e,t,r=An.EMPTY_BYTE_STRING,o=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=o}}class Xb{constructor(){this.ve=0,this.Fe=Wb(),this.Me=An.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=tt(),t=tt(),r=tt();return this.Fe.forEach(((o,c)=>{switch(c){case 0:e=e.add(o);break;case 2:t=t.add(o);break;case 1:r=r.add(o);break;default:Le(38017,{changeType:c})}})),new iu(this.Me,this.xe,e,t,r)}qe(){this.Oe=!1,this.Fe=Wb()}Qe(e,t){this.Oe=!0,this.Fe=this.Fe.insert(e,t)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,ft(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class RR{constructor(e){this.Ge=e,this.ze=new Map,this.je=Ks(),this.Je=qh(),this.He=qh(),this.Ye=new Ot(et)}Ze(e){for(const t of e.be)e.De&&e.De.isFoundDocument()?this.Xe(t,e.De):this.et(t,e.key,e.De);for(const t of e.removedTargetIds)this.et(t,e.key,e.De)}tt(e){this.forEachTarget(e,(t=>{const r=this.nt(t);switch(e.state){case 0:this.rt(t)&&r.Le(e.resumeToken);break;case 1:r.Ke(),r.Ne||r.qe(),r.Le(e.resumeToken);break;case 2:r.Ke(),r.Ne||this.removeTarget(t);break;case 3:this.rt(t)&&(r.We(),r.Le(e.resumeToken));break;case 4:this.rt(t)&&(this.it(t),r.Le(e.resumeToken));break;default:Le(56790,{state:e.state})}}))}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.ze.forEach(((r,o)=>{this.rt(o)&&t(o)}))}st(e){const t=e.targetId,r=e.Ce.count,o=this.ot(t);if(o){const c=o.target;if(Hp(c))if(r===0){const h=new Me(c.path);this.et(t,h,xn.newNoDocument(h,Ve.min()))}else ft(r===1,20013,{expectedCount:r});else{const h=this._t(t);if(h!==r){const p=this.ut(e),g=p?this.ct(p,e,h):1;if(g!==0){this.it(t);const _=g===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(t,_)}}}}}ut(e){const t=e.Ce.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:r="",padding:o=0},hashCount:c=0}=t;let h,p;try{h=Yr(r).toUint8Array()}catch(g){if(g instanceof qT)return rl("Decoding the base64 bloom filter in existence filter failed ("+g.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw g}try{p=new kg(h,o,c)}catch(g){return rl(g instanceof xc?"BloomFilter error: ":"Applying bloom filter failed: ",g),null}return p.ge===0?null:p}ct(e,t,r){return t.Ce.count===r-this.Pt(e,t.targetId)?0:2}Pt(e,t){const r=this.Ge.getRemoteKeysForTarget(t);let o=0;return r.forEach((c=>{const h=this.Ge.ht(),p=`projects/${h.projectId}/databases/${h.database}/documents/${c.path.canonicalString()}`;e.mightContain(p)||(this.et(t,c,null),o++)})),o}Tt(e){const t=new Map;this.ze.forEach(((c,h)=>{const p=this.ot(h);if(p){if(c.current&&Hp(p.target)){const g=new Me(p.target.path);this.It(g).has(h)||this.Et(h,g)||this.et(h,g,xn.newNoDocument(g,e))}c.Be&&(t.set(h,c.ke()),c.qe())}}));let r=tt();this.He.forEach(((c,h)=>{let p=!0;h.forEachWhile((g=>{const _=this.ot(g);return!_||_.purpose==="TargetPurposeLimboResolution"||(p=!1,!1)})),p&&(r=r.add(c))})),this.je.forEach(((c,h)=>h.setReadTime(e)));const o=new Fd(e,t,this.Ye,this.je,r);return this.je=Ks(),this.Je=qh(),this.He=qh(),this.Ye=new Ot(et),o}Xe(e,t){if(!this.rt(e))return;const r=this.Et(e,t.key)?2:0;this.nt(e).Qe(t.key,r),this.je=this.je.insert(t.key,t),this.Je=this.Je.insert(t.key,this.It(t.key).add(e)),this.He=this.He.insert(t.key,this.dt(t.key).add(e))}et(e,t,r){if(!this.rt(e))return;const o=this.nt(e);this.Et(e,t)?o.Qe(t,1):o.$e(t),this.He=this.He.insert(t,this.dt(t).delete(e)),this.He=this.He.insert(t,this.dt(t).add(e)),r&&(this.je=this.je.insert(t,r))}removeTarget(e){this.ze.delete(e)}_t(e){const t=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let t=this.ze.get(e);return t||(t=new Xb,this.ze.set(e,t)),t}dt(e){let t=this.He.get(e);return t||(t=new hn(et),this.He=this.He.insert(e,t)),t}It(e){let t=this.Je.get(e);return t||(t=new hn(et),this.Je=this.Je.insert(e,t)),t}rt(e){const t=this.ot(e)!==null;return t||Ae("WatchChangeAggregator","Detected inactive target",e),t}ot(e){const t=this.ze.get(e);return t&&t.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new Xb),this.Ge.getRemoteKeysForTarget(e).forEach((t=>{this.et(e,t,null)}))}Et(e,t){return this.Ge.getRemoteKeysForTarget(e).has(t)}}function qh(){return new Ot(Me.comparator)}function Wb(){return new Ot(Me.comparator)}const DR={asc:"ASCENDING",desc:"DESCENDING"},MR={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},OR={and:"AND",or:"OR"};class kR{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function Gp(i,e){return i.useProto3Json||Vd(e)?e:{value:e}}function bd(i,e){return i.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function yw(i,e){return i.useProto3Json?e.toBase64():e.toUint8Array()}function jR(i,e){return bd(i,e.toTimestamp())}function ps(i){return ft(!!i,49232),Ve.fromTimestamp((function(t){const r=Gr(t);return new xt(r.seconds,r.nanos)})(i))}function jg(i,e){return Yp(i,e).canonicalString()}function Yp(i,e){const t=(function(o){return new St(["projects",o.projectId,"databases",o.database])})(i).child("documents");return e===void 0?t:t.child(e)}function vw(i){const e=St.fromString(i);return ft(Sw(e),10190,{key:e.toString()}),e}function Qp(i,e){return jg(i.databaseId,e.path)}function Tp(i,e){const t=vw(e);if(t.get(1)!==i.databaseId.projectId)throw new Te(he.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+i.databaseId.projectId);if(t.get(3)!==i.databaseId.database)throw new Te(he.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+i.databaseId.database);return new Me(Tw(t))}function bw(i,e){return jg(i.databaseId,e)}function LR(i){const e=vw(i);return e.length===4?St.emptyPath():Tw(e)}function Kp(i){return new St(["projects",i.databaseId.projectId,"databases",i.databaseId.database]).canonicalString()}function Tw(i){return ft(i.length>4&&i.get(4)==="documents",29091,{key:i.toString()}),i.popFirst(5)}function Jb(i,e,t){return{name:Qp(i,e),fields:t.value.mapValue.fields}}function PR(i,e){let t;if("targetChange"in e){e.targetChange;const r=(function(_){return _==="NO_CHANGE"?0:_==="ADD"?1:_==="REMOVE"?2:_==="CURRENT"?3:_==="RESET"?4:Le(39313,{state:_})})(e.targetChange.targetChangeType||"NO_CHANGE"),o=e.targetChange.targetIds||[],c=(function(_,T){return _.useProto3Json?(ft(T===void 0||typeof T=="string",58123),An.fromBase64String(T||"")):(ft(T===void 0||T instanceof Buffer||T instanceof Uint8Array,16193),An.fromUint8Array(T||new Uint8Array))})(i,e.targetChange.resumeToken),h=e.targetChange.cause,p=h&&(function(_){const T=_.code===void 0?he.UNKNOWN:pw(_.code);return new Te(T,_.message||"")})(h);t=new _w(r,o,c,p||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const o=Tp(i,r.document.name),c=ps(r.document.updateTime),h=r.document.createTime?ps(r.document.createTime):Ve.min(),p=new $n({mapValue:{fields:r.document.fields}}),g=xn.newFoundDocument(o,c,h,p),_=r.targetIds||[],T=r.removedTargetIds||[];t=new nd(_,T,g.key,g)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const o=Tp(i,r.document),c=r.readTime?ps(r.readTime):Ve.min(),h=xn.newNoDocument(o,c),p=r.removedTargetIds||[];t=new nd([],p,h.key,h)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const o=Tp(i,r.document),c=r.removedTargetIds||[];t=new nd([],c,o,null)}else{if(!("filter"in e))return Le(11601,{Rt:e});{e.filter;const r=e.filter;r.targetId;const{count:o=0,unchangedNames:c}=r,h=new IR(o,c),p=r.targetId;t=new gw(p,h)}}return t}function VR(i,e){let t;if(e instanceof nu)t={update:Jb(i,e.key,e.value)};else if(e instanceof Mg)t={delete:Qp(i,e.key)};else if(e instanceof Zr)t={update:Jb(i,e.key,e.data),updateMask:YR(e.fieldMask)};else{if(!(e instanceof ER))return Le(16599,{Vt:e.type});t={verify:Qp(i,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map((r=>(function(c,h){const p=h.transform;if(p instanceof yd)return{fieldPath:h.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(p instanceof cl)return{fieldPath:h.field.canonicalString(),appendMissingElements:{values:p.elements}};if(p instanceof Qc)return{fieldPath:h.field.canonicalString(),removeAllFromArray:{values:p.elements}};if(p instanceof vd)return{fieldPath:h.field.canonicalString(),increment:p.Ae};throw Le(20930,{transform:h.transform})})(0,r)))),e.precondition.isNone||(t.currentDocument=(function(o,c){return c.updateTime!==void 0?{updateTime:jR(o,c.updateTime)}:c.exists!==void 0?{exists:c.exists}:Le(27497)})(i,e.precondition)),t}function BR(i,e){return i&&i.length>0?(ft(e!==void 0,14353),i.map((t=>(function(o,c){let h=o.updateTime?ps(o.updateTime):ps(c);return h.isEqual(Ve.min())&&(h=ps(c)),new bR(h,o.transformResults||[])})(t,e)))):[]}function UR(i,e){return{documents:[bw(i,e.path)]}}function zR(i,e){const t={structuredQuery:{}},r=e.path;let o;e.collectionGroup!==null?(o=r,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(o=r.popLast(),t.structuredQuery.from=[{collectionId:r.lastSegment()}]),t.parent=bw(i,o);const c=(function(_){if(_.length!==0)return Ew(ji.create(_,"and"))})(e.filters);c&&(t.structuredQuery.where=c);const h=(function(_){if(_.length!==0)return _.map((T=>(function(I){return{field:Yo(I.field),direction:FR(I.dir)}})(T)))})(e.orderBy);h&&(t.structuredQuery.orderBy=h);const p=Gp(i,e.limit);return p!==null&&(t.structuredQuery.limit=p),e.startAt&&(t.structuredQuery.startAt=(function(_){return{before:_.inclusive,values:_.position}})(e.startAt)),e.endAt&&(t.structuredQuery.endAt=(function(_){return{before:!_.inclusive,values:_.position}})(e.endAt)),{ft:t,parent:o}}function qR(i){let e=LR(i.parent);const t=i.structuredQuery,r=t.from?t.from.length:0;let o=null;if(r>0){ft(r===1,65062);const T=t.from[0];T.allDescendants?o=T.collectionId:e=e.child(T.collectionId)}let c=[];t.where&&(c=(function(E){const I=ww(E);return I instanceof ji&&JT(I)?I.getFilters():[I]})(t.where));let h=[];t.orderBy&&(h=(function(E){return E.map((I=>(function(L){return new Yc(Qo(L.field),(function(j){switch(j){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(L.direction))})(I)))})(t.orderBy));let p=null;t.limit&&(p=(function(E){let I;return I=typeof E=="object"?E.value:E,Vd(I)?null:I})(t.limit));let g=null;t.startAt&&(g=(function(E){const I=!!E.before,O=E.values||[];return new _d(O,I)})(t.startAt));let _=null;return t.endAt&&(_=(function(E){const I=!E.before,O=E.values||[];return new _d(O,I)})(t.endAt)),aR(e,o,h,c,p,"F",g,_)}function HR(i,e){const t=(function(o){switch(o){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Le(28987,{purpose:o})}})(e.purpose);return t==null?null:{"goog-listen-tags":t}}function ww(i){return i.unaryFilter!==void 0?(function(t){switch(t.unaryFilter.op){case"IS_NAN":const r=Qo(t.unaryFilter.field);return on.create(r,"==",{doubleValue:NaN});case"IS_NULL":const o=Qo(t.unaryFilter.field);return on.create(o,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const c=Qo(t.unaryFilter.field);return on.create(c,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const h=Qo(t.unaryFilter.field);return on.create(h,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Le(61313);default:return Le(60726)}})(i):i.fieldFilter!==void 0?(function(t){return on.create(Qo(t.fieldFilter.field),(function(o){switch(o){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Le(58110);default:return Le(50506)}})(t.fieldFilter.op),t.fieldFilter.value)})(i):i.compositeFilter!==void 0?(function(t){return ji.create(t.compositeFilter.filters.map((r=>ww(r))),(function(o){switch(o){case"AND":return"and";case"OR":return"or";default:return Le(1026)}})(t.compositeFilter.op))})(i):Le(30097,{filter:i})}function FR(i){return DR[i]}function $R(i){return MR[i]}function GR(i){return OR[i]}function Yo(i){return{fieldPath:i.canonicalString()}}function Qo(i){return Sn.fromServerFormat(i.fieldPath)}function Ew(i){return i instanceof on?(function(t){if(t.op==="=="){if(Bb(t.value))return{unaryFilter:{field:Yo(t.field),op:"IS_NAN"}};if(Vb(t.value))return{unaryFilter:{field:Yo(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(Bb(t.value))return{unaryFilter:{field:Yo(t.field),op:"IS_NOT_NAN"}};if(Vb(t.value))return{unaryFilter:{field:Yo(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Yo(t.field),op:$R(t.op),value:t.value}}})(i):i instanceof ji?(function(t){const r=t.getFilters().map((o=>Ew(o)));return r.length===1?r[0]:{compositeFilter:{op:GR(t.op),filters:r}}})(i):Le(54877,{filter:i})}function YR(i){const e=[];return i.fields.forEach((t=>e.push(t.canonicalString()))),{fieldPaths:e}}function Sw(i){return i.length>=4&&i.get(0)==="projects"&&i.get(2)==="databases"}class Pr{constructor(e,t,r,o,c=Ve.min(),h=Ve.min(),p=An.EMPTY_BYTE_STRING,g=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=o,this.snapshotVersion=c,this.lastLimboFreeSnapshotVersion=h,this.resumeToken=p,this.expectedCount=g}withSequenceNumber(e){return new Pr(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new Pr(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Pr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Pr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class QR{constructor(e){this.yt=e}}function KR(i){const e=qR({parent:i.parent,structuredQuery:i.structuredQuery});return i.limitType==="LAST"?$p(e,e.limit,"L"):e}class XR{constructor(){this.Cn=new WR}addToCollectionParentIndex(e,t){return this.Cn.add(t),fe.resolve()}getCollectionParents(e,t){return fe.resolve(this.Cn.getEntries(t))}addFieldIndex(e,t){return fe.resolve()}deleteFieldIndex(e,t){return fe.resolve()}deleteAllFieldIndexes(e){return fe.resolve()}createTargetIndexes(e,t){return fe.resolve()}getDocumentsMatchingTarget(e,t){return fe.resolve(null)}getIndexType(e,t){return fe.resolve(0)}getFieldIndexes(e,t){return fe.resolve([])}getNextCollectionGroupToUpdate(e){return fe.resolve(null)}getMinOffset(e,t){return fe.resolve($r.min())}getMinOffsetFromCollectionGroup(e,t){return fe.resolve($r.min())}updateCollectionGroup(e,t,r){return fe.resolve()}updateIndexEntries(e,t){return fe.resolve()}}class WR{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),o=this.index[t]||new hn(St.comparator),c=!o.has(r);return this.index[t]=o.add(r),c}has(e){const t=e.lastSegment(),r=e.popLast(),o=this.index[t];return o&&o.has(r)}getEntries(e){return(this.index[e]||new hn(St.comparator)).toArray()}}const Zb={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},Aw=41943040;class Hn{static withCacheSize(e){return new Hn(e,Hn.DEFAULT_COLLECTION_PERCENTILE,Hn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}}Hn.DEFAULT_COLLECTION_PERCENTILE=10,Hn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Hn.DEFAULT=new Hn(Aw,Hn.DEFAULT_COLLECTION_PERCENTILE,Hn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Hn.DISABLED=new Hn(-1,0,0);class ul{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new ul(0)}static cr(){return new ul(-1)}}const e0="LruGarbageCollector",JR=1048576;function t0([i,e],[t,r]){const o=et(i,t);return o===0?et(e,r):o}class ZR{constructor(e){this.Ir=e,this.buffer=new hn(t0),this.Er=0}dr(){return++this.Er}Ar(e){const t=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(t);else{const r=this.buffer.last();t0(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}}class e2{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){Ae(e0,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){_l(t)?Ae(e0,"Ignoring IndexedDB error during garbage collection: ",t):await gl(t)}await this.Vr(3e5)}))}}class t2{constructor(e,t){this.mr=e,this.params=t}calculateTargetCount(e,t){return this.mr.gr(e).next((r=>Math.floor(t/100*r)))}nthSequenceNumber(e,t){if(t===0)return fe.resolve(Pd.ce);const r=new ZR(t);return this.mr.forEachTarget(e,(o=>r.Ar(o.sequenceNumber))).next((()=>this.mr.pr(e,(o=>r.Ar(o))))).next((()=>r.maxValue))}removeTargets(e,t,r){return this.mr.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.mr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(Ae("LruGarbageCollector","Garbage collection skipped; disabled"),fe.resolve(Zb)):this.getCacheSize(e).next((r=>r<this.params.cacheSizeCollectionThreshold?(Ae("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Zb):this.yr(e,t)))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,t){let r,o,c,h,p,g,_;const T=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((E=>(E>this.params.maximumSequenceNumbersToCollect?(Ae("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${E}`),o=this.params.maximumSequenceNumbersToCollect):o=E,h=Date.now(),this.nthSequenceNumber(e,o)))).next((E=>(r=E,p=Date.now(),this.removeTargets(e,r,t)))).next((E=>(c=E,g=Date.now(),this.removeOrphanedDocuments(e,r)))).next((E=>(_=Date.now(),$o()<=Ze.DEBUG&&Ae("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${h-T}ms
	Determined least recently used ${o} in `+(p-h)+`ms
	Removed ${c} targets in `+(g-p)+`ms
	Removed ${E} documents in `+(_-g)+`ms
Total Duration: ${_-T}ms`),fe.resolve({didRun:!0,sequenceNumbersCollected:o,targetsRemoved:c,documentsRemoved:E}))))}}function n2(i,e){return new t2(i,e)}class i2{constructor(){this.changes=new Qa((e=>e.toString()),((e,t)=>e.isEqual(t))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,xn.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return r!==void 0?fe.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class s2{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class r2{constructor(e,t,r,o){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=o}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next((o=>(r=o,this.remoteDocumentCache.getEntry(e,t)))).next((o=>(r!==null&&Lc(r.mutation,o,ti.empty(),xt.now()),o)))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next((r=>this.getLocalViewOfDocuments(e,r,tt()).next((()=>r))))}getLocalViewOfDocuments(e,t,r=tt()){const o=La();return this.populateOverlays(e,o,t).next((()=>this.computeViews(e,t,o,r).next((c=>{let h=Nc();return c.forEach(((p,g)=>{h=h.insert(p,g.overlayedDocument)})),h}))))}getOverlayedDocuments(e,t){const r=La();return this.populateOverlays(e,r,t).next((()=>this.computeViews(e,t,r,tt())))}populateOverlays(e,t,r){const o=[];return r.forEach((c=>{t.has(c)||o.push(c)})),this.documentOverlayCache.getOverlays(e,o).next((c=>{c.forEach(((h,p)=>{t.set(h,p)}))}))}computeViews(e,t,r,o){let c=Ks();const h=jc(),p=(function(){return jc()})();return t.forEach(((g,_)=>{const T=r.get(_.key);o.has(_.key)&&(T===void 0||T.mutation instanceof Zr)?c=c.insert(_.key,_):T!==void 0?(h.set(_.key,T.mutation.getFieldMask()),Lc(T.mutation,_,T.mutation.getFieldMask(),xt.now())):h.set(_.key,ti.empty())})),this.recalculateAndSaveOverlays(e,c).next((g=>(g.forEach(((_,T)=>h.set(_,T))),t.forEach(((_,T)=>p.set(_,new s2(T,h.get(_)??null)))),p)))}recalculateAndSaveOverlays(e,t){const r=jc();let o=new Ot(((h,p)=>h-p)),c=tt();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((h=>{for(const p of h)p.keys().forEach((g=>{const _=t.get(g);if(_===null)return;let T=r.get(g)||ti.empty();T=p.applyToLocalView(_,T),r.set(g,T);const E=(o.get(p.batchId)||tt()).add(g);o=o.insert(p.batchId,E)}))})).next((()=>{const h=[],p=o.getReverseIterator();for(;p.hasNext();){const g=p.getNext(),_=g.key,T=g.value,E=ow();T.forEach((I=>{if(!c.has(I)){const O=fw(t.get(I),r.get(I));O!==null&&E.set(I,O),c=c.add(I)}})),h.push(this.documentOverlayCache.saveOverlays(e,_,E))}return fe.waitFor(h)})).next((()=>r))}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next((r=>this.recalculateAndSaveOverlays(e,r)))}getDocumentsMatchingQuery(e,t,r,o){return(function(h){return Me.isDocumentKey(h.path)&&h.collectionGroup===null&&h.filters.length===0})(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):nw(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r,o):this.getDocumentsMatchingCollectionQuery(e,t,r,o)}getNextDocuments(e,t,r,o){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,o).next((c=>{const h=o-c.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,o-c.size):fe.resolve(La());let p=Hc,g=c;return h.next((_=>fe.forEach(_,((T,E)=>(p<E.largestBatchId&&(p=E.largestBatchId),c.get(T)?fe.resolve():this.remoteDocumentCache.getEntry(e,T).next((I=>{g=g.insert(T,I)}))))).next((()=>this.populateOverlays(e,_,c))).next((()=>this.computeViews(e,g,_,tt()))).next((T=>({batchId:p,changes:aw(T)})))))}))}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new Me(t)).next((r=>{let o=Nc();return r.isFoundDocument()&&(o=o.insert(r.key,r)),o}))}getDocumentsMatchingCollectionGroupQuery(e,t,r,o){const c=t.collectionGroup;let h=Nc();return this.indexManager.getCollectionParents(e,c).next((p=>fe.forEach(p,(g=>{const _=(function(E,I){return new yl(I,null,E.explicitOrderBy.slice(),E.filters.slice(),E.limit,E.limitType,E.startAt,E.endAt)})(t,g.child(c));return this.getDocumentsMatchingCollectionQuery(e,_,r,o).next((T=>{T.forEach(((E,I)=>{h=h.insert(E,I)}))}))})).next((()=>h))))}getDocumentsMatchingCollectionQuery(e,t,r,o){let c;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next((h=>(c=h,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,c,o)))).next((h=>{c.forEach(((g,_)=>{const T=_.getKey();h.get(T)===null&&(h=h.insert(T,xn.newInvalidDocument(T)))}));let p=Nc();return h.forEach(((g,_)=>{const T=c.get(g);T!==void 0&&Lc(T.mutation,_,ti.empty(),xt.now()),zd(t,_)&&(p=p.insert(g,_))})),p}))}}class a2{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,t){return fe.resolve(this.Lr.get(t))}saveBundleMetadata(e,t){return this.Lr.set(t.id,(function(o){return{id:o.id,version:o.version,createTime:ps(o.createTime)}})(t)),fe.resolve()}getNamedQuery(e,t){return fe.resolve(this.kr.get(t))}saveNamedQuery(e,t){return this.kr.set(t.name,(function(o){return{name:o.name,query:KR(o.bundledQuery),readTime:ps(o.readTime)}})(t)),fe.resolve()}}class o2{constructor(){this.overlays=new Ot(Me.comparator),this.qr=new Map}getOverlay(e,t){return fe.resolve(this.overlays.get(t))}getOverlays(e,t){const r=La();return fe.forEach(t,(o=>this.getOverlay(e,o).next((c=>{c!==null&&r.set(o,c)})))).next((()=>r))}saveOverlays(e,t,r){return r.forEach(((o,c)=>{this.St(e,t,c)})),fe.resolve()}removeOverlaysForBatchId(e,t,r){const o=this.qr.get(r);return o!==void 0&&(o.forEach((c=>this.overlays=this.overlays.remove(c))),this.qr.delete(r)),fe.resolve()}getOverlaysForCollection(e,t,r){const o=La(),c=t.length+1,h=new Me(t.child("")),p=this.overlays.getIteratorFrom(h);for(;p.hasNext();){const g=p.getNext().value,_=g.getKey();if(!t.isPrefixOf(_.path))break;_.path.length===c&&g.largestBatchId>r&&o.set(g.getKey(),g)}return fe.resolve(o)}getOverlaysForCollectionGroup(e,t,r,o){let c=new Ot(((_,T)=>_-T));const h=this.overlays.getIterator();for(;h.hasNext();){const _=h.getNext().value;if(_.getKey().getCollectionGroup()===t&&_.largestBatchId>r){let T=c.get(_.largestBatchId);T===null&&(T=La(),c=c.insert(_.largestBatchId,T)),T.set(_.getKey(),_)}}const p=La(),g=c.getIterator();for(;g.hasNext()&&(g.getNext().value.forEach(((_,T)=>p.set(_,T))),!(p.size()>=o)););return fe.resolve(p)}St(e,t,r){const o=this.overlays.get(r.key);if(o!==null){const h=this.qr.get(o.largestBatchId).delete(r.key);this.qr.set(o.largestBatchId,h)}this.overlays=this.overlays.insert(r.key,new AR(t,r));let c=this.qr.get(t);c===void 0&&(c=tt(),this.qr.set(t,c)),this.qr.set(t,c.add(r.key))}}class l2{constructor(){this.sessionToken=An.EMPTY_BYTE_STRING}getSessionToken(e){return fe.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,fe.resolve()}}class Lg{constructor(){this.Qr=new hn(pn.$r),this.Ur=new hn(pn.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,t){const r=new pn(e,t);this.Qr=this.Qr.add(r),this.Ur=this.Ur.add(r)}Wr(e,t){e.forEach((r=>this.addReference(r,t)))}removeReference(e,t){this.Gr(new pn(e,t))}zr(e,t){e.forEach((r=>this.removeReference(r,t)))}jr(e){const t=new Me(new St([])),r=new pn(t,e),o=new pn(t,e+1),c=[];return this.Ur.forEachInRange([r,o],(h=>{this.Gr(h),c.push(h.key)})),c}Jr(){this.Qr.forEach((e=>this.Gr(e)))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const t=new Me(new St([])),r=new pn(t,e),o=new pn(t,e+1);let c=tt();return this.Ur.forEachInRange([r,o],(h=>{c=c.add(h.key)})),c}containsKey(e){const t=new pn(e,0),r=this.Qr.firstAfterOrEqual(t);return r!==null&&e.isEqual(r.key)}}class pn{constructor(e,t){this.key=e,this.Yr=t}static $r(e,t){return Me.comparator(e.key,t.key)||et(e.Yr,t.Yr)}static Kr(e,t){return et(e.Yr,t.Yr)||Me.comparator(e.key,t.key)}}class c2{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.tr=1,this.Zr=new hn(pn.$r)}checkEmpty(e){return fe.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,r,o){const c=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const h=new SR(c,t,r,o);this.mutationQueue.push(h);for(const p of o)this.Zr=this.Zr.add(new pn(p.key,c)),this.indexManager.addToCollectionParentIndex(e,p.key.path.popLast());return fe.resolve(h)}lookupMutationBatch(e,t){return fe.resolve(this.Xr(t))}getNextMutationBatchAfterBatchId(e,t){const r=t+1,o=this.ei(r),c=o<0?0:o;return fe.resolve(this.mutationQueue.length>c?this.mutationQueue[c]:null)}getHighestUnacknowledgedBatchId(){return fe.resolve(this.mutationQueue.length===0?Ag:this.tr-1)}getAllMutationBatches(e){return fe.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new pn(t,0),o=new pn(t,Number.POSITIVE_INFINITY),c=[];return this.Zr.forEachInRange([r,o],(h=>{const p=this.Xr(h.Yr);c.push(p)})),fe.resolve(c)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new hn(et);return t.forEach((o=>{const c=new pn(o,0),h=new pn(o,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([c,h],(p=>{r=r.add(p.Yr)}))})),fe.resolve(this.ti(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,o=r.length+1;let c=r;Me.isDocumentKey(c)||(c=c.child(""));const h=new pn(new Me(c),0);let p=new hn(et);return this.Zr.forEachWhile((g=>{const _=g.key.path;return!!r.isPrefixOf(_)&&(_.length===o&&(p=p.add(g.Yr)),!0)}),h),fe.resolve(this.ti(p))}ti(e){const t=[];return e.forEach((r=>{const o=this.Xr(r);o!==null&&t.push(o)})),t}removeMutationBatch(e,t){ft(this.ni(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Zr;return fe.forEach(t.mutations,(o=>{const c=new pn(o.key,t.batchId);return r=r.delete(c),this.referenceDelegate.markPotentiallyOrphaned(e,o.key)})).next((()=>{this.Zr=r}))}ir(e){}containsKey(e,t){const r=new pn(t,0),o=this.Zr.firstAfterOrEqual(r);return fe.resolve(t.isEqual(o&&o.key))}performConsistencyCheck(e){return this.mutationQueue.length,fe.resolve()}ni(e,t){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const t=this.ei(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class u2{constructor(e){this.ri=e,this.docs=(function(){return new Ot(Me.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,o=this.docs.get(r),c=o?o.size:0,h=this.ri(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:h}),this.size+=h-c,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return fe.resolve(r?r.document.mutableCopy():xn.newInvalidDocument(t))}getEntries(e,t){let r=Ks();return t.forEach((o=>{const c=this.docs.get(o);r=r.insert(o,c?c.document.mutableCopy():xn.newInvalidDocument(o))})),fe.resolve(r)}getDocumentsMatchingQuery(e,t,r,o){let c=Ks();const h=t.path,p=new Me(h.child("__id-9223372036854775808__")),g=this.docs.getIteratorFrom(p);for(;g.hasNext();){const{key:_,value:{document:T}}=g.getNext();if(!h.isPrefixOf(_.path))break;_.path.length>h.length+1||Vx(Px(T),r)<=0||(o.has(T.key)||zd(t,T))&&(c=c.insert(T.key,T.mutableCopy()))}return fe.resolve(c)}getAllFromCollectionGroup(e,t,r,o){Le(9500)}ii(e,t){return fe.forEach(this.docs,(r=>t(r)))}newChangeBuffer(e){return new h2(this)}getSize(e){return fe.resolve(this.size)}}class h2 extends i2{constructor(e){super(),this.Nr=e}applyChanges(e){const t=[];return this.changes.forEach(((r,o)=>{o.isValidDocument()?t.push(this.Nr.addEntry(e,o)):this.Nr.removeEntry(r)})),fe.waitFor(t)}getFromCache(e,t){return this.Nr.getEntry(e,t)}getAllFromCache(e,t){return this.Nr.getEntries(e,t)}}class d2{constructor(e){this.persistence=e,this.si=new Qa((t=>Ng(t)),xg),this.lastRemoteSnapshotVersion=Ve.min(),this.highestTargetId=0,this.oi=0,this._i=new Lg,this.targetCount=0,this.ai=ul.ur()}forEachTarget(e,t){return this.si.forEach(((r,o)=>t(o))),fe.resolve()}getLastRemoteSnapshotVersion(e){return fe.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return fe.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),fe.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.oi&&(this.oi=t),fe.resolve()}Pr(e){this.si.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.ai=new ul(t),this.highestTargetId=t),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,t){return this.Pr(t),this.targetCount+=1,fe.resolve()}updateTargetData(e,t){return this.Pr(t),fe.resolve()}removeTargetData(e,t){return this.si.delete(t.target),this._i.jr(t.targetId),this.targetCount-=1,fe.resolve()}removeTargets(e,t,r){let o=0;const c=[];return this.si.forEach(((h,p)=>{p.sequenceNumber<=t&&r.get(p.targetId)===null&&(this.si.delete(h),c.push(this.removeMatchingKeysForTargetId(e,p.targetId)),o++)})),fe.waitFor(c).next((()=>o))}getTargetCount(e){return fe.resolve(this.targetCount)}getTargetData(e,t){const r=this.si.get(t)||null;return fe.resolve(r)}addMatchingKeys(e,t,r){return this._i.Wr(t,r),fe.resolve()}removeMatchingKeys(e,t,r){this._i.zr(t,r);const o=this.persistence.referenceDelegate,c=[];return o&&t.forEach((h=>{c.push(o.markPotentiallyOrphaned(e,h))})),fe.waitFor(c)}removeMatchingKeysForTargetId(e,t){return this._i.jr(t),fe.resolve()}getMatchingKeysForTargetId(e,t){const r=this._i.Hr(t);return fe.resolve(r)}containsKey(e,t){return fe.resolve(this._i.containsKey(t))}}class Iw{constructor(e,t){this.ui={},this.overlays={},this.ci=new Pd(0),this.li=!1,this.li=!0,this.hi=new l2,this.referenceDelegate=e(this),this.Pi=new d2(this),this.indexManager=new XR,this.remoteDocumentCache=(function(o){return new u2(o)})((r=>this.referenceDelegate.Ti(r))),this.serializer=new QR(t),this.Ii=new a2(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new o2,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.ui[e.toKey()];return r||(r=new c2(t,this.referenceDelegate),this.ui[e.toKey()]=r),r}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,t,r){Ae("MemoryPersistence","Starting transaction:",e);const o=new f2(this.ci.next());return this.referenceDelegate.Ei(),r(o).next((c=>this.referenceDelegate.di(o).next((()=>c)))).toPromise().then((c=>(o.raiseOnCommittedEvent(),c)))}Ai(e,t){return fe.or(Object.values(this.ui).map((r=>()=>r.containsKey(e,t))))}}class f2 extends Ux{constructor(e){super(),this.currentSequenceNumber=e}}class Pg{constructor(e){this.persistence=e,this.Ri=new Lg,this.Vi=null}static mi(e){return new Pg(e)}get fi(){if(this.Vi)return this.Vi;throw Le(60996)}addReference(e,t,r){return this.Ri.addReference(r,t),this.fi.delete(r.toString()),fe.resolve()}removeReference(e,t,r){return this.Ri.removeReference(r,t),this.fi.add(r.toString()),fe.resolve()}markPotentiallyOrphaned(e,t){return this.fi.add(t.toString()),fe.resolve()}removeTarget(e,t){this.Ri.jr(t.targetId).forEach((o=>this.fi.add(o.toString())));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next((o=>{o.forEach((c=>this.fi.add(c.toString())))})).next((()=>r.removeTargetData(e,t)))}Ei(){this.Vi=new Set}di(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return fe.forEach(this.fi,(r=>{const o=Me.fromPath(r);return this.gi(e,o).next((c=>{c||t.removeEntry(o,Ve.min())}))})).next((()=>(this.Vi=null,t.apply(e))))}updateLimboDocument(e,t){return this.gi(e,t).next((r=>{r?this.fi.delete(t.toString()):this.fi.add(t.toString())}))}Ti(e){return 0}gi(e,t){return fe.or([()=>fe.resolve(this.Ri.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ai(e,t)])}}class Td{constructor(e,t){this.persistence=e,this.pi=new Qa((r=>Hx(r.path)),((r,o)=>r.isEqual(o))),this.garbageCollector=n2(this,t)}static mi(e,t){return new Td(e,t)}Ei(){}di(e){return fe.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}gr(e){const t=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next((r=>t.next((o=>r+o))))}wr(e){let t=0;return this.pr(e,(r=>{t++})).next((()=>t))}pr(e,t){return fe.forEach(this.pi,((r,o)=>this.br(e,r,o).next((c=>c?fe.resolve():t(o)))))}removeTargets(e,t,r){return this.persistence.getTargetCache().removeTargets(e,t,r)}removeOrphanedDocuments(e,t){let r=0;const o=this.persistence.getRemoteDocumentCache(),c=o.newChangeBuffer();return o.ii(e,(h=>this.br(e,h,t).next((p=>{p||(r++,c.removeEntry(h,Ve.min()))})))).next((()=>c.apply(e))).next((()=>r))}markPotentiallyOrphaned(e,t){return this.pi.set(t,e.currentSequenceNumber),fe.resolve()}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,t,r){return this.pi.set(r,e.currentSequenceNumber),fe.resolve()}removeReference(e,t,r){return this.pi.set(r,e.currentSequenceNumber),fe.resolve()}updateLimboDocument(e,t){return this.pi.set(t,e.currentSequenceNumber),fe.resolve()}Ti(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=Zh(e.data.value)),t}br(e,t,r){return fe.or([()=>this.persistence.Ai(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const o=this.pi.get(t);return fe.resolve(o!==void 0&&o>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}class Vg{constructor(e,t,r,o){this.targetId=e,this.fromCache=t,this.Es=r,this.ds=o}static As(e,t){let r=tt(),o=tt();for(const c of t.docChanges)switch(c.type){case 0:r=r.add(c.doc.key);break;case 1:o=o.add(c.doc.key)}return new Vg(e,t.fromCache,r,o)}}class m2{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}class p2{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=(function(){return sI()?8:zx(Rn())>0?6:4})()}initialize(e,t){this.ps=e,this.indexManager=t,this.Rs=!0}getDocumentsMatchingQuery(e,t,r,o){const c={result:null};return this.ys(e,t).next((h=>{c.result=h})).next((()=>{if(!c.result)return this.ws(e,t,o,r).next((h=>{c.result=h}))})).next((()=>{if(c.result)return;const h=new m2;return this.Ss(e,t,h).next((p=>{if(c.result=p,this.Vs)return this.bs(e,t,h,p.size)}))})).next((()=>c.result))}bs(e,t,r,o){return r.documentReadCount<this.fs?($o()<=Ze.DEBUG&&Ae("QueryEngine","SDK will not create cache indexes for query:",Go(t),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),fe.resolve()):($o()<=Ze.DEBUG&&Ae("QueryEngine","Query:",Go(t),"scans",r.documentReadCount,"local documents and returns",o,"documents as results."),r.documentReadCount>this.gs*o?($o()<=Ze.DEBUG&&Ae("QueryEngine","The SDK decides to create cache indexes for query:",Go(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,ms(t))):fe.resolve())}ys(e,t){if(Hb(t))return fe.resolve(null);let r=ms(t);return this.indexManager.getIndexType(e,r).next((o=>o===0?null:(t.limit!==null&&o===1&&(t=$p(t,null,"F"),r=ms(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next((c=>{const h=tt(...c);return this.ps.getDocuments(e,h).next((p=>this.indexManager.getMinOffset(e,r).next((g=>{const _=this.Ds(t,p);return this.Cs(t,_,h,g.readTime)?this.ys(e,$p(t,null,"F")):this.vs(e,_,t,g)}))))})))))}ws(e,t,r,o){return Hb(t)||o.isEqual(Ve.min())?fe.resolve(null):this.ps.getDocuments(e,r).next((c=>{const h=this.Ds(t,c);return this.Cs(t,h,r,o)?fe.resolve(null):($o()<=Ze.DEBUG&&Ae("QueryEngine","Re-using previous result from %s to execute query: %s",o.toString(),Go(t)),this.vs(e,h,t,Lx(o,Hc)).next((p=>p)))}))}Ds(e,t){let r=new hn(sw(e));return t.forEach(((o,c)=>{zd(e,c)&&(r=r.add(c))})),r}Cs(e,t,r,o){if(e.limit===null)return!1;if(r.size!==t.size)return!0;const c=e.limitType==="F"?t.last():t.first();return!!c&&(c.hasPendingWrites||c.version.compareTo(o)>0)}Ss(e,t,r){return $o()<=Ze.DEBUG&&Ae("QueryEngine","Using full collection scan to execute query:",Go(t)),this.ps.getDocumentsMatchingQuery(e,t,$r.min(),r)}vs(e,t,r,o){return this.ps.getDocumentsMatchingQuery(e,r,o).next((c=>(t.forEach((h=>{c=c.insert(h.key,h)})),c)))}}const Bg="LocalStore",g2=3e8;class _2{constructor(e,t,r,o){this.persistence=e,this.Fs=t,this.serializer=o,this.Ms=new Ot(et),this.xs=new Qa((c=>Ng(c)),xg),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(r)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new r2(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(t=>e.collect(t,this.Ms)))}}function y2(i,e,t,r){return new _2(i,e,t,r)}async function Cw(i,e){const t=Ue(i);return await t.persistence.runTransaction("Handle user change","readonly",(r=>{let o;return t.mutationQueue.getAllMutationBatches(r).next((c=>(o=c,t.Bs(e),t.mutationQueue.getAllMutationBatches(r)))).next((c=>{const h=[],p=[];let g=tt();for(const _ of o){h.push(_.batchId);for(const T of _.mutations)g=g.add(T.key)}for(const _ of c){p.push(_.batchId);for(const T of _.mutations)g=g.add(T.key)}return t.localDocuments.getDocuments(r,g).next((_=>({Ls:_,removedBatchIds:h,addedBatchIds:p})))}))}))}function v2(i,e){const t=Ue(i);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",(r=>{const o=e.batch.keys(),c=t.Ns.newChangeBuffer({trackRemovals:!0});return(function(p,g,_,T){const E=_.batch,I=E.keys();let O=fe.resolve();return I.forEach((L=>{O=O.next((()=>T.getEntry(g,L))).next((z=>{const j=_.docVersions.get(L);ft(j!==null,48541),z.version.compareTo(j)<0&&(E.applyToRemoteDocument(z,_),z.isValidDocument()&&(z.setReadTime(_.commitVersion),T.addEntry(z)))}))})),O.next((()=>p.mutationQueue.removeMutationBatch(g,E)))})(t,r,e,c).next((()=>c.apply(r))).next((()=>t.mutationQueue.performConsistencyCheck(r))).next((()=>t.documentOverlayCache.removeOverlaysForBatchId(r,o,e.batch.batchId))).next((()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,(function(p){let g=tt();for(let _=0;_<p.mutationResults.length;++_)p.mutationResults[_].transformResults.length>0&&(g=g.add(p.batch.mutations[_].key));return g})(e)))).next((()=>t.localDocuments.getDocuments(r,o)))}))}function Nw(i){const e=Ue(i);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(t=>e.Pi.getLastRemoteSnapshotVersion(t)))}function b2(i,e){const t=Ue(i),r=e.snapshotVersion;let o=t.Ms;return t.persistence.runTransaction("Apply remote event","readwrite-primary",(c=>{const h=t.Ns.newChangeBuffer({trackRemovals:!0});o=t.Ms;const p=[];e.targetChanges.forEach(((T,E)=>{const I=o.get(E);if(!I)return;p.push(t.Pi.removeMatchingKeys(c,T.removedDocuments,E).next((()=>t.Pi.addMatchingKeys(c,T.addedDocuments,E))));let O=I.withSequenceNumber(c.currentSequenceNumber);e.targetMismatches.get(E)!==null?O=O.withResumeToken(An.EMPTY_BYTE_STRING,Ve.min()).withLastLimboFreeSnapshotVersion(Ve.min()):T.resumeToken.approximateByteSize()>0&&(O=O.withResumeToken(T.resumeToken,r)),o=o.insert(E,O),(function(z,j,Y){return z.resumeToken.approximateByteSize()===0||j.snapshotVersion.toMicroseconds()-z.snapshotVersion.toMicroseconds()>=g2?!0:Y.addedDocuments.size+Y.modifiedDocuments.size+Y.removedDocuments.size>0})(I,O,T)&&p.push(t.Pi.updateTargetData(c,O))}));let g=Ks(),_=tt();if(e.documentUpdates.forEach((T=>{e.resolvedLimboDocuments.has(T)&&p.push(t.persistence.referenceDelegate.updateLimboDocument(c,T))})),p.push(T2(c,h,e.documentUpdates).next((T=>{g=T.ks,_=T.qs}))),!r.isEqual(Ve.min())){const T=t.Pi.getLastRemoteSnapshotVersion(c).next((E=>t.Pi.setTargetsMetadata(c,c.currentSequenceNumber,r)));p.push(T)}return fe.waitFor(p).next((()=>h.apply(c))).next((()=>t.localDocuments.getLocalViewOfDocuments(c,g,_))).next((()=>g))})).then((c=>(t.Ms=o,c)))}function T2(i,e,t){let r=tt(),o=tt();return t.forEach((c=>r=r.add(c))),e.getEntries(i,r).next((c=>{let h=Ks();return t.forEach(((p,g)=>{const _=c.get(p);g.isFoundDocument()!==_.isFoundDocument()&&(o=o.add(p)),g.isNoDocument()&&g.version.isEqual(Ve.min())?(e.removeEntry(p,g.readTime),h=h.insert(p,g)):!_.isValidDocument()||g.version.compareTo(_.version)>0||g.version.compareTo(_.version)===0&&_.hasPendingWrites?(e.addEntry(g),h=h.insert(p,g)):Ae(Bg,"Ignoring outdated watch update for ",p,". Current version:",_.version," Watch version:",g.version)})),{ks:h,qs:o}}))}function w2(i,e){const t=Ue(i);return t.persistence.runTransaction("Get next mutation batch","readonly",(r=>(e===void 0&&(e=Ag),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e))))}function E2(i,e){const t=Ue(i);return t.persistence.runTransaction("Allocate target","readwrite",(r=>{let o;return t.Pi.getTargetData(r,e).next((c=>c?(o=c,fe.resolve(o)):t.Pi.allocateTargetId(r).next((h=>(o=new Pr(e,h,"TargetPurposeListen",r.currentSequenceNumber),t.Pi.addTargetData(r,o).next((()=>o)))))))})).then((r=>{const o=t.Ms.get(r.targetId);return(o===null||r.snapshotVersion.compareTo(o.snapshotVersion)>0)&&(t.Ms=t.Ms.insert(r.targetId,r),t.xs.set(e,r.targetId)),r}))}async function Xp(i,e,t){const r=Ue(i),o=r.Ms.get(e),c=t?"readwrite":"readwrite-primary";try{t||await r.persistence.runTransaction("Release target",c,(h=>r.persistence.referenceDelegate.removeTarget(h,o)))}catch(h){if(!_l(h))throw h;Ae(Bg,`Failed to update sequence numbers for target ${e}: ${h}`)}r.Ms=r.Ms.remove(e),r.xs.delete(o.target)}function n0(i,e,t){const r=Ue(i);let o=Ve.min(),c=tt();return r.persistence.runTransaction("Execute query","readwrite",(h=>(function(g,_,T){const E=Ue(g),I=E.xs.get(T);return I!==void 0?fe.resolve(E.Ms.get(I)):E.Pi.getTargetData(_,T)})(r,h,ms(e)).next((p=>{if(p)return o=p.lastLimboFreeSnapshotVersion,r.Pi.getMatchingKeysForTargetId(h,p.targetId).next((g=>{c=g}))})).next((()=>r.Fs.getDocumentsMatchingQuery(h,e,t?o:Ve.min(),t?c:tt()))).next((p=>(S2(r,lR(e),p),{documents:p,Qs:c})))))}function S2(i,e,t){let r=i.Os.get(e)||Ve.min();t.forEach(((o,c)=>{c.readTime.compareTo(r)>0&&(r=c.readTime)})),i.Os.set(e,r)}class i0{constructor(){this.activeTargetIds=mR()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class A2{constructor(){this.Mo=new i0,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e,t=!0){return t&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,t,r){this.xo[e]=t}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new i0,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class I2{Oo(e){}shutdown(){}}const s0="ConnectivityMonitor";class r0{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){Ae(s0,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){Ae(s0,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}let Hh=null;function Wp(){return Hh===null?Hh=(function(){return 268435456+Math.round(2147483648*Math.random())})():Hh++,"0x"+Hh.toString(16)}const wp="RestConnection",C2={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class N2{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),o=encodeURIComponent(this.databaseId.database);this.Uo=t+"://"+e.host,this.Ko=`projects/${r}/databases/${o}`,this.Wo=this.databaseId.database===pd?`project_id=${r}`:`project_id=${r}&database_id=${o}`}Go(e,t,r,o,c){const h=Wp(),p=this.zo(e,t.toUriEncodedString());Ae(wp,`Sending RPC '${e}' ${h}:`,p,r);const g={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(g,o,c);const{host:_}=new URL(p),T=Wr(_);return this.Jo(e,p,g,r,T).then((E=>(Ae(wp,`Received RPC '${e}' ${h}: `,E),E)),(E=>{throw rl(wp,`RPC '${e}' ${h} failed with error: `,E,"url: ",p,"request:",r),E}))}Ho(e,t,r,o,c,h){return this.Go(e,t,r,o,c)}jo(e,t,r){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+pl})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach(((o,c)=>e[c]=o)),r&&r.headers.forEach(((o,c)=>e[c]=o))}zo(e,t){const r=C2[e];return`${this.Uo}/v1/${t}:${r}`}terminate(){}}class x2{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}const Cn="WebChannelConnection";class R2 extends N2{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,t,r,o,c){const h=Wp();return new Promise(((p,g)=>{const _=new DT;_.setWithCredentials(!0),_.listenOnce(MT.COMPLETE,(()=>{try{switch(_.getLastErrorCode()){case Jh.NO_ERROR:const E=_.getResponseJson();Ae(Cn,`XHR for RPC '${e}' ${h} received:`,JSON.stringify(E)),p(E);break;case Jh.TIMEOUT:Ae(Cn,`RPC '${e}' ${h} timed out`),g(new Te(he.DEADLINE_EXCEEDED,"Request time out"));break;case Jh.HTTP_ERROR:const I=_.getStatus();if(Ae(Cn,`RPC '${e}' ${h} failed with status:`,I,"response text:",_.getResponseText()),I>0){let O=_.getResponseJson();Array.isArray(O)&&(O=O[0]);const L=O?.error;if(L&&L.status&&L.message){const z=(function(Y){const F=Y.toLowerCase().replace(/_/g,"-");return Object.values(he).indexOf(F)>=0?F:he.UNKNOWN})(L.status);g(new Te(z,L.message))}else g(new Te(he.UNKNOWN,"Server responded with status "+_.getStatus()))}else g(new Te(he.UNAVAILABLE,"Connection failed."));break;default:Le(9055,{l_:e,streamId:h,h_:_.getLastErrorCode(),P_:_.getLastError()})}}finally{Ae(Cn,`RPC '${e}' ${h} completed.`)}}));const T=JSON.stringify(o);Ae(Cn,`RPC '${e}' ${h} sending request:`,o),_.send(t,"POST",T,r,15)}))}T_(e,t,r){const o=Wp(),c=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],h=jT(),p=kT(),g={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},_=this.longPollingOptions.timeoutSeconds;_!==void 0&&(g.longPollingTimeout=Math.round(1e3*_)),this.useFetchStreams&&(g.useFetchStreams=!0),this.jo(g.initMessageHeaders,t,r),g.encodeInitMessageHeaders=!0;const T=c.join("");Ae(Cn,`Creating RPC '${e}' stream ${o}: ${T}`,g);const E=h.createWebChannel(T,g);this.I_(E);let I=!1,O=!1;const L=new x2({Yo:j=>{O?Ae(Cn,`Not sending because RPC '${e}' stream ${o} is closed:`,j):(I||(Ae(Cn,`Opening RPC '${e}' stream ${o} transport.`),E.open(),I=!0),Ae(Cn,`RPC '${e}' stream ${o} sending:`,j),E.send(j))},Zo:()=>E.close()}),z=(j,Y,F)=>{j.listen(Y,(le=>{try{F(le)}catch(K){setTimeout((()=>{throw K}),0)}}))};return z(E,Cc.EventType.OPEN,(()=>{O||(Ae(Cn,`RPC '${e}' stream ${o} transport opened.`),L.o_())})),z(E,Cc.EventType.CLOSE,(()=>{O||(O=!0,Ae(Cn,`RPC '${e}' stream ${o} transport closed`),L.a_(),this.E_(E))})),z(E,Cc.EventType.ERROR,(j=>{O||(O=!0,rl(Cn,`RPC '${e}' stream ${o} transport errored. Name:`,j.name,"Message:",j.message),L.a_(new Te(he.UNAVAILABLE,"The operation could not be completed")))})),z(E,Cc.EventType.MESSAGE,(j=>{if(!O){const Y=j.data[0];ft(!!Y,16349);const F=Y,le=F?.error||F[0]?.error;if(le){Ae(Cn,`RPC '${e}' stream ${o} received error:`,le);const K=le.status;let B=(function(w){const S=an[w];if(S!==void 0)return pw(S)})(K),ie=le.message;B===void 0&&(B=he.INTERNAL,ie="Unknown error status: "+K+" with message "+le.message),O=!0,L.a_(new Te(B,ie)),E.close()}else Ae(Cn,`RPC '${e}' stream ${o} received:`,Y),L.u_(Y)}})),z(p,OT.STAT_EVENT,(j=>{j.stat===Vp.PROXY?Ae(Cn,`RPC '${e}' stream ${o} detected buffering proxy`):j.stat===Vp.NOPROXY&&Ae(Cn,`RPC '${e}' stream ${o} detected no buffering proxy`)})),setTimeout((()=>{L.__()}),0),L}terminate(){this.c_.forEach((e=>e.close())),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter((t=>t===e))}}function Ep(){return typeof document<"u"?document:null}function $d(i){return new kR(i,!0)}class xw{constructor(e,t,r=1e3,o=1.5,c=6e4){this.Mi=e,this.timerId=t,this.d_=r,this.A_=o,this.R_=c,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const t=Math.floor(this.V_+this.y_()),r=Math.max(0,Date.now()-this.f_),o=Math.max(0,t-r);o>0&&Ae("ExponentialBackoff",`Backing off for ${o} ms (base delay: ${this.V_} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,o,(()=>(this.f_=Date.now(),e()))),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}const a0="PersistentStream";class Rw{constructor(e,t,r,o,c,h,p,g){this.Mi=e,this.S_=r,this.b_=o,this.connection=c,this.authCredentialsProvider=h,this.appCheckCredentialsProvider=p,this.listener=g,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new xw(e,t)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,(()=>this.k_())))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,t){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():t&&t.code===he.RESOURCE_EXHAUSTED?(Qs(t.toString()),Qs("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):t&&t.code===he.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(t)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),t=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([r,o])=>{this.D_===t&&this.G_(r,o)}),(r=>{e((()=>{const o=new Te(he.UNKNOWN,"Fetching auth token failed: "+r.message);return this.z_(o)}))}))}G_(e,t){const r=this.W_(this.D_);this.stream=this.j_(e,t),this.stream.Xo((()=>{r((()=>this.listener.Xo()))})),this.stream.t_((()=>{r((()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.t_())))})),this.stream.r_((o=>{r((()=>this.z_(o)))})),this.stream.onMessage((o=>{r((()=>++this.F_==1?this.J_(o):this.onNext(o)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return Ae(a0,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return t=>{this.Mi.enqueueAndForget((()=>this.D_===e?t():(Ae(a0,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class D2 extends Rw{constructor(e,t,r,o,c,h){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,o,h),this.serializer=c}j_(e,t){return this.connection.T_("Listen",e,t)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const t=PR(this.serializer,e),r=(function(c){if(!("targetChange"in c))return Ve.min();const h=c.targetChange;return h.targetIds&&h.targetIds.length?Ve.min():h.readTime?ps(h.readTime):Ve.min()})(e);return this.listener.H_(t,r)}Y_(e){const t={};t.database=Kp(this.serializer),t.addTarget=(function(c,h){let p;const g=h.target;if(p=Hp(g)?{documents:UR(c,g)}:{query:zR(c,g).ft},p.targetId=h.targetId,h.resumeToken.approximateByteSize()>0){p.resumeToken=yw(c,h.resumeToken);const _=Gp(c,h.expectedCount);_!==null&&(p.expectedCount=_)}else if(h.snapshotVersion.compareTo(Ve.min())>0){p.readTime=bd(c,h.snapshotVersion.toTimestamp());const _=Gp(c,h.expectedCount);_!==null&&(p.expectedCount=_)}return p})(this.serializer,e);const r=HR(this.serializer,e);r&&(t.labels=r),this.q_(t)}Z_(e){const t={};t.database=Kp(this.serializer),t.removeTarget=e,this.q_(t)}}class M2 extends Rw{constructor(e,t,r,o,c,h){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,o,h),this.serializer=c}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,t){return this.connection.T_("Write",e,t)}J_(e){return ft(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,ft(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){ft(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const t=BR(e.writeResults,e.commitTime),r=ps(e.commitTime);return this.listener.na(r,t)}ra(){const e={};e.database=Kp(this.serializer),this.q_(e)}ea(e){const t={streamToken:this.lastStreamToken,writes:e.map((r=>VR(this.serializer,r)))};this.q_(t)}}class O2{}class k2 extends O2{constructor(e,t,r,o){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=o,this.ia=!1}sa(){if(this.ia)throw new Te(he.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,t,r,o){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([c,h])=>this.connection.Go(e,Yp(t,r),o,c,h))).catch((c=>{throw c.name==="FirebaseError"?(c.code===he.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),c):new Te(he.UNKNOWN,c.toString())}))}Ho(e,t,r,o,c){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([h,p])=>this.connection.Ho(e,Yp(t,r),o,h,p,c))).catch((h=>{throw h.name==="FirebaseError"?(h.code===he.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),h):new Te(he.UNKNOWN,h.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}class j2{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(Qs(t),this.aa=!1):Ae("OnlineStateTracker",t)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}const $a="RemoteStore";class L2{constructor(e,t,r,o,c){this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=c,this.Aa.Oo((h=>{r.enqueueAndForget((async()=>{Ka(this)&&(Ae($a,"Restarting streams for network reachability change."),await(async function(g){const _=Ue(g);_.Ea.add(4),await su(_),_.Ra.set("Unknown"),_.Ea.delete(4),await Gd(_)})(this))}))})),this.Ra=new j2(r,o)}}async function Gd(i){if(Ka(i))for(const e of i.da)await e(!0)}async function su(i){for(const e of i.da)await e(!1)}function Dw(i,e){const t=Ue(i);t.Ia.has(e.targetId)||(t.Ia.set(e.targetId,e),Hg(t)?qg(t):vl(t).O_()&&zg(t,e))}function Ug(i,e){const t=Ue(i),r=vl(t);t.Ia.delete(e),r.O_()&&Mw(t,e),t.Ia.size===0&&(r.O_()?r.L_():Ka(t)&&t.Ra.set("Unknown"))}function zg(i,e){if(i.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Ve.min())>0){const t=i.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}vl(i).Y_(e)}function Mw(i,e){i.Va.Ue(e),vl(i).Z_(e)}function qg(i){i.Va=new RR({getRemoteKeysForTarget:e=>i.remoteSyncer.getRemoteKeysForTarget(e),At:e=>i.Ia.get(e)||null,ht:()=>i.datastore.serializer.databaseId}),vl(i).start(),i.Ra.ua()}function Hg(i){return Ka(i)&&!vl(i).x_()&&i.Ia.size>0}function Ka(i){return Ue(i).Ea.size===0}function Ow(i){i.Va=void 0}async function P2(i){i.Ra.set("Online")}async function V2(i){i.Ia.forEach(((e,t)=>{zg(i,e)}))}async function B2(i,e){Ow(i),Hg(i)?(i.Ra.ha(e),qg(i)):i.Ra.set("Unknown")}async function U2(i,e,t){if(i.Ra.set("Online"),e instanceof _w&&e.state===2&&e.cause)try{await(async function(o,c){const h=c.cause;for(const p of c.targetIds)o.Ia.has(p)&&(await o.remoteSyncer.rejectListen(p,h),o.Ia.delete(p),o.Va.removeTarget(p))})(i,e)}catch(r){Ae($a,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await wd(i,r)}else if(e instanceof nd?i.Va.Ze(e):e instanceof gw?i.Va.st(e):i.Va.tt(e),!t.isEqual(Ve.min()))try{const r=await Nw(i.localStore);t.compareTo(r)>=0&&await(function(c,h){const p=c.Va.Tt(h);return p.targetChanges.forEach(((g,_)=>{if(g.resumeToken.approximateByteSize()>0){const T=c.Ia.get(_);T&&c.Ia.set(_,T.withResumeToken(g.resumeToken,h))}})),p.targetMismatches.forEach(((g,_)=>{const T=c.Ia.get(g);if(!T)return;c.Ia.set(g,T.withResumeToken(An.EMPTY_BYTE_STRING,T.snapshotVersion)),Mw(c,g);const E=new Pr(T.target,g,_,T.sequenceNumber);zg(c,E)})),c.remoteSyncer.applyRemoteEvent(p)})(i,t)}catch(r){Ae($a,"Failed to raise snapshot:",r),await wd(i,r)}}async function wd(i,e,t){if(!_l(e))throw e;i.Ea.add(1),await su(i),i.Ra.set("Offline"),t||(t=()=>Nw(i.localStore)),i.asyncQueue.enqueueRetryable((async()=>{Ae($a,"Retrying IndexedDB access"),await t(),i.Ea.delete(1),await Gd(i)}))}function kw(i,e){return e().catch((t=>wd(i,t,e)))}async function Yd(i){const e=Ue(i),t=Kr(e);let r=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:Ag;for(;z2(e);)try{const o=await w2(e.localStore,r);if(o===null){e.Ta.length===0&&t.L_();break}r=o.batchId,q2(e,o)}catch(o){await wd(e,o)}jw(e)&&Lw(e)}function z2(i){return Ka(i)&&i.Ta.length<10}function q2(i,e){i.Ta.push(e);const t=Kr(i);t.O_()&&t.X_&&t.ea(e.mutations)}function jw(i){return Ka(i)&&!Kr(i).x_()&&i.Ta.length>0}function Lw(i){Kr(i).start()}async function H2(i){Kr(i).ra()}async function F2(i){const e=Kr(i);for(const t of i.Ta)e.ea(t.mutations)}async function $2(i,e,t){const r=i.Ta.shift(),o=Og.from(r,e,t);await kw(i,(()=>i.remoteSyncer.applySuccessfulWrite(o))),await Yd(i)}async function G2(i,e){e&&Kr(i).X_&&await(async function(r,o){if((function(h){return CR(h)&&h!==he.ABORTED})(o.code)){const c=r.Ta.shift();Kr(r).B_(),await kw(r,(()=>r.remoteSyncer.rejectFailedWrite(c.batchId,o))),await Yd(r)}})(i,e),jw(i)&&Lw(i)}async function o0(i,e){const t=Ue(i);t.asyncQueue.verifyOperationInProgress(),Ae($a,"RemoteStore received new credentials");const r=Ka(t);t.Ea.add(3),await su(t),r&&t.Ra.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.Ea.delete(3),await Gd(t)}async function Y2(i,e){const t=Ue(i);e?(t.Ea.delete(2),await Gd(t)):e||(t.Ea.add(2),await su(t),t.Ra.set("Unknown"))}function vl(i){return i.ma||(i.ma=(function(t,r,o){const c=Ue(t);return c.sa(),new D2(r,c.connection,c.authCredentials,c.appCheckCredentials,c.serializer,o)})(i.datastore,i.asyncQueue,{Xo:P2.bind(null,i),t_:V2.bind(null,i),r_:B2.bind(null,i),H_:U2.bind(null,i)}),i.da.push((async e=>{e?(i.ma.B_(),Hg(i)?qg(i):i.Ra.set("Unknown")):(await i.ma.stop(),Ow(i))}))),i.ma}function Kr(i){return i.fa||(i.fa=(function(t,r,o){const c=Ue(t);return c.sa(),new M2(r,c.connection,c.authCredentials,c.appCheckCredentials,c.serializer,o)})(i.datastore,i.asyncQueue,{Xo:()=>Promise.resolve(),t_:H2.bind(null,i),r_:G2.bind(null,i),ta:F2.bind(null,i),na:$2.bind(null,i)}),i.da.push((async e=>{e?(i.fa.B_(),await Yd(i)):(await i.fa.stop(),i.Ta.length>0&&(Ae($a,`Stopping write stream with ${i.Ta.length} pending writes`),i.Ta=[]))}))),i.fa}class Fg{constructor(e,t,r,o,c){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=o,this.removalCallback=c,this.deferred=new $s,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((h=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,t,r,o,c){const h=Date.now()+r,p=new Fg(e,t,h,o,c);return p.start(r),p}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new Te(he.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function $g(i,e){if(Qs("AsyncQueue",`${e}: ${i}`),_l(i))return new Te(he.UNAVAILABLE,`${e}: ${i}`);throw i}class el{static emptySet(e){return new el(e.comparator)}constructor(e){this.comparator=e?(t,r)=>e(t,r)||Me.comparator(t.key,r.key):(t,r)=>Me.comparator(t.key,r.key),this.keyedMap=Nc(),this.sortedSet=new Ot(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((t,r)=>(e(t),!1)))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof el)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const o=t.getNext().key,c=r.getNext().key;if(!o.isEqual(c))return!1}return!0}toString(){const e=[];return this.forEach((t=>{e.push(t.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const r=new el;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}class l0{constructor(){this.ga=new Ot(Me.comparator)}track(e){const t=e.doc.key,r=this.ga.get(t);r?e.type!==0&&r.type===3?this.ga=this.ga.insert(t,e):e.type===3&&r.type!==1?this.ga=this.ga.insert(t,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.ga=this.ga.insert(t,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.ga=this.ga.remove(t):e.type===1&&r.type===2?this.ga=this.ga.insert(t,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):Le(63341,{Rt:e,pa:r}):this.ga=this.ga.insert(t,e)}ya(){const e=[];return this.ga.inorderTraversal(((t,r)=>{e.push(r)})),e}}class hl{constructor(e,t,r,o,c,h,p,g,_){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=o,this.mutatedKeys=c,this.fromCache=h,this.syncStateChanged=p,this.excludesMetadataChanges=g,this.hasCachedResults=_}static fromInitialDocuments(e,t,r,o,c){const h=[];return t.forEach((p=>{h.push({type:0,doc:p})})),new hl(e,t,el.emptySet(t),h,r,o,!0,!1,c)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Ud(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let o=0;o<t.length;o++)if(t[o].type!==r[o].type||!t[o].doc.isEqual(r[o].doc))return!1;return!0}}class Q2{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some((e=>e.Da()))}}class K2{constructor(){this.queries=c0(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(t,r){const o=Ue(t),c=o.queries;o.queries=c0(),c.forEach(((h,p)=>{for(const g of p.Sa)g.onError(r)}))})(this,new Te(he.ABORTED,"Firestore shutting down"))}}function c0(){return new Qa((i=>iw(i)),Ud)}async function Pw(i,e){const t=Ue(i);let r=3;const o=e.query;let c=t.queries.get(o);c?!c.ba()&&e.Da()&&(r=2):(c=new Q2,r=e.Da()?0:1);try{switch(r){case 0:c.wa=await t.onListen(o,!0);break;case 1:c.wa=await t.onListen(o,!1);break;case 2:await t.onFirstRemoteStoreListen(o)}}catch(h){const p=$g(h,`Initialization of query '${Go(e.query)}' failed`);return void e.onError(p)}t.queries.set(o,c),c.Sa.push(e),e.va(t.onlineState),c.wa&&e.Fa(c.wa)&&Gg(t)}async function Vw(i,e){const t=Ue(i),r=e.query;let o=3;const c=t.queries.get(r);if(c){const h=c.Sa.indexOf(e);h>=0&&(c.Sa.splice(h,1),c.Sa.length===0?o=e.Da()?0:1:!c.ba()&&e.Da()&&(o=2))}switch(o){case 0:return t.queries.delete(r),t.onUnlisten(r,!0);case 1:return t.queries.delete(r),t.onUnlisten(r,!1);case 2:return t.onLastRemoteStoreUnlisten(r);default:return}}function X2(i,e){const t=Ue(i);let r=!1;for(const o of e){const c=o.query,h=t.queries.get(c);if(h){for(const p of h.Sa)p.Fa(o)&&(r=!0);h.wa=o}}r&&Gg(t)}function W2(i,e,t){const r=Ue(i),o=r.queries.get(e);if(o)for(const c of o.Sa)c.onError(t);r.queries.delete(e)}function Gg(i){i.Ca.forEach((e=>{e.next()}))}var Jp,u0;(u0=Jp||(Jp={})).Ma="default",u0.Cache="cache";class Bw{constructor(e,t,r){this.query=e,this.xa=t,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=r||{}}Fa(e){if(!this.options.includeMetadataChanges){const r=[];for(const o of e.docChanges)o.type!==3&&r.push(o);e=new hl(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),t=!0):this.La(e,this.onlineState)&&(this.ka(e),t=!0),this.Na=e,t}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let t=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),t=!0),t}La(e,t){if(!e.fromCache||!this.Da())return!0;const r=t!=="Offline";return(!this.options.qa||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const t=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}ka(e){e=hl.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==Jp.Cache}}class Uw{constructor(e){this.key=e}}class zw{constructor(e){this.key=e}}class J2{constructor(e,t){this.query=e,this.Ya=t,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=tt(),this.mutatedKeys=tt(),this.eu=sw(e),this.tu=new el(this.eu)}get nu(){return this.Ya}ru(e,t){const r=t?t.iu:new l0,o=t?t.tu:this.tu;let c=t?t.mutatedKeys:this.mutatedKeys,h=o,p=!1;const g=this.query.limitType==="F"&&o.size===this.query.limit?o.last():null,_=this.query.limitType==="L"&&o.size===this.query.limit?o.first():null;if(e.inorderTraversal(((T,E)=>{const I=o.get(T),O=zd(this.query,E)?E:null,L=!!I&&this.mutatedKeys.has(I.key),z=!!O&&(O.hasLocalMutations||this.mutatedKeys.has(O.key)&&O.hasCommittedMutations);let j=!1;I&&O?I.data.isEqual(O.data)?L!==z&&(r.track({type:3,doc:O}),j=!0):this.su(I,O)||(r.track({type:2,doc:O}),j=!0,(g&&this.eu(O,g)>0||_&&this.eu(O,_)<0)&&(p=!0)):!I&&O?(r.track({type:0,doc:O}),j=!0):I&&!O&&(r.track({type:1,doc:I}),j=!0,(g||_)&&(p=!0)),j&&(O?(h=h.add(O),c=z?c.add(T):c.delete(T)):(h=h.delete(T),c=c.delete(T)))})),this.query.limit!==null)for(;h.size>this.query.limit;){const T=this.query.limitType==="F"?h.last():h.first();h=h.delete(T.key),c=c.delete(T.key),r.track({type:1,doc:T})}return{tu:h,iu:r,Cs:p,mutatedKeys:c}}su(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r,o){const c=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const h=e.iu.ya();h.sort(((T,E)=>(function(O,L){const z=j=>{switch(j){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Le(20277,{Rt:j})}};return z(O)-z(L)})(T.type,E.type)||this.eu(T.doc,E.doc))),this.ou(r),o=o??!1;const p=t&&!o?this._u():[],g=this.Xa.size===0&&this.current&&!o?1:0,_=g!==this.Za;return this.Za=g,h.length!==0||_?{snapshot:new hl(this.query,e.tu,c,h,e.mutatedKeys,g===0,_,!1,!!r&&r.resumeToken.approximateByteSize()>0),au:p}:{au:p}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new l0,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((t=>this.Ya=this.Ya.add(t))),e.modifiedDocuments.forEach((t=>{})),e.removedDocuments.forEach((t=>this.Ya=this.Ya.delete(t))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=tt(),this.tu.forEach((r=>{this.uu(r.key)&&(this.Xa=this.Xa.add(r.key))}));const t=[];return e.forEach((r=>{this.Xa.has(r)||t.push(new zw(r))})),this.Xa.forEach((r=>{e.has(r)||t.push(new Uw(r))})),t}cu(e){this.Ya=e.Qs,this.Xa=tt();const t=this.ru(e.documents);return this.applyChanges(t,!0)}lu(){return hl.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const Yg="SyncEngine";class Z2{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class eD{constructor(e){this.key=e,this.hu=!1}}class tD{constructor(e,t,r,o,c,h){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=o,this.currentUser=c,this.maxConcurrentLimboResolutions=h,this.Pu={},this.Tu=new Qa((p=>iw(p)),Ud),this.Iu=new Map,this.Eu=new Set,this.du=new Ot(Me.comparator),this.Au=new Map,this.Ru=new Lg,this.Vu={},this.mu=new Map,this.fu=ul.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function nD(i,e,t=!0){const r=Yw(i);let o;const c=r.Tu.get(e);return c?(r.sharedClientState.addLocalQueryTarget(c.targetId),o=c.view.lu()):o=await qw(r,e,t,!0),o}async function iD(i,e){const t=Yw(i);await qw(t,e,!0,!1)}async function qw(i,e,t,r){const o=await E2(i.localStore,ms(e)),c=o.targetId,h=i.sharedClientState.addLocalQueryTarget(c,t);let p;return r&&(p=await sD(i,e,c,h==="current",o.resumeToken)),i.isPrimaryClient&&t&&Dw(i.remoteStore,o),p}async function sD(i,e,t,r,o){i.pu=(E,I,O)=>(async function(z,j,Y,F){let le=j.view.ru(Y);le.Cs&&(le=await n0(z.localStore,j.query,!1).then((({documents:A})=>j.view.ru(A,le))));const K=F&&F.targetChanges.get(j.targetId),B=F&&F.targetMismatches.get(j.targetId)!=null,ie=j.view.applyChanges(le,z.isPrimaryClient,K,B);return d0(z,j.targetId,ie.au),ie.snapshot})(i,E,I,O);const c=await n0(i.localStore,e,!0),h=new J2(e,c.Qs),p=h.ru(c.documents),g=iu.createSynthesizedTargetChangeForCurrentChange(t,r&&i.onlineState!=="Offline",o),_=h.applyChanges(p,i.isPrimaryClient,g);d0(i,t,_.au);const T=new Z2(e,t,h);return i.Tu.set(e,T),i.Iu.has(t)?i.Iu.get(t).push(e):i.Iu.set(t,[e]),_.snapshot}async function rD(i,e,t){const r=Ue(i),o=r.Tu.get(e),c=r.Iu.get(o.targetId);if(c.length>1)return r.Iu.set(o.targetId,c.filter((h=>!Ud(h,e)))),void r.Tu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(o.targetId),r.sharedClientState.isActiveQueryTarget(o.targetId)||await Xp(r.localStore,o.targetId,!1).then((()=>{r.sharedClientState.clearQueryState(o.targetId),t&&Ug(r.remoteStore,o.targetId),Zp(r,o.targetId)})).catch(gl)):(Zp(r,o.targetId),await Xp(r.localStore,o.targetId,!0))}async function aD(i,e){const t=Ue(i),r=t.Tu.get(e),o=t.Iu.get(r.targetId);t.isPrimaryClient&&o.length===1&&(t.sharedClientState.removeLocalQueryTarget(r.targetId),Ug(t.remoteStore,r.targetId))}async function oD(i,e,t){const r=mD(i);try{const o=await(function(h,p){const g=Ue(h),_=xt.now(),T=p.reduce(((O,L)=>O.add(L.key)),tt());let E,I;return g.persistence.runTransaction("Locally write mutations","readwrite",(O=>{let L=Ks(),z=tt();return g.Ns.getEntries(O,T).next((j=>{L=j,L.forEach(((Y,F)=>{F.isValidDocument()||(z=z.add(Y))}))})).next((()=>g.localDocuments.getOverlayedDocuments(O,L))).next((j=>{E=j;const Y=[];for(const F of p){const le=wR(F,E.get(F.key).overlayedDocument);le!=null&&Y.push(new Zr(F.key,le,KT(le.value.mapValue),vi.exists(!0)))}return g.mutationQueue.addMutationBatch(O,_,Y,p)})).next((j=>{I=j;const Y=j.applyToLocalDocumentSet(E,z);return g.documentOverlayCache.saveOverlays(O,j.batchId,Y)}))})).then((()=>({batchId:I.batchId,changes:aw(E)})))})(r.localStore,e);r.sharedClientState.addPendingMutation(o.batchId),(function(h,p,g){let _=h.Vu[h.currentUser.toKey()];_||(_=new Ot(et)),_=_.insert(p,g),h.Vu[h.currentUser.toKey()]=_})(r,o.batchId,t),await ru(r,o.changes),await Yd(r.remoteStore)}catch(o){const c=$g(o,"Failed to persist write");t.reject(c)}}async function Hw(i,e){const t=Ue(i);try{const r=await b2(t.localStore,e);e.targetChanges.forEach(((o,c)=>{const h=t.Au.get(c);h&&(ft(o.addedDocuments.size+o.modifiedDocuments.size+o.removedDocuments.size<=1,22616),o.addedDocuments.size>0?h.hu=!0:o.modifiedDocuments.size>0?ft(h.hu,14607):o.removedDocuments.size>0&&(ft(h.hu,42227),h.hu=!1))})),await ru(t,r,e)}catch(r){await gl(r)}}function h0(i,e,t){const r=Ue(i);if(r.isPrimaryClient&&t===0||!r.isPrimaryClient&&t===1){const o=[];r.Tu.forEach(((c,h)=>{const p=h.view.va(e);p.snapshot&&o.push(p.snapshot)})),(function(h,p){const g=Ue(h);g.onlineState=p;let _=!1;g.queries.forEach(((T,E)=>{for(const I of E.Sa)I.va(p)&&(_=!0)})),_&&Gg(g)})(r.eventManager,e),o.length&&r.Pu.H_(o),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function lD(i,e,t){const r=Ue(i);r.sharedClientState.updateQueryState(e,"rejected",t);const o=r.Au.get(e),c=o&&o.key;if(c){let h=new Ot(Me.comparator);h=h.insert(c,xn.newNoDocument(c,Ve.min()));const p=tt().add(c),g=new Fd(Ve.min(),new Map,new Ot(et),h,p);await Hw(r,g),r.du=r.du.remove(c),r.Au.delete(e),Qg(r)}else await Xp(r.localStore,e,!1).then((()=>Zp(r,e,t))).catch(gl)}async function cD(i,e){const t=Ue(i),r=e.batch.batchId;try{const o=await v2(t.localStore,e);$w(t,r,null),Fw(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),await ru(t,o)}catch(o){await gl(o)}}async function uD(i,e,t){const r=Ue(i);try{const o=await(function(h,p){const g=Ue(h);return g.persistence.runTransaction("Reject batch","readwrite-primary",(_=>{let T;return g.mutationQueue.lookupMutationBatch(_,p).next((E=>(ft(E!==null,37113),T=E.keys(),g.mutationQueue.removeMutationBatch(_,E)))).next((()=>g.mutationQueue.performConsistencyCheck(_))).next((()=>g.documentOverlayCache.removeOverlaysForBatchId(_,T,p))).next((()=>g.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(_,T))).next((()=>g.localDocuments.getDocuments(_,T)))}))})(r.localStore,e);$w(r,e,t),Fw(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),await ru(r,o)}catch(o){await gl(o)}}function Fw(i,e){(i.mu.get(e)||[]).forEach((t=>{t.resolve()})),i.mu.delete(e)}function $w(i,e,t){const r=Ue(i);let o=r.Vu[r.currentUser.toKey()];if(o){const c=o.get(e);c&&(t?c.reject(t):c.resolve(),o=o.remove(e)),r.Vu[r.currentUser.toKey()]=o}}function Zp(i,e,t=null){i.sharedClientState.removeLocalQueryTarget(e);for(const r of i.Iu.get(e))i.Tu.delete(r),t&&i.Pu.yu(r,t);i.Iu.delete(e),i.isPrimaryClient&&i.Ru.jr(e).forEach((r=>{i.Ru.containsKey(r)||Gw(i,r)}))}function Gw(i,e){i.Eu.delete(e.path.canonicalString());const t=i.du.get(e);t!==null&&(Ug(i.remoteStore,t),i.du=i.du.remove(e),i.Au.delete(t),Qg(i))}function d0(i,e,t){for(const r of t)r instanceof Uw?(i.Ru.addReference(r.key,e),hD(i,r)):r instanceof zw?(Ae(Yg,"Document no longer in limbo: "+r.key),i.Ru.removeReference(r.key,e),i.Ru.containsKey(r.key)||Gw(i,r.key)):Le(19791,{wu:r})}function hD(i,e){const t=e.key,r=t.path.canonicalString();i.du.get(t)||i.Eu.has(r)||(Ae(Yg,"New document in limbo: "+t),i.Eu.add(r),Qg(i))}function Qg(i){for(;i.Eu.size>0&&i.du.size<i.maxConcurrentLimboResolutions;){const e=i.Eu.values().next().value;i.Eu.delete(e);const t=new Me(St.fromString(e)),r=i.fu.next();i.Au.set(r,new eD(t)),i.du=i.du.insert(t,r),Dw(i.remoteStore,new Pr(ms(Rg(t.path)),r,"TargetPurposeLimboResolution",Pd.ce))}}async function ru(i,e,t){const r=Ue(i),o=[],c=[],h=[];r.Tu.isEmpty()||(r.Tu.forEach(((p,g)=>{h.push(r.pu(g,e,t).then((_=>{if((_||t)&&r.isPrimaryClient){const T=_?!_.fromCache:t?.targetChanges.get(g.targetId)?.current;r.sharedClientState.updateQueryState(g.targetId,T?"current":"not-current")}if(_){o.push(_);const T=Vg.As(g.targetId,_);c.push(T)}})))})),await Promise.all(h),r.Pu.H_(o),await(async function(g,_){const T=Ue(g);try{await T.persistence.runTransaction("notifyLocalViewChanges","readwrite",(E=>fe.forEach(_,(I=>fe.forEach(I.Es,(O=>T.persistence.referenceDelegate.addReference(E,I.targetId,O))).next((()=>fe.forEach(I.ds,(O=>T.persistence.referenceDelegate.removeReference(E,I.targetId,O)))))))))}catch(E){if(!_l(E))throw E;Ae(Bg,"Failed to update sequence numbers: "+E)}for(const E of _){const I=E.targetId;if(!E.fromCache){const O=T.Ms.get(I),L=O.snapshotVersion,z=O.withLastLimboFreeSnapshotVersion(L);T.Ms=T.Ms.insert(I,z)}}})(r.localStore,c))}async function dD(i,e){const t=Ue(i);if(!t.currentUser.isEqual(e)){Ae(Yg,"User change. New user:",e.toKey());const r=await Cw(t.localStore,e);t.currentUser=e,(function(c,h){c.mu.forEach((p=>{p.forEach((g=>{g.reject(new Te(he.CANCELLED,h))}))})),c.mu.clear()})(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await ru(t,r.Ls)}}function fD(i,e){const t=Ue(i),r=t.Au.get(e);if(r&&r.hu)return tt().add(r.key);{let o=tt();const c=t.Iu.get(e);if(!c)return o;for(const h of c){const p=t.Tu.get(h);o=o.unionWith(p.view.nu)}return o}}function Yw(i){const e=Ue(i);return e.remoteStore.remoteSyncer.applyRemoteEvent=Hw.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=fD.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=lD.bind(null,e),e.Pu.H_=X2.bind(null,e.eventManager),e.Pu.yu=W2.bind(null,e.eventManager),e}function mD(i){const e=Ue(i);return e.remoteStore.remoteSyncer.applySuccessfulWrite=cD.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=uD.bind(null,e),e}class Ed{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=$d(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,t){return null}Mu(e,t){return null}vu(e){return y2(this.persistence,new p2,e.initialUser,this.serializer)}Cu(e){return new Iw(Pg.mi,this.serializer)}Du(e){return new A2}async terminate(){this.gcScheduler?.stop(),this.indexBackfillerScheduler?.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Ed.provider={build:()=>new Ed};class pD extends Ed{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,t){ft(this.persistence.referenceDelegate instanceof Td,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new e2(r,e.asyncQueue,t)}Cu(e){const t=this.cacheSizeBytes!==void 0?Hn.withCacheSize(this.cacheSizeBytes):Hn.DEFAULT;return new Iw((r=>Td.mi(r,t)),this.serializer)}}class eg{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>h0(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=dD.bind(null,this.syncEngine),await Y2(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new K2})()}createDatastore(e){const t=$d(e.databaseInfo.databaseId),r=(function(c){return new R2(c)})(e.databaseInfo);return(function(c,h,p,g){return new k2(c,h,p,g)})(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return(function(r,o,c,h,p){return new L2(r,o,c,h,p)})(this.localStore,this.datastore,e.asyncQueue,(t=>h0(this.syncEngine,t,0)),(function(){return r0.v()?new r0:new I2})())}createSyncEngine(e,t){return(function(o,c,h,p,g,_,T){const E=new tD(o,c,h,p,g,_);return T&&(E.gu=!0),E})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){await(async function(t){const r=Ue(t);Ae($a,"RemoteStore shutting down."),r.Ea.add(5),await su(r),r.Aa.shutdown(),r.Ra.set("Unknown")})(this.remoteStore),this.datastore?.terminate(),this.eventManager?.terminate()}}eg.provider={build:()=>new eg};class Qw{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):Qs("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,t){setTimeout((()=>{this.muted||e(t)}),0)}}const Xr="FirestoreClient";class gD{constructor(e,t,r,o,c){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=o,this.user=Nn.UNAUTHENTICATED,this.clientId=Sg.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=c,this.authCredentials.start(r,(async h=>{Ae(Xr,"Received user=",h.uid),await this.authCredentialListener(h),this.user=h})),this.appCheckCredentials.start(r,(h=>(Ae(Xr,"Received new app check token=",h),this.appCheckCredentialListener(h,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new $s;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const r=$g(t,"Failed to shutdown persistence");e.reject(r)}})),e.promise}}async function Sp(i,e){i.asyncQueue.verifyOperationInProgress(),Ae(Xr,"Initializing OfflineComponentProvider");const t=i.configuration;await e.initialize(t);let r=t.initialUser;i.setCredentialChangeListener((async o=>{r.isEqual(o)||(await Cw(e.localStore,o),r=o)})),e.persistence.setDatabaseDeletedListener((()=>i.terminate())),i._offlineComponents=e}async function f0(i,e){i.asyncQueue.verifyOperationInProgress();const t=await _D(i);Ae(Xr,"Initializing OnlineComponentProvider"),await e.initialize(t,i.configuration),i.setCredentialChangeListener((r=>o0(e.remoteStore,r))),i.setAppCheckTokenChangeListener(((r,o)=>o0(e.remoteStore,o))),i._onlineComponents=e}async function _D(i){if(!i._offlineComponents)if(i._uninitializedComponentsProvider){Ae(Xr,"Using user provided OfflineComponentProvider");try{await Sp(i,i._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!(function(o){return o.name==="FirebaseError"?o.code===he.FAILED_PRECONDITION||o.code===he.UNIMPLEMENTED:!(typeof DOMException<"u"&&o instanceof DOMException)||o.code===22||o.code===20||o.code===11})(t))throw t;rl("Error using user provided cache. Falling back to memory cache: "+t),await Sp(i,new Ed)}}else Ae(Xr,"Using default OfflineComponentProvider"),await Sp(i,new pD(void 0));return i._offlineComponents}async function Kw(i){return i._onlineComponents||(i._uninitializedComponentsProvider?(Ae(Xr,"Using user provided OnlineComponentProvider"),await f0(i,i._uninitializedComponentsProvider._online)):(Ae(Xr,"Using default OnlineComponentProvider"),await f0(i,new eg))),i._onlineComponents}function yD(i){return Kw(i).then((e=>e.syncEngine))}async function Xw(i){const e=await Kw(i),t=e.eventManager;return t.onListen=nD.bind(null,e.syncEngine),t.onUnlisten=rD.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=iD.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=aD.bind(null,e.syncEngine),t}function vD(i,e,t={}){const r=new $s;return i.asyncQueue.enqueueAndForget((async()=>(function(c,h,p,g,_){const T=new Qw({next:I=>{T.Nu(),h.enqueueAndForget((()=>Vw(c,E)));const O=I.docs.has(p);!O&&I.fromCache?_.reject(new Te(he.UNAVAILABLE,"Failed to get document because the client is offline.")):O&&I.fromCache&&g&&g.source==="server"?_.reject(new Te(he.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):_.resolve(I)},error:I=>_.reject(I)}),E=new Bw(Rg(p.path),T,{includeMetadataChanges:!0,qa:!0});return Pw(c,E)})(await Xw(i),i.asyncQueue,e,t,r))),r.promise}function bD(i,e,t={}){const r=new $s;return i.asyncQueue.enqueueAndForget((async()=>(function(c,h,p,g,_){const T=new Qw({next:I=>{T.Nu(),h.enqueueAndForget((()=>Vw(c,E))),I.fromCache&&g.source==="server"?_.reject(new Te(he.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):_.resolve(I)},error:I=>_.reject(I)}),E=new Bw(p,T,{includeMetadataChanges:!0,qa:!0});return Pw(c,E)})(await Xw(i),i.asyncQueue,e,t,r))),r.promise}function Ww(i){const e={};return i.timeoutSeconds!==void 0&&(e.timeoutSeconds=i.timeoutSeconds),e}const m0=new Map;const Jw="firestore.googleapis.com",p0=!0;class g0{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new Te(he.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=Jw,this.ssl=p0}else this.host=e.host,this.ssl=e.ssl??p0;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=Aw;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<JR)throw new Te(he.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}jx("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=Ww(e.experimentalLongPollingOptions??{}),(function(r){if(r.timeoutSeconds!==void 0){if(isNaN(r.timeoutSeconds))throw new Te(he.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (must not be NaN)`);if(r.timeoutSeconds<5)throw new Te(he.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (minimum allowed value is 5)`);if(r.timeoutSeconds>30)throw new Te(he.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(r,o){return r.timeoutSeconds===o.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Qd{constructor(e,t,r,o){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=o,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new g0({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Te(he.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new Te(he.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new g0(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(r){if(!r)return new Ax;switch(r.type){case"firstParty":return new xx(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new Te(he.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(t){const r=m0.get(t);r&&(Ae("ComponentProvider","Removing Datastore"),m0.delete(t),r.terminate())})(this),Promise.resolve()}}function TD(i,e,t,r={}){i=ki(i,Qd);const o=Wr(e),c=i._getSettings(),h={...c,emulatorOptions:i._getEmulatorOptions()},p=`${e}:${t}`;o&&(lg(`https://${p}`),cg("Firestore",!0)),c.host!==Jw&&c.host!==p&&rl("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const g={...c,host:p,ssl:o,emulatorOptions:r};if(!Hr(g,h)&&(i._setSettings(g),r.mockUserToken)){let _,T;if(typeof r.mockUserToken=="string")_=r.mockUserToken,T=Nn.MOCK_USER;else{_=Q0(r.mockUserToken,i._app?.options.projectId);const E=r.mockUserToken.sub||r.mockUserToken.user_id;if(!E)throw new Te(he.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");T=new Nn(E)}i._authCredentials=new Ix(new PT(_,T))}}class Xa{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Xa(this.firestore,e,this._query)}}class Yt{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new qr(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Yt(this.firestore,e,this._key)}toJSON(){return{type:Yt._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,r){if(tu(t,Yt._jsonSchema))return new Yt(e,r||null,new Me(St.fromString(t.referencePath)))}}Yt._jsonSchemaVersion="firestore/documentReference/1.0",Yt._jsonSchema={type:ln("string",Yt._jsonSchemaVersion),referencePath:ln("string")};class qr extends Xa{constructor(e,t,r){super(e,t,Rg(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Yt(this.firestore,null,new Me(e))}withConverter(e){return new qr(this.firestore,e,this._path)}}function Fs(i,e,...t){if(i=Vt(i),VT("collection","path",e),i instanceof Qd){const r=St.fromString(e,...t);return xb(r),new qr(i,null,r)}{if(!(i instanceof Yt||i instanceof qr))throw new Te(he.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=i._path.child(St.fromString(e,...t));return xb(r),new qr(i.firestore,null,r)}}function Et(i,e,...t){if(i=Vt(i),arguments.length===1&&(e=Sg.newId()),VT("doc","path",e),i instanceof Qd){const r=St.fromString(e,...t);return Nb(r),new Yt(i,null,new Me(r))}{if(!(i instanceof Yt||i instanceof qr))throw new Te(he.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=i._path.child(St.fromString(e,...t));return Nb(r),new Yt(i.firestore,i instanceof qr?i.converter:null,new Me(r))}}const _0="AsyncQueue";class y0{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new xw(this,"async_queue_retry"),this._c=()=>{const r=Ep();r&&Ae(_0,"Visibility state changed to "+r.visibilityState),this.M_.w_()},this.ac=e;const t=Ep();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const t=Ep();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const t=new $s;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise))).then((()=>t.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Xu.push(e),this.lc())))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!_l(e))throw e;Ae(_0,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const t=this.ac.then((()=>(this.rc=!0,e().catch((r=>{throw this.nc=r,this.rc=!1,Qs("INTERNAL UNHANDLED ERROR: ",v0(r)),r})).then((r=>(this.rc=!1,r))))));return this.ac=t,t}enqueueAfterDelay(e,t,r){this.uc(),this.oc.indexOf(e)>-1&&(t=0);const o=Fg.createAndSchedule(this,e,t,r,(c=>this.hc(c)));return this.tc.push(o),o}uc(){this.nc&&Le(47125,{Pc:v0(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const t of this.tc)if(t.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((t,r)=>t.targetTimeMs-r.targetTimeMs));for(const t of this.tc)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Tc()}))}dc(e){this.oc.push(e)}hc(e){const t=this.tc.indexOf(e);this.tc.splice(t,1)}}function v0(i){let e=i.message||"";return i.stack&&(e=i.stack.includes(i.message)?i.stack:i.message+`
`+i.stack),e}class Wa extends Qd{constructor(e,t,r,o){super(e,t,r,o),this.type="firestore",this._queue=new y0,this._persistenceKey=o?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new y0(e),this._firestoreClient=void 0,await e}}}function wD(i,e){const t=typeof i=="object"?i:dg(),r=typeof i=="string"?i:pd,o=Md(t,"firestore").getImmediate({identifier:r});if(!o._initialized){const c=$0("firestore");c&&TD(o,...c)}return o}function Kg(i){if(i._terminated)throw new Te(he.FAILED_PRECONDITION,"The client has already been terminated.");return i._firestoreClient||ED(i),i._firestoreClient}function ED(i){const e=i._freezeSettings(),t=(function(o,c,h,p){return new Gx(o,c,h,p.host,p.ssl,p.experimentalForceLongPolling,p.experimentalAutoDetectLongPolling,Ww(p.experimentalLongPollingOptions),p.useFetchStreams,p.isUsingEmulator)})(i._databaseId,i._app?.options.appId||"",i._persistenceKey,e);i._componentsProvider||e.localCache?._offlineComponentProvider&&e.localCache?._onlineComponentProvider&&(i._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),i._firestoreClient=new gD(i._authCredentials,i._appCheckCredentials,i._queue,t,i._componentsProvider&&(function(o){const c=o?._online.build();return{_offline:o?._offline.build(c),_online:c}})(i._componentsProvider))}class yi{constructor(e){this._byteString=e}static fromBase64String(e){try{return new yi(An.fromBase64String(e))}catch(t){throw new Te(he.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new yi(An.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:yi._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(tu(e,yi._jsonSchema))return yi.fromBase64String(e.bytes)}}yi._jsonSchemaVersion="firestore/bytes/1.0",yi._jsonSchema={type:ln("string",yi._jsonSchemaVersion),bytes:ln("string")};class Kd{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new Te(he.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Sn(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class Xd{constructor(e){this._methodName=e}}class gs{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new Te(he.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new Te(he.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return et(this._lat,e._lat)||et(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:gs._jsonSchemaVersion}}static fromJSON(e){if(tu(e,gs._jsonSchema))return new gs(e.latitude,e.longitude)}}gs._jsonSchemaVersion="firestore/geoPoint/1.0",gs._jsonSchema={type:ln("string",gs._jsonSchemaVersion),latitude:ln("number"),longitude:ln("number")};class _s{constructor(e){this._values=(e||[]).map((t=>t))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(r,o){if(r.length!==o.length)return!1;for(let c=0;c<r.length;++c)if(r[c]!==o[c])return!1;return!0})(this._values,e._values)}toJSON(){return{type:_s._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(tu(e,_s._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((t=>typeof t=="number")))return new _s(e.vectorValues);throw new Te(he.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}_s._jsonSchemaVersion="firestore/vectorValue/1.0",_s._jsonSchema={type:ln("string",_s._jsonSchemaVersion),vectorValues:ln("object")};const SD=/^__.*__$/;class AD{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return this.fieldMask!==null?new Zr(e,this.data,this.fieldMask,t,this.fieldTransforms):new nu(e,this.data,t,this.fieldTransforms)}}class Zw{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new Zr(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function eE(i){switch(i){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Le(40011,{Ac:i})}}class Wd{constructor(e,t,r,o,c,h){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=o,c===void 0&&this.Rc(),this.fieldTransforms=c||[],this.fieldMask=h||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new Wd({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){const t=this.path?.child(e),r=this.Vc({path:t,fc:!1});return r.gc(e),r}yc(e){const t=this.path?.child(e),r=this.Vc({path:t,fc:!1});return r.Rc(),r}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return Sd(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find((t=>e.isPrefixOf(t)))!==void 0||this.fieldTransforms.find((t=>e.isPrefixOf(t.field)))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(eE(this.Ac)&&SD.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class ID{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||$d(e)}Cc(e,t,r,o=!1){return new Wd({Ac:e,methodName:t,Dc:r,path:Sn.emptyPath(),fc:!1,bc:o},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Jd(i){const e=i._freezeSettings(),t=$d(i._databaseId);return new ID(i._databaseId,!!e.ignoreUndefinedProperties,t)}function tE(i,e,t,r,o,c={}){const h=i.Cc(c.merge||c.mergeFields?2:0,e,t,o);Wg("Data must be an object, but it was:",h,r);const p=nE(r,h);let g,_;if(c.merge)g=new ti(h.fieldMask),_=h.fieldTransforms;else if(c.mergeFields){const T=[];for(const E of c.mergeFields){const I=tg(e,E,t);if(!h.contains(I))throw new Te(he.INVALID_ARGUMENT,`Field '${I}' is specified in your field mask but missing from your input data.`);sE(T,I)||T.push(I)}g=new ti(T),_=h.fieldTransforms.filter((E=>g.covers(E.field)))}else g=null,_=h.fieldTransforms;return new AD(new $n(p),g,_)}class Zd extends Xd{_toFieldTransform(e){if(e.Ac!==2)throw e.Ac===1?e.Sc(`${this._methodName}() can only appear at the top level of your update data`):e.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Zd}}function CD(i,e,t){return new Wd({Ac:3,Dc:e.settings.Dc,methodName:i._methodName,fc:t},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class Xg extends Xd{constructor(e,t){super(e),this.vc=t}_toFieldTransform(e){const t=CD(this,e,!0),r=this.vc.map((c=>bl(c,t))),o=new cl(r);return new yR(e.path,o)}isEqual(e){return e instanceof Xg&&Hr(this.vc,e.vc)}}function ND(i,e,t,r){const o=i.Cc(1,e,t);Wg("Data must be an object, but it was:",o,r);const c=[],h=$n.empty();Jr(r,((g,_)=>{const T=Jg(e,g,t);_=Vt(_);const E=o.yc(T);if(_ instanceof Zd)c.push(T);else{const I=bl(_,E);I!=null&&(c.push(T),h.set(T,I))}}));const p=new ti(c);return new Zw(h,p,o.fieldTransforms)}function xD(i,e,t,r,o,c){const h=i.Cc(1,e,t),p=[tg(e,r,t)],g=[o];if(c.length%2!=0)throw new Te(he.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let I=0;I<c.length;I+=2)p.push(tg(e,c[I])),g.push(c[I+1]);const _=[],T=$n.empty();for(let I=p.length-1;I>=0;--I)if(!sE(_,p[I])){const O=p[I];let L=g[I];L=Vt(L);const z=h.yc(O);if(L instanceof Zd)_.push(O);else{const j=bl(L,z);j!=null&&(_.push(O),T.set(O,j))}}const E=new ti(_);return new Zw(T,E,h.fieldTransforms)}function RD(i,e,t,r=!1){return bl(t,i.Cc(r?4:3,e))}function bl(i,e){if(iE(i=Vt(i)))return Wg("Unsupported field value:",e,i),nE(i,e);if(i instanceof Xd)return(function(r,o){if(!eE(o.Ac))throw o.Sc(`${r._methodName}() can only be used with update() and set()`);if(!o.path)throw o.Sc(`${r._methodName}() is not currently supported inside arrays`);const c=r._toFieldTransform(o);c&&o.fieldTransforms.push(c)})(i,e),null;if(i===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),i instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return(function(r,o){const c=[];let h=0;for(const p of r){let g=bl(p,o.wc(h));g==null&&(g={nullValue:"NULL_VALUE"}),c.push(g),h++}return{arrayValue:{values:c}}})(i,e)}return(function(r,o){if((r=Vt(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return pR(o.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const c=xt.fromDate(r);return{timestampValue:bd(o.serializer,c)}}if(r instanceof xt){const c=new xt(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:bd(o.serializer,c)}}if(r instanceof gs)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof yi)return{bytesValue:yw(o.serializer,r._byteString)};if(r instanceof Yt){const c=o.databaseId,h=r.firestore._databaseId;if(!h.isEqual(c))throw o.Sc(`Document reference is for database ${h.projectId}/${h.database} but should be for database ${c.projectId}/${c.database}`);return{referenceValue:jg(r.firestore._databaseId||o.databaseId,r._key.path)}}if(r instanceof _s)return(function(h,p){return{mapValue:{fields:{[YT]:{stringValue:QT},[gd]:{arrayValue:{values:h.toArray().map((_=>{if(typeof _!="number")throw p.Sc("VectorValues must only contain numeric values.");return Dg(p.serializer,_)}))}}}}}})(r,o);throw o.Sc(`Unsupported field value: ${Ld(r)}`)})(i,e)}function nE(i,e){const t={};return zT(i)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Jr(i,((r,o)=>{const c=bl(o,e.mc(r));c!=null&&(t[r]=c)})),{mapValue:{fields:t}}}function iE(i){return!(typeof i!="object"||i===null||i instanceof Array||i instanceof Date||i instanceof xt||i instanceof gs||i instanceof yi||i instanceof Yt||i instanceof Xd||i instanceof _s)}function Wg(i,e,t){if(!iE(t)||!BT(t)){const r=Ld(t);throw r==="an object"?e.Sc(i+" a custom object"):e.Sc(i+" "+r)}}function tg(i,e,t){if((e=Vt(e))instanceof Kd)return e._internalPath;if(typeof e=="string")return Jg(i,e);throw Sd("Field path arguments must be of type string or ",i,!1,void 0,t)}const DD=new RegExp("[~\\*/\\[\\]]");function Jg(i,e,t){if(e.search(DD)>=0)throw Sd(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,i,!1,void 0,t);try{return new Kd(...e.split("."))._internalPath}catch{throw Sd(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,i,!1,void 0,t)}}function Sd(i,e,t,r,o){const c=r&&!r.isEmpty(),h=o!==void 0;let p=`Function ${e}() called with invalid data`;t&&(p+=" (via `toFirestore()`)"),p+=". ";let g="";return(c||h)&&(g+=" (found",c&&(g+=` in field ${r}`),h&&(g+=` in document ${o}`),g+=")"),new Te(he.INVALID_ARGUMENT,p+i+g)}function sE(i,e){return i.some((t=>t.isEqual(e)))}class rE{constructor(e,t,r,o,c){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=o,this._converter=c}get id(){return this._key.path.lastSegment()}get ref(){return new Yt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new MD(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(ef("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class MD extends rE{data(){return super.data()}}function ef(i,e){return typeof e=="string"?Jg(i,e):e instanceof Kd?e._internalPath:e._delegate._internalPath}function OD(i){if(i.limitType==="L"&&i.explicitOrderBy.length===0)throw new Te(he.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Zg{}class aE extends Zg{}function Pc(i,e,...t){let r=[];e instanceof Zg&&r.push(e),r=r.concat(t),(function(c){const h=c.filter((g=>g instanceof e_)).length,p=c.filter((g=>g instanceof tf)).length;if(h>1||h>0&&p>0)throw new Te(he.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(r);for(const o of r)i=o._apply(i);return i}class tf extends aE{constructor(e,t,r){super(),this._field=e,this._op=t,this._value=r,this.type="where"}static _create(e,t,r){return new tf(e,t,r)}_apply(e){const t=this._parse(e);return lE(e._query,t),new Xa(e.firestore,e.converter,Fp(e._query,t))}_parse(e){const t=Jd(e.firestore);return(function(c,h,p,g,_,T,E){let I;if(_.isKeyField()){if(T==="array-contains"||T==="array-contains-any")throw new Te(he.INVALID_ARGUMENT,`Invalid Query. You can't perform '${T}' queries on documentId().`);if(T==="in"||T==="not-in"){T0(E,T);const L=[];for(const z of E)L.push(b0(g,c,z));I={arrayValue:{values:L}}}else I=b0(g,c,E)}else T!=="in"&&T!=="not-in"&&T!=="array-contains-any"||T0(E,T),I=RD(p,h,E,T==="in"||T==="not-in");return on.create(_,T,I)})(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}}function Vc(i,e,t){const r=e,o=ef("where",i);return tf._create(o,r,t)}class e_ extends Zg{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new e_(e,t)}_parse(e){const t=this._queryConstraints.map((r=>r._parse(e))).filter((r=>r.getFilters().length>0));return t.length===1?t[0]:ji.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return t.getFilters().length===0?e:((function(o,c){let h=o;const p=c.getFlattenedFilters();for(const g of p)lE(h,g),h=Fp(h,g)})(e._query,t),new Xa(e.firestore,e.converter,Fp(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class t_ extends aE{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new t_(e,t)}_apply(e){const t=(function(o,c,h){if(o.startAt!==null)throw new Te(he.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(o.endAt!==null)throw new Te(he.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Yc(c,h)})(e._query,this._field,this._direction);return new Xa(e.firestore,e.converter,(function(o,c){const h=o.explicitOrderBy.concat([c]);return new yl(o.path,o.collectionGroup,h,o.filters.slice(),o.limit,o.limitType,o.startAt,o.endAt)})(e._query,t))}}function oE(i,e="asc"){const t=e,r=ef("orderBy",i);return t_._create(r,t)}function b0(i,e,t){if(typeof(t=Vt(t))=="string"){if(t==="")throw new Te(he.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!nw(e)&&t.indexOf("/")!==-1)throw new Te(he.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const r=e.path.child(St.fromString(t));if(!Me.isDocumentKey(r))throw new Te(he.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Pb(i,new Me(r))}if(t instanceof Yt)return Pb(i,t._key);throw new Te(he.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Ld(t)}.`)}function T0(i,e){if(!Array.isArray(i)||i.length===0)throw new Te(he.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function lE(i,e){const t=(function(o,c){for(const h of o)for(const p of h.getFlattenedFilters())if(c.indexOf(p.op)>=0)return p.op;return null})(i.filters,(function(o){switch(o){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(t!==null)throw t===e.op?new Te(he.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new Te(he.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}class kD{convertValue(e,t="none"){switch(Qr(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Gt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Yr(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw Le(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const r={};return Jr(e,((o,c)=>{r[o]=this.convertValue(c,t)})),r}convertVectorValue(e){const t=e.fields?.[gd].arrayValue?.values?.map((r=>Gt(r.doubleValue)));return new _s(t)}convertGeoPoint(e){return new gs(Gt(e.latitude),Gt(e.longitude))}convertArray(e,t){return(e.values||[]).map((r=>this.convertValue(r,t)))}convertServerTimestamp(e,t){switch(t){case"previous":const r=Bd(e);return r==null?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(Fc(e));default:return null}}convertTimestamp(e){const t=Gr(e);return new xt(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=St.fromString(e);ft(Sw(r),9688,{name:e});const o=new $c(r.get(1),r.get(3)),c=new Me(r.popFirst(5));return o.isEqual(t)||Qs(`Document ${c} contains a document reference within a different database (${o.projectId}/${o.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),c}}function cE(i,e,t){let r;return r=i?t&&(t.merge||t.mergeFields)?i.toFirestore(e,t):i.toFirestore(e):e,r}class Rc{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Ba extends rE{constructor(e,t,r,o,c,h){super(e,t,r,o,h),this._firestore=e,this._firestoreImpl=e,this.metadata=c}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new id(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(ef("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new Te(he.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,t={};return t.type=Ba._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?t:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t)}}Ba._jsonSchemaVersion="firestore/documentSnapshot/1.0",Ba._jsonSchema={type:ln("string",Ba._jsonSchemaVersion),bundleSource:ln("string","DocumentSnapshot"),bundleName:ln("string"),bundle:ln("string")};class id extends Ba{data(e={}){return super.data(e)}}class tl{constructor(e,t,r,o){this._firestore=e,this._userDataWriter=t,this._snapshot=o,this.metadata=new Rc(o.hasPendingWrites,o.fromCache),this.query=r}get docs(){const e=[];return this.forEach((t=>e.push(t))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach((r=>{e.call(t,new id(this._firestore,this._userDataWriter,r.key,r,new Rc(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new Te(he.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=(function(o,c){if(o._snapshot.oldDocs.isEmpty()){let h=0;return o._snapshot.docChanges.map((p=>{const g=new id(o._firestore,o._userDataWriter,p.doc.key,p.doc,new Rc(o._snapshot.mutatedKeys.has(p.doc.key),o._snapshot.fromCache),o.query.converter);return p.doc,{type:"added",doc:g,oldIndex:-1,newIndex:h++}}))}{let h=o._snapshot.oldDocs;return o._snapshot.docChanges.filter((p=>c||p.type!==3)).map((p=>{const g=new id(o._firestore,o._userDataWriter,p.doc.key,p.doc,new Rc(o._snapshot.mutatedKeys.has(p.doc.key),o._snapshot.fromCache),o.query.converter);let _=-1,T=-1;return p.type!==0&&(_=h.indexOf(p.doc.key),h=h.delete(p.doc.key)),p.type!==1&&(h=h.add(p.doc),T=h.indexOf(p.doc.key)),{type:jD(p.type),doc:g,oldIndex:_,newIndex:T}}))}})(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new Te(he.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=tl._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=Sg.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const t=[],r=[],o=[];return this.docs.forEach((c=>{c._document!==null&&(t.push(c._document),r.push(this._userDataWriter.convertObjectMap(c._document.data.value.mapValue.fields,"previous")),o.push(c.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function jD(i){switch(i){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Le(61501,{type:i})}}function Ua(i){i=ki(i,Yt);const e=ki(i.firestore,Wa);return vD(Kg(e),i._key).then((t=>LD(e,i,t)))}tl._jsonSchemaVersion="firestore/querySnapshot/1.0",tl._jsonSchema={type:ln("string",tl._jsonSchemaVersion),bundleSource:ln("string","QuerySnapshot"),bundleName:ln("string"),bundle:ln("string")};class uE extends kD{constructor(e){super(),this.firestore=e}convertBytes(e){return new yi(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Yt(this.firestore,null,t)}}function Bc(i){i=ki(i,Xa);const e=ki(i.firestore,Wa),t=Kg(e),r=new uE(e);return OD(i._query),bD(t,i._query).then((o=>new tl(e,r,i,o)))}function nl(i,e,t){i=ki(i,Yt);const r=ki(i.firestore,Wa),o=cE(i.converter,e,t);return nf(r,[tE(Jd(r),"setDoc",i._key,o,i.converter!==null,t).toMutation(i._key,vi.none())])}function Fn(i,e,t,...r){i=ki(i,Yt);const o=ki(i.firestore,Wa),c=Jd(o);let h;return h=typeof(e=Vt(e))=="string"||e instanceof Kd?xD(c,"updateDoc",i._key,e,t,r):ND(c,"updateDoc",i._key,e),nf(o,[h.toMutation(i._key,vi.exists(!0))])}function n_(i){return nf(ki(i.firestore,Wa),[new Mg(i._key,vi.none())])}function hE(i,e){const t=ki(i.firestore,Wa),r=Et(i),o=cE(i.converter,e);return nf(t,[tE(Jd(i.firestore),"addDoc",r._key,o,i.converter!==null,{}).toMutation(r._key,vi.exists(!1))]).then((()=>r))}function nf(i,e){return(function(r,o){const c=new $s;return r.asyncQueue.enqueueAndForget((async()=>oD(await yD(r),o,c))),c.promise})(Kg(i),e)}function LD(i,e,t){const r=t.docs.get(e._key),o=new uE(i);return new Ba(i,o,e._key,r,new Rc(t.hasPendingWrites,t.fromCache),e.converter)}function PD(...i){return new Xg("arrayUnion",i)}(function(e,t=!0){(function(o){pl=o})(Ya),qa(new Fr("firestore",((r,{instanceIdentifier:o,options:c})=>{const h=r.getProvider("app").getImmediate(),p=new Wa(new Cx(r.getProvider("auth-internal")),new Rx(h,r.getProvider("app-check-internal")),(function(_,T){if(!Object.prototype.hasOwnProperty.apply(_.options,["projectId"]))throw new Te(he.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new $c(_.options.projectId,T)})(h,o),h);return c={useFetchStreams:t,...c},p._setSettings(c),p}),"PUBLIC").setMultipleInstances(!0)),ds(Sb,Ab,e),ds(Sb,Ab,"esm2020")})();const dE="firebasestorage.googleapis.com",fE="storageBucket",VD=120*1e3,BD=600*1e3;class zt extends bs{constructor(e,t,r=0){super(Ap(e),`Firebase Storage: ${t} (${Ap(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,zt.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return Ap(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var Bt;(function(i){i.UNKNOWN="unknown",i.OBJECT_NOT_FOUND="object-not-found",i.BUCKET_NOT_FOUND="bucket-not-found",i.PROJECT_NOT_FOUND="project-not-found",i.QUOTA_EXCEEDED="quota-exceeded",i.UNAUTHENTICATED="unauthenticated",i.UNAUTHORIZED="unauthorized",i.UNAUTHORIZED_APP="unauthorized-app",i.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",i.INVALID_CHECKSUM="invalid-checksum",i.CANCELED="canceled",i.INVALID_EVENT_NAME="invalid-event-name",i.INVALID_URL="invalid-url",i.INVALID_DEFAULT_BUCKET="invalid-default-bucket",i.NO_DEFAULT_BUCKET="no-default-bucket",i.CANNOT_SLICE_BLOB="cannot-slice-blob",i.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",i.NO_DOWNLOAD_URL="no-download-url",i.INVALID_ARGUMENT="invalid-argument",i.INVALID_ARGUMENT_COUNT="invalid-argument-count",i.APP_DELETED="app-deleted",i.INVALID_ROOT_OPERATION="invalid-root-operation",i.INVALID_FORMAT="invalid-format",i.INTERNAL_ERROR="internal-error",i.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(Bt||(Bt={}));function Ap(i){return"storage/"+i}function i_(){const i="An unknown error occurred, please check the error payload for server response.";return new zt(Bt.UNKNOWN,i)}function UD(i){return new zt(Bt.OBJECT_NOT_FOUND,"Object '"+i+"' does not exist.")}function zD(i){return new zt(Bt.QUOTA_EXCEEDED,"Quota for bucket '"+i+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function qD(){const i="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new zt(Bt.UNAUTHENTICATED,i)}function HD(){return new zt(Bt.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function FD(i){return new zt(Bt.UNAUTHORIZED,"User does not have permission to access '"+i+"'.")}function $D(){return new zt(Bt.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function GD(){return new zt(Bt.CANCELED,"User canceled the upload/download.")}function YD(i){return new zt(Bt.INVALID_URL,"Invalid URL '"+i+"'.")}function QD(i){return new zt(Bt.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+i+"'.")}function KD(){return new zt(Bt.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+fE+"' property when initializing the app?")}function XD(){return new zt(Bt.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function WD(){return new zt(Bt.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function JD(i){return new zt(Bt.UNSUPPORTED_ENVIRONMENT,`${i} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function ng(i){return new zt(Bt.INVALID_ARGUMENT,i)}function mE(){return new zt(Bt.APP_DELETED,"The Firebase app was deleted.")}function ZD(i){return new zt(Bt.INVALID_ROOT_OPERATION,"The operation '"+i+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function Uc(i,e){return new zt(Bt.INVALID_FORMAT,"String does not match format '"+i+"': "+e)}function Ic(i){throw new zt(Bt.INTERNAL_ERROR,"Internal error: "+i)}class ni{constructor(e,t){this.bucket=e,this.path_=t}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,t){let r;try{r=ni.makeFromUrl(e,t)}catch{return new ni(e,"")}if(r.path==="")return r;throw QD(e)}static makeFromUrl(e,t){let r=null;const o="([A-Za-z0-9.\\-_]+)";function c(K){K.path.charAt(K.path.length-1)==="/"&&(K.path_=K.path_.slice(0,-1))}const h="(/(.*))?$",p=new RegExp("^gs://"+o+h,"i"),g={bucket:1,path:3};function _(K){K.path_=decodeURIComponent(K.path)}const T="v[A-Za-z0-9_]+",E=t.replace(/[.]/g,"\\."),I="(/([^?#]*).*)?$",O=new RegExp(`^https?://${E}/${T}/b/${o}/o${I}`,"i"),L={bucket:1,path:3},z=t===dE?"(?:storage.googleapis.com|storage.cloud.google.com)":t,j="([^?#]*)",Y=new RegExp(`^https?://${z}/${o}/${j}`,"i"),le=[{regex:p,indices:g,postModify:c},{regex:O,indices:L,postModify:_},{regex:Y,indices:{bucket:1,path:2},postModify:_}];for(let K=0;K<le.length;K++){const B=le[K],ie=B.regex.exec(e);if(ie){const A=ie[B.indices.bucket];let w=ie[B.indices.path];w||(w=""),r=new ni(A,w),B.postModify(r);break}}if(r==null)throw YD(e);return r}}class eM{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}function tM(i,e,t){let r=1,o=null,c=null,h=!1,p=0;function g(){return p===2}let _=!1;function T(...j){_||(_=!0,e.apply(null,j))}function E(j){o=setTimeout(()=>{o=null,i(O,g())},j)}function I(){c&&clearTimeout(c)}function O(j,...Y){if(_){I();return}if(j){I(),T.call(null,j,...Y);return}if(g()||h){I(),T.call(null,j,...Y);return}r<64&&(r*=2);let le;p===1?(p=2,le=0):le=(r+Math.random())*1e3,E(le)}let L=!1;function z(j){L||(L=!0,I(),!_&&(o!==null?(j||(p=2),clearTimeout(o),E(0)):j||(p=1)))}return E(0),c=setTimeout(()=>{h=!0,z(!0)},t),z}function nM(i){i(!1)}function iM(i){return i!==void 0}function sM(i){return typeof i=="object"&&!Array.isArray(i)}function s_(i){return typeof i=="string"||i instanceof String}function w0(i){return r_()&&i instanceof Blob}function r_(){return typeof Blob<"u"}function E0(i,e,t,r){if(r<e)throw ng(`Invalid value for '${i}'. Expected ${e} or greater.`);if(r>t)throw ng(`Invalid value for '${i}'. Expected ${t} or less.`)}function sf(i,e,t){let r=e;return t==null&&(r=`https://${e}`),`${t}://${r}/v0${i}`}function pE(i){const e=encodeURIComponent;let t="?";for(const r in i)if(i.hasOwnProperty(r)){const o=e(r)+"="+e(i[r]);t=t+o+"&"}return t=t.slice(0,-1),t}var za;(function(i){i[i.NO_ERROR=0]="NO_ERROR",i[i.NETWORK_ERROR=1]="NETWORK_ERROR",i[i.ABORT=2]="ABORT"})(za||(za={}));function rM(i,e){const t=i>=500&&i<600,o=[408,429].indexOf(i)!==-1,c=e.indexOf(i)!==-1;return t||o||c}class aM{constructor(e,t,r,o,c,h,p,g,_,T,E,I=!0,O=!1){this.url_=e,this.method_=t,this.headers_=r,this.body_=o,this.successCodes_=c,this.additionalRetryCodes_=h,this.callback_=p,this.errorCallback_=g,this.timeout_=_,this.progressCallback_=T,this.connectionFactory_=E,this.retry=I,this.isUsingEmulator=O,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((L,z)=>{this.resolve_=L,this.reject_=z,this.start_()})}start_(){const e=(r,o)=>{if(o){r(!1,new Fh(!1,null,!0));return}const c=this.connectionFactory_();this.pendingConnection_=c;const h=p=>{const g=p.loaded,_=p.lengthComputable?p.total:-1;this.progressCallback_!==null&&this.progressCallback_(g,_)};this.progressCallback_!==null&&c.addUploadProgressListener(h),c.send(this.url_,this.method_,this.isUsingEmulator,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&c.removeUploadProgressListener(h),this.pendingConnection_=null;const p=c.getErrorCode()===za.NO_ERROR,g=c.getStatus();if(!p||rM(g,this.additionalRetryCodes_)&&this.retry){const T=c.getErrorCode()===za.ABORT;r(!1,new Fh(!1,null,T));return}const _=this.successCodes_.indexOf(g)!==-1;r(!0,new Fh(_,c))})},t=(r,o)=>{const c=this.resolve_,h=this.reject_,p=o.connection;if(o.wasSuccessCode)try{const g=this.callback_(p,p.getResponse());iM(g)?c(g):c()}catch(g){h(g)}else if(p!==null){const g=i_();g.serverResponse=p.getErrorText(),this.errorCallback_?h(this.errorCallback_(p,g)):h(g)}else if(o.canceled){const g=this.appDelete_?mE():GD();h(g)}else{const g=$D();h(g)}};this.canceled_?t(!1,new Fh(!1,null,!0)):this.backoffId_=tM(e,t,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&nM(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class Fh{constructor(e,t,r){this.wasSuccessCode=e,this.connection=t,this.canceled=!!r}}function oM(i,e){e!==null&&e.length>0&&(i.Authorization="Firebase "+e)}function lM(i,e){i["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function cM(i,e){e&&(i["X-Firebase-GMPID"]=e)}function uM(i,e){e!==null&&(i["X-Firebase-AppCheck"]=e)}function hM(i,e,t,r,o,c,h=!0,p=!1){const g=pE(i.urlParams),_=i.url+g,T=Object.assign({},i.headers);return cM(T,e),oM(T,t),lM(T,c),uM(T,r),new aM(_,i.method,T,i.body,i.successCodes,i.additionalRetryCodes,i.handler,i.errorHandler,i.timeout,i.progressCallback,o,h,p)}function dM(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function fM(...i){const e=dM();if(e!==void 0){const t=new e;for(let r=0;r<i.length;r++)t.append(i[r]);return t.getBlob()}else{if(r_())return new Blob(i);throw new zt(Bt.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function mM(i,e,t){return i.webkitSlice?i.webkitSlice(e,t):i.mozSlice?i.mozSlice(e,t):i.slice?i.slice(e,t):null}function pM(i){if(typeof atob>"u")throw JD("base-64");return atob(i)}const us={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class Ip{constructor(e,t){this.data=e,this.contentType=t||null}}function gM(i,e){switch(i){case us.RAW:return new Ip(gE(e));case us.BASE64:case us.BASE64URL:return new Ip(_E(i,e));case us.DATA_URL:return new Ip(yM(e),vM(e))}throw i_()}function gE(i){const e=[];for(let t=0;t<i.length;t++){let r=i.charCodeAt(t);if(r<=127)e.push(r);else if(r<=2047)e.push(192|r>>6,128|r&63);else if((r&64512)===55296)if(!(t<i.length-1&&(i.charCodeAt(t+1)&64512)===56320))e.push(239,191,189);else{const c=r,h=i.charCodeAt(++t);r=65536|(c&1023)<<10|h&1023,e.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|r&63)}else(r&64512)===56320?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|r&63)}return new Uint8Array(e)}function _M(i){let e;try{e=decodeURIComponent(i)}catch{throw Uc(us.DATA_URL,"Malformed data URL.")}return gE(e)}function _E(i,e){switch(i){case us.BASE64:{const o=e.indexOf("-")!==-1,c=e.indexOf("_")!==-1;if(o||c)throw Uc(i,"Invalid character '"+(o?"-":"_")+"' found: is it base64url encoded?");break}case us.BASE64URL:{const o=e.indexOf("+")!==-1,c=e.indexOf("/")!==-1;if(o||c)throw Uc(i,"Invalid character '"+(o?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let t;try{t=pM(e)}catch(o){throw o.message.includes("polyfill")?o:Uc(i,"Invalid character found")}const r=new Uint8Array(t.length);for(let o=0;o<t.length;o++)r[o]=t.charCodeAt(o);return r}class yE{constructor(e){this.base64=!1,this.contentType=null;const t=e.match(/^data:([^,]+)?,/);if(t===null)throw Uc(us.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const r=t[1]||null;r!=null&&(this.base64=bM(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-7):r),this.rest=e.substring(e.indexOf(",")+1)}}function yM(i){const e=new yE(i);return e.base64?_E(us.BASE64,e.rest):_M(e.rest)}function vM(i){return new yE(i).contentType}function bM(i,e){return i.length>=e.length?i.substring(i.length-e.length)===e:!1}class Lr{constructor(e,t){let r=0,o="";w0(e)?(this.data_=e,r=e.size,o=e.type):e instanceof ArrayBuffer?(t?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),r=this.data_.length):e instanceof Uint8Array&&(t?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),r=e.length),this.size_=r,this.type_=o}size(){return this.size_}type(){return this.type_}slice(e,t){if(w0(this.data_)){const r=this.data_,o=mM(r,e,t);return o===null?null:new Lr(o)}else{const r=new Uint8Array(this.data_.buffer,e,t-e);return new Lr(r,!0)}}static getBlob(...e){if(r_()){const t=e.map(r=>r instanceof Lr?r.data_:r);return new Lr(fM.apply(null,t))}else{const t=e.map(h=>s_(h)?gM(us.RAW,h).data:h.data_);let r=0;t.forEach(h=>{r+=h.byteLength});const o=new Uint8Array(r);let c=0;return t.forEach(h=>{for(let p=0;p<h.length;p++)o[c++]=h[p]}),new Lr(o,!0)}}uploadData(){return this.data_}}function vE(i){let e;try{e=JSON.parse(i)}catch{return null}return sM(e)?e:null}function TM(i){if(i.length===0)return null;const e=i.lastIndexOf("/");return e===-1?"":i.slice(0,e)}function wM(i,e){const t=e.split("/").filter(r=>r.length>0).join("/");return i.length===0?t:i+"/"+t}function bE(i){const e=i.lastIndexOf("/",i.length-2);return e===-1?i:i.slice(e+1)}function EM(i,e){return e}class jn{constructor(e,t,r,o){this.server=e,this.local=t||e,this.writable=!!r,this.xform=o||EM}}let $h=null;function SM(i){return!s_(i)||i.length<2?i:bE(i)}function TE(){if($h)return $h;const i=[];i.push(new jn("bucket")),i.push(new jn("generation")),i.push(new jn("metageneration")),i.push(new jn("name","fullPath",!0));function e(c,h){return SM(h)}const t=new jn("name");t.xform=e,i.push(t);function r(c,h){return h!==void 0?Number(h):h}const o=new jn("size");return o.xform=r,i.push(o),i.push(new jn("timeCreated")),i.push(new jn("updated")),i.push(new jn("md5Hash",null,!0)),i.push(new jn("cacheControl",null,!0)),i.push(new jn("contentDisposition",null,!0)),i.push(new jn("contentEncoding",null,!0)),i.push(new jn("contentLanguage",null,!0)),i.push(new jn("contentType",null,!0)),i.push(new jn("metadata","customMetadata",!0)),$h=i,$h}function AM(i,e){function t(){const r=i.bucket,o=i.fullPath,c=new ni(r,o);return e._makeStorageReference(c)}Object.defineProperty(i,"ref",{get:t})}function IM(i,e,t){const r={};r.type="file";const o=t.length;for(let c=0;c<o;c++){const h=t[c];r[h.local]=h.xform(r,e[h.server])}return AM(r,i),r}function wE(i,e,t){const r=vE(e);return r===null?null:IM(i,r,t)}function CM(i,e,t,r){const o=vE(e);if(o===null||!s_(o.downloadTokens))return null;const c=o.downloadTokens;if(c.length===0)return null;const h=encodeURIComponent;return c.split(",").map(_=>{const T=i.bucket,E=i.fullPath,I="/b/"+h(T)+"/o/"+h(E),O=sf(I,t,r),L=pE({alt:"media",token:_});return O+L})[0]}function NM(i,e){const t={},r=e.length;for(let o=0;o<r;o++){const c=e[o];c.writable&&(t[c.server]=i[c.local])}return JSON.stringify(t)}class a_{constructor(e,t,r,o){this.url=e,this.method=t,this.handler=r,this.timeout=o,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}function EE(i){if(!i)throw i_()}function xM(i,e){function t(r,o){const c=wE(i,o,e);return EE(c!==null),c}return t}function RM(i,e){function t(r,o){const c=wE(i,o,e);return EE(c!==null),CM(c,o,i.host,i._protocol)}return t}function SE(i){function e(t,r){let o;return t.getStatus()===401?t.getErrorText().includes("Firebase App Check token is invalid")?o=HD():o=qD():t.getStatus()===402?o=zD(i.bucket):t.getStatus()===403?o=FD(i.path):o=r,o.status=t.getStatus(),o.serverResponse=r.serverResponse,o}return e}function AE(i){const e=SE(i);function t(r,o){let c=e(r,o);return r.getStatus()===404&&(c=UD(i.path)),c.serverResponse=o.serverResponse,c}return t}function DM(i,e,t){const r=e.fullServerUrl(),o=sf(r,i.host,i._protocol),c="GET",h=i.maxOperationRetryTime,p=new a_(o,c,RM(i,t),h);return p.errorHandler=AE(e),p}function MM(i,e){const t=e.fullServerUrl(),r=sf(t,i.host,i._protocol),o="DELETE",c=i.maxOperationRetryTime;function h(g,_){}const p=new a_(r,o,h,c);return p.successCodes=[200,204],p.errorHandler=AE(e),p}function OM(i,e){return i&&i.contentType||e&&e.type()||"application/octet-stream"}function kM(i,e,t){const r=Object.assign({},t);return r.fullPath=i.path,r.size=e.size(),r.contentType||(r.contentType=OM(null,e)),r}function jM(i,e,t,r,o){const c=e.bucketOnlyServerUrl(),h={"X-Goog-Upload-Protocol":"multipart"};function p(){let le="";for(let K=0;K<2;K++)le=le+Math.random().toString().slice(2);return le}const g=p();h["Content-Type"]="multipart/related; boundary="+g;const _=kM(e,r,o),T=NM(_,t),E="--"+g+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+T+`\r
--`+g+`\r
Content-Type: `+_.contentType+`\r
\r
`,I=`\r
--`+g+"--",O=Lr.getBlob(E,r,I);if(O===null)throw XD();const L={name:_.fullPath},z=sf(c,i.host,i._protocol),j="POST",Y=i.maxUploadRetryTime,F=new a_(z,j,xM(i,t),Y);return F.urlParams=L,F.headers=h,F.body=O.uploadData(),F.errorHandler=SE(e),F}class LM{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=za.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=za.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=za.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,t,r,o,c){if(this.sent_)throw Ic("cannot .send() more than once");if(Wr(e)&&r&&(this.xhr_.withCredentials=!0),this.sent_=!0,this.xhr_.open(t,e,!0),c!==void 0)for(const h in c)c.hasOwnProperty(h)&&this.xhr_.setRequestHeader(h,c[h].toString());return o!==void 0?this.xhr_.send(o):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw Ic("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw Ic("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw Ic("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw Ic("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",e)}}class PM extends LM{initXhr(){this.xhr_.responseType="text"}}function o_(){return new PM}class Ga{constructor(e,t){this._service=e,t instanceof ni?this._location=t:this._location=ni.makeFromUrl(t,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,t){return new Ga(e,t)}get root(){const e=new ni(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return bE(this._location.path)}get storage(){return this._service}get parent(){const e=TM(this._location.path);if(e===null)return null;const t=new ni(this._location.bucket,e);return new Ga(this._service,t)}_throwIfRoot(e){if(this._location.path==="")throw ZD(e)}}function VM(i,e,t){i._throwIfRoot("uploadBytes");const r=jM(i.storage,i._location,TE(),new Lr(e,!0),t);return i.storage.makeRequestWithTokens(r,o_).then(o=>({metadata:o,ref:i}))}function BM(i){i._throwIfRoot("getDownloadURL");const e=DM(i.storage,i._location,TE());return i.storage.makeRequestWithTokens(e,o_).then(t=>{if(t===null)throw WD();return t})}function UM(i){i._throwIfRoot("deleteObject");const e=MM(i.storage,i._location);return i.storage.makeRequestWithTokens(e,o_)}function zM(i,e){const t=wM(i._location.path,e),r=new ni(i._location.bucket,t);return new Ga(i.storage,r)}function qM(i){return/^[A-Za-z]+:\/\//.test(i)}function HM(i,e){return new Ga(i,e)}function IE(i,e){if(i instanceof l_){const t=i;if(t._bucket==null)throw KD();const r=new Ga(t,t._bucket);return e!=null?IE(r,e):r}else return e!==void 0?zM(i,e):i}function FM(i,e){if(e&&qM(e)){if(i instanceof l_)return HM(i,e);throw ng("To use ref(service, url), the first argument must be a Storage instance.")}else return IE(i,e)}function S0(i,e){const t=e?.[fE];return t==null?null:ni.makeFromBucketSpec(t,i)}function $M(i,e,t,r={}){i.host=`${e}:${t}`;const o=Wr(e);o&&(lg(`https://${i.host}/b`),cg("Storage",!0)),i._isUsingEmulator=!0,i._protocol=o?"https":"http";const{mockUserToken:c}=r;c&&(i._overrideAuthToken=typeof c=="string"?c:Q0(c,i.app.options.projectId))}class l_{constructor(e,t,r,o,c,h=!1){this.app=e,this._authProvider=t,this._appCheckProvider=r,this._url=o,this._firebaseVersion=c,this._isUsingEmulator=h,this._bucket=null,this._host=dE,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=VD,this._maxUploadRetryTime=BD,this._requests=new Set,o!=null?this._bucket=ni.makeFromBucketSpec(o,this._host):this._bucket=S0(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=ni.makeFromBucketSpec(this._url,e):this._bucket=S0(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){E0("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){E0("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const t=await e.getToken();if(t!==null)return t.accessToken}return null}async _getAppCheckToken(){if(_i(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new Ga(this,e)}_makeRequest(e,t,r,o,c=!0){if(this._deleted)return new eM(mE());{const h=hM(e,this._appId,r,o,t,this._firebaseVersion,c,this._isUsingEmulator);return this._requests.add(h),h.getPromise().then(()=>this._requests.delete(h),()=>this._requests.delete(h)),h}}async makeRequestWithTokens(e,t){const[r,o]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,t,r,o).getPromise()}}const A0="@firebase/storage",I0="0.14.0";const CE="storage";function GM(i,e,t){return i=Vt(i),VM(i,e,t)}function YM(i){return i=Vt(i),BM(i)}function QM(i){return i=Vt(i),UM(i)}function NE(i,e){return i=Vt(i),FM(i,e)}function KM(i=dg(),e){i=Vt(i);const r=Md(i,CE).getImmediate({identifier:e}),o=$0("storage");return o&&XM(r,...o),r}function XM(i,e,t,r={}){$M(i,e,t,r)}function WM(i,{instanceIdentifier:e}){const t=i.getProvider("app").getImmediate(),r=i.getProvider("auth-internal"),o=i.getProvider("app-check-internal");return new l_(t,r,o,e,Ya)}function JM(){qa(new Fr(CE,WM,"PUBLIC").setMultipleInstances(!0)),ds(A0,I0,""),ds(A0,I0,"esm2020")}JM();const ZM={apiKey:"AIzaSyD3iqoFT7CVEvDQMybjl4CFUyWDNBK9Mqg",authDomain:"go-gourmet-f36f1.firebaseapp.com",projectId:"go-gourmet-f36f1",storageBucket:"go-gourmet-f36f1.firebasestorage.app",messagingSenderId:"414957229790",appId:"1:414957229790:web:accc4a0b42440b65ccd44f"},c_=W0(ZM),Cp=Tx(c_),ct=wD(c_),xE=KM(c_),eO=new zs,RE=ee.createContext(),au=()=>{const i=ee.useContext(RE);if(!i)throw new Error("useAuth must be used within AuthProvider");return i},tO=({children:i})=>{const[e,t]=ee.useState(null),[r,o]=ee.useState(!0);ee.useEffect(()=>{const g=async T=>{if(!T)return null;const E=Et(ct,"users",T.uid),I=await Ua(E);return I.exists()?I.data():(await nl(E,{email:T.email,displayName:T.displayName,photoURL:T.photoURL,createdAt:new Date().toISOString(),householdId:null}),{email:T.email,displayName:T.displayName,photoURL:T.photoURL,createdAt:new Date().toISOString(),householdId:null})};return cN(Cp,async T=>{if(T){const E=await g(T);t({uid:T.uid,email:T.email,displayName:T.displayName,photoURL:T.photoURL,...E})}else t(null);o(!1)})},[]);const p={user:e,loading:r,signInWithGoogle:async()=>{try{const g=await RN(Cp,eO);if(g?.user)return g.user}catch(g){throw console.error("Error signing in with Google:",g),g}},signOut:async()=>{try{await uN(Cp)}catch(g){throw console.error("Error signing out:",g),g}}};return f.jsx(RE.Provider,{value:p,children:i})},DE=ee.createContext(),Ja=()=>{const i=ee.useContext(DE);if(!i)throw new Error("useHousehold must be used within HouseholdProvider");return i},nO=({children:i})=>{const{user:e}=au(),[t,r]=ee.useState(null),[o,c]=ee.useState(!0);ee.useEffect(()=>{(async()=>{if(!e){r(null),c(!1);return}try{const E=Et(ct,"users",e.uid),O=(await Ua(E)).data();if(O?.householdId){const L=Et(ct,"households",O.householdId),z=await Ua(L);z.exists()&&r({id:z.id,...z.data()})}}catch(E){console.error("Error loading household:",E)}finally{c(!1)}})()},[e]);const _={household:t,loading:o,createHousehold:async T=>{if(e)try{const E=Et(Fs(ct,"households")),I={name:T,members:[],defaultServings:4,createdBy:e.uid,createdAt:new Date().toISOString()};await nl(E,I);const O=Et(ct,"users",e.uid);return await nl(O,{householdId:E.id},{merge:!0}),r({id:E.id,...I}),E.id}catch(E){throw console.error("Error creating household:",E),E}},joinHousehold:async T=>{if(e)try{const E=Et(ct,"households",T),I=await Ua(E);if(!I.exists())throw new Error("Foyer introuvable");await Fn(E,{members:PD(e.uid)});const O=Et(ct,"users",e.uid);return await nl(O,{householdId:T},{merge:!0}),r({id:I.id,...I.data()}),T}catch(E){throw console.error("Error joining household:",E),E}},updateHousehold:async T=>{if(t)try{const E=Et(ct,"households",t.id),I={...T,updatedAt:new Date().toISOString()};await Fn(E,I),r({...t,...I})}catch(E){throw console.error("Error updating household:",E),E}}};return f.jsx(DE.Provider,{value:_,children:i})},Ad=async(i,e,t,r)=>{if(!i)return null;try{const o=Date.now(),c=i.name.split(".").pop(),h=`${t}_${o}.${c}`,p=`households/${r}/${e}/${h}`,g=NE(xE,p);return await GM(g,i),await YM(g)}catch(o){throw console.error("Error uploading image:",o),o}},Id=async i=>{if(i)try{const t=new URL(i).pathname.match(/\/o\/(.+?)\?/);if(t){const r=decodeURIComponent(t[1]),o=NE(xE,r);await QM(o)}}catch(e){throw console.error("Error deleting image:",e),e}},dl=async i=>i||null,ME=ee.createContext(),ou=()=>{const i=ee.useContext(ME);if(!i)throw new Error("useIngredients must be used within IngredientProvider");return i},hs=[{id:"fruits-legumes",label:"Fruits & Lgumes",icon:""},{id:"viandes-poissons",label:"Viandes & Poissons",icon:""},{id:"produits-laitiers",label:"Produits laitiers",icon:""},{id:"epicerie-salee",label:"picerie sale",icon:""},{id:"epicerie-sucree",label:"picerie sucre",icon:""},{id:"surgeles",label:"Surgels",icon:""},{id:"boissons",label:"Boissons",icon:""},{id:"pain-viennoiserie",label:"Pain & Viennoiserie",icon:""},{id:"condiments",label:"Condiments & Sauces",icon:""},{id:"conserves",label:"Conserves",icon:""},{id:"autres",label:"Autres",icon:""}],iO=({children:i})=>{const{household:e}=Ja(),[t,r]=ee.useState([]),[o,c]=ee.useState(!0);ee.useEffect(()=>{(async()=>{if(!e){r([]),c(!1);return}try{const O=Pc(Fs(ct,"ingredients"),Vc("householdId","==",e.id)),L=Pc(Fs(ct,"ingredients"),Vc("householdId","==","global")),[z,j]=await Promise.all([Bc(O),Bc(L)]),Y=z.docs.map(K=>({id:K.id,...K.data()})),F=j.docs.map(K=>({id:K.id,...K.data()})),le=[...Y,...F].sort((K,B)=>K.name.localeCompare(B.name));r(le)}catch(O){console.error("Error loading ingredients:",O)}finally{c(!1)}})()},[e]);const E={ingredients:t,loading:o,addIngredient:async(I,O=null)=>{if(e)try{const L=await hE(Fs(ct,"ingredients"),{name:I.name,category:I.category,householdId:e.id,createdAt:new Date().toISOString(),imageUrl:null});let z=null;O&&(z=await Ad(O,"ingredients",L.id,e.id),await Fn(L,{imageUrl:z}));const j={id:L.id,name:I.name,category:I.category,householdId:e.id,createdAt:new Date().toISOString(),imageUrl:z};return r(Y=>[...Y,j].sort((F,le)=>F.name.localeCompare(le.name))),j}catch(L){throw console.error("Error adding ingredient:",L),L}},updateIngredient:async(I,O,L=null,z=!1)=>{if(e)try{const j=Et(ct,"ingredients",I);let Y={...O};if((L||z)&&O.imageUrl&&await Id(O.imageUrl),L){const F=await Ad(L,"ingredients",I,e.id);Y.imageUrl=F}else z&&(Y.imageUrl=null);await Fn(j,Y),r(F=>F.map(le=>le.id===I?{...le,...Y}:le))}catch(j){throw console.error("Error updating ingredient:",j),j}},deleteIngredient:async I=>{try{const O=t.find(L=>L.id===I);O?.imageUrl&&await Id(O.imageUrl),await n_(Et(ct,"ingredients",I)),r(L=>L.filter(z=>z.id!==I))}catch(O){throw console.error("Error deleting ingredient:",O),O}},searchIngredients:I=>{if(!I)return t;const O=I.toLowerCase();return t.filter(L=>L.name.toLowerCase().includes(O))},getIngredientRecipes:async I=>{if(!e)return[];try{const O=Pc(Fs(ct,"recipes"),Vc("householdId","==",e.id));return(await Bc(O)).docs.map(j=>({id:j.id,...j.data()})).filter(j=>j.ingredients?.some(Y=>Y.ingredientId===I))}catch(O){return console.error("Error getting ingredient recipes:",O),[]}}};return f.jsx(ME.Provider,{value:E,children:i})},OE=ee.createContext(),Za=()=>{const i=ee.useContext(OE);if(!i)throw new Error("useRecipes must be used within RecipeProvider");return i},sO=({children:i})=>{const{household:e}=Ja(),[t,r]=ee.useState([]),[o,c]=ee.useState(!0);ee.useEffect(()=>{(async()=>{if(!e){r([]),c(!1);return}try{const O=Pc(Fs(ct,"recipes"),Vc("householdId","==",e.id),oE("createdAt","desc")),z=(await Bc(O)).docs.map(j=>({id:j.id,...j.data()}));r(z)}catch(O){console.error("Error loading recipes:",O)}finally{c(!1)}})()},[e]);const h=I=>{if(Array.isArray(I))return I.map(O=>typeof O=="object"&&O!==null?h(O):O===void 0?null:O);if(typeof I=="object"&&I!==null){const O={};for(const[L,z]of Object.entries(I))z===void 0?O[L]=null:typeof z=="object"&&z!==null?O[L]=h(z):O[L]=z;return O}return I},E={recipes:t,loading:o,addRecipe:async(I,O=null)=>{if(e)try{const L=h(I),z=await hE(Fs(ct,"recipes"),{...L,householdId:e.id,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString(),imageUrl:null});let j=null;O&&(j=await Ad(O,"recipes",z.id,e.id),await Fn(z,{imageUrl:j}));const Y={id:z.id,...I,householdId:e.id,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString(),imageUrl:j};return r(F=>[Y,...F]),Y}catch(L){throw console.error("Error adding recipe:",L),L}},updateRecipe:async(I,O,L=null,z=!1)=>{if(e)try{const j=Et(ct,"recipes",I);let F={...h(O),updatedAt:new Date().toISOString()};if((L||z)&&O.imageUrl&&await Id(O.imageUrl),L){const le=await Ad(L,"recipes",I,e.id);F.imageUrl=le}else z&&(F.imageUrl=null);await Fn(j,F),r(le=>le.map(K=>K.id===I?{...K,...F}:K))}catch(j){throw console.error("Error updating recipe:",j),j}},deleteRecipe:async I=>{try{const O=t.find(L=>L.id===I);O?.imageUrl&&await Id(O.imageUrl),await n_(Et(ct,"recipes",I)),r(L=>L.filter(z=>z.id!==I))}catch(O){throw console.error("Error deleting recipe:",O),O}},getRecipe:async I=>{try{const O=Et(ct,"recipes",I),L=await Ua(O);return L.exists()?{id:L.id,...L.data()}:null}catch(O){throw console.error("Error getting recipe:",O),O}}};return f.jsx(OE.Provider,{value:E,children:i})},kE=6048e5,rO=864e5,aO=6e4,oO=36e5,lO=1e3,C0=Symbol.for("constructDateFrom");function gn(i,e){return typeof i=="function"?i(e):i&&typeof i=="object"&&C0 in i?i[C0](e):i instanceof Date?new i.constructor(e):new Date(e)}function kt(i,e){return gn(e||i,i)}function u_(i,e,t){const r=kt(i,t?.in);return isNaN(e)?gn(t?.in||i,NaN):(e&&r.setDate(r.getDate()+e),r)}let cO={};function eo(){return cO}function Li(i,e){const t=eo(),r=e?.weekStartsOn??e?.locale?.options?.weekStartsOn??t.weekStartsOn??t.locale?.options?.weekStartsOn??0,o=kt(i,e?.in),c=o.getDay(),h=(c<r?7:0)+c-r;return o.setDate(o.getDate()-h),o.setHours(0,0,0,0),o}function fl(i,e){return Li(i,{...e,weekStartsOn:1})}function rf(i,e){const t=kt(i,e?.in),r=t.getFullYear(),o=gn(t,0);o.setFullYear(r+1,0,4),o.setHours(0,0,0,0);const c=fl(o),h=gn(t,0);h.setFullYear(r,0,4),h.setHours(0,0,0,0);const p=fl(h);return t.getTime()>=c.getTime()?r+1:t.getTime()>=p.getTime()?r:r-1}function Cd(i){const e=kt(i),t=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()));return t.setUTCFullYear(e.getFullYear()),+i-+t}function uO(i,...e){const t=gn.bind(null,e.find(r=>typeof r=="object"));return e.map(t)}function ig(i,e){const t=kt(i,e?.in);return t.setHours(0,0,0,0),t}function hO(i,e,t){const[r,o]=uO(t?.in,i,e),c=ig(r),h=ig(o),p=+c-Cd(c),g=+h-Cd(h);return Math.round((p-g)/rO)}function dO(i,e){const t=rf(i,e),r=gn(i,0);return r.setFullYear(t,0,4),r.setHours(0,0,0,0),fl(r)}function jE(i,e,t){return u_(i,e*7,t)}function fO(i){return i instanceof Date||typeof i=="object"&&Object.prototype.toString.call(i)==="[object Date]"}function mO(i){return!(!fO(i)&&typeof i!="number"||isNaN(+kt(i)))}function pO(i,e){const t=kt(i,e?.in);return t.setHours(23,59,59,999),t}function gO(i,e){const t=kt(i,e?.in);return t.setFullYear(t.getFullYear(),0,1),t.setHours(0,0,0,0),t}function h_(i,e){const t=eo(),r=e?.weekStartsOn??e?.locale?.options?.weekStartsOn??t.weekStartsOn??t.locale?.options?.weekStartsOn??0,o=kt(i,e?.in),c=o.getDay(),h=(c<r?-7:0)+6-(c-r);return o.setDate(o.getDate()+h),o.setHours(23,59,59,999),o}const _O={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},yO=(i,e,t)=>{let r;const o=_O[i];return typeof o=="string"?r=o:e===1?r=o.one:r=o.other.replace("{{count}}",e.toString()),t?.addSuffix?t.comparison&&t.comparison>0?"in "+r:r+" ago":r};function il(i){return(e={})=>{const t=e.width?String(e.width):i.defaultWidth;return i.formats[t]||i.formats[i.defaultWidth]}}const vO={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},bO={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},TO={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},wO={date:il({formats:vO,defaultWidth:"full"}),time:il({formats:bO,defaultWidth:"full"}),dateTime:il({formats:TO,defaultWidth:"full"})},EO={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},SO=(i,e,t,r)=>EO[i];function as(i){return(e,t)=>{const r=t?.context?String(t.context):"standalone";let o;if(r==="formatting"&&i.formattingValues){const h=i.defaultFormattingWidth||i.defaultWidth,p=t?.width?String(t.width):h;o=i.formattingValues[p]||i.formattingValues[h]}else{const h=i.defaultWidth,p=t?.width?String(t.width):i.defaultWidth;o=i.values[p]||i.values[h]}const c=i.argumentCallback?i.argumentCallback(e):e;return o[c]}}const AO={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},IO={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},CO={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},NO={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},xO={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},RO={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},DO=(i,e)=>{const t=Number(i),r=t%100;if(r>20||r<10)switch(r%10){case 1:return t+"st";case 2:return t+"nd";case 3:return t+"rd"}return t+"th"},MO={ordinalNumber:DO,era:as({values:AO,defaultWidth:"wide"}),quarter:as({values:IO,defaultWidth:"wide",argumentCallback:i=>i-1}),month:as({values:CO,defaultWidth:"wide"}),day:as({values:NO,defaultWidth:"wide"}),dayPeriod:as({values:xO,defaultWidth:"wide",formattingValues:RO,defaultFormattingWidth:"wide"})};function os(i){return(e,t={})=>{const r=t.width,o=r&&i.matchPatterns[r]||i.matchPatterns[i.defaultMatchWidth],c=e.match(o);if(!c)return null;const h=c[0],p=r&&i.parsePatterns[r]||i.parsePatterns[i.defaultParseWidth],g=Array.isArray(p)?kO(p,E=>E.test(h)):OO(p,E=>E.test(h));let _;_=i.valueCallback?i.valueCallback(g):g,_=t.valueCallback?t.valueCallback(_):_;const T=e.slice(h.length);return{value:_,rest:T}}}function OO(i,e){for(const t in i)if(Object.prototype.hasOwnProperty.call(i,t)&&e(i[t]))return t}function kO(i,e){for(let t=0;t<i.length;t++)if(e(i[t]))return t}function LE(i){return(e,t={})=>{const r=e.match(i.matchPattern);if(!r)return null;const o=r[0],c=e.match(i.parsePattern);if(!c)return null;let h=i.valueCallback?i.valueCallback(c[0]):c[0];h=t.valueCallback?t.valueCallback(h):h;const p=e.slice(o.length);return{value:h,rest:p}}}const jO=/^(\d+)(th|st|nd|rd)?/i,LO=/\d+/i,PO={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},VO={any:[/^b/i,/^(a|c)/i]},BO={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},UO={any:[/1/i,/2/i,/3/i,/4/i]},zO={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},qO={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},HO={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},FO={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},$O={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},GO={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},YO={ordinalNumber:LE({matchPattern:jO,parsePattern:LO,valueCallback:i=>parseInt(i,10)}),era:os({matchPatterns:PO,defaultMatchWidth:"wide",parsePatterns:VO,defaultParseWidth:"any"}),quarter:os({matchPatterns:BO,defaultMatchWidth:"wide",parsePatterns:UO,defaultParseWidth:"any",valueCallback:i=>i+1}),month:os({matchPatterns:zO,defaultMatchWidth:"wide",parsePatterns:qO,defaultParseWidth:"any"}),day:os({matchPatterns:HO,defaultMatchWidth:"wide",parsePatterns:FO,defaultParseWidth:"any"}),dayPeriod:os({matchPatterns:$O,defaultMatchWidth:"any",parsePatterns:GO,defaultParseWidth:"any"})},PE={code:"en-US",formatDistance:yO,formatLong:wO,formatRelative:SO,localize:MO,match:YO,options:{weekStartsOn:0,firstWeekContainsDate:1}};function QO(i,e){const t=kt(i,e?.in);return hO(t,gO(t))+1}function af(i,e){const t=kt(i,e?.in),r=+fl(t)-+dO(t);return Math.round(r/kE)+1}function d_(i,e){const t=kt(i,e?.in),r=t.getFullYear(),o=eo(),c=e?.firstWeekContainsDate??e?.locale?.options?.firstWeekContainsDate??o.firstWeekContainsDate??o.locale?.options?.firstWeekContainsDate??1,h=gn(e?.in||i,0);h.setFullYear(r+1,0,c),h.setHours(0,0,0,0);const p=Li(h,e),g=gn(e?.in||i,0);g.setFullYear(r,0,c),g.setHours(0,0,0,0);const _=Li(g,e);return+t>=+p?r+1:+t>=+_?r:r-1}function KO(i,e){const t=eo(),r=e?.firstWeekContainsDate??e?.locale?.options?.firstWeekContainsDate??t.firstWeekContainsDate??t.locale?.options?.firstWeekContainsDate??1,o=d_(i,e),c=gn(e?.in||i,0);return c.setFullYear(o,0,r),c.setHours(0,0,0,0),Li(c,e)}function VE(i,e){const t=kt(i,e?.in),r=+Li(t,e)-+KO(t,e);return Math.round(r/kE)+1}function _t(i,e){const t=i<0?"-":"",r=Math.abs(i).toString().padStart(e,"0");return t+r}const Rr={y(i,e){const t=i.getFullYear(),r=t>0?t:1-t;return _t(e==="yy"?r%100:r,e.length)},M(i,e){const t=i.getMonth();return e==="M"?String(t+1):_t(t+1,2)},d(i,e){return _t(i.getDate(),e.length)},a(i,e){const t=i.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return t.toUpperCase();case"aaa":return t;case"aaaaa":return t[0];case"aaaa":default:return t==="am"?"a.m.":"p.m."}},h(i,e){return _t(i.getHours()%12||12,e.length)},H(i,e){return _t(i.getHours(),e.length)},m(i,e){return _t(i.getMinutes(),e.length)},s(i,e){return _t(i.getSeconds(),e.length)},S(i,e){const t=e.length,r=i.getMilliseconds(),o=Math.trunc(r*Math.pow(10,t-3));return _t(o,e.length)}},Ho={midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},N0={G:function(i,e,t){const r=i.getFullYear()>0?1:0;switch(e){case"G":case"GG":case"GGG":return t.era(r,{width:"abbreviated"});case"GGGGG":return t.era(r,{width:"narrow"});case"GGGG":default:return t.era(r,{width:"wide"})}},y:function(i,e,t){if(e==="yo"){const r=i.getFullYear(),o=r>0?r:1-r;return t.ordinalNumber(o,{unit:"year"})}return Rr.y(i,e)},Y:function(i,e,t,r){const o=d_(i,r),c=o>0?o:1-o;if(e==="YY"){const h=c%100;return _t(h,2)}return e==="Yo"?t.ordinalNumber(c,{unit:"year"}):_t(c,e.length)},R:function(i,e){const t=rf(i);return _t(t,e.length)},u:function(i,e){const t=i.getFullYear();return _t(t,e.length)},Q:function(i,e,t){const r=Math.ceil((i.getMonth()+1)/3);switch(e){case"Q":return String(r);case"QQ":return _t(r,2);case"Qo":return t.ordinalNumber(r,{unit:"quarter"});case"QQQ":return t.quarter(r,{width:"abbreviated",context:"formatting"});case"QQQQQ":return t.quarter(r,{width:"narrow",context:"formatting"});case"QQQQ":default:return t.quarter(r,{width:"wide",context:"formatting"})}},q:function(i,e,t){const r=Math.ceil((i.getMonth()+1)/3);switch(e){case"q":return String(r);case"qq":return _t(r,2);case"qo":return t.ordinalNumber(r,{unit:"quarter"});case"qqq":return t.quarter(r,{width:"abbreviated",context:"standalone"});case"qqqqq":return t.quarter(r,{width:"narrow",context:"standalone"});case"qqqq":default:return t.quarter(r,{width:"wide",context:"standalone"})}},M:function(i,e,t){const r=i.getMonth();switch(e){case"M":case"MM":return Rr.M(i,e);case"Mo":return t.ordinalNumber(r+1,{unit:"month"});case"MMM":return t.month(r,{width:"abbreviated",context:"formatting"});case"MMMMM":return t.month(r,{width:"narrow",context:"formatting"});case"MMMM":default:return t.month(r,{width:"wide",context:"formatting"})}},L:function(i,e,t){const r=i.getMonth();switch(e){case"L":return String(r+1);case"LL":return _t(r+1,2);case"Lo":return t.ordinalNumber(r+1,{unit:"month"});case"LLL":return t.month(r,{width:"abbreviated",context:"standalone"});case"LLLLL":return t.month(r,{width:"narrow",context:"standalone"});case"LLLL":default:return t.month(r,{width:"wide",context:"standalone"})}},w:function(i,e,t,r){const o=VE(i,r);return e==="wo"?t.ordinalNumber(o,{unit:"week"}):_t(o,e.length)},I:function(i,e,t){const r=af(i);return e==="Io"?t.ordinalNumber(r,{unit:"week"}):_t(r,e.length)},d:function(i,e,t){return e==="do"?t.ordinalNumber(i.getDate(),{unit:"date"}):Rr.d(i,e)},D:function(i,e,t){const r=QO(i);return e==="Do"?t.ordinalNumber(r,{unit:"dayOfYear"}):_t(r,e.length)},E:function(i,e,t){const r=i.getDay();switch(e){case"E":case"EE":case"EEE":return t.day(r,{width:"abbreviated",context:"formatting"});case"EEEEE":return t.day(r,{width:"narrow",context:"formatting"});case"EEEEEE":return t.day(r,{width:"short",context:"formatting"});case"EEEE":default:return t.day(r,{width:"wide",context:"formatting"})}},e:function(i,e,t,r){const o=i.getDay(),c=(o-r.weekStartsOn+8)%7||7;switch(e){case"e":return String(c);case"ee":return _t(c,2);case"eo":return t.ordinalNumber(c,{unit:"day"});case"eee":return t.day(o,{width:"abbreviated",context:"formatting"});case"eeeee":return t.day(o,{width:"narrow",context:"formatting"});case"eeeeee":return t.day(o,{width:"short",context:"formatting"});case"eeee":default:return t.day(o,{width:"wide",context:"formatting"})}},c:function(i,e,t,r){const o=i.getDay(),c=(o-r.weekStartsOn+8)%7||7;switch(e){case"c":return String(c);case"cc":return _t(c,e.length);case"co":return t.ordinalNumber(c,{unit:"day"});case"ccc":return t.day(o,{width:"abbreviated",context:"standalone"});case"ccccc":return t.day(o,{width:"narrow",context:"standalone"});case"cccccc":return t.day(o,{width:"short",context:"standalone"});case"cccc":default:return t.day(o,{width:"wide",context:"standalone"})}},i:function(i,e,t){const r=i.getDay(),o=r===0?7:r;switch(e){case"i":return String(o);case"ii":return _t(o,e.length);case"io":return t.ordinalNumber(o,{unit:"day"});case"iii":return t.day(r,{width:"abbreviated",context:"formatting"});case"iiiii":return t.day(r,{width:"narrow",context:"formatting"});case"iiiiii":return t.day(r,{width:"short",context:"formatting"});case"iiii":default:return t.day(r,{width:"wide",context:"formatting"})}},a:function(i,e,t){const o=i.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return t.dayPeriod(o,{width:"abbreviated",context:"formatting"});case"aaa":return t.dayPeriod(o,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return t.dayPeriod(o,{width:"narrow",context:"formatting"});case"aaaa":default:return t.dayPeriod(o,{width:"wide",context:"formatting"})}},b:function(i,e,t){const r=i.getHours();let o;switch(r===12?o=Ho.noon:r===0?o=Ho.midnight:o=r/12>=1?"pm":"am",e){case"b":case"bb":return t.dayPeriod(o,{width:"abbreviated",context:"formatting"});case"bbb":return t.dayPeriod(o,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return t.dayPeriod(o,{width:"narrow",context:"formatting"});case"bbbb":default:return t.dayPeriod(o,{width:"wide",context:"formatting"})}},B:function(i,e,t){const r=i.getHours();let o;switch(r>=17?o=Ho.evening:r>=12?o=Ho.afternoon:r>=4?o=Ho.morning:o=Ho.night,e){case"B":case"BB":case"BBB":return t.dayPeriod(o,{width:"abbreviated",context:"formatting"});case"BBBBB":return t.dayPeriod(o,{width:"narrow",context:"formatting"});case"BBBB":default:return t.dayPeriod(o,{width:"wide",context:"formatting"})}},h:function(i,e,t){if(e==="ho"){let r=i.getHours()%12;return r===0&&(r=12),t.ordinalNumber(r,{unit:"hour"})}return Rr.h(i,e)},H:function(i,e,t){return e==="Ho"?t.ordinalNumber(i.getHours(),{unit:"hour"}):Rr.H(i,e)},K:function(i,e,t){const r=i.getHours()%12;return e==="Ko"?t.ordinalNumber(r,{unit:"hour"}):_t(r,e.length)},k:function(i,e,t){let r=i.getHours();return r===0&&(r=24),e==="ko"?t.ordinalNumber(r,{unit:"hour"}):_t(r,e.length)},m:function(i,e,t){return e==="mo"?t.ordinalNumber(i.getMinutes(),{unit:"minute"}):Rr.m(i,e)},s:function(i,e,t){return e==="so"?t.ordinalNumber(i.getSeconds(),{unit:"second"}):Rr.s(i,e)},S:function(i,e){return Rr.S(i,e)},X:function(i,e,t){const r=i.getTimezoneOffset();if(r===0)return"Z";switch(e){case"X":return R0(r);case"XXXX":case"XX":return Ma(r);case"XXXXX":case"XXX":default:return Ma(r,":")}},x:function(i,e,t){const r=i.getTimezoneOffset();switch(e){case"x":return R0(r);case"xxxx":case"xx":return Ma(r);case"xxxxx":case"xxx":default:return Ma(r,":")}},O:function(i,e,t){const r=i.getTimezoneOffset();switch(e){case"O":case"OO":case"OOO":return"GMT"+x0(r,":");case"OOOO":default:return"GMT"+Ma(r,":")}},z:function(i,e,t){const r=i.getTimezoneOffset();switch(e){case"z":case"zz":case"zzz":return"GMT"+x0(r,":");case"zzzz":default:return"GMT"+Ma(r,":")}},t:function(i,e,t){const r=Math.trunc(+i/1e3);return _t(r,e.length)},T:function(i,e,t){return _t(+i,e.length)}};function x0(i,e=""){const t=i>0?"-":"+",r=Math.abs(i),o=Math.trunc(r/60),c=r%60;return c===0?t+String(o):t+String(o)+e+_t(c,2)}function R0(i,e){return i%60===0?(i>0?"-":"+")+_t(Math.abs(i)/60,2):Ma(i,e)}function Ma(i,e=""){const t=i>0?"-":"+",r=Math.abs(i),o=_t(Math.trunc(r/60),2),c=_t(r%60,2);return t+o+e+c}const D0=(i,e)=>{switch(i){case"P":return e.date({width:"short"});case"PP":return e.date({width:"medium"});case"PPP":return e.date({width:"long"});case"PPPP":default:return e.date({width:"full"})}},BE=(i,e)=>{switch(i){case"p":return e.time({width:"short"});case"pp":return e.time({width:"medium"});case"ppp":return e.time({width:"long"});case"pppp":default:return e.time({width:"full"})}},XO=(i,e)=>{const t=i.match(/(P+)(p+)?/)||[],r=t[1],o=t[2];if(!o)return D0(i,e);let c;switch(r){case"P":c=e.dateTime({width:"short"});break;case"PP":c=e.dateTime({width:"medium"});break;case"PPP":c=e.dateTime({width:"long"});break;case"PPPP":default:c=e.dateTime({width:"full"});break}return c.replace("{{date}}",D0(r,e)).replace("{{time}}",BE(o,e))},sg={p:BE,P:XO},WO=/^D+$/,JO=/^Y+$/,ZO=["D","DD","YY","YYYY"];function UE(i){return WO.test(i)}function zE(i){return JO.test(i)}function rg(i,e,t){const r=ek(i,e,t);if(console.warn(r),ZO.includes(i))throw new RangeError(r)}function ek(i,e,t){const r=i[0]==="Y"?"years":"days of the month";return`Use \`${i.toLowerCase()}\` instead of \`${i}\` (in \`${e}\`) for formatting ${r} to the input \`${t}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}const tk=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,nk=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,ik=/^'([^]*?)'?$/,sk=/''/g,rk=/[a-zA-Z]/;function Oa(i,e,t){const r=eo(),o=t?.locale??r.locale??PE,c=t?.firstWeekContainsDate??t?.locale?.options?.firstWeekContainsDate??r.firstWeekContainsDate??r.locale?.options?.firstWeekContainsDate??1,h=t?.weekStartsOn??t?.locale?.options?.weekStartsOn??r.weekStartsOn??r.locale?.options?.weekStartsOn??0,p=kt(i,t?.in);if(!mO(p))throw new RangeError("Invalid time value");let g=e.match(nk).map(T=>{const E=T[0];if(E==="p"||E==="P"){const I=sg[E];return I(T,o.formatLong)}return T}).join("").match(tk).map(T=>{if(T==="''")return{isToken:!1,value:"'"};const E=T[0];if(E==="'")return{isToken:!1,value:ak(T)};if(N0[E])return{isToken:!0,value:T};if(E.match(rk))throw new RangeError("Format string contains an unescaped latin alphabet character `"+E+"`");return{isToken:!1,value:T}});o.localize.preprocessor&&(g=o.localize.preprocessor(p,g));const _={firstWeekContainsDate:c,weekStartsOn:h,locale:o};return g.map(T=>{if(!T.isToken)return T.value;const E=T.value;(!t?.useAdditionalWeekYearTokens&&zE(E)||!t?.useAdditionalDayOfYearTokens&&UE(E))&&rg(E,e,String(i));const I=N0[E[0]];return I(p,E,o.localize,_)}).join("")}function ak(i){const e=i.match(ik);return e?e[1].replace(sk,"'"):i}function ok(){return Object.assign({},eo())}function lk(i,e){const t=kt(i,e?.in).getDay();return t===0?7:t}function ck(i,e){return+kt(i)<+kt(e)}function uk(i,e){const t=hk(e)?new e(0):gn(e,0);return t.setFullYear(i.getFullYear(),i.getMonth(),i.getDate()),t.setHours(i.getHours(),i.getMinutes(),i.getSeconds(),i.getMilliseconds()),t}function hk(i){return typeof i=="function"&&i.prototype?.constructor===i}const dk=10;class qE{subPriority=0;validate(e,t){return!0}}class fk extends qE{constructor(e,t,r,o,c){super(),this.value=e,this.validateValue=t,this.setValue=r,this.priority=o,c&&(this.subPriority=c)}validate(e,t){return this.validateValue(e,this.value,t)}set(e,t,r){return this.setValue(e,t,this.value,r)}}class mk extends qE{priority=dk;subPriority=-1;constructor(e,t){super(),this.context=e||(r=>gn(t,r))}set(e,t){return t.timestampIsSet?e:gn(e,uk(e,this.context))}}class dt{run(e,t,r,o){const c=this.parse(e,t,r,o);return c?{setter:new fk(c.value,this.validate,this.set,this.priority,this.subPriority),rest:c.rest}:null}validate(e,t,r){return!0}}class pk extends dt{priority=140;parse(e,t,r){switch(t){case"G":case"GG":case"GGG":return r.era(e,{width:"abbreviated"})||r.era(e,{width:"narrow"});case"GGGGG":return r.era(e,{width:"narrow"});case"GGGG":default:return r.era(e,{width:"wide"})||r.era(e,{width:"abbreviated"})||r.era(e,{width:"narrow"})}}set(e,t,r){return t.era=r,e.setFullYear(r,0,1),e.setHours(0,0,0,0),e}incompatibleTokens=["R","u","t","T"]}const Qt={month:/^(1[0-2]|0?\d)/,date:/^(3[0-1]|[0-2]?\d)/,dayOfYear:/^(36[0-6]|3[0-5]\d|[0-2]?\d?\d)/,week:/^(5[0-3]|[0-4]?\d)/,hour23h:/^(2[0-3]|[0-1]?\d)/,hour24h:/^(2[0-4]|[0-1]?\d)/,hour11h:/^(1[0-1]|0?\d)/,hour12h:/^(1[0-2]|0?\d)/,minute:/^[0-5]?\d/,second:/^[0-5]?\d/,singleDigit:/^\d/,twoDigits:/^\d{1,2}/,threeDigits:/^\d{1,3}/,fourDigits:/^\d{1,4}/,anyDigitsSigned:/^-?\d+/,singleDigitSigned:/^-?\d/,twoDigitsSigned:/^-?\d{1,2}/,threeDigitsSigned:/^-?\d{1,3}/,fourDigitsSigned:/^-?\d{1,4}/},ls={basicOptionalMinutes:/^([+-])(\d{2})(\d{2})?|Z/,basic:/^([+-])(\d{2})(\d{2})|Z/,basicOptionalSeconds:/^([+-])(\d{2})(\d{2})((\d{2}))?|Z/,extended:/^([+-])(\d{2}):(\d{2})|Z/,extendedOptionalSeconds:/^([+-])(\d{2}):(\d{2})(:(\d{2}))?|Z/};function Kt(i,e){return i&&{value:e(i.value),rest:i.rest}}function Mt(i,e){const t=e.match(i);return t?{value:parseInt(t[0],10),rest:e.slice(t[0].length)}:null}function cs(i,e){const t=e.match(i);if(!t)return null;if(t[0]==="Z")return{value:0,rest:e.slice(1)};const r=t[1]==="+"?1:-1,o=t[2]?parseInt(t[2],10):0,c=t[3]?parseInt(t[3],10):0,h=t[5]?parseInt(t[5],10):0;return{value:r*(o*oO+c*aO+h*lO),rest:e.slice(t[0].length)}}function HE(i){return Mt(Qt.anyDigitsSigned,i)}function Ut(i,e){switch(i){case 1:return Mt(Qt.singleDigit,e);case 2:return Mt(Qt.twoDigits,e);case 3:return Mt(Qt.threeDigits,e);case 4:return Mt(Qt.fourDigits,e);default:return Mt(new RegExp("^\\d{1,"+i+"}"),e)}}function Nd(i,e){switch(i){case 1:return Mt(Qt.singleDigitSigned,e);case 2:return Mt(Qt.twoDigitsSigned,e);case 3:return Mt(Qt.threeDigitsSigned,e);case 4:return Mt(Qt.fourDigitsSigned,e);default:return Mt(new RegExp("^-?\\d{1,"+i+"}"),e)}}function f_(i){switch(i){case"morning":return 4;case"evening":return 17;case"pm":case"noon":case"afternoon":return 12;case"am":case"midnight":case"night":default:return 0}}function FE(i,e){const t=e>0,r=t?e:1-e;let o;if(r<=50)o=i||100;else{const c=r+50,h=Math.trunc(c/100)*100,p=i>=c%100;o=i+h-(p?100:0)}return t?o:1-o}function $E(i){return i%400===0||i%4===0&&i%100!==0}class gk extends dt{priority=130;incompatibleTokens=["Y","R","u","w","I","i","e","c","t","T"];parse(e,t,r){const o=c=>({year:c,isTwoDigitYear:t==="yy"});switch(t){case"y":return Kt(Ut(4,e),o);case"yo":return Kt(r.ordinalNumber(e,{unit:"year"}),o);default:return Kt(Ut(t.length,e),o)}}validate(e,t){return t.isTwoDigitYear||t.year>0}set(e,t,r){const o=e.getFullYear();if(r.isTwoDigitYear){const h=FE(r.year,o);return e.setFullYear(h,0,1),e.setHours(0,0,0,0),e}const c=!("era"in t)||t.era===1?r.year:1-r.year;return e.setFullYear(c,0,1),e.setHours(0,0,0,0),e}}class _k extends dt{priority=130;parse(e,t,r){const o=c=>({year:c,isTwoDigitYear:t==="YY"});switch(t){case"Y":return Kt(Ut(4,e),o);case"Yo":return Kt(r.ordinalNumber(e,{unit:"year"}),o);default:return Kt(Ut(t.length,e),o)}}validate(e,t){return t.isTwoDigitYear||t.year>0}set(e,t,r,o){const c=d_(e,o);if(r.isTwoDigitYear){const p=FE(r.year,c);return e.setFullYear(p,0,o.firstWeekContainsDate),e.setHours(0,0,0,0),Li(e,o)}const h=!("era"in t)||t.era===1?r.year:1-r.year;return e.setFullYear(h,0,o.firstWeekContainsDate),e.setHours(0,0,0,0),Li(e,o)}incompatibleTokens=["y","R","u","Q","q","M","L","I","d","D","i","t","T"]}class yk extends dt{priority=130;parse(e,t){return Nd(t==="R"?4:t.length,e)}set(e,t,r){const o=gn(e,0);return o.setFullYear(r,0,4),o.setHours(0,0,0,0),fl(o)}incompatibleTokens=["G","y","Y","u","Q","q","M","L","w","d","D","e","c","t","T"]}class vk extends dt{priority=130;parse(e,t){return Nd(t==="u"?4:t.length,e)}set(e,t,r){return e.setFullYear(r,0,1),e.setHours(0,0,0,0),e}incompatibleTokens=["G","y","Y","R","w","I","i","e","c","t","T"]}class bk extends dt{priority=120;parse(e,t,r){switch(t){case"Q":case"QQ":return Ut(t.length,e);case"Qo":return r.ordinalNumber(e,{unit:"quarter"});case"QQQ":return r.quarter(e,{width:"abbreviated",context:"formatting"})||r.quarter(e,{width:"narrow",context:"formatting"});case"QQQQQ":return r.quarter(e,{width:"narrow",context:"formatting"});case"QQQQ":default:return r.quarter(e,{width:"wide",context:"formatting"})||r.quarter(e,{width:"abbreviated",context:"formatting"})||r.quarter(e,{width:"narrow",context:"formatting"})}}validate(e,t){return t>=1&&t<=4}set(e,t,r){return e.setMonth((r-1)*3,1),e.setHours(0,0,0,0),e}incompatibleTokens=["Y","R","q","M","L","w","I","d","D","i","e","c","t","T"]}class Tk extends dt{priority=120;parse(e,t,r){switch(t){case"q":case"qq":return Ut(t.length,e);case"qo":return r.ordinalNumber(e,{unit:"quarter"});case"qqq":return r.quarter(e,{width:"abbreviated",context:"standalone"})||r.quarter(e,{width:"narrow",context:"standalone"});case"qqqqq":return r.quarter(e,{width:"narrow",context:"standalone"});case"qqqq":default:return r.quarter(e,{width:"wide",context:"standalone"})||r.quarter(e,{width:"abbreviated",context:"standalone"})||r.quarter(e,{width:"narrow",context:"standalone"})}}validate(e,t){return t>=1&&t<=4}set(e,t,r){return e.setMonth((r-1)*3,1),e.setHours(0,0,0,0),e}incompatibleTokens=["Y","R","Q","M","L","w","I","d","D","i","e","c","t","T"]}class wk extends dt{incompatibleTokens=["Y","R","q","Q","L","w","I","D","i","e","c","t","T"];priority=110;parse(e,t,r){const o=c=>c-1;switch(t){case"M":return Kt(Mt(Qt.month,e),o);case"MM":return Kt(Ut(2,e),o);case"Mo":return Kt(r.ordinalNumber(e,{unit:"month"}),o);case"MMM":return r.month(e,{width:"abbreviated",context:"formatting"})||r.month(e,{width:"narrow",context:"formatting"});case"MMMMM":return r.month(e,{width:"narrow",context:"formatting"});case"MMMM":default:return r.month(e,{width:"wide",context:"formatting"})||r.month(e,{width:"abbreviated",context:"formatting"})||r.month(e,{width:"narrow",context:"formatting"})}}validate(e,t){return t>=0&&t<=11}set(e,t,r){return e.setMonth(r,1),e.setHours(0,0,0,0),e}}class Ek extends dt{priority=110;parse(e,t,r){const o=c=>c-1;switch(t){case"L":return Kt(Mt(Qt.month,e),o);case"LL":return Kt(Ut(2,e),o);case"Lo":return Kt(r.ordinalNumber(e,{unit:"month"}),o);case"LLL":return r.month(e,{width:"abbreviated",context:"standalone"})||r.month(e,{width:"narrow",context:"standalone"});case"LLLLL":return r.month(e,{width:"narrow",context:"standalone"});case"LLLL":default:return r.month(e,{width:"wide",context:"standalone"})||r.month(e,{width:"abbreviated",context:"standalone"})||r.month(e,{width:"narrow",context:"standalone"})}}validate(e,t){return t>=0&&t<=11}set(e,t,r){return e.setMonth(r,1),e.setHours(0,0,0,0),e}incompatibleTokens=["Y","R","q","Q","M","w","I","D","i","e","c","t","T"]}function Sk(i,e,t){const r=kt(i,t?.in),o=VE(r,t)-e;return r.setDate(r.getDate()-o*7),kt(r,t?.in)}class Ak extends dt{priority=100;parse(e,t,r){switch(t){case"w":return Mt(Qt.week,e);case"wo":return r.ordinalNumber(e,{unit:"week"});default:return Ut(t.length,e)}}validate(e,t){return t>=1&&t<=53}set(e,t,r,o){return Li(Sk(e,r,o),o)}incompatibleTokens=["y","R","u","q","Q","M","L","I","d","D","i","t","T"]}function Ik(i,e,t){const r=kt(i,t?.in),o=af(r,t)-e;return r.setDate(r.getDate()-o*7),r}class Ck extends dt{priority=100;parse(e,t,r){switch(t){case"I":return Mt(Qt.week,e);case"Io":return r.ordinalNumber(e,{unit:"week"});default:return Ut(t.length,e)}}validate(e,t){return t>=1&&t<=53}set(e,t,r){return fl(Ik(e,r))}incompatibleTokens=["y","Y","u","q","Q","M","L","w","d","D","e","c","t","T"]}const Nk=[31,28,31,30,31,30,31,31,30,31,30,31],xk=[31,29,31,30,31,30,31,31,30,31,30,31];class Rk extends dt{priority=90;subPriority=1;parse(e,t,r){switch(t){case"d":return Mt(Qt.date,e);case"do":return r.ordinalNumber(e,{unit:"date"});default:return Ut(t.length,e)}}validate(e,t){const r=e.getFullYear(),o=$E(r),c=e.getMonth();return o?t>=1&&t<=xk[c]:t>=1&&t<=Nk[c]}set(e,t,r){return e.setDate(r),e.setHours(0,0,0,0),e}incompatibleTokens=["Y","R","q","Q","w","I","D","i","e","c","t","T"]}class Dk extends dt{priority=90;subpriority=1;parse(e,t,r){switch(t){case"D":case"DD":return Mt(Qt.dayOfYear,e);case"Do":return r.ordinalNumber(e,{unit:"date"});default:return Ut(t.length,e)}}validate(e,t){const r=e.getFullYear();return $E(r)?t>=1&&t<=366:t>=1&&t<=365}set(e,t,r){return e.setMonth(0,r),e.setHours(0,0,0,0),e}incompatibleTokens=["Y","R","q","Q","M","L","w","I","d","E","i","e","c","t","T"]}function m_(i,e,t){const r=eo(),o=t?.weekStartsOn??t?.locale?.options?.weekStartsOn??r.weekStartsOn??r.locale?.options?.weekStartsOn??0,c=kt(i,t?.in),h=c.getDay(),g=(e%7+7)%7,_=7-o,T=e<0||e>6?e-(h+_)%7:(g+_)%7-(h+_)%7;return u_(c,T,t)}class Mk extends dt{priority=90;parse(e,t,r){switch(t){case"E":case"EE":case"EEE":return r.day(e,{width:"abbreviated",context:"formatting"})||r.day(e,{width:"short",context:"formatting"})||r.day(e,{width:"narrow",context:"formatting"});case"EEEEE":return r.day(e,{width:"narrow",context:"formatting"});case"EEEEEE":return r.day(e,{width:"short",context:"formatting"})||r.day(e,{width:"narrow",context:"formatting"});case"EEEE":default:return r.day(e,{width:"wide",context:"formatting"})||r.day(e,{width:"abbreviated",context:"formatting"})||r.day(e,{width:"short",context:"formatting"})||r.day(e,{width:"narrow",context:"formatting"})}}validate(e,t){return t>=0&&t<=6}set(e,t,r,o){return e=m_(e,r,o),e.setHours(0,0,0,0),e}incompatibleTokens=["D","i","e","c","t","T"]}class Ok extends dt{priority=90;parse(e,t,r,o){const c=h=>{const p=Math.floor((h-1)/7)*7;return(h+o.weekStartsOn+6)%7+p};switch(t){case"e":case"ee":return Kt(Ut(t.length,e),c);case"eo":return Kt(r.ordinalNumber(e,{unit:"day"}),c);case"eee":return r.day(e,{width:"abbreviated",context:"formatting"})||r.day(e,{width:"short",context:"formatting"})||r.day(e,{width:"narrow",context:"formatting"});case"eeeee":return r.day(e,{width:"narrow",context:"formatting"});case"eeeeee":return r.day(e,{width:"short",context:"formatting"})||r.day(e,{width:"narrow",context:"formatting"});case"eeee":default:return r.day(e,{width:"wide",context:"formatting"})||r.day(e,{width:"abbreviated",context:"formatting"})||r.day(e,{width:"short",context:"formatting"})||r.day(e,{width:"narrow",context:"formatting"})}}validate(e,t){return t>=0&&t<=6}set(e,t,r,o){return e=m_(e,r,o),e.setHours(0,0,0,0),e}incompatibleTokens=["y","R","u","q","Q","M","L","I","d","D","E","i","c","t","T"]}class kk extends dt{priority=90;parse(e,t,r,o){const c=h=>{const p=Math.floor((h-1)/7)*7;return(h+o.weekStartsOn+6)%7+p};switch(t){case"c":case"cc":return Kt(Ut(t.length,e),c);case"co":return Kt(r.ordinalNumber(e,{unit:"day"}),c);case"ccc":return r.day(e,{width:"abbreviated",context:"standalone"})||r.day(e,{width:"short",context:"standalone"})||r.day(e,{width:"narrow",context:"standalone"});case"ccccc":return r.day(e,{width:"narrow",context:"standalone"});case"cccccc":return r.day(e,{width:"short",context:"standalone"})||r.day(e,{width:"narrow",context:"standalone"});case"cccc":default:return r.day(e,{width:"wide",context:"standalone"})||r.day(e,{width:"abbreviated",context:"standalone"})||r.day(e,{width:"short",context:"standalone"})||r.day(e,{width:"narrow",context:"standalone"})}}validate(e,t){return t>=0&&t<=6}set(e,t,r,o){return e=m_(e,r,o),e.setHours(0,0,0,0),e}incompatibleTokens=["y","R","u","q","Q","M","L","I","d","D","E","i","e","t","T"]}function jk(i,e,t){const r=kt(i,t?.in),o=lk(r,t),c=e-o;return u_(r,c,t)}class Lk extends dt{priority=90;parse(e,t,r){const o=c=>c===0?7:c;switch(t){case"i":case"ii":return Ut(t.length,e);case"io":return r.ordinalNumber(e,{unit:"day"});case"iii":return Kt(r.day(e,{width:"abbreviated",context:"formatting"})||r.day(e,{width:"short",context:"formatting"})||r.day(e,{width:"narrow",context:"formatting"}),o);case"iiiii":return Kt(r.day(e,{width:"narrow",context:"formatting"}),o);case"iiiiii":return Kt(r.day(e,{width:"short",context:"formatting"})||r.day(e,{width:"narrow",context:"formatting"}),o);case"iiii":default:return Kt(r.day(e,{width:"wide",context:"formatting"})||r.day(e,{width:"abbreviated",context:"formatting"})||r.day(e,{width:"short",context:"formatting"})||r.day(e,{width:"narrow",context:"formatting"}),o)}}validate(e,t){return t>=1&&t<=7}set(e,t,r){return e=jk(e,r),e.setHours(0,0,0,0),e}incompatibleTokens=["y","Y","u","q","Q","M","L","w","d","D","E","e","c","t","T"]}class Pk extends dt{priority=80;parse(e,t,r){switch(t){case"a":case"aa":case"aaa":return r.dayPeriod(e,{width:"abbreviated",context:"formatting"})||r.dayPeriod(e,{width:"narrow",context:"formatting"});case"aaaaa":return r.dayPeriod(e,{width:"narrow",context:"formatting"});case"aaaa":default:return r.dayPeriod(e,{width:"wide",context:"formatting"})||r.dayPeriod(e,{width:"abbreviated",context:"formatting"})||r.dayPeriod(e,{width:"narrow",context:"formatting"})}}set(e,t,r){return e.setHours(f_(r),0,0,0),e}incompatibleTokens=["b","B","H","k","t","T"]}class Vk extends dt{priority=80;parse(e,t,r){switch(t){case"b":case"bb":case"bbb":return r.dayPeriod(e,{width:"abbreviated",context:"formatting"})||r.dayPeriod(e,{width:"narrow",context:"formatting"});case"bbbbb":return r.dayPeriod(e,{width:"narrow",context:"formatting"});case"bbbb":default:return r.dayPeriod(e,{width:"wide",context:"formatting"})||r.dayPeriod(e,{width:"abbreviated",context:"formatting"})||r.dayPeriod(e,{width:"narrow",context:"formatting"})}}set(e,t,r){return e.setHours(f_(r),0,0,0),e}incompatibleTokens=["a","B","H","k","t","T"]}class Bk extends dt{priority=80;parse(e,t,r){switch(t){case"B":case"BB":case"BBB":return r.dayPeriod(e,{width:"abbreviated",context:"formatting"})||r.dayPeriod(e,{width:"narrow",context:"formatting"});case"BBBBB":return r.dayPeriod(e,{width:"narrow",context:"formatting"});case"BBBB":default:return r.dayPeriod(e,{width:"wide",context:"formatting"})||r.dayPeriod(e,{width:"abbreviated",context:"formatting"})||r.dayPeriod(e,{width:"narrow",context:"formatting"})}}set(e,t,r){return e.setHours(f_(r),0,0,0),e}incompatibleTokens=["a","b","t","T"]}class Uk extends dt{priority=70;parse(e,t,r){switch(t){case"h":return Mt(Qt.hour12h,e);case"ho":return r.ordinalNumber(e,{unit:"hour"});default:return Ut(t.length,e)}}validate(e,t){return t>=1&&t<=12}set(e,t,r){const o=e.getHours()>=12;return o&&r<12?e.setHours(r+12,0,0,0):!o&&r===12?e.setHours(0,0,0,0):e.setHours(r,0,0,0),e}incompatibleTokens=["H","K","k","t","T"]}class zk extends dt{priority=70;parse(e,t,r){switch(t){case"H":return Mt(Qt.hour23h,e);case"Ho":return r.ordinalNumber(e,{unit:"hour"});default:return Ut(t.length,e)}}validate(e,t){return t>=0&&t<=23}set(e,t,r){return e.setHours(r,0,0,0),e}incompatibleTokens=["a","b","h","K","k","t","T"]}class qk extends dt{priority=70;parse(e,t,r){switch(t){case"K":return Mt(Qt.hour11h,e);case"Ko":return r.ordinalNumber(e,{unit:"hour"});default:return Ut(t.length,e)}}validate(e,t){return t>=0&&t<=11}set(e,t,r){return e.getHours()>=12&&r<12?e.setHours(r+12,0,0,0):e.setHours(r,0,0,0),e}incompatibleTokens=["h","H","k","t","T"]}class Hk extends dt{priority=70;parse(e,t,r){switch(t){case"k":return Mt(Qt.hour24h,e);case"ko":return r.ordinalNumber(e,{unit:"hour"});default:return Ut(t.length,e)}}validate(e,t){return t>=1&&t<=24}set(e,t,r){const o=r<=24?r%24:r;return e.setHours(o,0,0,0),e}incompatibleTokens=["a","b","h","H","K","t","T"]}class Fk extends dt{priority=60;parse(e,t,r){switch(t){case"m":return Mt(Qt.minute,e);case"mo":return r.ordinalNumber(e,{unit:"minute"});default:return Ut(t.length,e)}}validate(e,t){return t>=0&&t<=59}set(e,t,r){return e.setMinutes(r,0,0),e}incompatibleTokens=["t","T"]}class $k extends dt{priority=50;parse(e,t,r){switch(t){case"s":return Mt(Qt.second,e);case"so":return r.ordinalNumber(e,{unit:"second"});default:return Ut(t.length,e)}}validate(e,t){return t>=0&&t<=59}set(e,t,r){return e.setSeconds(r,0),e}incompatibleTokens=["t","T"]}class Gk extends dt{priority=30;parse(e,t){const r=o=>Math.trunc(o*Math.pow(10,-t.length+3));return Kt(Ut(t.length,e),r)}set(e,t,r){return e.setMilliseconds(r),e}incompatibleTokens=["t","T"]}class Yk extends dt{priority=10;parse(e,t){switch(t){case"X":return cs(ls.basicOptionalMinutes,e);case"XX":return cs(ls.basic,e);case"XXXX":return cs(ls.basicOptionalSeconds,e);case"XXXXX":return cs(ls.extendedOptionalSeconds,e);case"XXX":default:return cs(ls.extended,e)}}set(e,t,r){return t.timestampIsSet?e:gn(e,e.getTime()-Cd(e)-r)}incompatibleTokens=["t","T","x"]}class Qk extends dt{priority=10;parse(e,t){switch(t){case"x":return cs(ls.basicOptionalMinutes,e);case"xx":return cs(ls.basic,e);case"xxxx":return cs(ls.basicOptionalSeconds,e);case"xxxxx":return cs(ls.extendedOptionalSeconds,e);case"xxx":default:return cs(ls.extended,e)}}set(e,t,r){return t.timestampIsSet?e:gn(e,e.getTime()-Cd(e)-r)}incompatibleTokens=["t","T","X"]}class Kk extends dt{priority=40;parse(e){return HE(e)}set(e,t,r){return[gn(e,r*1e3),{timestampIsSet:!0}]}incompatibleTokens="*"}class Xk extends dt{priority=20;parse(e){return HE(e)}set(e,t,r){return[gn(e,r),{timestampIsSet:!0}]}incompatibleTokens="*"}const Wk={G:new pk,y:new gk,Y:new _k,R:new yk,u:new vk,Q:new bk,q:new Tk,M:new wk,L:new Ek,w:new Ak,I:new Ck,d:new Rk,D:new Dk,E:new Mk,e:new Ok,c:new kk,i:new Lk,a:new Pk,b:new Vk,B:new Bk,h:new Uk,H:new zk,K:new qk,k:new Hk,m:new Fk,s:new $k,S:new Gk,X:new Yk,x:new Qk,t:new Kk,T:new Xk},Jk=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,Zk=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,e6=/^'([^]*?)'?$/,t6=/''/g,n6=/\S/,i6=/[a-zA-Z]/;function s6(i,e,t,r){const o=()=>gn(t,NaN),c=ok(),h=c.locale??PE,p=c.firstWeekContainsDate??c.locale?.options?.firstWeekContainsDate??1,g=c.weekStartsOn??c.locale?.options?.weekStartsOn??0,_={firstWeekContainsDate:p,weekStartsOn:g,locale:h},T=[new mk(r?.in,t)],E=e.match(Zk).map(j=>{const Y=j[0];if(Y in sg){const F=sg[Y];return F(j,h.formatLong)}return j}).join("").match(Jk),I=[];for(let j of E){zE(j)&&rg(j,e,i),UE(j)&&rg(j,e,i);const Y=j[0],F=Wk[Y];if(F){const{incompatibleTokens:le}=F;if(Array.isArray(le)){const B=I.find(ie=>le.includes(ie.token)||ie.token===Y);if(B)throw new RangeError(`The format string mustn't contain \`${B.fullToken}\` and \`${j}\` at the same time`)}else if(F.incompatibleTokens==="*"&&I.length>0)throw new RangeError(`The format string mustn't contain \`${j}\` and any other token at the same time`);I.push({token:Y,fullToken:j});const K=F.run(i,j,h.match,_);if(!K)return o();T.push(K.setter),i=K.rest}else{if(Y.match(i6))throw new RangeError("Format string contains an unescaped latin alphabet character `"+Y+"`");if(j==="''"?j="'":Y==="'"&&(j=r6(j)),i.indexOf(j)===0)i=i.slice(j.length);else return o()}}if(i.length>0&&n6.test(i))return o();const O=T.map(j=>j.priority).sort((j,Y)=>Y-j).filter((j,Y,F)=>F.indexOf(j)===Y).map(j=>T.filter(Y=>Y.priority===j).sort((Y,F)=>F.subPriority-Y.subPriority)).map(j=>j[0]);let L=kt(t,r?.in);if(isNaN(+L))return o();const z={};for(const j of O){if(!j.validate(L,_))return o();const Y=j.set(L,z,_);Array.isArray(Y)?(L=Y[0],Object.assign(z,Y[1])):L=Y}return L}function r6(i){return i.match(e6)[1].replace(t6,"'")}const a6={lessThanXSeconds:{one:"moins dune seconde",other:"moins de {{count}} secondes"},xSeconds:{one:"1 seconde",other:"{{count}} secondes"},halfAMinute:"30 secondes",lessThanXMinutes:{one:"moins dune minute",other:"moins de {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"environ 1 heure",other:"environ {{count}} heures"},xHours:{one:"1 heure",other:"{{count}} heures"},xDays:{one:"1 jour",other:"{{count}} jours"},aboutXWeeks:{one:"environ 1 semaine",other:"environ {{count}} semaines"},xWeeks:{one:"1 semaine",other:"{{count}} semaines"},aboutXMonths:{one:"environ 1 mois",other:"environ {{count}} mois"},xMonths:{one:"1 mois",other:"{{count}} mois"},aboutXYears:{one:"environ 1 an",other:"environ {{count}} ans"},xYears:{one:"1 an",other:"{{count}} ans"},overXYears:{one:"plus dun an",other:"plus de {{count}} ans"},almostXYears:{one:"presquun an",other:"presque {{count}} ans"}},o6=(i,e,t)=>{let r;const o=a6[i];return typeof o=="string"?r=o:e===1?r=o.one:r=o.other.replace("{{count}}",String(e)),t?.addSuffix?t.comparison&&t.comparison>0?"dans "+r:"il y a "+r:r},l6={full:"EEEE d MMMM y",long:"d MMMM y",medium:"d MMM y",short:"dd/MM/y"},c6={full:"HH:mm:ss zzzz",long:"HH:mm:ss z",medium:"HH:mm:ss",short:"HH:mm"},u6={full:"{{date}} '' {{time}}",long:"{{date}} '' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},h6={date:il({formats:l6,defaultWidth:"full"}),time:il({formats:c6,defaultWidth:"full"}),dateTime:il({formats:u6,defaultWidth:"full"})},d6={lastWeek:"eeee 'dernier ' p",yesterday:"'hier ' p",today:"'aujourdhui ' p",tomorrow:"'demain ' p'",nextWeek:"eeee 'prochain ' p",other:"P"},f6=(i,e,t,r)=>d6[i],m6={narrow:["av. J.-C","ap. J.-C"],abbreviated:["av. J.-C","ap. J.-C"],wide:["avant Jsus-Christ","aprs Jsus-Christ"]},p6={narrow:["T1","T2","T3","T4"],abbreviated:["1er trim.","2me trim.","3me trim.","4me trim."],wide:["1er trimestre","2me trimestre","3me trimestre","4me trimestre"]},g6={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["janv.","fvr.","mars","avr.","mai","juin","juil.","aot","sept.","oct.","nov.","dc."],wide:["janvier","fvrier","mars","avril","mai","juin","juillet","aot","septembre","octobre","novembre","dcembre"]},_6={narrow:["D","L","M","M","J","V","S"],short:["di","lu","ma","me","je","ve","sa"],abbreviated:["dim.","lun.","mar.","mer.","jeu.","ven.","sam."],wide:["dimanche","lundi","mardi","mercredi","jeudi","vendredi","samedi"]},y6={narrow:{am:"AM",pm:"PM",midnight:"minuit",noon:"midi",morning:"mat.",afternoon:"ap.m.",evening:"soir",night:"mat."},abbreviated:{am:"AM",pm:"PM",midnight:"minuit",noon:"midi",morning:"matin",afternoon:"aprs-midi",evening:"soir",night:"matin"},wide:{am:"AM",pm:"PM",midnight:"minuit",noon:"midi",morning:"du matin",afternoon:"de laprs-midi",evening:"du soir",night:"du matin"}},v6=(i,e)=>{const t=Number(i),r=e?.unit;if(t===0)return"0";const o=["year","week","hour","minute","second"];let c;return t===1?c=r&&o.includes(r)?"re":"er":c="me",t+c},b6=["MMM","MMMM"],T6={preprocessor:(i,e)=>i.getDate()===1||!e.some(r=>r.isToken&&b6.includes(r.value))?e:e.map(r=>r.isToken&&r.value==="do"?{isToken:!0,value:"d"}:r),ordinalNumber:v6,era:as({values:m6,defaultWidth:"wide"}),quarter:as({values:p6,defaultWidth:"wide",argumentCallback:i=>i-1}),month:as({values:g6,defaultWidth:"wide"}),day:as({values:_6,defaultWidth:"wide"}),dayPeriod:as({values:y6,defaultWidth:"wide"})},w6=/^(\d+)(ime|re|me|er|e)?/i,E6=/\d+/i,S6={narrow:/^(av\.J\.C|ap\.J\.C|ap\.J\.-C)/i,abbreviated:/^(av\.J\.-C|av\.J-C|apr\.J\.-C|apr\.J-C|ap\.J-C)/i,wide:/^(avant Jsus-Christ|aprs Jsus-Christ)/i},A6={any:[/^av/i,/^ap/i]},I6={narrow:/^T?[1234]/i,abbreviated:/^[1234](er|me|e)? trim\.?/i,wide:/^[1234](er|me|e)? trimestre/i},C6={any:[/1/i,/2/i,/3/i,/4/i]},N6={narrow:/^[jfmasond]/i,abbreviated:/^(janv|fvr|mars|avr|mai|juin|juill|juil|aot|sept|oct|nov|dc)\.?/i,wide:/^(janvier|fvrier|mars|avril|mai|juin|juillet|aot|septembre|octobre|novembre|dcembre)/i},x6={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^av/i,/^ma/i,/^juin/i,/^juil/i,/^ao/i,/^s/i,/^o/i,/^n/i,/^d/i]},R6={narrow:/^[lmjvsd]/i,short:/^(di|lu|ma|me|je|ve|sa)/i,abbreviated:/^(dim|lun|mar|mer|jeu|ven|sam)\.?/i,wide:/^(dimanche|lundi|mardi|mercredi|jeudi|vendredi|samedi)/i},D6={narrow:[/^d/i,/^l/i,/^m/i,/^m/i,/^j/i,/^v/i,/^s/i],any:[/^di/i,/^lu/i,/^ma/i,/^me/i,/^je/i,/^ve/i,/^sa/i]},M6={narrow:/^(a|p|minuit|midi|mat\.?|ap\.?m\.?|soir|nuit)/i,any:/^([ap]\.?\s?m\.?|du matin|de l'aprs[-\s]midi|du soir|de la nuit)/i},O6={any:{am:/^a/i,pm:/^p/i,midnight:/^min/i,noon:/^mid/i,morning:/mat/i,afternoon:/ap/i,evening:/soir/i,night:/nuit/i}},k6={ordinalNumber:LE({matchPattern:w6,parsePattern:E6,valueCallback:i=>parseInt(i)}),era:os({matchPatterns:S6,defaultMatchWidth:"wide",parsePatterns:A6,defaultParseWidth:"any"}),quarter:os({matchPatterns:I6,defaultMatchWidth:"wide",parsePatterns:C6,defaultParseWidth:"any",valueCallback:i=>i+1}),month:os({matchPatterns:N6,defaultMatchWidth:"wide",parsePatterns:x6,defaultParseWidth:"any"}),day:os({matchPatterns:R6,defaultMatchWidth:"wide",parsePatterns:D6,defaultParseWidth:"any"}),dayPeriod:os({matchPatterns:M6,defaultMatchWidth:"any",parsePatterns:O6,defaultParseWidth:"any"})},ka={code:"fr",formatDistance:o6,formatLong:h6,formatRelative:f6,localize:T6,match:k6,options:{weekStartsOn:1,firstWeekContainsDate:4}},sd=()=>{const i=new Date,e=Li(i,{weekStartsOn:1}),t=h_(i,{weekStartsOn:1});return{weekNumber:af(i),year:rf(i),startDate:e.toISOString(),endDate:t.toISOString()}},j6=(i,e)=>{const t=new Date(e,0,4),r=Li(t,{weekStartsOn:1}),o=jE(r,i-1),c=h_(o,{weekStartsOn:1});return{startDate:o.toISOString(),endDate:c.toISOString()}},L6=i=>{const e=new Date(i),t=ig(new Date);return ck(pO(e),t)},P6=(i,e)=>{const t=new Date(i),r=new Date(e),o=Oa(t,"d",{locale:ka}),c=Oa(r,"d",{locale:ka}),h=Oa(t,"MMMM",{locale:ka}),p=Oa(r,"MMMM",{locale:ka}),g=Oa(r,"yyyy",{locale:ka});return h===p?`${o} - ${c} ${h} ${g}`:`${o} ${h} - ${c} ${p} ${g}`},V6=(i,e,t)=>{const r=s6(`${e}-W${String(i).padStart(2,"0")}-1`,"RRRR-'W'II-i",new Date),o=jE(r,t),c=Li(o,{weekStartsOn:1}),h=h_(o,{weekStartsOn:1});return{weekNumber:af(o),year:rf(o),startDate:c.toISOString(),endDate:h.toISOString()}},B6=i=>{const e=new Date(i),t=[],r=["Lundi","Mardi","Mercredi","Jeudi","Vendredi","Samedi","Dimanche"],o=["monday","tuesday","wednesday","thursday","friday","saturday","sunday"];for(let c=0;c<7;c++){const h=new Date(e);h.setDate(e.getDate()+c),t.push({dayName:r[c],dayKey:o[c],date:h.toISOString(),dayNumber:Oa(h,"d",{locale:ka}),shortDate:Oa(h,"EEE dd",{locale:ka}),isPast:L6(h.toISOString())})}return t},Fo=(i,e)=>`${i}_${e}`,GE=ee.createContext(),p_=()=>{const i=ee.useContext(GE);if(!i)throw new Error("useMealPlan must be used within a MealPlanProvider");return i},U6=({children:i})=>{const{household:e}=Ja(),[t,r]=ee.useState(null),[o,c]=ee.useState(!0),[h,p]=ee.useState({});ee.useEffect(()=>{if(!e){c(!1);return}const{weekNumber:A,year:w}=sd();_(A,w)},[e]);const g=(A,w,S)=>`${S}_${w}_W${String(A).padStart(2,"0")}`,_=ee.useCallback(async(A,w)=>{if(e){c(!0);try{const S=g(A,w,e.id),M=Et(ct,"mealPlans",S),R=await Ua(M),k=`${w}_W${A}`;if(R.exists()){const N={id:R.id,...R.data()};r(N),p(ye=>({...ye,[k]:N}))}else{const{startDate:N,endDate:ye}=j6(A,w),oe={householdId:e.id,weekNumber:A,year:w,startDate:N,endDate:ye,meals:{},extras:[],permanentItems:[],checkedItems:{},createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()};await nl(M,oe);const V={id:S,...oe};r(V),p(X=>({...X,[k]:V}))}}catch(S){console.error("Error loading meal plan:",S)}finally{c(!1)}}},[e]),T=async(A,w)=>{if(t)try{const S=Et(ct,"mealPlans",t.id),M={...t.meals};w?M[A]=w:delete M[A],await Fn(S,{meals:M,updatedAt:new Date().toISOString()});const R={...t,meals:M,updatedAt:new Date().toISOString()};r(R);const k=`${t.year}_W${t.weekNumber}`;p(N=>({...N,[k]:R}))}catch(S){throw console.error("Error updating meal slot:",S),S}},E=async A=>{if(t)try{const w=Et(ct,"mealPlans",t.id),S={...t.meals};A.forEach(({slotId:k,mealData:N})=>{N?S[k]=N:delete S[k]}),await Fn(w,{meals:S,updatedAt:new Date().toISOString()});const M={...t,meals:S,updatedAt:new Date().toISOString()};r(M);const R=`${t.year}_W${t.weekNumber}`;p(k=>({...k,[R]:M}))}catch(w){throw console.error("Error updating multiple meal slots:",w),w}},I=async A=>{if(t)try{const w=Et(ct,"mealPlans",t.id),S={id:`extra_${Date.now()}`,...A,createdAt:new Date().toISOString()},M=[...t.extras,S];await Fn(w,{extras:M,updatedAt:new Date().toISOString()});const R={...t,extras:M,updatedAt:new Date().toISOString()};r(R);const k=`${t.year}_W${t.weekNumber}`;p(N=>({...N,[k]:R}))}catch(w){throw console.error("Error adding extra:",w),w}},O=async A=>{if(t)try{const w=Et(ct,"mealPlans",t.id),S=t.extras.filter(k=>k.id!==A);await Fn(w,{extras:S,updatedAt:new Date().toISOString()});const M={...t,extras:S,updatedAt:new Date().toISOString()};r(M);const R=`${t.year}_W${t.weekNumber}`;p(k=>({...k,[R]:M}))}catch(w){throw console.error("Error deleting extra:",w),w}},L=async A=>{if(t)try{const w=Et(ct,"mealPlans",t.id),S={id:`permanent_${Date.now()}`,...A,createdAt:new Date().toISOString()},M=[...t.permanentItems||[],S];await Fn(w,{permanentItems:M,updatedAt:new Date().toISOString()});const R={...t,permanentItems:M,updatedAt:new Date().toISOString()};r(R);const k=`${t.year}_W${t.weekNumber}`;p(N=>({...N,[k]:R}))}catch(w){throw console.error("Error adding permanent item:",w),w}},z=async A=>{if(t)try{const w=Et(ct,"mealPlans",t.id),S=(t.permanentItems||[]).filter(k=>k.id!==A);await Fn(w,{permanentItems:S,updatedAt:new Date().toISOString()});const M={...t,permanentItems:S,updatedAt:new Date().toISOString()};r(M);const R=`${t.year}_W${t.weekNumber}`;p(k=>({...k,[R]:M}))}catch(w){throw console.error("Error deleting permanent item:",w),w}},j=async A=>{if(t)try{const w=Et(ct,"mealPlans",t.id);await Fn(w,{checkedItems:A,updatedAt:new Date().toISOString()});const S={...t,checkedItems:A,updatedAt:new Date().toISOString()};r(S);const M=`${t.year}_W${t.weekNumber}`;p(R=>({...R,[M]:S}))}catch(w){throw console.error("Error updating checked items:",w),w}},Y=async(A,w)=>{if(!(!t||!e))try{const S=Et(Fs(ct,"mealPlanTemplates")),M={householdId:e.id,name:A,description:w,meals:t.meals,extras:t.extras,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()};return await nl(S,M),{id:S.id,...M}}catch(S){throw console.error("Error creating template:",S),S}},F=async()=>{if(!e)return[];try{const A=Pc(Fs(ct,"mealPlanTemplates"),Vc("householdId","==",e.id),oE("createdAt","desc")),w=await Bc(A),S=[];return w.forEach(M=>{S.push({id:M.id,...M.data()})}),S}catch(A){return console.error("Error getting templates:",A),[]}},le=async A=>{if(t)try{const w=Et(ct,"mealPlanTemplates",A),S=await Ua(w);if(!S.exists())throw new Error("Template not found");const M=S.data(),R=Et(ct,"mealPlans",t.id);await Fn(R,{meals:M.meals,extras:M.extras,updatedAt:new Date().toISOString()});const k={...t,meals:M.meals,extras:M.extras,updatedAt:new Date().toISOString()};r(k);const N=`${t.year}_W${t.weekNumber}`;p(ye=>({...ye,[N]:k}))}catch(w){throw console.error("Error applying template:",w),w}},K=async A=>{try{await n_(Et(ct,"mealPlanTemplates",A))}catch(w){throw console.error("Error deleting template:",w),w}},B=()=>{const A=Object.entries(h);if(A.length>3){const w=A.sort((M,R)=>{const k=new Date(M[1].updatedAt);return new Date(R[1].updatedAt)-k}),S=Object.fromEntries(w.slice(0,3));p(S)}};ee.useEffect(()=>{const A=setInterval(B,3e5);return()=>clearInterval(A)},[h]);const ie={mealPlan:t,loading:o,loadMealPlan:_,updateMealSlot:T,updateMultipleMealSlots:E,addExtra:I,deleteExtra:O,addPermanentItem:L,deletePermanentItem:z,updateCheckedItems:j,createTemplate:Y,getTemplates:F,applyTemplate:le,deleteTemplate:K};return f.jsx(GE.Provider,{value:ie,children:i})},z6="_loginContainer_tosav_1",q6="_loginCard_tosav_10",H6="_logo_tosav_20",F6="_loginContent_tosav_39",$6="_subtitle_tosav_48",G6="_googleButton_tosav_54",Y6="_error_tosav_76",Ra={loginContainer:z6,loginCard:q6,logo:H6,loginContent:F6,subtitle:$6,googleButton:G6,error:Y6},Q6=()=>{const{signInWithGoogle:i}=au(),[e,t]=ee.useState(!1),[r,o]=ee.useState(null),c=async()=>{t(!0),o(null);try{await i()}catch(h){o("Erreur lors de la connexion. Veuillez ressayer."),console.error(h)}finally{t(!1)}};return f.jsx("div",{className:Ra.loginContainer,children:f.jsxs("div",{className:Ra.loginCard,children:[f.jsxs("div",{className:Ra.logo,children:[f.jsx("h1",{children:"Go Gourmet"}),f.jsx("p",{children:"Organisez vos recettes et repas"})]}),f.jsxs("div",{className:Ra.loginContent,children:[f.jsx("h2",{children:"Bienvenue"}),f.jsx("p",{className:Ra.subtitle,children:"Connectez-vous pour accder  vos recettes"}),r&&f.jsx("div",{className:Ra.error,children:r}),f.jsxs("button",{onClick:c,disabled:e,className:Ra.googleButton,children:[f.jsxs("svg",{viewBox:"0 0 24 24",width:"20",height:"20",children:[f.jsx("path",{fill:"currentColor",d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"}),f.jsx("path",{fill:"currentColor",d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"}),f.jsx("path",{fill:"currentColor",d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"}),f.jsx("path",{fill:"currentColor",d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"})]}),e?"Connexion...":"Se connecter avec Google"]})]})]})})},K6="_container_1agpi_1",X6="_card_1agpi_9",W6="_header_1agpi_19",J6="_options_1agpi_34",Z6="_optionButton_1agpi_40",e4="_optionIcon_1agpi_59",t4="_backButton_1agpi_83",n4="_form_1agpi_100",i4="_formGroup_1agpi_106",s4="_hint_1agpi_122",r4="_submitButton_1agpi_128",a4="_error_1agpi_134",Nt={container:K6,card:X6,header:W6,options:J6,optionButton:Z6,optionIcon:e4,backButton:t4,form:n4,formGroup:i4,hint:s4,submitButton:r4,error:a4},o4=()=>{const{createHousehold:i,joinHousehold:e}=Ja(),[t,r]=ee.useState(null),[o,c]=ee.useState(""),[h,p]=ee.useState(""),[g,_]=ee.useState(!1),[T,E]=ee.useState(null),[I,O]=ee.useState(!1);ee.useEffect(()=>{const Y=new URLSearchParams(window.location.search).get("join");Y&&(p(Y),r("join"),O(!0),window.history.replaceState({},"",window.location.pathname))},[]);const L=async j=>{if(j.preventDefault(),!o.trim()){E("Veuillez entrer un nom de foyer");return}_(!0),E(null);try{await i(o)}catch(Y){E("Erreur lors de la cration du foyer"),console.error(Y)}finally{_(!1)}},z=async j=>{j.preventDefault();const Y=h.trim();if(!Y){E("Veuillez entrer un ID de foyer");return}_(!0),E(null);try{await e(Y)}catch(F){E("Erreur lors de la connexion au foyer. Vrifiez l'ID."),console.error(F)}finally{_(!1)}};return t?t==="create"?f.jsx("div",{className:Nt.container,children:f.jsxs("div",{className:Nt.card,children:[f.jsx("button",{onClick:()=>r(null),className:Nt.backButton,children:" Retour"}),f.jsxs("div",{className:Nt.header,children:[f.jsx("h1",{children:"Crer un foyer"}),f.jsx("p",{children:"Donnez un nom  votre foyer"})]}),T&&f.jsx("div",{className:Nt.error,children:T}),f.jsxs("form",{onSubmit:L,className:Nt.form,children:[f.jsxs("div",{className:Nt.formGroup,children:[f.jsx("label",{htmlFor:"householdName",children:"Nom du foyer"}),f.jsx("input",{type:"text",id:"householdName",value:o,onChange:j=>c(j.target.value),placeholder:"Ex: Famille Dupont, Colocation...",autoFocus:!0,disabled:g})]}),f.jsx("button",{type:"submit",disabled:g,className:Nt.submitButton,children:g?"Cration...":"Crer le foyer"})]})]})}):f.jsx("div",{className:Nt.container,children:f.jsxs("div",{className:Nt.card,children:[!I&&f.jsx("button",{onClick:()=>r(null),className:Nt.backButton,children:" Retour"}),f.jsxs("div",{className:Nt.header,children:[f.jsx("h1",{children:"Rejoindre un foyer"}),f.jsx("p",{children:I?" Vous avez t invit  rejoindre un foyer !":"Entrez l'ID du foyer partag par un membre"})]}),T&&f.jsx("div",{className:Nt.error,children:T}),f.jsxs("form",{onSubmit:z,className:Nt.form,children:[f.jsxs("div",{className:Nt.formGroup,children:[f.jsx("label",{htmlFor:"householdId",children:"ID du foyer"}),f.jsx("input",{type:"text",id:"householdId",value:h,onChange:j=>p(j.target.value),placeholder:"Collez l'ID du foyer ici",autoFocus:!I,disabled:g}),f.jsx("small",{className:Nt.hint,children:I?'Cliquez sur "Rejoindre" pour accder au foyer partag':"L'ID vous a t communiqu par un membre du foyer"})]}),f.jsx("button",{type:"submit",disabled:g,className:Nt.submitButton,children:g?"Connexion...":"Rejoindre le foyer"})]})]})}):f.jsx("div",{className:Nt.container,children:f.jsxs("div",{className:Nt.card,children:[f.jsxs("div",{className:Nt.header,children:[f.jsx("h1",{children:"Configuration du foyer"}),f.jsx("p",{children:"Choisissez comment vous souhaitez utiliser l'application"})]}),f.jsxs("div",{className:Nt.options,children:[f.jsxs("button",{onClick:()=>r("create"),className:Nt.optionButton,children:[f.jsx("div",{className:Nt.optionIcon,children:"+"}),f.jsx("h3",{children:"Crer un nouveau foyer"}),f.jsx("p",{children:"Commencez avec votre propre collection de recettes"})]}),f.jsxs("button",{onClick:()=>r("join"),className:Nt.optionButton,children:[f.jsx("div",{className:Nt.optionIcon,children:""}),f.jsx("h3",{children:"Rejoindre un foyer"}),f.jsx("p",{children:"Partagez les recettes avec d'autres personnes"})]})]})]})})},YE=(i,e=[])=>{const t=ee.useRef(!1);ee.useEffect(()=>{const r=()=>{const h=JSON.parse(sessionStorage.getItem("scrollPositions")||"{}");h[i]={x:window.scrollX,y:window.scrollY,timestamp:Date.now()},sessionStorage.setItem("scrollPositions",JSON.stringify(h))};let o;const c=()=>{clearTimeout(o),o=setTimeout(r,100)};return window.addEventListener("scroll",c,{passive:!0}),window.addEventListener("beforeunload",r),()=>{window.removeEventListener("scroll",c),window.removeEventListener("beforeunload",r),clearTimeout(o)}},[i]),ee.useEffect(()=>{if(t.current)return;const r=JSON.parse(sessionStorage.getItem("scrollPositions")||"{}"),o=r[i];o&&(Date.now()-o.timestamp<3e5?requestAnimationFrame(()=>{setTimeout(()=>{window.scrollTo(o.x,o.y),t.current=!0},100)}):(delete r[i],sessionStorage.setItem("scrollPositions",JSON.stringify(r))))},e),ee.useEffect(()=>{t.current=!1},[i])},l4=(i,e)=>[(()=>{try{const c=sessionStorage.getItem(`state_${i}`);if(c){const h=JSON.parse(c);if(Date.now()-h.timestamp<18e5)return h.value}}catch(c){console.error("Error loading persisted state:",c)}return e})(),c=>{try{const h={value:c,timestamp:Date.now()};sessionStorage.setItem(`state_${i}`,JSON.stringify(h))}catch(h){console.error("Error saving state:",h)}}],g_=(i,e,t={})=>{const{serializeToUrl:r,deserializeFromUrl:o}=t;return[(()=>{if(o){const g=o();if(g&&Object.keys(g).length>0)return{...e,...g}}try{const g=sessionStorage.getItem(`state_${i}`);if(g){const _=JSON.parse(g);if(Date.now()-_.timestamp<1800*1e3)return _.value}}catch(g){console.error("Error loading persisted state:",g)}return e})(),g=>{try{const _={value:g,timestamp:Date.now()};sessionStorage.setItem(`state_${i}`,JSON.stringify(_)),r&&r(g)}catch(_){console.error("Error saving state:",_)}}]},Kc=[{id:"entree",label:"Entre",icon:""},{id:"plat",label:"Plat",icon:""},{id:"dessert",label:"Dessert",icon:""},{id:"appetizer",label:"Apritif",icon:""},{id:"breakfast",label:"Petit-djeuner",icon:""},{id:"snack",label:"Goter",icon:""}],of=i=>Kc.find(e=>e.id===i);const c4=i=>i.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),u4=i=>i.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,r)=>r?r.toUpperCase():t.toLowerCase()),M0=i=>{const e=u4(i);return e.charAt(0).toUpperCase()+e.slice(1)},QE=(...i)=>i.filter((e,t,r)=>!!e&&e.trim()!==""&&r.indexOf(e)===t).join(" ").trim(),h4=i=>{for(const e in i)if(e.startsWith("aria-")||e==="role"||e==="title")return!0};var d4={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const f4=ee.forwardRef(({color:i="currentColor",size:e=24,strokeWidth:t=2,absoluteStrokeWidth:r,className:o="",children:c,iconNode:h,...p},g)=>ee.createElement("svg",{ref:g,...d4,width:e,height:e,stroke:i,strokeWidth:r?Number(t)*24/Number(e):t,className:QE("lucide",o),...!c&&!h4(p)&&{"aria-hidden":"true"},...p},[...h.map(([_,T])=>ee.createElement(_,T)),...Array.isArray(c)?c:[c]]));const Pi=(i,e)=>{const t=ee.forwardRef(({className:r,...o},c)=>ee.createElement(f4,{ref:c,iconNode:e,className:QE(`lucide-${c4(M0(i))}`,`lucide-${i}`,r),...o}));return t.displayName=M0(i),t};const m4=[["path",{d:"m15.477 12.89 1.515 8.526a.5.5 0 0 1-.81.47l-3.58-2.687a1 1 0 0 0-1.197 0l-3.586 2.686a.5.5 0 0 1-.81-.469l1.514-8.526",key:"1yiouv"}],["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}]],p4=Pi("award",m4);const g4=[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],_4=Pi("clock",g4);const y4=[["path",{d:"M7 16.3c2.2 0 4-1.83 4-4.05 0-1.16-.57-2.26-1.71-3.19S7.29 6.75 7 5.3c-.29 1.45-1.14 2.84-2.29 3.76S3 11.1 3 12.25c0 2.22 1.8 4.05 4 4.05z",key:"1ptgy4"}],["path",{d:"M12.56 6.6A10.97 10.97 0 0 0 14 3.02c.5 2.5 2 4.9 4 6.5s3 3.5 3 5.5a6.98 6.98 0 0 1-11.91 4.97",key:"1sl1rz"}]],v4=Pi("droplets",y4);const b4=[["path",{d:"M12 3q1 4 4 6.5t3 5.5a1 1 0 0 1-14 0 5 5 0 0 1 1-3 1 1 0 0 0 5 0c0-2-1.5-3-1.5-5q0-2 2.5-4",key:"1slcih"}]],T4=Pi("flame",b4);const w4=[["path",{d:"M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z",key:"sc7q7i"}]],E4=Pi("funnel",w4);const S4=[["path",{d:"M2 9.5a5.5 5.5 0 0 1 9.591-3.676.56.56 0 0 0 .818 0A5.49 5.49 0 0 1 22 9.5c0 2.29-1.5 4-3 5.5l-5.492 5.313a2 2 0 0 1-3 .019L5 15c-1.5-1.5-3-3.2-3-5.5",key:"mvr1a0"}]],A4=Pi("heart",S4);const I4=[["path",{d:"M11 20A7 7 0 0 1 9.8 6.1C15.5 5 17 4.48 19 2c1 2 2 4.18 2 8 0 5.5-4.78 10-10 10Z",key:"nnexq3"}],["path",{d:"M2 21c0-3 1.85-5.36 5.08-6C9.5 14.52 12 13 13 12",key:"mt58a7"}]],O0=Pi("leaf",I4);const C4=[["circle",{cx:"8",cy:"21",r:"1",key:"jimo8o"}],["circle",{cx:"19",cy:"21",r:"1",key:"13723u"}],["path",{d:"M2.05 2.05h2l2.66 12.42a2 2 0 0 0 2 1.58h9.78a2 2 0 0 0 1.95-1.57l1.65-7.43H5.12",key:"9zh506"}]],k0=Pi("shopping-cart",C4);const N4=[["path",{d:"M3 2v7c0 1.1.9 2 2 2h4a2 2 0 0 0 2-2V2",key:"cjf0a3"}],["path",{d:"M7 2v20",key:"1473qp"}],["path",{d:"M21 15V2a5 5 0 0 0-5 5v6c0 1.1.9 2 2 2h3Zm0 0v7",key:"j28e5"}]],x4=Pi("utensils",N4);const R4=[["path",{d:"M2 22 16 8",key:"60hf96"}],["path",{d:"M3.47 12.53 5 11l1.53 1.53a3.5 3.5 0 0 1 0 4.94L5 19l-1.53-1.53a3.5 3.5 0 0 1 0-4.94Z",key:"1rdhi6"}],["path",{d:"M7.47 8.53 9 7l1.53 1.53a3.5 3.5 0 0 1 0 4.94L9 15l-1.53-1.53a3.5 3.5 0 0 1 0-4.94Z",key:"1sdzmb"}],["path",{d:"M11.47 4.53 13 3l1.53 1.53a3.5 3.5 0 0 1 0 4.94L13 11l-1.53-1.53a3.5 3.5 0 0 1 0-4.94Z",key:"eoatbi"}],["path",{d:"M20 2h2v2a4 4 0 0 1-4 4h-2V6a4 4 0 0 1 4-4Z",key:"19rau1"}],["path",{d:"M11.47 17.47 13 19l-1.53 1.53a3.5 3.5 0 0 1-4.94 0L5 19l1.53-1.53a3.5 3.5 0 0 1 4.94 0Z",key:"tc8ph9"}],["path",{d:"M15.47 13.47 17 15l-1.53 1.53a3.5 3.5 0 0 1-4.94 0L9 15l1.53-1.53a3.5 3.5 0 0 1 4.94 0Z",key:"2m8kc5"}],["path",{d:"M19.47 9.47 21 11l-1.53 1.53a3.5 3.5 0 0 1-4.94 0L13 11l1.53-1.53a3.5 3.5 0 0 1 4.94 0Z",key:"vex3ng"}]],D4=Pi("wheat",R4);const M4=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],O4=Pi("x",M4),__=[{id:"vegetarian",label:"Vgtarien",icon:"Leaf",IconComponent:O0,color:"#22c55e",bgColor:"rgba(34, 197, 94, 0.1)",borderColor:"rgba(34, 197, 94, 0.3)"},{id:"vegan",label:"Vegan",icon:"Leaf",IconComponent:O0,color:"#10b981",bgColor:"rgba(16, 185, 129, 0.1)",borderColor:"rgba(16, 185, 129, 0.3)"},{id:"healthy",label:"quilibr",icon:"Heart",IconComponent:A4,color:"#ec4899",bgColor:"rgba(236, 72, 153, 0.1)",borderColor:"rgba(236, 72, 153, 0.3)"},{id:"spicy",label:"pic",icon:"Flame",IconComponent:T4,color:"#f97316",bgColor:"rgba(249, 115, 22, 0.1)",borderColor:"rgba(249, 115, 22, 0.3)"},{id:"quick",label:"Rapide",icon:"Clock",IconComponent:_4,color:"#3b82f6",bgColor:"rgba(59, 130, 246, 0.1)",borderColor:"rgba(59, 130, 246, 0.3)"},{id:"gourmet",label:"Gastronomique",icon:"Award",IconComponent:p4,color:"#eab308",bgColor:"rgba(234, 179, 8, 0.1)",borderColor:"rgba(234, 179, 8, 0.3)"},{id:"comfort",label:"Rconfortant",icon:"Utensils",IconComponent:x4,color:"#f59e0b",bgColor:"rgba(245, 158, 11, 0.1)",borderColor:"rgba(245, 158, 11, 0.3)"},{id:"glutenfree",label:"Sans gluten",icon:"Wheat",IconComponent:D4,color:"#a855f7",bgColor:"rgba(168, 85, 247, 0.1)",borderColor:"rgba(168, 85, 247, 0.3)"},{id:"lowcarb",label:"Faible en glucides",icon:"Droplets",IconComponent:v4,color:"#14b8a6",bgColor:"rgba(20, 184, 166, 0.1)",borderColor:"rgba(20, 184, 166, 0.3)"}],k4=i=>__.find(e=>e.id===i),ag=(i=[])=>i.map(e=>k4(e)).filter(Boolean),j4="_container_1d6r6_1",L4="_header_1d6r6_7",P4="_addButton_1d6r6_19",V4="_filterSection_1d6r6_26",B4="_searchContainer_1d6r6_38",U4="_searchModeToggle_1d6r6_44",z4="_searchModeButton_1d6r6_53",q4="_activeModeButton_1d6r6_70",H4="_searchInputWrapper_1d6r6_76",F4="_searchIcon_1d6r6_92",$4="_searchInput_1d6r6_76",G4="_clearSearchButton_1d6r6_115",Y4="_filterControls_1d6r6_138",Q4="_typeFilters_1d6r6_146",K4="_typeFilterButton_1d6r6_153",X4="_active_1d6r6_70",W4="_tagsFilterRow_1d6r6_179",J4="_tagsFilterButtons_1d6r6_185",Z4="_tagFilterButton_1d6r6_191",e3="_tagFilterActive_1d6r6_211",t3="_selectedTagsContainer_1d6r6_215",n3="_selectedTagsLabel_1d6r6_226",i3="_selectedTagsList_1d6r6_236",s3="_selectedTagChip_1d6r6_242",r3="_removeTagIcon_1d6r6_260",a3="_rightControls_1d6r6_266",o3="_clearFiltersButton_1d6r6_272",l3="_viewToggle_1d6r6_291",c3="_viewButton_1d6r6_300",u3="_activeView_1d6r6_319",h3="_resultsInfo_1d6r6_326",d3="_loading_1d6r6_336",f3="_empty_1d6r6_342",m3="_emptyButton_1d6r6_355",p3="_recipeGrid_1d6r6_359",g3="_recipeCard_1d6r6_365",_3="_recipeCardInner_1d6r6_378",y3="_recipeTypeBadge_1d6r6_389",v3="_recipeTypeLabel_1d6r6_414",b3="_recipeOverlay_1d6r6_418",T3="_recipeContent_1d6r6_433",w3="_recipeTags_1d6r6_439",E3="_recipeTag_1d6r6_439",S3="_moreTagsIndicator_1d6r6_459",A3="_recipeName_1d6r6_471",I3="_recipeMetaInfo_1d6r6_480",C3="_servings_1d6r6_486",N3="_metaIcon_1d6r6_500",x3="_placeholderIcon_1d6r6_551",R3="_recipeList_1d6r6_562",D3="_recipeListItem_1d6r6_568",M3="_recipeListImage_1d6r6_586",O3="_placeholderIconSmall_1d6r6_597",k3="_recipeListContent_1d6r6_606",j3="_recipeListHeader_1d6r6_614",L3="_recipeListName_1d6r6_621",P3="_recipeListType_1d6r6_629",V3="_recipeListMeta_1d6r6_643",B3="_recipeListServings_1d6r6_650",U3="_recipeListIngredientCount_1d6r6_651",Ie={container:j4,header:L4,addButton:P4,filterSection:V4,searchContainer:B4,searchModeToggle:U4,searchModeButton:z4,activeModeButton:q4,searchInputWrapper:H4,searchIcon:F4,searchInput:$4,clearSearchButton:G4,filterControls:Y4,typeFilters:Q4,typeFilterButton:K4,active:X4,tagsFilterRow:W4,tagsFilterButtons:J4,tagFilterButton:Z4,tagFilterActive:e3,selectedTagsContainer:t3,selectedTagsLabel:n3,selectedTagsList:i3,selectedTagChip:s3,removeTagIcon:r3,rightControls:a3,clearFiltersButton:o3,viewToggle:l3,viewButton:c3,activeView:u3,resultsInfo:h3,loading:d3,empty:f3,emptyButton:m3,recipeGrid:p3,recipeCard:g3,recipeCardInner:_3,recipeTypeBadge:y3,recipeTypeLabel:v3,recipeOverlay:b3,recipeContent:T3,recipeTags:w3,recipeTag:E3,moreTagsIndicator:S3,recipeName:A3,recipeMetaInfo:I3,servings:C3,metaIcon:N3,placeholderIcon:x3,recipeList:R3,recipeListItem:D3,recipeListImage:M3,placeholderIconSmall:O3,recipeListContent:k3,recipeListHeader:j3,recipeListName:L3,recipeListType:P3,recipeListMeta:V3,recipeListServings:B3,recipeListIngredientCount:U3},z3=i=>({entree:"#14b8a6",plat:"#f97316",dessert:"#ec4899",appetizer:"#8b5cf6",breakfast:"#eab308",snack:"#22c55e"})[i]||"#f97316",q3=({onSelectRecipe:i,onCreateRecipe:e})=>{const{recipes:t,loading:r}=Za(),o=B=>{const ie=new URLSearchParams;B.searchTerm&&ie.set("search",B.searchTerm),B.searchMode!=="name"&&ie.set("mode",B.searchMode),B.selectedType!=="all"&&ie.set("type",B.selectedType),B.viewMode!=="grid"&&ie.set("view",B.viewMode);const A=ie.toString()?`${window.location.pathname}?${ie}`:window.location.pathname;window.history.replaceState({},"",A)},c=()=>{const B=new URLSearchParams(window.location.search),ie=B.get("view"),A=ie==="list"||ie==="grid"?ie:"grid";return{searchTerm:B.get("search")||"",searchMode:B.get("mode")||"name",selectedType:B.get("type")||"all",viewMode:A}},[h,p]=g_("recipesFilters",{searchTerm:"",searchMode:"name",selectedType:"all",selectedTags:[],viewMode:"grid"},{serializeToUrl:o,deserializeFromUrl:c}),[g,_]=ee.useState(h.searchTerm),[T,E]=ee.useState(h.searchMode),[I,O]=ee.useState(h.selectedType),[L,z]=ee.useState(h.selectedTags||[]),[j,Y]=ee.useState(h.viewMode==="grid"||h.viewMode==="list"?h.viewMode:"grid");YE("recipes",[r,t.length]),ee.useEffect(()=>{p({searchTerm:g,searchMode:T,selectedType:I,selectedTags:L,viewMode:j})},[g,T,I,L,j,p]);const F=t.filter(B=>{const ie=I==="all"||B.type===I,A=L.length===0||L.every(S=>B.tags?.includes(S));let w=!0;if(g.trim()){const S=g.toLowerCase();T==="name"?w=B.name.toLowerCase().includes(S):T==="ingredient"&&(w=B.ingredients?.some(M=>M.name?.toLowerCase().includes(S))||!1)}return w&&ie&&A}),le=()=>{_(""),O("all"),z([])},K=g!==""||I!=="all"||L.length>0;return r?f.jsx("div",{className:Ie.container,children:f.jsx("div",{className:Ie.loading,children:"Chargement des recettes..."})}):f.jsxs("div",{className:Ie.container,children:[f.jsxs("div",{className:Ie.header,children:[f.jsx("h1",{children:"Mes Recettes"}),f.jsx("button",{onClick:e,className:Ie.addButton,children:"+ Nouvelle recette"})]}),f.jsxs("div",{className:Ie.filterSection,children:[f.jsxs("div",{className:Ie.searchContainer,children:[f.jsxs("div",{className:Ie.searchModeToggle,children:[f.jsx("button",{onClick:()=>E("name"),className:`${Ie.searchModeButton} ${T==="name"?Ie.activeModeButton:""}`,title:"Rechercher par nom",children:" Nom"}),f.jsx("button",{onClick:()=>E("ingredient"),className:`${Ie.searchModeButton} ${T==="ingredient"?Ie.activeModeButton:""}`,title:"Rechercher par ingrdient",children:" Ingrdient"})]}),f.jsxs("div",{className:Ie.searchInputWrapper,children:[f.jsx("span",{className:Ie.searchIcon,children:""}),f.jsx("input",{type:"text",placeholder:T==="name"?"Rechercher une recette...":"Rechercher par ingrdient...",value:g,onChange:B=>_(B.target.value),className:Ie.searchInput}),g&&f.jsx("button",{onClick:()=>_(""),className:Ie.clearSearchButton,title:"Effacer",children:""})]})]}),f.jsxs("div",{className:Ie.filterControls,children:[f.jsxs("div",{className:Ie.typeFilters,children:[f.jsxs("button",{onClick:()=>O("all"),className:`${Ie.typeFilterButton} ${I==="all"?Ie.active:""}`,children:["Tous (",t.length,")"]}),Kc.filter(B=>t.filter(A=>A.type===B.id).length>0).map(B=>{const ie=t.filter(A=>A.type===B.id).length;return f.jsxs("button",{onClick:()=>O(B.id),className:`${Ie.typeFilterButton} ${I===B.id?Ie.active:""}`,children:[B.icon," ",B.label," (",ie,")"]},B.id)})]}),L.length>0&&f.jsxs("div",{className:Ie.selectedTagsContainer,children:[f.jsxs("span",{className:Ie.selectedTagsLabel,children:[f.jsx(E4,{size:14,strokeWidth:2}),"Tags:"]}),f.jsx("div",{className:Ie.selectedTagsList,children:ag(L).map(B=>{const ie=B.IconComponent;return f.jsxs("button",{onClick:()=>z(L.filter(A=>A!==B.id)),className:Ie.selectedTagChip,style:{backgroundColor:B.bgColor,borderColor:B.color,color:B.color},children:[f.jsx(ie,{size:12,strokeWidth:2.5}),B.label,f.jsx("span",{className:Ie.removeTagIcon,children:""})]},B.id)})})]}),f.jsx("div",{className:Ie.tagsFilterRow,children:f.jsx("div",{className:Ie.tagsFilterButtons,children:__.map(B=>{const ie=L.includes(B.id),A=B.IconComponent,w=t.filter(S=>S.tags?.includes(B.id)).length;return w===0?null:f.jsxs("button",{onClick:()=>{z(ie?L.filter(S=>S!==B.id):[...L,B.id])},className:`${Ie.tagFilterButton} ${ie?Ie.tagFilterActive:""}`,style:{borderColor:ie?B.color:"var(--border-color)",backgroundColor:ie?B.bgColor:"transparent",color:ie?B.color:"var(--text-secondary)"},children:[f.jsx(A,{size:14,strokeWidth:2}),B.label," (",w,")"]},B.id)})})}),f.jsxs("div",{className:Ie.rightControls,children:[K&&f.jsx("button",{onClick:le,className:Ie.clearFiltersButton,title:"Rinitialiser les filtres",children:" Rinitialiser"}),f.jsxs("div",{className:Ie.viewToggle,children:[f.jsx("button",{onClick:()=>Y("grid"),className:`${Ie.viewButton} ${j==="grid"?Ie.activeView:""}`,title:"Vue grille",children:""}),f.jsx("button",{onClick:()=>Y("list"),className:`${Ie.viewButton} ${j==="list"?Ie.activeView:""}`,title:"Vue liste",children:""})]})]})]}),f.jsxs("div",{className:Ie.resultsInfo,children:[F.length," recette",F.length>1?"s":""," trouve",F.length>1?"s":"",K&&` (sur ${t.length})`]})]}),F.length===0?f.jsx("div",{className:Ie.empty,children:g||I!=="all"?f.jsx("p",{children:"Aucune recette ne correspond  votre recherche"}):f.jsxs(f.Fragment,{children:[f.jsx("p",{children:"Vous n'avez pas encore de recettes"}),f.jsx("button",{onClick:e,className:Ie.emptyButton,children:"Crer ma premire recette"})]})}):f.jsx("div",{className:j==="grid"?Ie.recipeGrid:Ie.recipeList,children:F.map(B=>{const ie=of(B.type||"plat");return j==="list"?f.jsxs("div",{className:Ie.recipeListItem,onClick:()=>i(B.id),children:[f.jsx("div",{className:Ie.recipeListImage,style:{backgroundImage:B.imageUrl?`url(${B.imageUrl})`:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)"},children:!B.imageUrl&&f.jsx("div",{className:Ie.placeholderIconSmall,children:""})}),f.jsxs("div",{className:Ie.recipeListContent,children:[f.jsxs("div",{className:Ie.recipeListHeader,children:[f.jsx("h3",{className:Ie.recipeListName,children:B.name}),ie&&f.jsxs("span",{className:Ie.recipeListType,children:[ie.icon," ",ie.label]})]}),f.jsxs("div",{className:Ie.recipeListMeta,children:[f.jsxs("span",{className:Ie.recipeListServings,children:[" ",B.servings," pers."]}),f.jsxs("span",{className:Ie.recipeListIngredientCount,children:[" ",B.ingredients?.length||0," ingrdient",(B.ingredients?.length||0)>1?"s":""]})]})]})]},B.id):f.jsx("div",{className:Ie.recipeCard,onClick:()=>i(B.id),children:f.jsxs("div",{className:Ie.recipeCardInner,style:{backgroundImage:B.imageUrl?`url(${B.imageUrl})`:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)"},children:[ie&&f.jsx("div",{className:Ie.recipeTypeBadge,style:{backgroundColor:z3(ie.id)},children:f.jsx("span",{className:Ie.recipeTypeLabel,children:ie.label})}),f.jsx("div",{className:Ie.recipeOverlay,children:f.jsxs("div",{className:Ie.recipeContent,children:[B.tags&&B.tags.length>0&&f.jsxs("div",{className:Ie.recipeTags,children:[ag(B.tags).slice(0,2).map(A=>{const w=A.IconComponent;return f.jsxs("span",{className:Ie.recipeTag,style:{backgroundColor:A.color,boxShadow:`0 2px 8px ${A.color}40`},children:[f.jsx(w,{size:12,strokeWidth:2.5}),A.label]},A.id)}),B.tags.length>2&&f.jsxs("span",{className:Ie.moreTagsIndicator,children:["+",B.tags.length-2]})]}),f.jsx("h3",{className:Ie.recipeName,children:B.name}),f.jsx("div",{className:Ie.recipeMetaInfo,children:f.jsxs("span",{className:Ie.servings,children:[f.jsx("span",{className:Ie.metaIcon,children:""}),B.servings," pers."]})})]})}),!B.imageUrl&&f.jsx("div",{className:Ie.placeholderIcon,children:""})]})},B.id)})})]})},H3="_container_r6hsc_1",F3="_addIngredientsButton_r6hsc_5",$3="_modalOverlay_r6hsc_25",G3="_modalContent_r6hsc_40",Y3="_modalHeader_r6hsc_52",Q3="_closeButton_r6hsc_67",K3="_searchBox_r6hsc_90",X3="_searchInput_r6hsc_96",W3="_categoryFilters_r6hsc_102",J3="_filterButton_r6hsc_109",Z3="_active_r6hsc_126",ej="_noResults_r6hsc_132",tj="_addNewButton_r6hsc_142",nj="_ingredientsScrollArea_r6hsc_158",ij="_ingredientsList_r6hsc_164",sj="_emptyState_r6hsc_168",rj="_categoryGroup_r6hsc_178",aj="_categoryHeader_r6hsc_186",oj="_ingredientGrid_r6hsc_195",lj="_ingredientCard_r6hsc_201",cj="_selected_r6hsc_212",uj="_ingredientImage_r6hsc_237",hj="_placeholderImage_r6hsc_251",dj="_selectedBadge_r6hsc_261",fj="_ingredientInfo_r6hsc_279",mj="_ingredientName_r6hsc_283",pj="_addForm_r6hsc_293",gj="_formGroup_r6hsc_307",_j="_formActions_r6hsc_324",yj="_cancelButton_r6hsc_334",rt={container:H3,addIngredientsButton:F3,modalOverlay:$3,modalContent:G3,modalHeader:Y3,closeButton:Q3,searchBox:K3,searchInput:X3,categoryFilters:W3,filterButton:J3,active:Z3,noResults:ej,addNewButton:tj,ingredientsScrollArea:nj,ingredientsList:ij,emptyState:sj,categoryGroup:rj,categoryHeader:aj,ingredientGrid:oj,ingredientCard:lj,selected:cj,ingredientImage:uj,placeholderImage:hj,selectedBadge:dj,ingredientInfo:fj,ingredientName:mj,addForm:pj,formGroup:gj,formActions:_j,cancelButton:yj},vj=({onSelect:i,onDeselect:e,selectedIngredients:t=[]})=>{const{ingredients:r,addIngredient:o}=ou(),[c,h]=ee.useState(""),[p,g]=ee.useState("all"),[_,T]=ee.useState(!1),[E,I]=ee.useState(!1),[O,L]=ee.useState({}),[z,j]=ee.useState({name:"",category:"fruits-legumes"});ee.useEffect(()=>{const w=async()=>{const S={};for(const M of r)if(M.imageUrl)try{const R=await dl(M.imageUrl);S[M.id]=R}catch(R){console.error(`Error loading image for ${M.name}:`,R)}L(S)};r.length>0&&w()},[r]);const Y=r.filter(w=>{const S=w.name.toLowerCase().includes(c.toLowerCase()),M=p==="all"||w.category===p;return S&&M}),F=t.map(w=>w.ingredientId||w.id),le=hs.map(w=>({...w,ingredients:Y.filter(S=>S.category===w.id)})).filter(w=>w.ingredients.length>0),K=w=>{if(F.includes(w.id)){if(e){const S=t.find(M=>(M.ingredientId||M.id)===w.id);e(S)}}else i(w),h(""),I(!1)},B=()=>{I(!0)},ie=()=>{I(!1),h(""),g("all"),T(!1)},A=async()=>{if(z.name.trim())try{const w=await o(z);i(w),j({name:"",category:"fruits-legumes"}),T(!1),h(""),I(!1)}catch(w){console.error("Error adding ingredient:",w)}};return f.jsxs("div",{className:rt.container,children:[f.jsx("button",{type:"button",onClick:B,className:rt.addIngredientsButton,children:"+ Ajouter des ingrdients"}),E&&f.jsx("div",{className:rt.modalOverlay,onClick:ie,children:f.jsxs("div",{className:rt.modalContent,onClick:w=>w.stopPropagation(),children:[f.jsxs("div",{className:rt.modalHeader,children:[f.jsx("h3",{children:"Slectionner des ingrdients"}),f.jsx("button",{type:"button",onClick:ie,className:rt.closeButton,children:""})]}),f.jsxs("div",{className:rt.searchBox,children:[f.jsx("input",{type:"text",placeholder:"Rechercher un ingrdient...",value:c,onChange:w=>h(w.target.value),className:rt.searchInput}),f.jsxs("div",{className:rt.categoryFilters,children:[f.jsxs("button",{type:"button",onClick:()=>g("all"),className:`${rt.filterButton} ${p==="all"?rt.active:""}`,children:["Tous (",r.length,")"]}),hs.map(w=>{const S=r.filter(M=>M.category===w.id).length;return S===0?null:f.jsxs("button",{type:"button",onClick:()=>g(w.id),className:`${rt.filterButton} ${p===w.id?rt.active:""}`,children:[w.icon," ",S]},w.id)})]})]}),c&&Y.length===0&&f.jsxs("div",{className:rt.noResults,children:[f.jsxs("p",{children:['Aucun ingrdient trouv pour "',c,'"']}),f.jsxs("button",{type:"button",onClick:()=>{j({...z,name:c}),T(!0)},className:rt.addNewButton,children:['+ Crer "',c,'"']})]}),_?f.jsxs("div",{className:rt.addForm,children:[f.jsx("h4",{children:"Nouvel ingrdient"}),f.jsxs("div",{children:[f.jsxs("div",{className:rt.formGroup,children:[f.jsx("label",{children:"Nom"}),f.jsx("input",{type:"text",value:z.name,onChange:w=>j({...z,name:w.target.value}),autoFocus:!0,required:!0})]}),f.jsxs("div",{className:rt.formGroup,children:[f.jsx("label",{children:"Catgorie"}),f.jsx("select",{value:z.category,onChange:w=>j({...z,category:w.target.value}),children:hs.map(w=>f.jsxs("option",{value:w.id,children:[w.icon," ",w.label]},w.id))})]}),f.jsxs("div",{className:rt.formActions,children:[f.jsx("button",{type:"button",onClick:A,children:"Ajouter"}),f.jsx("button",{type:"button",onClick:()=>T(!1),className:rt.cancelButton,children:"Annuler"})]})]})]}):f.jsx("div",{className:rt.ingredientsScrollArea,children:(c||p!=="all")&&Y.length>0?f.jsx("div",{className:rt.ingredientsList,children:le.map(w=>f.jsxs("div",{className:rt.categoryGroup,children:[f.jsxs("h4",{className:rt.categoryHeader,children:[w.icon," ",w.label]}),f.jsx("div",{className:rt.ingredientGrid,children:w.ingredients.map(S=>{const M=F.includes(S.id);return f.jsxs("button",{type:"button",onClick:()=>K(S),className:`${rt.ingredientCard} ${M?rt.selected:""}`,children:[f.jsxs("div",{className:rt.ingredientImage,children:[O[S.id]?f.jsx("img",{src:O[S.id],alt:S.name}):f.jsx("div",{className:rt.placeholderImage,children:w.icon}),M&&f.jsx("span",{className:rt.selectedBadge,children:""})]}),f.jsx("div",{className:rt.ingredientInfo,children:f.jsx("span",{className:rt.ingredientName,children:S.name})})]},S.id)})})]},w.id))}):f.jsx("div",{className:rt.emptyState,children:f.jsx("p",{children:"Recherchez ou slectionnez une catgorie pour afficher les ingrdients"})})})]})})]})},bj="_container_eelk0_1",Tj="_label_eelk0_5",wj="_uploadArea_eelk0_12",Ej="_fileInput_eelk0_18",Sj="_uploadButton_eelk0_22",Aj="_uploadIcon_eelk0_44",Ij="_uploadHint_eelk0_48",Cj="_preview_eelk0_53",Nj="_previewImage_eelk0_62",xj="_previewOverlay_eelk0_68",Rj="_changeButton_eelk0_87",Dj="_removeButton_eelk0_88",gi={container:bj,label:Tj,uploadArea:wj,fileInput:Ej,uploadButton:Sj,uploadIcon:Aj,uploadHint:Ij,preview:Cj,previewImage:Nj,previewOverlay:xj,changeButton:Rj,removeButton:Dj},KE=({currentImage:i,onImageSelect:e,onImageRemove:t,label:r="Image"})=>{const[o,c]=ee.useState(i),h=ee.useRef(null),p=T=>{const E=T.target.files[0];if(!E)return;if(!E.type.startsWith("image/")){alert("Veuillez slectionner une image valide");return}if(E.size>5*1024*1024){alert("L'image ne doit pas dpasser 5MB");return}const I=new FileReader;I.onloadend=()=>{c(I.result)},I.readAsDataURL(E),e(E)},g=()=>{c(null),h.current&&(h.current.value=""),t&&t()},_=()=>{h.current?.click()};return f.jsxs("div",{className:gi.container,children:[f.jsx("label",{className:gi.label,children:r}),f.jsx("div",{className:gi.uploadArea,children:o?f.jsxs("div",{className:gi.preview,children:[f.jsx("img",{src:o,alt:"Preview",className:gi.previewImage}),f.jsxs("div",{className:gi.previewOverlay,children:[f.jsx("button",{type:"button",onClick:_,className:gi.changeButton,children:"Changer"}),f.jsx("button",{type:"button",onClick:g,className:gi.removeButton,children:"Supprimer"})]})]}):f.jsxs("button",{type:"button",onClick:_,className:gi.uploadButton,children:[f.jsx("span",{className:gi.uploadIcon,children:""}),f.jsx("span",{children:"Ajouter une image"}),f.jsx("span",{className:gi.uploadHint,children:"JPG, PNG (max 5MB)"})]})}),f.jsx("input",{ref:h,type:"file",accept:"image/*",onChange:p,className:gi.fileInput})]})};function j0(i,e,t,r,o,c,h){try{var p=i[c](h),g=p.value}catch(_){t(_);return}p.done?e(g):Promise.resolve(g).then(r,o)}function Pa(i){return function(){var e=this,t=arguments;return new Promise(function(r,o){var c=i.apply(e,t);function h(g){j0(c,r,o,h,p,"next",g)}function p(g){j0(c,r,o,h,p,"throw",g)}h(void 0)})}}var Np,L0;function Mj(){if(L0)return Np;L0=1;var i="Expected a function",e=NaN,t="[object Symbol]",r=/^\s+|\s+$/g,o=/^[-+]0x[0-9a-f]+$/i,c=/^0b[01]+$/i,h=/^0o[0-7]+$/i,p=parseInt,g=typeof Ph=="object"&&Ph&&Ph.Object===Object&&Ph,_=typeof self=="object"&&self&&self.Object===Object&&self,T=g||_||Function("return this")(),E=Object.prototype,I=E.toString,O=Math.max,L=Math.min,z=function(){return T.Date.now()};function j(B,ie,A){var w,S,M,R,k,N,ye=0,oe=!1,V=!1,X=!0;if(typeof B!="function")throw new TypeError(i);ie=K(ie)||0,Y(A)&&(oe=!!A.leading,V="maxWait"in A,M=V?O(K(A.maxWait)||0,ie):M,X="trailing"in A?!!A.trailing:X);function ne(we){var je=w,Ye=S;return w=S=void 0,ye=we,R=B.apply(Ye,je),R}function H(we){return ye=we,k=setTimeout(G,ie),oe?ne(we):R}function W(we){var je=we-N,Ye=we-ye,q=ie-je;return V?L(q,M-Ye):q}function D(we){var je=we-N,Ye=we-ye;return N===void 0||je>=ie||je<0||V&&Ye>=M}function G(){var we=z();if(D(we))return se(we);k=setTimeout(G,W(we))}function se(we){return k=void 0,X&&w?ne(we):(w=S=void 0,R)}function me(){k!==void 0&&clearTimeout(k),ye=0,w=N=S=k=void 0}function Ee(){return k===void 0?R:se(z())}function Se(){var we=z(),je=D(we);if(w=arguments,S=this,N=we,je){if(k===void 0)return H(N);if(V)return k=setTimeout(G,ie),ne(N)}return k===void 0&&(k=setTimeout(G,ie)),R}return Se.cancel=me,Se.flush=Ee,Se}function Y(B){var ie=typeof B;return!!B&&(ie=="object"||ie=="function")}function F(B){return!!B&&typeof B=="object"}function le(B){return typeof B=="symbol"||F(B)&&I.call(B)==t}function K(B){if(typeof B=="number")return B;if(le(B))return e;if(Y(B)){var ie=typeof B.valueOf=="function"?B.valueOf():B;B=Y(ie)?ie+"":ie}if(typeof B!="string")return B===0?B:+B;B=B.replace(r,"");var A=c.test(B);return A||h.test(B)?p(B.slice(2),A?2:8):o.test(B)?e:+B}return Np=j,Np}var Oj=Mj();const kj=RA(Oj),Ko=typeof window<"u"&&(window.SpeechRecognition||window.webkitSpeechRecognition||window.mozSpeechRecognition||window.msSpeechRecognition||window.oSpeechRecognition),jj=i=>i===Ko;var xd=(()=>/(android)/i.test(typeof navigator<"u"?navigator.userAgent:""));const Rd=(...i)=>i.map(e=>e.trim()).join(" ").trim(),Lj=/\s*\((.*?)\)\s*/g,Pj=/(\(\?:[^)]+\))\?/g,Vj=/(\(\?)?:\w+/g,Bj=/\*/g,Uj=/[-{}[\]+?.,\\^$|#]/g,zj=i=>i instanceof RegExp?new RegExp(i.source,"i"):(i=i.replace(Uj,"\\$&").replace(Lj,"(?:$1)?").replace(Vj,(e,t)=>t?e:"([^\\s]+)").replace(Bj,"(.*?)").replace(Pj,"\\s*$1?\\s*"),new RegExp("^"+i+"$","i")),qj=(i,e)=>{if(i=i.replace(/\s+/g,"").toLowerCase(),e=e.replace(/\s+/g,"").toLowerCase(),!i.length&&!e.length)return 1;if(!i.length||!e.length)return 0;if(i===e)return 1;if(i.length===1&&e.length===1||i.length<2||e.length<2)return 0;const t=new Map;for(let o=0;o<i.length-1;o++){const c=i.substring(o,o+2),h=t.has(c)?t.get(c)+1:1;t.set(c,h)}let r=0;for(let o=0;o<e.length-1;o++){const c=e.substring(o,o+2),h=t.has(c)?t.get(c):0;h>0&&(t.set(c,h-1),r++)}return 2*r/(i.length+e.length-2)},XE=()=>typeof window<"u"&&window.navigator!==void 0&&window.navigator.mediaDevices!==void 0&&window.navigator.mediaDevices.getUserMedia!==void 0&&(window.AudioContext!==void 0||window.webkitAudioContext!==void 0);class xp{setSpeechRecognition(e){const t=!!e&&(jj(e)||XE());t&&(this.disableRecognition(),this.recognition=new e,this.recognition.continuous=!1,this.recognition.interimResults=!0,this.recognition.onresult=this.updateTranscript.bind(this),this.recognition.onend=this.onRecognitionDisconnect.bind(this),this.recognition.onerror=this.onError.bind(this)),this.emitBrowserSupportsSpeechRecognitionChange(t)}subscribe(e,t){this.subscribers[e]=t}unsubscribe(e){delete this.subscribers[e]}emitListeningChange(e){this.listening=e,Object.keys(this.subscribers).forEach(t=>{const{onListeningChange:r}=this.subscribers[t];r(e)})}emitMicrophoneAvailabilityChange(e){this.isMicrophoneAvailable=e,Object.keys(this.subscribers).forEach(t=>{const{onMicrophoneAvailabilityChange:r}=this.subscribers[t];r(e)})}emitTranscriptChange(e,t){Object.keys(this.subscribers).forEach(r=>{const{onTranscriptChange:o}=this.subscribers[r];o(e,t)})}emitClearTranscript(){Object.keys(this.subscribers).forEach(e=>{const{onClearTranscript:t}=this.subscribers[e];t()})}emitBrowserSupportsSpeechRecognitionChange(e){Object.keys(this.subscribers).forEach(t=>{const{onBrowserSupportsSpeechRecognitionChange:r,onBrowserSupportsContinuousListeningChange:o}=this.subscribers[t];r(e),o(e)})}disconnect(e){if(this.recognition&&this.listening)switch(e){case"ABORT":this.pauseAfterDisconnect=!0,this.abort();break;case"RESET":this.pauseAfterDisconnect=!1,this.abort();break;case"STOP":default:this.pauseAfterDisconnect=!0,this.stop()}}disableRecognition(){this.recognition&&(this.recognition.onresult=()=>{},this.recognition.onend=()=>{},this.recognition.onerror=()=>{},this.listening&&this.stopListening())}onError(e){e&&e.error&&e.error==="not-allowed"&&(this.emitMicrophoneAvailabilityChange(!1),this.disableRecognition())}onRecognitionDisconnect(){this.onStopListening(),this.listening=!1,this.pauseAfterDisconnect?this.emitListeningChange(!1):this.recognition&&(this.recognition.continuous?this.startListening({continuous:this.recognition.continuous}):this.emitListeningChange(!1)),this.pauseAfterDisconnect=!1}updateTranscript({results:e,resultIndex:t}){const r=t===void 0?e.length-1:t;this.interimTranscript="",this.finalTranscript="";for(let c=r;c<e.length;++c)e[c].isFinal&&(!xd()||e[c][0].confidence>0)?this.updateFinalTranscript(e[c][0].transcript):this.interimTranscript=Rd(this.interimTranscript,e[c][0].transcript);let o=!1;this.interimTranscript===""&&this.finalTranscript!==""?(this.previousResultWasFinalOnly&&(o=!0),this.previousResultWasFinalOnly=!0):this.previousResultWasFinalOnly=!1,o||this.emitTranscriptChange(this.interimTranscript,this.finalTranscript)}updateFinalTranscript(e){this.finalTranscript=Rd(this.finalTranscript,e)}resetTranscript(){this.disconnect("RESET")}startListening(){return Pa(function*({continuous:e=!1,language:t}={}){if(!this.recognition)return;const r=e!==this.recognition.continuous,o=t&&t!==this.recognition.lang;if((r||o)&&(this.listening&&(yield this.stopListening()),this.recognition.continuous=r?e:this.recognition.continuous,this.recognition.lang=o?t:this.recognition.lang),!this.listening){this.recognition.continuous||(this.resetTranscript(),this.emitClearTranscript());try{yield this.start(),this.emitListeningChange(!0)}catch(c){c instanceof DOMException||this.emitMicrophoneAvailabilityChange(!1)}}}).apply(this,arguments)}abortListening(){return Pa(function*(){this.disconnect("ABORT"),this.emitListeningChange(!1),yield new Promise(e=>{this.onStopListening=e})}).call(this)}stopListening(){return Pa(function*(){this.disconnect("STOP"),this.emitListeningChange(!1),yield new Promise(e=>{this.onStopListening=e})}).call(this)}getRecognition(){return this.recognition}start(){return Pa(function*(){this.recognition&&!this.listening&&(yield this.recognition.start(),this.listening=!0)}).call(this)}stop(){this.recognition&&this.listening&&(this.recognition.stop(),this.listening=!1)}abort(){this.recognition&&this.listening&&(this.recognition.abort(),this.listening=!1)}constructor(e){this.recognition=null,this.pauseAfterDisconnect=!1,this.interimTranscript="",this.finalTranscript="",this.listening=!1,this.isMicrophoneAvailable=!0,this.subscribers={},this.onStopListening=()=>{},this.previousResultWasFinalOnly=!1,this.resetTranscript=this.resetTranscript.bind(this),this.startListening=this.startListening.bind(this),this.stopListening=this.stopListening.bind(this),this.abortListening=this.abortListening.bind(this),this.setSpeechRecognition=this.setSpeechRecognition.bind(this),this.disableRecognition=this.disableRecognition.bind(this),this.setSpeechRecognition(e),xd()&&(this.updateFinalTranscript=kj(this.updateFinalTranscript,250,{leading:!0}))}}const WE="CLEAR_TRANSCRIPT",JE="APPEND_TRANSCRIPT",Hj=()=>({type:WE}),Fj=(i,e)=>({type:JE,payload:{interimTranscript:i,finalTranscript:e}}),$j=(i,e)=>{switch(e.type){case WE:return{interimTranscript:"",finalTranscript:""};case JE:return{interimTranscript:e.payload.interimTranscript,finalTranscript:Rd(i.finalTranscript,e.payload.finalTranscript)};default:throw new Error}};let Xo=!!Ko,rd=Xo&&!xd(),Us;const Gj=({transcribing:i=!0,clearTranscriptOnListen:e=!0,commands:t=[]}={})=>{const[r]=ee.useState(Vr.getRecognitionManager()),[o,c]=ee.useState(Xo),[h,p]=ee.useState(rd),[{interimTranscript:g,finalTranscript:_},T]=ee.useReducer($j,{interimTranscript:r.interimTranscript,finalTranscript:""}),[E,I]=ee.useState(r.listening),[O,L]=ee.useState(r.isMicrophoneAvailable),z=ee.useRef(t);z.current=t;const j=()=>{T(Hj())},Y=ee.useCallback(()=>{r.resetTranscript(),j()},[r]),F=(w,S,M)=>{const k=(typeof w=="object"?w.toString():w).replace(/[&/\\#,+()!$~%.'":*?<>{}]/g,"").replace(/  +/g," ").trim(),N=qj(k,S);return N>=M?{command:w,commandWithoutSpecials:k,howSimilar:N,isFuzzyMatch:!0}:null},le=(w,S)=>{const R=zj(w).exec(S);return R?{command:w,parameters:R.slice(1)}:null},K=ee.useCallback((w,S)=>{z.current.forEach(({command:M,callback:R,matchInterim:k=!1,isFuzzyMatch:N=!1,fuzzyMatchingThreshold:ye=.8,bestMatchOnly:oe=!1})=>{const V=!S&&k?w.trim():S.trim(),ne=(Array.isArray(M)?M:[M]).map(H=>N?F(H,V,ye):le(H,V)).filter(H=>H);if(N&&oe&&ne.length>=2){ne.sort((G,se)=>se.howSimilar-G.howSimilar);const{command:H,commandWithoutSpecials:W,howSimilar:D}=ne[0];R(W,V,D,{command:H,resetTranscript:Y})}else ne.forEach(H=>{if(H.isFuzzyMatch){const{command:W,commandWithoutSpecials:D,howSimilar:G}=H;R(D,V,G,{command:W,resetTranscript:Y})}else{const{command:W,parameters:D}=H;R(...D,{command:W,resetTranscript:Y})}})})},[Y]),B=ee.useCallback((w,S)=>{i&&T(Fj(w,S)),K(w,S)},[K,i]),ie=ee.useCallback(()=>{e&&j()},[e]);return ee.useEffect(()=>{const w=Vr.counter;Vr.counter+=1;const S={onListeningChange:I,onMicrophoneAvailabilityChange:L,onTranscriptChange:B,onClearTranscript:ie,onBrowserSupportsSpeechRecognitionChange:c,onBrowserSupportsContinuousListeningChange:p};return r.subscribe(w,S),()=>{r.unsubscribe(w)}},[i,e,r,B,ie]),{transcript:Rd(_,g),interimTranscript:g,finalTranscript:_,listening:E,isMicrophoneAvailable:O,resetTranscript:Y,browserSupportsSpeechRecognition:o,browserSupportsContinuousListening:h}},Vr={counter:0,applyPolyfill:i=>{Us?Us.setSpeechRecognition(i):Us=new xp(i);const e=!!i&&XE();Xo=e,rd=e},removePolyfill:()=>{Us?Us.setSpeechRecognition(Ko):Us=new xp(Ko),Xo=!!Ko,rd=Xo&&!xd()},getRecognitionManager:()=>(Us||(Us=new xp(Ko)),Us),getRecognition:()=>Vr.getRecognitionManager().getRecognition(),startListening:({continuous:i,language:e}={})=>Pa(function*(){yield Vr.getRecognitionManager().startListening({continuous:i,language:e})})(),stopListening:()=>Pa(function*(){yield Vr.getRecognitionManager().stopListening()})(),abortListening:()=>Pa(function*(){yield Vr.getRecognitionManager().abortListening()})(),browserSupportsSpeechRecognition:()=>Xo,browserSupportsContinuousListening:()=>rd},Yj="_container_ig6zu_1",Qj="_listening_ig6zu_10",Kj="_micButton_ig6zu_16",Xj="_active_ig6zu_46",Wj="_pulse_ig6zu_80",Jj="_listeningIndicator_ig6zu_67",Zj="_listeningText_ig6zu_99",eL="_errorMessage_ig6zu_103",Dr={container:Yj,listening:Qj,micButton:Kj,active:Xj,pulse:Wj,listeningIndicator:Jj,listeningText:Zj,errorMessage:eL},tL=({value:i,onChange:e,placeholder:t,rows:r=4,autoFocus:o=!1})=>{const{transcript:c,listening:h,resetTranscript:p,browserSupportsSpeechRecognition:g}=Gj(),_=ee.useRef(""),[T,E]=ee.useState(null);ee.useEffect(()=>{if(h&&c){const L=_.current?`${_.current} ${c}`:c;e(L)}},[c,h]);const I=async()=>{try{E(null),await navigator.mediaDevices.getUserMedia({audio:!0}),_.current=i||"",p(),await Vr.startListening({language:"fr-FR",continuous:!0})}catch(L){console.error("Erreur reconnaissance vocale:",L),E("Impossible d'accder au microphone. Vrifiez les permissions.")}},O=()=>{p(),_.current="",E(null)};return g?f.jsxs("div",{className:Dr.container,children:[f.jsx("textarea",{value:i,onChange:L=>e(L.target.value),rows:r,placeholder:t,autoFocus:o,className:h?Dr.listening:""}),f.jsx("button",{type:"button",onClick:h?O:I,className:`${Dr.micButton} ${h?Dr.active:""}`,title:h?"Arrter la dicte":"Commencer la dicte vocale",children:h?"":""}),h&&f.jsxs("div",{className:Dr.listeningIndicator,children:[f.jsx("span",{className:Dr.pulse}),f.jsx("span",{className:Dr.listeningText,children:"Dicte en cours..."})]}),T&&f.jsx("div",{className:Dr.errorMessage,children:T})]}):f.jsx("textarea",{value:i,onChange:L=>e(L.target.value),rows:r,placeholder:t,autoFocus:o})},Mr={WEIGHT:"weight",VOLUME:"volume",PIECE:"piece",OTHER:"other"},Gh=[{id:"g",label:"g",category:Mr.WEIGHT,baseUnit:"g",factor:1},{id:"kg",label:"kg",category:Mr.WEIGHT,baseUnit:"g",factor:1e3},{id:"ml",label:"ml",category:Mr.VOLUME,baseUnit:"ml",factor:1},{id:"l",label:"L",category:Mr.VOLUME,baseUnit:"ml",factor:1e3},{id:"cuillere-cafe",label:"c.  caf",category:Mr.VOLUME,baseUnit:"ml",factor:5},{id:"cuillere-soupe",label:"c.  soupe",category:Mr.VOLUME,baseUnit:"ml",factor:15},{id:"piece",label:"unit(s)",category:Mr.PIECE,baseUnit:"piece",factor:1},{id:"pincee",label:"pince(s)",category:Mr.OTHER,baseUnit:null,factor:0}],nL="_container_3i7o5_1",iL="_header_3i7o5_7",sL="_backButton_3i7o5_14",rL="_error_3i7o5_30",aL="_form_3i7o5_39",oL="_section_3i7o5_45",lL="_formGroup_3i7o5_78",cL="_tagsSelector_3i7o5_100",uL="_tagButton_3i7o5_106",hL="_tagSelected_3i7o5_125",dL="_ingredientsList_3i7o5_129",fL="_ingredientItem_3i7o5_136",mL="_ingredientVisual_3i7o5_152",pL="_ingredientThumb_3i7o5_156",gL="_ingredientIcon_3i7o5_164",_L="_ingredientDetails_3i7o5_176",yL="_ingredientName_3i7o5_184",vL="_ingredientCategory_3i7o5_190",bL="_ingredientInputs_3i7o5_195",TL="_quantityInput_3i7o5_201",wL="_unitInput_3i7o5_202",EL="_removeButton_3i7o5_208",SL="_stepAccordion_3i7o5_227",AL="_expanded_3i7o5_240",IL="_stepAccordionHeader_3i7o5_245",CL="_stepNumber_3i7o5_263",NL="_stepHeaderContent_3i7o5_279",xL="_stepTitle_3i7o5_284",RL="_stepPreview_3i7o5_291",DL="_stepIngredientsBadges_3i7o5_299",ML="_ingredientsLabel_3i7o5_307",OL="_ingredientBadge_3i7o5_314",kL="_stepAccordionBody_3i7o5_327",jL="_removeStepButton_3i7o5_343",LL="_addStepButtonBottom_3i7o5_364",PL="_stepIngredients_3i7o5_299",VL="_hint_3i7o5_397",BL="_ingredientCheckboxes_3i7o5_403",UL="_checkbox_3i7o5_409",zL="_checked_3i7o5_429",qL="_checkboxThumb_3i7o5_446",HL="_formActions_3i7o5_462",FL="_cancelButton_3i7o5_473",Oe={container:nL,header:iL,backButton:sL,error:rL,form:aL,section:oL,formGroup:lL,tagsSelector:cL,tagButton:uL,tagSelected:hL,ingredientsList:dL,ingredientItem:fL,ingredientVisual:mL,ingredientThumb:pL,ingredientIcon:gL,ingredientDetails:_L,ingredientName:yL,ingredientCategory:vL,ingredientInputs:bL,quantityInput:TL,unitInput:wL,removeButton:EL,stepAccordion:SL,expanded:AL,stepAccordionHeader:IL,stepNumber:CL,stepHeaderContent:NL,stepTitle:xL,stepPreview:RL,stepIngredientsBadges:DL,ingredientsLabel:ML,ingredientBadge:OL,stepAccordionBody:kL,removeStepButton:jL,addStepButtonBottom:LL,stepIngredients:PL,hint:VL,ingredientCheckboxes:BL,checkbox:UL,checked:zL,checkboxThumb:qL,formActions:HL,cancelButton:FL},P0=({onCancel:i,onSuccess:e,recipeToEdit:t=null})=>{const{addRecipe:r,updateRecipe:o}=Za(),{ingredients:c}=ou(),[h,p]=ee.useState(!1),[g,_]=ee.useState(null),[T,E]=ee.useState(null),[I,O]=ee.useState(!1),[L,z]=ee.useState({}),[j,Y]=ee.useState(0),[F,le]=ee.useState(t||{name:"",type:"plat",servings:4,ingredients:[],steps:[{order:0,instruction:"",ingredientIds:[]}],tags:[]}),K=!!t;ee.useEffect(()=>{const oe=async()=>{const V={};for(const X of F.ingredients){const ne=c.find(H=>H.id===X.ingredientId);if(ne?.imageUrl)try{const H=await dl(ne.imageUrl);V[X.ingredientId]=H}catch(H){console.error(`Error loading image for ${ne.name}:`,H)}}z(V)};F.ingredients.length>0&&c.length>0&&oe()},[F.ingredients,c]);const B=oe=>{const V={ingredientId:oe.id,name:oe.name,category:oe.category,imageUrl:oe.imageUrl,quantity:"",unit:"g"};le(X=>({...X,ingredients:[...X.ingredients,V]}))},ie=oe=>{const V=F.ingredients.findIndex(X=>X.ingredientId===oe.ingredientId);V!==-1&&w(V)},A=(oe,V,X)=>{le(ne=>({...ne,ingredients:ne.ingredients.map((H,W)=>W===oe?{...H,[V]:X}:H)}))},w=oe=>{const V=F.ingredients[oe];le(X=>({...X,ingredients:X.ingredients.filter((ne,H)=>H!==oe),steps:X.steps.map(ne=>({...ne,ingredientIds:ne.ingredientIds.filter(H=>H!==V.ingredientId)}))}))},S=()=>{le(oe=>({...oe,steps:[...oe.steps,{order:oe.steps.length,instruction:"",ingredientIds:[]}]})),Y(F.steps.length)},M=(oe,V,X)=>{le(ne=>({...ne,steps:ne.steps.map((H,W)=>W===oe?{...H,[V]:X}:H)}))},R=oe=>{F.steps.length!==1&&le(V=>({...V,steps:V.steps.filter((X,ne)=>ne!==oe).map((X,ne)=>({...X,order:ne}))}))},k=oe=>{E(oe),O(!1)},N=()=>{E(null),O(!0)},ye=async oe=>{oe.preventDefault(),p(!0),_(null);try{K?await o(t.id,F,T,I):await r(F,T),e()}catch(V){_(K?"Erreur lors de la modification de la recette":"Erreur lors de la cration de la recette"),console.error(V)}finally{p(!1)}};return f.jsxs("div",{className:Oe.container,children:[f.jsxs("div",{className:Oe.header,children:[f.jsx("button",{onClick:i,className:Oe.backButton,children:" Retour"}),f.jsx("h1",{children:K?"Modifier la recette":"Nouvelle recette"})]}),g&&f.jsx("div",{className:Oe.error,children:g}),f.jsxs("form",{onSubmit:ye,className:Oe.form,children:[f.jsxs("div",{className:Oe.section,children:[f.jsx("h2",{children:"Informations gnrales"}),f.jsxs("div",{className:Oe.formGroup,children:[f.jsx("label",{children:"Nom de la recette *"}),f.jsx("input",{type:"text",value:F.name,onChange:oe=>le({...F,name:oe.target.value}),required:!0,placeholder:"Ex: Lasagnes bolognaise"})]}),f.jsx(KE,{currentImage:t?.imageUrl,onImageSelect:k,onImageRemove:N,label:"Image du plat"}),f.jsxs("div",{className:Oe.formGroup,children:[f.jsx("label",{children:"Type de plat *"}),f.jsx("select",{value:F.type,onChange:oe=>le({...F,type:oe.target.value}),required:!0,children:Kc.map(oe=>f.jsxs("option",{value:oe.id,children:[oe.icon," ",oe.label]},oe.id))})]}),f.jsxs("div",{className:Oe.formGroup,children:[f.jsx("label",{children:"Nombre de personnes"}),f.jsx("input",{type:"number",min:"1",max:"20",value:F.servings,onChange:oe=>le({...F,servings:parseInt(oe.target.value)}),required:!0})]}),f.jsxs("div",{className:Oe.formGroup,children:[f.jsx("label",{children:"Tags (optionnel)"}),f.jsx("div",{className:Oe.tagsSelector,children:__.map(oe=>{const V=F.tags?.includes(oe.id),X=oe.IconComponent;return f.jsxs("button",{type:"button",onClick:()=>{const ne=F.tags||[],H=V?ne.filter(W=>W!==oe.id):[...ne,oe.id];le({...F,tags:H})},className:`${Oe.tagButton} ${V?Oe.tagSelected:""}`,style:{borderColor:V?oe.color:"var(--border-color)",backgroundColor:V?oe.bgColor:"transparent",color:V?oe.color:"var(--text-secondary)"},children:[f.jsx(X,{size:16,strokeWidth:2}),f.jsx("span",{children:oe.label})]},oe.id)})})]})]}),f.jsxs("div",{className:Oe.section,children:[f.jsxs("h2",{children:["Ingrdients (",F.ingredients.length,")"]}),f.jsx(vj,{onSelect:B,onDeselect:ie,selectedIngredients:F.ingredients}),F.ingredients.length>0&&f.jsx("div",{className:Oe.ingredientsList,children:F.ingredients.map((oe,V)=>{const X=hs.find(ne=>ne.id===oe.category);return f.jsxs("div",{className:Oe.ingredientItem,children:[f.jsx("div",{className:Oe.ingredientVisual,children:L[oe.ingredientId]?f.jsx("img",{src:L[oe.ingredientId],alt:oe.name,className:Oe.ingredientThumb}):f.jsx("div",{className:Oe.ingredientIcon,children:X?.icon||""})}),f.jsxs("div",{className:Oe.ingredientDetails,children:[f.jsx("span",{className:Oe.ingredientName,children:oe.name}),f.jsx("span",{className:Oe.ingredientCategory,children:X?.label})]}),f.jsxs("div",{className:Oe.ingredientInputs,children:[f.jsx("input",{type:"number",step:"0.01",placeholder:"Qt",value:oe.quantity,onChange:ne=>A(V,"quantity",ne.target.value),className:Oe.quantityInput}),f.jsxs("select",{value:oe.unit,onChange:ne=>A(V,"unit",ne.target.value),className:Oe.unitInput,children:[f.jsx("optgroup",{label:"Poids",children:Gh.filter(ne=>ne.category==="weight").map(ne=>f.jsx("option",{value:ne.id,children:ne.label},ne.id))}),f.jsx("optgroup",{label:"Volume",children:Gh.filter(ne=>ne.category==="volume").map(ne=>f.jsx("option",{value:ne.id,children:ne.label},ne.id))}),f.jsx("optgroup",{label:"Pices",children:Gh.filter(ne=>ne.category==="piece").map(ne=>f.jsx("option",{value:ne.id,children:ne.label},ne.id))}),f.jsx("optgroup",{label:"Autres",children:Gh.filter(ne=>ne.category==="other").map(ne=>f.jsx("option",{value:ne.id,children:ne.label},ne.id))})]})]}),f.jsx("button",{type:"button",onClick:()=>w(V),className:Oe.removeButton,children:""})]},V)})})]}),f.jsxs("div",{className:Oe.section,children:[f.jsx("h2",{className:Oe.sectionTitle,children:"tapes de prparation"}),F.steps.map((oe,V)=>{const X=j===V,ne=F.ingredients.filter(H=>oe.ingredientIds.includes(H.ingredientId));return f.jsxs("div",{className:`${Oe.stepAccordion} ${X?Oe.expanded:Oe.collapsed}`,children:[f.jsxs("div",{className:Oe.stepAccordionHeader,onClick:()=>Y(V),children:[f.jsx("div",{className:Oe.stepNumber,children:V+1}),f.jsxs("div",{className:Oe.stepHeaderContent,children:[f.jsxs("h3",{className:Oe.stepTitle,children:["tape ",V+1]}),!X&&oe.instruction&&f.jsxs("p",{className:Oe.stepPreview,children:[oe.instruction.substring(0,80),oe.instruction.length>80?"...":""]}),!X&&ne.length>0&&f.jsxs("div",{className:Oe.stepIngredientsBadges,children:[f.jsx("span",{className:Oe.ingredientsLabel,children:"INGRDIENTS :"}),ne.map((H,W)=>f.jsx("span",{className:Oe.ingredientBadge,children:H.name},W))]})]}),F.steps.length>1&&!X&&f.jsx("button",{type:"button",onClick:H=>{H.stopPropagation(),R(V)},className:Oe.removeStepButton,title:"Supprimer cette tape",children:""})]}),X&&f.jsxs("div",{className:Oe.stepAccordionBody,children:[f.jsxs("div",{className:Oe.formGroup,children:[f.jsx("label",{children:"Instructions"}),f.jsx(tL,{value:oe.instruction,onChange:H=>M(V,"instruction",H),rows:4,placeholder:"Dcrivez cette tape ou utilisez la dicte vocale...",autoFocus:!0})]}),f.jsxs("div",{className:Oe.stepIngredients,children:[f.jsx("label",{children:"Ingrdients utiliss dans cette tape"}),f.jsx("p",{className:Oe.hint,children:"Slectionnez les ingrdients ncessaires pour cette tape"}),f.jsx("div",{className:Oe.ingredientCheckboxes,children:F.ingredients.map((H,W)=>{const D=oe.ingredientIds.includes(H.ingredientId);return f.jsxs("label",{className:`${Oe.checkbox} ${D?Oe.checked:""}`,children:[f.jsx("input",{type:"checkbox",checked:D,onChange:G=>{const se=G.target.checked?[...oe.ingredientIds,H.ingredientId]:oe.ingredientIds.filter(me=>me!==H.ingredientId);M(V,"ingredientIds",se)}}),L[H.ingredientId]&&f.jsx("img",{src:L[H.ingredientId],alt:H.name,className:Oe.checkboxThumb}),f.jsxs("span",{children:[H.name," ",H.quantity," ",H.unit]})]},W)})})]}),F.steps.length>1&&f.jsx("button",{type:"button",onClick:()=>R(V),className:Oe.deleteStepButton,children:" Supprimer cette tape"})]})]},V)}),f.jsx("button",{type:"button",onClick:S,className:Oe.addStepButtonBottom,children:"+ Ajouter une tape"})]}),f.jsxs("div",{className:Oe.formActions,children:[f.jsx("button",{type:"button",onClick:i,className:Oe.cancelButton,disabled:h,children:"Annuler"}),f.jsx("button",{type:"submit",disabled:h,children:h?K?"Modification...":"Cration...":K?"Enregistrer les modifications":"Crer la recette"})]})]})]})},$L="_container_1fubl_1",GL="_loading_1fubl_8",YL="_error_1fubl_9",QL="_heroSection_1fubl_16",KL="_heroImage_1fubl_25",XL="_heroPlaceholder_1fubl_31",WL="_heroIcon_1fubl_39",JL="_closeButton_1fubl_44",ZL="_typeBadge_1fubl_73",eP="_titleSection_1fubl_91",tP="_title_1fubl_91",nP="_tagsContainer_1fubl_103",iP="_tag_1fubl_103",sP="_metaBar_1fubl_127",rP="_actionButtons_1fubl_136",aP="_editButton_1fubl_143",oP="_cookButton_1fubl_166",lP="_deleteButton_1fubl_184",cP="_confirmOverlay_1fubl_208",uP="_confirmModal_1fubl_222",hP="_confirmTitle_1fubl_231",dP="_confirmMessage_1fubl_238",fP="_confirmButtons_1fubl_245",mP="_confirmCancel_1fubl_250",pP="_confirmDelete_1fubl_268",gP="_section_1fubl_288",_P="_sectionTitle_1fubl_298",yP="_categoryGroup_1fubl_306",vP="_categoryTitle_1fubl_314",bP="_ingredientsList_1fubl_326",TP="_ingredientItem_1fubl_332",wP="_ingredientImage_1fubl_348",EP="_ingredientIconPlaceholder_1fubl_357",SP="_ingredientName_1fubl_370",AP="_ingredientQuantity_1fubl_376",IP="_stepsList_1fubl_384",CP="_stepItem_1fubl_390",NP="_stepNumber_1fubl_406",xP="_stepText_1fubl_423",ze={container:$L,loading:GL,error:YL,heroSection:QL,heroImage:KL,heroPlaceholder:XL,heroIcon:WL,closeButton:JL,typeBadge:ZL,titleSection:eP,title:tP,tagsContainer:nP,tag:iP,metaBar:sP,actionButtons:rP,editButton:aP,cookButton:oP,deleteButton:lP,confirmOverlay:cP,confirmModal:uP,confirmTitle:hP,confirmMessage:dP,confirmButtons:fP,confirmCancel:mP,confirmDelete:pP,section:gP,sectionTitle:_P,categoryGroup:yP,categoryTitle:vP,ingredientsList:bP,ingredientItem:TP,ingredientImage:wP,ingredientIconPlaceholder:EP,ingredientName:SP,ingredientQuantity:AP,stepsList:IP,stepItem:CP,stepNumber:NP,stepText:xP},ZE=({recipeId:i,onClose:e,onStartCooking:t,onEdit:r,onDelete:o})=>{const[c,h]=ee.useState(null),{getRecipe:p}=Za(),{ingredients:g}=ou(),[_,T]=ee.useState(null),[E,I]=ee.useState(!0),[O,L]=ee.useState({}),[z,j]=ee.useState(!1),Y=async()=>{if(o)try{await o(i),e()}catch(K){console.error("Error deleting recipe:",K),alert("Erreur lors de la suppression de la recette")}};if(ee.useEffect(()=>{(async()=>{try{const B=await p(i);if(T(B),B?.imageUrl){const ie=await dl(B.imageUrl);h(ie)}if(B?.ingredients){const ie={};for(const A of B.ingredients){const w=g.find(S=>S.id===A.ingredientId);if(w?.imageUrl){const S=await dl(w.imageUrl);ie[A.ingredientId]=S}}L(ie)}}catch(B){console.error("Error loading recipe:",B)}finally{I(!1)}})()},[i,p,g]),E)return f.jsx("div",{className:ze.container,children:f.jsx("div",{className:ze.loading,children:"Chargement..."})});if(!_)return f.jsx("div",{className:ze.container,children:f.jsx("div",{className:ze.error,children:"Recette introuvable"})});const F=of(_.type||"plat"),le=hs.map(K=>({...K,ingredients:_.ingredients?.filter(B=>B.category===K.id)||[]})).filter(K=>K.ingredients.length>0);return f.jsxs("div",{className:ze.container,children:[f.jsx("button",{onClick:e,className:ze.closeButton,children:"Fermer"}),f.jsxs("div",{className:ze.heroSection,children:[c?f.jsx("img",{src:c,alt:_.name,className:ze.heroImage}):f.jsx("div",{className:ze.heroPlaceholder,children:f.jsx("span",{className:ze.heroIcon,children:""})}),F&&f.jsxs("div",{className:ze.typeBadge,children:[f.jsx("span",{children:F.icon}),f.jsx("span",{children:F.label})]})]}),f.jsxs("div",{className:ze.titleSection,children:[f.jsx("h1",{className:ze.title,children:_.name}),_.tags&&_.tags.length>0&&f.jsx("div",{className:ze.tagsContainer,children:ag(_.tags).map(K=>{const B=K.IconComponent;return f.jsxs("span",{className:ze.tag,style:{color:K.color,backgroundColor:K.bgColor,borderColor:K.borderColor},children:[f.jsx(B,{size:14,strokeWidth:2.5}),K.label]},K.id)})}),f.jsx("div",{className:ze.metaBar,children:f.jsxs("span",{children:[" ",_.servings]})})]}),(r||t||o)&&f.jsxs("div",{className:ze.actionButtons,children:[r&&f.jsxs("button",{onClick:()=>r(_),className:ze.editButton,children:[f.jsx("span",{children:""}),f.jsx("span",{children:"Modifier"})]}),t&&f.jsx("button",{onClick:()=>t(_),className:ze.cookButton,children:" Cuisiner"}),o&&f.jsxs("button",{onClick:()=>j(!0),className:ze.deleteButton,children:[f.jsx("span",{children:""}),f.jsx("span",{children:"Supprimer"})]})]}),z&&f.jsx("div",{className:ze.confirmOverlay,onClick:()=>j(!1),children:f.jsxs("div",{className:ze.confirmModal,onClick:K=>K.stopPropagation(),children:[f.jsx("h3",{className:ze.confirmTitle,children:"Supprimer cette recette ?"}),f.jsxs("p",{className:ze.confirmMessage,children:['Cette action est irrversible. La recette "',_.name,'" sera dfinitivement supprime.']}),f.jsxs("div",{className:ze.confirmButtons,children:[f.jsx("button",{onClick:()=>j(!1),className:ze.confirmCancel,children:"Annuler"}),f.jsx("button",{onClick:Y,className:ze.confirmDelete,children:" Supprimer"})]})]})}),f.jsxs("div",{className:ze.section,children:[f.jsx("h2",{className:ze.sectionTitle,children:"Ingrdients"}),le.map(K=>f.jsxs("div",{className:ze.categoryGroup,children:[f.jsxs("h3",{className:ze.categoryTitle,children:[f.jsx("span",{children:K.icon}),f.jsx("span",{children:K.label})]}),f.jsx("div",{className:ze.ingredientsList,children:K.ingredients.map((B,ie)=>f.jsxs("div",{className:ze.ingredientItem,children:[O[B.ingredientId]?f.jsx("img",{src:O[B.ingredientId],alt:B.name,className:ze.ingredientImage}):f.jsx("div",{className:ze.ingredientIconPlaceholder,children:K.icon}),f.jsx("span",{className:ze.ingredientName,children:B.name}),f.jsxs("span",{className:ze.ingredientQuantity,children:[B.quantity," ",B.unit]})]},ie))})]},K.id))]}),f.jsxs("div",{className:ze.section,children:[f.jsx("h2",{className:ze.sectionTitle,children:"Prparation"}),f.jsx("div",{className:ze.stepsList,children:_.steps?.map((K,B)=>f.jsxs("div",{className:ze.stepItem,children:[f.jsx("div",{className:ze.stepNumber,children:B+1}),f.jsx("p",{className:ze.stepText,children:K.instruction})]},B))})]})]})},RP="_container_101l4_1",DP="_exitButton_101l4_10",MP="_header_101l4_40",OP="_title_101l4_45",kP="_meta_101l4_53",jP="_progressSection_101l4_62",LP="_progressBar_101l4_68",PP="_progressFill_101l4_77",VP="_progressText_101l4_84",BP="_stepSection_101l4_92",UP="_stepHeader_101l4_97",zP="_stepBadge_101l4_104",qP="_stepTitle_101l4_118",HP="_instruction_101l4_125",FP="_ingredientsSection_101l4_133",$P="_ingredientsTitle_101l4_139",GP="_ingredientsList_101l4_146",YP="_ingredientItem_101l4_152",QP="_ingredientImage_101l4_159",KP="_ingredientIconPlaceholder_101l4_168",XP="_ingredientName_101l4_181",WP="_ingredientQuantity_101l4_187",JP="_navigation_101l4_195",ZP="_navButton_101l4_202",eV="_prevButton_101l4_212",tV="_nextButton_101l4_224",nV="_stepsOverview_101l4_242",iV="_overviewTitle_101l4_246",sV="_stepsList_101l4_253",rV="_stepItem_101l4_259",aV="_active_101l4_278",oV="_stepItemNumber_101l4_284",lV="_stepItemText_101l4_289",cV="_completed_101l4_294",uV="_checkmark_101l4_319",Xe={container:RP,exitButton:DP,header:MP,title:OP,meta:kP,progressSection:jP,progressBar:LP,progressFill:PP,progressText:VP,stepSection:BP,stepHeader:UP,stepBadge:zP,stepTitle:qP,instruction:HP,ingredientsSection:FP,ingredientsTitle:$P,ingredientsList:GP,ingredientItem:YP,ingredientImage:QP,ingredientIconPlaceholder:KP,ingredientName:XP,ingredientQuantity:WP,navigation:JP,navButton:ZP,prevButton:eV,nextButton:tV,stepsOverview:nV,overviewTitle:iV,stepsList:sV,stepItem:rV,active:aV,stepItemNumber:oV,stepItemText:lV,completed:cV,checkmark:uV},hV=({recipe:i,onExit:e})=>{const{ingredients:t}=ou(),[r,o]=ee.useState(0),[c,h]=ee.useState([]),[p,g]=ee.useState({}),_=i.steps?.length||0,T=_>0?(r+1)/_*100:0;ee.useEffect(()=>{(async()=>{if(i?.ingredients){const Y={};for(const F of i.ingredients){const le=t.find(K=>K.id===F.ingredientId);if(le?.imageUrl){const K=await dl(le.imageUrl);Y[F.ingredientId]=K}}g(Y)}})()},[i,t]);const E=()=>{r<_-1&&(h([...c,r]),o(r+1))},I=()=>{r>0&&(o(r-1),h(c.filter(j=>j!==r-1)))},O=j=>{o(j)},L=i.steps?.[r],z=i.ingredients?.filter(j=>L?.ingredientIds?.includes(j.ingredientId));return f.jsxs("div",{className:Xe.container,children:[f.jsx("button",{onClick:e,className:Xe.exitButton,children:"Quitter"}),f.jsxs("div",{className:Xe.header,children:[f.jsx("h1",{className:Xe.title,children:i.name}),f.jsxs("div",{className:Xe.meta,children:[f.jsxs("span",{children:[" ",i.servings," pers."]}),f.jsxs("span",{children:[" ",_," tapes"]})]})]}),f.jsxs("div",{className:Xe.progressSection,children:[f.jsx("div",{className:Xe.progressBar,children:f.jsx("div",{className:Xe.progressFill,style:{width:`${T}%`}})}),f.jsxs("div",{className:Xe.progressText,children:["tape ",r+1," / ",_]})]}),f.jsxs("div",{className:Xe.content,children:[f.jsxs("div",{className:Xe.stepSection,children:[f.jsxs("div",{className:Xe.stepHeader,children:[f.jsx("div",{className:Xe.stepBadge,children:r+1}),f.jsxs("h2",{className:Xe.stepTitle,children:["tape ",r+1]})]}),f.jsx("p",{className:Xe.instruction,children:L?.instruction}),z&&z.length>0&&f.jsxs("div",{className:Xe.ingredientsSection,children:[f.jsx("h3",{className:Xe.ingredientsTitle,children:"Ingrdients ncessaires"}),f.jsx("div",{className:Xe.ingredientsList,children:z.map((j,Y)=>{const F=hs.find(le=>le.id===j.category);return f.jsxs("div",{className:Xe.ingredientItem,children:[p[j.ingredientId]?f.jsx("img",{src:p[j.ingredientId],alt:j.name,className:Xe.ingredientImage}):f.jsx("div",{className:Xe.ingredientIconPlaceholder,children:F?.icon||""}),f.jsx("span",{className:Xe.ingredientName,children:j.name}),f.jsxs("span",{className:Xe.ingredientQuantity,children:[j.quantity," ",j.unit]})]},Y)})})]})]}),f.jsxs("div",{className:Xe.navigation,children:[f.jsx("button",{onClick:I,disabled:r===0,className:`${Xe.navButton} ${Xe.prevButton}`,children:" Prcdent"}),f.jsx("button",{onClick:E,disabled:r===_-1,className:`${Xe.navButton} ${Xe.nextButton}`,children:r===_-1?"Terminer ":"Suivant "})]}),f.jsxs("div",{className:Xe.stepsOverview,children:[f.jsx("h3",{className:Xe.overviewTitle,children:"Toutes les tapes"}),f.jsx("div",{className:Xe.stepsList,children:i.steps?.map((j,Y)=>f.jsxs("button",{onClick:()=>O(Y),className:`${Xe.stepItem} ${Y===r?Xe.active:""} ${c.includes(Y)?Xe.completed:""}`,children:[f.jsx("span",{className:Xe.stepItemNumber,children:Y+1}),f.jsxs("span",{className:Xe.stepItemText,children:[j.instruction.substring(0,60),j.instruction.length>60?"...":""]}),c.includes(Y)&&f.jsx("span",{className:Xe.checkmark,children:""})]},Y))})]})]})]})},dV="_container_1tyhp_1",fV="_loading_1tyhp_7",mV="_emptyState_1tyhp_8",pV="_header_1tyhp_14",gV="_addButton_1tyhp_27",_V="_filters_1tyhp_34",yV="_searchInput_1tyhp_42",vV="_categoryFilter_1tyhp_53",bV="_viewToggle_1tyhp_63",TV="_active_1tyhp_88",wV="_formCard_1tyhp_93",EV="_formGroup_1tyhp_107",SV="_formActions_1tyhp_129",AV="_saveButton_1tyhp_135",IV="_cancelButton_1tyhp_140",CV="_stats_1tyhp_152",NV="_ingredientsList_1tyhp_158",xV="_ingredientCard_1tyhp_164",RV="_ingredientImage_1tyhp_178",DV="_placeholderImage_1tyhp_191",MV="_placeholderIcon_1tyhp_200",OV="_ingredientInfo_1tyhp_205",kV="_ingredientFooter_1tyhp_222",jV="_recipeCount_1tyhp_230",LV="_ingredientActions_1tyhp_251",PV="_editBtn_1tyhp_256",VV="_deleteBtn_1tyhp_257",BV="_categoriesView_1tyhp_282",UV="_categorySection_1tyhp_288",zV="_categoryTitle_1tyhp_295",qV="_categoryIcon_1tyhp_304",HV="_categoryCount_1tyhp_308",FV="_modal_1tyhp_315",$V="_modalContent_1tyhp_329",GV="_deleteWarning_1tyhp_346",YV="_loadingRecipes_1tyhp_351",QV="_associatedRecipes_1tyhp_357",KV="_warningText_1tyhp_365",XV="_recipesList_1tyhp_371",WV="_modalActions_1tyhp_381",JV="_confirmDeleteButton_1tyhp_387",ZV="_closeButton_1tyhp_402",e5="_recipeInfo_1tyhp_412",t5="_recipeItem_1tyhp_417",n5="_recipeName_1tyhp_428",i5="_recipeServings_1tyhp_433",s5="_noRecipes_1tyhp_438",Ne={container:dV,loading:fV,emptyState:mV,header:pV,addButton:gV,filters:_V,searchInput:yV,categoryFilter:vV,viewToggle:bV,active:TV,formCard:wV,formGroup:EV,formActions:SV,saveButton:AV,cancelButton:IV,stats:CV,ingredientsList:NV,ingredientCard:xV,ingredientImage:RV,placeholderImage:DV,placeholderIcon:MV,ingredientInfo:OV,ingredientFooter:kV,recipeCount:jV,ingredientActions:LV,editBtn:PV,deleteBtn:VV,categoriesView:BV,categorySection:UV,categoryTitle:zV,categoryIcon:qV,categoryCount:HV,modal:FV,modalContent:$V,deleteWarning:GV,loadingRecipes:YV,associatedRecipes:QV,warningText:KV,recipesList:XV,modalActions:WV,confirmDeleteButton:JV,closeButton:ZV,recipeInfo:e5,recipeItem:t5,recipeName:n5,recipeServings:i5,noRecipes:s5},r5=()=>{const{ingredients:i,loading:e,addIngredient:t,updateIngredient:r,deleteIngredient:o,getIngredientRecipes:c}=ou(),[h,p]=l4("ingredientsFilters",{searchTerm:"",selectedCategory:"all",viewMode:"category"}),[g,_]=ee.useState(h.searchTerm),[T,E]=ee.useState(h.selectedCategory),[I,O]=ee.useState(h.viewMode);YE("ingredients",[e,i.length]),ee.useEffect(()=>{p({searchTerm:g,selectedCategory:T,viewMode:I})},[g,T,I,p]);const[L,z]=ee.useState(null),[j,Y]=ee.useState(!1),[F,le]=ee.useState(null),[K,B]=ee.useState([]),[ie,A]=ee.useState(!1),[w,S]=ee.useState(null),[M,R]=ee.useState(!1),[k,N]=ee.useState({}),[ye,oe]=ee.useState(null),[V,X]=ee.useState({name:"",category:"fruits-legumes",imageUrl:null});ee.useEffect(()=>{const q=async()=>{const pe={};for(const nt of i){const At=await c(nt.id);pe[nt.id]=At.length}N(pe)};i.length>0&&q()},[i,c]);const ne=i.filter(q=>{const pe=q.name.toLowerCase().includes(g.toLowerCase()),nt=T==="all"||q.category===T;return pe&&nt}),H=hs.map(q=>({...q,ingredients:ne.filter(pe=>pe.category===q.id)})).filter(q=>q.ingredients.length>0),W=async()=>{if(V.name.trim())try{await t(V,w),X({name:"",category:"fruits-legumes",imageUrl:null}),S(null),Y(!1)}catch(q){console.error("Error adding ingredient:",q)}},D=async()=>{if(!(!V.name.trim()||!L))try{await r(L.id,V,w,M),z(null),X({name:"",category:"fruits-legumes",imageUrl:null}),S(null),R(!1)}catch(q){console.error("Error updating ingredient:",q)}},G=async q=>{A(!0);const pe=await c(q.id);B(pe),le(q),A(!1)},se=async()=>{if(F)try{await o(F.id),le(null),B([])}catch(q){console.error("Error deleting ingredient:",q)}},me=async q=>{A(!0);const pe=await c(q.id);oe({ingredient:q,recipes:pe}),A(!1)},Ee=q=>{z(q),X({name:q.name,category:q.category,imageUrl:q.imageUrl}),S(null),R(!1),Y(!1)},Se=()=>{z(null),X({name:"",category:"fruits-legumes",imageUrl:null}),S(null),R(!1)},we=q=>{S(q),R(!1)},je=()=>{S(null),R(!0),X(q=>({...q,imageUrl:null}))};if(e)return f.jsx("div",{className:Ne.container,children:f.jsx("div",{className:Ne.loading,children:"Chargement des ingrdients..."})});const Ye=({ingredient:q})=>{const pe=hs.find(Dn=>Dn.id===q.category),[nt,At]=ee.useState(null),jt=k[q.id]||0;return ee.useEffect(()=>{q.imageUrl&&dl(q.imageUrl).then(At)},[q.imageUrl]),f.jsxs("div",{className:Ne.ingredientCard,children:[f.jsx("div",{className:Ne.ingredientImage,children:nt||q.imageUrl?f.jsx("img",{src:nt||q.imageUrl,alt:q.name}):f.jsx("div",{className:Ne.placeholderImage,children:f.jsx("span",{className:Ne.placeholderIcon,children:pe?.icon||""})})}),f.jsx("div",{className:Ne.ingredientInfo,children:f.jsx("h3",{children:q.name})}),f.jsxs("div",{className:Ne.ingredientFooter,children:[f.jsxs("button",{onClick:()=>me(q),className:Ne.recipeCount,title:"Voir les recettes",children:[" ",jt]}),f.jsxs("div",{className:Ne.ingredientActions,children:[f.jsx("button",{onClick:()=>Ee(q),className:Ne.editBtn,title:"Modifier",children:""}),f.jsx("button",{onClick:()=>G(q),className:Ne.deleteBtn,title:"Supprimer",children:""})]})]})]})};return f.jsxs("div",{className:Ne.container,children:[f.jsxs("div",{className:Ne.header,children:[f.jsx("h1",{children:"Gestion des ingrdients"}),f.jsx("button",{onClick:()=>{Y(!0),z(null),X({name:"",category:"fruits-legumes",imageUrl:null}),S(null),R(!1)},className:Ne.addButton,children:"+ Ajouter un ingrdient"})]}),f.jsxs("div",{className:Ne.filters,children:[f.jsx("input",{type:"text",placeholder:"Rechercher un ingrdient...",value:g,onChange:q=>_(q.target.value),className:Ne.searchInput}),f.jsxs("select",{value:T,onChange:q=>E(q.target.value),className:Ne.categoryFilter,children:[f.jsx("option",{value:"all",children:"Toutes les catgories"}),hs.map(q=>f.jsxs("option",{value:q.id,children:[q.icon," ",q.label]},q.id))]}),f.jsxs("div",{className:Ne.viewToggle,children:[f.jsx("button",{onClick:()=>O("grid"),className:I==="grid"?Ne.active:"",title:"Vue grille",children:""}),f.jsx("button",{onClick:()=>O("category"),className:I==="category"?Ne.active:"",title:"Vue par catgorie",children:""})]})]}),(j||L)&&f.jsxs("div",{className:Ne.formCard,children:[f.jsx("h3",{children:L?"Modifier l'ingrdient":"Nouvel ingrdient"}),f.jsx(KE,{currentImage:V.imageUrl,onImageSelect:we,onImageRemove:je,label:"Photo de l'ingrdient"}),f.jsxs("div",{className:Ne.formGroup,children:[f.jsx("label",{children:"Nom"}),f.jsx("input",{type:"text",value:V.name,onChange:q=>X({...V,name:q.target.value}),placeholder:"Ex: Tomates",autoFocus:!0})]}),f.jsxs("div",{className:Ne.formGroup,children:[f.jsx("label",{children:"Catgorie"}),f.jsx("select",{value:V.category,onChange:q=>X({...V,category:q.target.value}),children:hs.map(q=>f.jsxs("option",{value:q.id,children:[q.icon," ",q.label]},q.id))})]}),f.jsxs("div",{className:Ne.formActions,children:[f.jsx("button",{onClick:L?D:W,className:Ne.saveButton,children:L?"Enregistrer":"Ajouter"}),f.jsx("button",{onClick:()=>{Y(!1),Se()},className:Ne.cancelButton,children:"Annuler"})]})]}),f.jsx("div",{className:Ne.stats,children:f.jsxs("p",{children:[ne.length," ingrdient",ne.length>1?"s":"",T!=="all"&&" dans cette catgorie"]})}),I==="grid"?f.jsx("div",{className:Ne.categoriesView,children:H.map(q=>f.jsxs("div",{className:Ne.categorySection,children:[f.jsxs("h2",{className:Ne.categoryTitle,children:[f.jsx("span",{className:Ne.categoryIcon,children:q.icon}),q.label,f.jsxs("span",{className:Ne.categoryCount,children:["(",q.ingredients.length,")"]})]}),f.jsx("div",{className:Ne.ingredientsList,children:q.ingredients.map(pe=>f.jsx(Ye,{ingredient:pe},pe.id))})]},q.id))}):f.jsx("div",{className:Ne.categoriesView,children:H.map(q=>f.jsxs("div",{className:Ne.categorySection,children:[f.jsxs("h2",{className:Ne.categoryTitle,children:[f.jsx("span",{className:Ne.categoryIcon,children:q.icon}),q.label,f.jsxs("span",{className:Ne.categoryCount,children:["(",q.ingredients.length,")"]})]}),f.jsx("div",{className:Ne.ingredientsList,children:q.ingredients.map(pe=>f.jsx(Ye,{ingredient:pe},pe.id))})]},q.id))}),ne.length===0&&f.jsx("div",{className:Ne.emptyState,children:f.jsx("p",{children:"Aucun ingrdient trouv"})}),ye&&f.jsx("div",{className:Ne.modal,onClick:()=>oe(null),children:f.jsxs("div",{className:Ne.modalContent,onClick:q=>q.stopPropagation(),children:[f.jsxs("h3",{children:["Recettes avec ",ye.ingredient.name]}),ie?f.jsx("p",{className:Ne.loadingRecipes,children:"Chargement des recettes..."}):ye.recipes.length>0?f.jsxs(f.Fragment,{children:[f.jsxs("p",{className:Ne.recipeInfo,children:["Cet ingrdient est utilis dans ",ye.recipes.length," recette",ye.recipes.length>1?"s":""," :"]}),f.jsx("ul",{className:Ne.recipesList,children:ye.recipes.map(q=>f.jsxs("li",{className:Ne.recipeItem,children:[f.jsx("span",{className:Ne.recipeName,children:q.name}),q.servings&&f.jsxs("span",{className:Ne.recipeServings,children:[" ",q.servings," pers."]})]},q.id))})]}):f.jsx("p",{className:Ne.noRecipes,children:"Cet ingrdient n'est utilis dans aucune recette pour le moment."}),f.jsx("div",{className:Ne.modalActions,children:f.jsx("button",{onClick:()=>oe(null),className:Ne.closeButton,children:"Fermer"})})]})}),F&&f.jsx("div",{className:Ne.modal,onClick:()=>le(null),children:f.jsxs("div",{className:Ne.modalContent,onClick:q=>q.stopPropagation(),children:[f.jsx("h3",{children:"Supprimer l'ingrdient ?"}),f.jsxs("p",{className:Ne.deleteWarning,children:["Voulez-vous vraiment supprimer ",f.jsx("strong",{children:F.name})," ?"]}),ie?f.jsx("p",{className:Ne.loadingRecipes,children:"Vrification des recettes associes..."}):f.jsx(f.Fragment,{children:K.length>0&&f.jsxs("div",{className:Ne.associatedRecipes,children:[f.jsxs("p",{className:Ne.warningText,children:[" Cet ingrdient est utilis dans ",K.length," recette",K.length>1?"s":""," :"]}),f.jsx("ul",{className:Ne.recipesList,children:K.map(q=>f.jsx("li",{children:q.name},q.id))}),f.jsx("p",{className:Ne.warningText,children:"La suppression de cet ingrdient peut affecter ces recettes."})]})}),f.jsxs("div",{className:Ne.modalActions,children:[f.jsx("button",{onClick:se,className:Ne.confirmDeleteButton,disabled:ie,children:"Supprimer"}),f.jsx("button",{onClick:()=>{le(null),B([])},className:Ne.cancelButton,children:"Annuler"})]})]})})]})};var a5=U0();const o5="_slot_9mdhf_1",l5="_empty_9mdhf_13",c5="_emptyContent_9mdhf_26",u5="_addIcon_9mdhf_35",h5="_emptyLabel_9mdhf_40",d5="_past_9mdhf_46",f5="_filled_9mdhf_57",m5="_pastLabel_9mdhf_66",p5="_mealImageContainer_9mdhf_89",g5="_mealImage_9mdhf_89",_5="_mealImagePlaceholder_9mdhf_103",y5="_mealContent_9mdhf_114",v5="_mealHeader_9mdhf_124",b5="_recipeName_9mdhf_133",T5="_multiDayBadge_9mdhf_148",w5="_multiDayIcon_9mdhf_162",E5="_multiDayText_9mdhf_166",S5="_actionButtons_9mdhf_172",A5="_actionBtn_9mdhf_178",I5="_actionIcon_9mdhf_199",C5="_actionText_9mdhf_205",N5="_actionBtnActive_9mdhf_216",x5="_actionBtnInactive_9mdhf_230",R5="_servingsModal_9mdhf_261",D5="_servingsModalContent_9mdhf_275",M5="_servingsModalButtons_9mdhf_312",O5="_servingsSaveButton_9mdhf_331",k5="_servingsCancelButton_9mdhf_341",j5="_customBadge_9mdhf_414",L5="_customMeal_9mdhf_420",P5="_removeButton_9mdhf_430",V5="_dragOver_9mdhf_473",Ge={slot:o5,empty:l5,emptyContent:c5,addIcon:u5,emptyLabel:h5,past:d5,filled:f5,pastLabel:m5,mealImageContainer:p5,mealImage:g5,mealImagePlaceholder:_5,mealContent:y5,mealHeader:v5,recipeName:b5,multiDayBadge:T5,multiDayIcon:w5,multiDayText:E5,actionButtons:S5,actionBtn:A5,actionIcon:I5,actionText:C5,actionBtnActive:N5,actionBtnInactive:x5,servingsModal:R5,servingsModalContent:D5,servingsModalButtons:M5,servingsSaveButton:O5,servingsCancelButton:k5,customBadge:j5,customMeal:L5,removeButton:P5,dragOver:V5},Yh=({meal:i,dayName:e,slotType:t,slotId:r,isPast:o,onAdd:c,onEdit:h,onRemove:p,onViewRecipe:g,onDragStart:_,onDragEnd:T,onDrop:E})=>{const[I,O]=ee.useState(!1),[L,z]=ee.useState(i?.servings||2),[j,Y]=ee.useState(!1),F=!i||!i.recipeName,le=i?.isCustom||!i?.recipeId,K=()=>{h&&i&&(h({...i,servings:L}),O(!1))},B=()=>{z(i?.servings||2),O(!1)},ie=k=>{o||!i||(k.dataTransfer.effectAllowed="move",k.dataTransfer.setData("text/plain",r),_&&_(r,i))},A=k=>{Y(!1),T&&T()},w=k=>{o||(k.preventDefault(),k.dataTransfer.dropEffect="move",Y(!0))},S=k=>{Y(!1)},M=k=>{if(o)return;k.preventDefault(),Y(!1);const N=k.dataTransfer.getData("text/plain");N&&N!==r&&E&&E(N,r)};if(F)return o?f.jsx("div",{className:`${Ge.slot} ${Ge.empty} ${Ge.past}`,children:f.jsx("div",{className:Ge.emptyContent,children:f.jsx("span",{className:Ge.pastLabel,children:""})})}):f.jsx("div",{className:`${Ge.slot} ${Ge.empty} ${j?Ge.dragOver:""}`,onClick:()=>c&&c(),onDragOver:w,onDragLeave:S,onDrop:M,children:f.jsxs("div",{className:Ge.emptyContent,children:[f.jsx("span",{className:Ge.addIcon,children:"+"}),f.jsx("span",{className:Ge.emptyLabel,children:"Ajouter"})]})});const R=of(i.recipeType||"plat");return f.jsxs("div",{className:`${Ge.slot} ${Ge.filled} ${o?Ge.past:""} ${le?Ge.customMeal:""} ${j?Ge.dragOver:""}`,onClick:()=>!o&&!le&&g&&g(i.recipeId),draggable:!o,onDragStart:ie,onDragEnd:A,onDragOver:w,onDragLeave:S,onDrop:M,children:[f.jsxs("div",{className:Ge.mealImageContainer,children:[i.recipeImageUrl?f.jsx("img",{src:i.recipeImageUrl,alt:i.recipeName,className:Ge.mealImage}):f.jsx("div",{className:Ge.mealImagePlaceholder,children:R.icon}),!o&&f.jsx("button",{className:Ge.removeButton,onClick:k=>{k.stopPropagation(),p&&p()},title:"Retirer ce repas",children:""})]}),f.jsxs("div",{className:Ge.mealContent,children:[f.jsxs("div",{className:Ge.mealHeader,children:[f.jsxs("h4",{className:Ge.recipeName,children:[le&&f.jsx("span",{className:Ge.customBadge,children:" "}),i.recipeName]}),i.isMultiDay&&f.jsxs("div",{className:Ge.multiDayBadge,title:"Plat tal sur plusieurs jours",children:[f.jsx("span",{className:Ge.multiDayIcon,children:""}),f.jsxs("span",{className:Ge.multiDayText,children:[i.multiDayIndex,"/",i.multiDayCount]})]})]}),!o&&f.jsxs("div",{className:Ge.actionButtons,children:[f.jsxs("button",{className:Ge.actionBtn,onClick:k=>{k.stopPropagation(),O(!0)},title:"Modifier le nombre de personnes",children:[f.jsx("span",{className:Ge.actionIcon,children:""}),f.jsxs("span",{className:Ge.actionText,children:[i.servings||2,"p"]})]}),f.jsxs("button",{className:`${Ge.actionBtn} ${i.skipShoppingList?Ge.actionBtnInactive:Ge.actionBtnActive}`,onClick:k=>{k.stopPropagation(),h&&h({...i,skipShoppingList:!i.skipShoppingList})},title:i.skipShoppingList?"Ractiver dans la liste de courses":"Retirer de la liste de courses",children:[f.jsx("span",{className:Ge.actionIcon,children:""}),f.jsx("span",{className:Ge.actionText,children:i.skipShoppingList?"Off":"On"})]})]})]}),I&&a5.createPortal(f.jsx("div",{className:Ge.servingsModal,onClick:B,children:f.jsxs("div",{className:Ge.servingsModalContent,onClick:k=>k.stopPropagation(),children:[f.jsx("label",{children:"Nombre de personnes :"}),f.jsx("input",{type:"number",min:"1",max:"20",value:L,onChange:k=>z(Number(k.target.value)),onKeyDown:k=>{k.key==="Enter"&&K(),k.key==="Escape"&&B()},autoFocus:!0}),f.jsxs("div",{className:Ge.servingsModalButtons,children:[f.jsx("button",{onClick:K,className:Ge.servingsSaveButton,children:""}),f.jsx("button",{onClick:B,className:Ge.servingsCancelButton,children:""})]})]})}),document.body)]})},B5="_overlay_zx7me_2",U5="_modal_zx7me_18",z5="_header_zx7me_31",q5="_closeButton_zx7me_46",H5="_filterSection_zx7me_69",F5="_searchContainer_zx7me_78",$5="_searchModeToggle_zx7me_84",G5="_searchModeButton_zx7me_93",Y5="_activeModeButton_zx7me_110",Q5="_searchInputWrapper_zx7me_116",K5="_searchIcon_zx7me_123",X5="_searchInput_zx7me_116",W5="_clearSearchButton_zx7me_147",J5="_filterControls_zx7me_169",Z5="_typeFilters_zx7me_176",eB="_typeFilterButton_zx7me_183",tB="_active_zx7me_110",nB="_clearFiltersButton_zx7me_207",iB="_resultsInfo_zx7me_229",sB="_scrollableContent_zx7me_236",rB="_recipeGrid_zx7me_246",aB="_loading_zx7me_254",oB="_empty_zx7me_255",lB="_recipeCard_zx7me_263",cB="_selected_zx7me_276",uB="_recipeCardInner_zx7me_281",hB="_recipeTypeBadge_zx7me_290",dB="_recipeTypeIcon_zx7me_303",fB="_recipeOverlay_zx7me_308",mB="_recipeName_zx7me_319",pB="_recipeInfo_zx7me_327",gB="_placeholderIcon_zx7me_332",_B="_selectedBadge_zx7me_342",yB="_configSection_zx7me_360",vB="_configHeader_zx7me_366",bB="_configContent_zx7me_372",TB="_configRow_zx7me_378",wB="_configLabel_zx7me_384",EB="_servingsControl_zx7me_390",SB="_servingsButton_zx7me_396",AB="_servingsInput_zx7me_419",IB="_checked_zx7me_461",CB="_multiDayGrid_zx7me_480",NB="_multiDayHeader_zx7me_491",xB="_multiDayHeaderEmpty_zx7me_499",RB="_multiDayDay_zx7me_504",DB="_multiDayRow_zx7me_513",MB="_multiDayLabel_zx7me_524",OB="_multiDaySlot_zx7me_533",kB="_multiDayCheckbox_zx7me_541",jB="_checkmark_zx7me_560",LB="_multiDayHint_zx7me_589",PB="_footer_zx7me_600",VB="_cancelButton_zx7me_612",BB="_confirmButton_zx7me_613",UB="_modeToggle_zx7me_717",zB="_modeButton_zx7me_725",qB="_customForm_zx7me_750",HB="_customFormField_zx7me_757",FB="_customFormLabel_zx7me_763",$B="_customFormInput_zx7me_769",GB="_customTypeButtons_zx7me_789",YB="_customTypeButton_zx7me_789",_e={overlay:B5,modal:U5,header:z5,closeButton:q5,filterSection:H5,searchContainer:F5,searchModeToggle:$5,searchModeButton:G5,activeModeButton:Y5,searchInputWrapper:Q5,searchIcon:K5,searchInput:X5,clearSearchButton:W5,filterControls:J5,typeFilters:Z5,typeFilterButton:eB,active:tB,clearFiltersButton:nB,resultsInfo:iB,scrollableContent:sB,recipeGrid:rB,loading:aB,empty:oB,recipeCard:lB,selected:cB,recipeCardInner:uB,recipeTypeBadge:hB,recipeTypeIcon:dB,recipeOverlay:fB,recipeName:mB,recipeInfo:pB,placeholderIcon:gB,selectedBadge:_B,configSection:yB,configHeader:vB,configContent:bB,configRow:TB,configLabel:wB,servingsControl:EB,servingsButton:SB,servingsInput:AB,checked:IB,multiDayGrid:CB,multiDayHeader:NB,multiDayHeaderEmpty:xB,multiDayDay:RB,multiDayRow:DB,multiDayLabel:MB,multiDaySlot:OB,multiDayCheckbox:kB,checkmark:jB,multiDayHint:LB,footer:PB,cancelButton:VB,confirmButton:BB,modeToggle:UB,modeButton:zB,customForm:qB,customFormField:HB,customFormLabel:FB,customFormInput:$B,customTypeButtons:GB,customTypeButton:YB},V0=({onSelect:i,onCancel:e,currentSlotId:t,availableDays:r=[]})=>{const{recipes:o,loading:c}=Za(),[h,p]=ee.useState("recipe"),[g,_]=ee.useState(""),[T,E]=ee.useState("name"),[I,O]=ee.useState("all"),[L,z]=ee.useState(null),[j,Y]=ee.useState(2),[F,le]=ee.useState(t?[t]:[]),[K,B]=ee.useState(""),[ie,A]=ee.useState("plat"),w=o.filter(N=>{const ye=I==="all"||N.type===I;let oe=!0;if(g.trim()){const V=g.toLowerCase();T==="name"?oe=N.name.toLowerCase().includes(V):T==="ingredient"&&(oe=N.ingredients?.some(X=>X.name?.toLowerCase().includes(V))||!1)}return oe&&ye}),S=()=>{if(h==="recipe"&&!L||h==="custom"&&!K.trim())return;const N=h==="recipe"?{recipeId:L.id,recipeName:L.name,recipeType:L.type||"plat",recipeImageUrl:L.imageUrl||null,servings:j,isMultiDay:F.length>1,multiDayMealIds:F.length>1?F:null,multiDayCount:F.length>1?F.length:null}:{recipeName:K.trim(),recipeType:ie,recipeImageUrl:null,servings:j,isCustom:!0,isMultiDay:F.length>1,multiDayMealIds:F.length>1?F:null,multiDayCount:F.length>1?F.length:null};i(N,F)},M=N=>{le(ye=>ye.includes(N)?N===t&&ye.length===1?ye:ye.filter(oe=>oe!==N):[...ye,N])},R=()=>{_(""),O("all")},k=g!==""||I!=="all";return f.jsx("div",{className:_e.overlay,onClick:e,children:f.jsxs("div",{className:_e.modal,onClick:N=>N.stopPropagation(),children:[f.jsxs("div",{className:_e.header,children:[f.jsx("h2",{children:h==="recipe"?"Slectionner une recette":"Repas personnalis"}),f.jsx("button",{onClick:e,className:_e.closeButton,title:"Fermer",children:""})]}),f.jsxs("div",{className:_e.modeToggle,children:[f.jsx("button",{onClick:()=>p("recipe"),className:`${_e.modeButton} ${h==="recipe"?_e.activeModeButton:""}`,children:" Recettes"}),f.jsx("button",{onClick:()=>p("custom"),className:`${_e.modeButton} ${h==="custom"?_e.activeModeButton:""}`,children:" Repas custom"})]}),h==="recipe"&&f.jsxs("div",{className:_e.filterSection,children:[f.jsxs("div",{className:_e.searchContainer,children:[f.jsxs("div",{className:_e.searchModeToggle,children:[f.jsx("button",{onClick:()=>E("name"),className:`${_e.searchModeButton} ${T==="name"?_e.activeModeButton:""}`,title:"Rechercher par nom",children:" Nom"}),f.jsx("button",{onClick:()=>E("ingredient"),className:`${_e.searchModeButton} ${T==="ingredient"?_e.activeModeButton:""}`,title:"Rechercher par ingrdient",children:" Ingrdient"})]}),f.jsxs("div",{className:_e.searchInputWrapper,children:[f.jsx("span",{className:_e.searchIcon,children:""}),f.jsx("input",{type:"text",placeholder:T==="name"?"Rechercher une recette...":"Rechercher par ingrdient...",value:g,onChange:N=>_(N.target.value),className:_e.searchInput}),g&&f.jsx("button",{onClick:()=>_(""),className:_e.clearSearchButton,title:"Effacer",children:""})]})]}),f.jsxs("div",{className:_e.filterControls,children:[f.jsxs("div",{className:_e.typeFilters,children:[f.jsx("button",{onClick:()=>O("all"),className:`${_e.typeFilterButton} ${I==="all"?_e.active:""}`,children:"Tous"}),Kc.map(N=>o.filter(oe=>oe.type===N.id).length===0?null:f.jsxs("button",{onClick:()=>O(N.id),className:`${_e.typeFilterButton} ${I===N.id?_e.active:""}`,children:[N.icon," ",N.label]},N.id))]}),k&&f.jsx("button",{onClick:R,className:_e.clearFiltersButton,title:"Rinitialiser les filtres",children:""})]}),f.jsxs("div",{className:_e.resultsInfo,children:[w.length," recette",w.length>1?"s":""]})]}),f.jsxs("div",{className:_e.scrollableContent,children:[h==="recipe"&&f.jsx("div",{className:_e.recipeGrid,children:c?f.jsx("div",{className:_e.loading,children:"Chargement..."}):w.length===0?f.jsx("div",{className:_e.empty,children:"Aucune recette trouve"}):w.map(N=>{const ye=of(N.type||"plat"),oe=L?.id===N.id;return f.jsx("div",{className:`${_e.recipeCard} ${oe?_e.selected:""}`,onClick:()=>z(N),children:f.jsxs("div",{className:_e.recipeCardInner,style:{backgroundImage:N.imageUrl?`url(${N.imageUrl})`:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)"},children:[ye&&f.jsx("div",{className:_e.recipeTypeBadge,children:f.jsx("span",{className:_e.recipeTypeIcon,children:ye.icon})}),f.jsxs("div",{className:_e.recipeOverlay,children:[f.jsx("h3",{className:_e.recipeName,children:N.name}),f.jsx("div",{className:_e.recipeInfo,children:f.jsxs("span",{children:[" ",N.servings," pers."]})})]}),!N.imageUrl&&f.jsx("div",{className:_e.placeholderIcon,children:""}),oe&&f.jsx("div",{className:_e.selectedBadge,children:""})]})},N.id)})}),h==="custom"&&f.jsxs("div",{className:_e.customForm,children:[f.jsxs("div",{className:_e.customFormField,children:[f.jsx("label",{className:_e.customFormLabel,children:"Nom du repas *"}),f.jsx("input",{type:"text",placeholder:"Ex: Pizza, Restaurant, Poke Bowl...",value:K,onChange:N=>B(N.target.value),className:_e.customFormInput,autoFocus:!0})]}),f.jsxs("div",{className:_e.customFormField,children:[f.jsx("label",{className:_e.customFormLabel,children:"Type de repas"}),f.jsx("div",{className:_e.customTypeButtons,children:Kc.map(N=>f.jsxs("button",{onClick:()=>A(N.id),className:`${_e.customTypeButton} ${ie===N.id?_e.active:""}`,children:[N.icon," ",N.label]},N.id))})]})]}),(L||h==="custom"&&K.trim())&&f.jsxs("div",{className:_e.configSection,children:[f.jsx("div",{className:_e.configHeader,children:f.jsx("h3",{children:"Configuration"})}),f.jsxs("div",{className:_e.configContent,children:[f.jsxs("div",{className:_e.configRow,children:[f.jsx("label",{className:_e.configLabel,children:" Nombre de personnes :"}),f.jsxs("div",{className:_e.servingsControl,children:[f.jsx("button",{onClick:()=>Y(Math.max(1,j-1)),className:_e.servingsButton,children:""}),f.jsx("input",{type:"number",min:"1",max:"20",value:j,onChange:N=>Y(Math.max(1,Number(N.target.value))),className:_e.servingsInput}),f.jsx("button",{onClick:()=>Y(Math.min(20,j+1)),className:_e.servingsButton,children:"+"})]})]}),r.length>1&&(()=>{const N=r.reduce((oe,V)=>(oe[V.dayKey]||(oe[V.dayKey]={dayName:V.dayName,lunch:null,dinner:null}),V.slotType==="lunch"?oe[V.dayKey].lunch=V.slotId:oe[V.dayKey].dinner=V.slotId,oe),{}),ye=Object.entries(N);return f.jsxs("div",{className:_e.configRow,children:[f.jsx("label",{className:_e.configLabel,children:" taler sur plusieurs jours :"}),f.jsxs("div",{className:_e.multiDayGrid,children:[f.jsxs("div",{className:_e.multiDayHeader,children:[f.jsx("div",{className:_e.multiDayHeaderEmpty}),ye.map(([oe,V])=>f.jsx("div",{className:_e.multiDayDay,children:V.dayName.substring(0,3)},oe))]}),f.jsxs("div",{className:_e.multiDayRow,children:[f.jsx("div",{className:_e.multiDayLabel,children:" Midi"}),ye.map(([oe,V])=>f.jsx("div",{className:_e.multiDaySlot,children:V.lunch&&f.jsxs("label",{className:`${_e.multiDayCheckbox} ${F.includes(V.lunch)?_e.checked:""}`,children:[f.jsx("input",{type:"checkbox",checked:F.includes(V.lunch),onChange:()=>M(V.lunch)}),f.jsx("span",{className:_e.checkmark})]})},`${oe}-lunch`))]}),f.jsxs("div",{className:_e.multiDayRow,children:[f.jsx("div",{className:_e.multiDayLabel,children:" Soir"}),ye.map(([oe,V])=>f.jsx("div",{className:_e.multiDaySlot,children:V.dinner&&f.jsxs("label",{className:`${_e.multiDayCheckbox} ${F.includes(V.dinner)?_e.checked:""}`,children:[f.jsx("input",{type:"checkbox",checked:F.includes(V.dinner),onChange:()=>M(V.dinner)}),f.jsx("span",{className:_e.checkmark})]})},`${oe}-dinner`))]})]}),F.length>1&&f.jsx("p",{className:_e.multiDayHint,children:" Les quantits ne seront comptes qu'une seule fois dans la liste de courses"})]})})()]})]})]})," ",f.jsxs("div",{className:_e.footer,children:[f.jsx("button",{onClick:e,className:_e.cancelButton,children:"Annuler"}),f.jsx("button",{onClick:S,className:_e.confirmButton,disabled:h==="recipe"?!L:!K.trim(),children:F.length>1?`Ajouter  ${F.length} repas`:F.length===0?"Ajouter comme extra":"Ajouter au planning"})]})]})})},QB="_overlay_11sib_2",KB="_modal_11sib_27",XB="_header_11sib_52",WB="_closeButton_11sib_67",JB="_content_11sib_91",ZB="_saveSection_11sib_98",e9="_saveButton_11sib_102",t9="_saveForm_11sib_127",n9="_formGroup_11sib_134",i9="_input_11sib_152",s9="_textarea_11sib_153",r9="_formButtons_11sib_177",a9="_submitButton_11sib_182",o9="_cancelButton_11sib_183",l9="_templatesSection_11sib_216",c9="_sectionTitle_11sib_220",u9="_loading_11sib_229",h9="_empty_11sib_236",d9="_emptyHint_11sib_250",f9="_templatesList_11sib_257",m9="_templateCard_11sib_263",p9="_templateInfo_11sib_280",g9="_templateName_11sib_285",_9="_templateDescription_11sib_292",y9="_templateMeta_11sib_299",v9="_metaItem_11sib_306",b9="_templateDate_11sib_312",T9="_templateActions_11sib_317",w9="_applyButton_11sib_323",E9="_deleteButton_11sib_324",lt={overlay:QB,modal:KB,header:XB,closeButton:WB,content:JB,saveSection:ZB,saveButton:e9,saveForm:t9,formGroup:n9,input:i9,textarea:s9,formButtons:r9,submitButton:a9,cancelButton:o9,templatesSection:l9,sectionTitle:c9,loading:u9,empty:h9,emptyHint:d9,templatesList:f9,templateCard:m9,templateInfo:p9,templateName:g9,templateDescription:_9,templateMeta:y9,metaItem:v9,templateDate:b9,templateActions:T9,applyButton:w9,deleteButton:E9},S9=({isOpen:i,onClose:e})=>{const{mealPlan:t,createTemplate:r,getTemplates:o,applyTemplate:c,deleteTemplate:h}=p_(),[p,g]=ee.useState([]),[_,T]=ee.useState(!1),[E,I]=ee.useState(!1),[O,L]=ee.useState({name:"",description:""});ee.useEffect(()=>{i&&z()},[i]);const z=async()=>{T(!0);try{const K=await o();g(K)}catch(K){console.error("Error loading templates:",K)}finally{T(!1)}},j=async K=>{if(K.preventDefault(),!!O.name.trim())try{await r(O.name.trim(),O.description.trim()),L({name:"",description:""}),I(!1),await z()}catch(B){console.error("Error saving template:",B),alert("Erreur lors de la sauvegarde du modle")}},Y=async K=>{if(confirm("Appliquer ce modle remplacera le planning actuel. Continuer ?"))try{await c(K),e()}catch(B){console.error("Error applying template:",B),alert("Erreur lors de l'application du modle")}},F=async(K,B)=>{if(confirm(`Supprimer le modle "${B}" ? Cette action est irrversible.`))try{await h(K),await z()}catch(ie){console.error("Error deleting template:",ie),alert("Erreur lors de la suppression du modle")}};if(!i)return null;const le=t&&Object.keys(t.meals||{}).length>0;return f.jsx("div",{className:lt.overlay,onClick:e,children:f.jsxs("div",{className:lt.modal,onClick:K=>K.stopPropagation(),children:[f.jsxs("div",{className:lt.header,children:[f.jsx("h2",{children:" Modles de Planning"}),f.jsx("button",{onClick:e,className:lt.closeButton,children:""})]}),f.jsxs("div",{className:lt.content,children:[f.jsx("div",{className:lt.saveSection,children:E?f.jsxs("form",{onSubmit:j,className:lt.saveForm,children:[f.jsxs("div",{className:lt.formGroup,children:[f.jsx("label",{children:"Nom du modle *"}),f.jsx("input",{type:"text",value:O.name,onChange:K=>L({...O,name:K.target.value}),placeholder:"Ex: Semaine quilibre",required:!0,autoFocus:!0,className:lt.input})]}),f.jsxs("div",{className:lt.formGroup,children:[f.jsx("label",{children:"Description (optionnel)"}),f.jsx("textarea",{value:O.description,onChange:K=>L({...O,description:K.target.value}),placeholder:"Ex: Planning quilibr avec des repas varis",rows:2,className:lt.textarea})]}),f.jsxs("div",{className:lt.formButtons,children:[f.jsx("button",{type:"submit",className:lt.submitButton,children:"Sauvegarder"}),f.jsx("button",{type:"button",onClick:()=>{I(!1),L({name:"",description:""})},className:lt.cancelButton,children:"Annuler"})]})]}):f.jsx("button",{onClick:()=>I(!0),className:lt.saveButton,disabled:!le,title:le?"":"Ajoutez des repas avant de sauvegarder",children:" Sauvegarder le planning actuel"})}),f.jsxs("div",{className:lt.templatesSection,children:[f.jsx("h3",{className:lt.sectionTitle,children:"Modles enregistrs"}),_?f.jsx("div",{className:lt.loading,children:"Chargement..."}):p.length===0?f.jsxs("div",{className:lt.empty,children:[f.jsx("p",{children:"Aucun modle enregistr"}),f.jsx("p",{className:lt.emptyHint,children:"Crez votre premier modle en sauvegardant le planning actuel"})]}):f.jsx("div",{className:lt.templatesList,children:p.map(K=>f.jsxs("div",{className:lt.templateCard,children:[f.jsxs("div",{className:lt.templateInfo,children:[f.jsx("h4",{className:lt.templateName,children:K.name}),K.description&&f.jsx("p",{className:lt.templateDescription,children:K.description}),f.jsxs("div",{className:lt.templateMeta,children:[f.jsxs("span",{className:lt.metaItem,children:[" ",Object.keys(K.meals||{}).length," repas"]}),K.extras?.length>0&&f.jsxs("span",{className:lt.metaItem,children:[" ",K.extras.length," extra",K.extras.length>1?"s":""]})]}),f.jsxs("div",{className:lt.templateDate,children:["Cr le ",new Date(K.createdAt).toLocaleDateString("fr-FR",{day:"numeric",month:"long",year:"numeric"})]})]}),f.jsxs("div",{className:lt.templateActions,children:[f.jsx("button",{onClick:()=>Y(K.id),className:lt.applyButton,title:"Appliquer ce modle",children:" Appliquer"}),f.jsx("button",{onClick:()=>F(K.id,K.name),className:lt.deleteButton,title:"Supprimer ce modle",children:""})]})]},K.id))})]})]})]})})},A9="_container_1k0yb_1",I9="_header_1k0yb_8",C9="_headerLeft_1k0yb_17",N9="_headerRight_1k0yb_28",x9="_weekNavigation_1k0yb_35",R9="_navButton_1k0yb_45",D9="_weekInfo_1k0yb_67",M9="_weekNumber_1k0yb_75",O9="_weekDates_1k0yb_81",k9="_viewToggle_1k0yb_87",j9="_viewButton_1k0yb_96",L9="_activeView_1k0yb_115",P9="_extrasSection_1k0yb_122",V9="_extrasHeader_1k0yb_130",B9="_addExtraButton_1k0yb_145",U9="_noExtras_1k0yb_165",z9="_extrasList_1k0yb_173",q9="_extraItem_1k0yb_179",H9="_extraIcon_1k0yb_198",F9="_extraName_1k0yb_203",$9="_extraServings_1k0yb_208",G9="_removeExtraButton_1k0yb_213",Y9="_weekGrid_1k0yb_236",Q9="_gridHeader_1k0yb_243",K9="_dayHeader_1k0yb_249",X9="_today_1k0yb_261",W9="_dayName_1k0yb_279",J9="_dayNumber_1k0yb_286",Z9="_gridRow_1k0yb_292",eU="_rowLabel_1k0yb_299",tU="_weekList_1k0yb_315",nU="_dayCard_1k0yb_322",iU="_todayCard_1k0yb_334",sU="_dayCardHeader_1k0yb_340",rU="_dayCardDate_1k0yb_349",aU="_dayCardName_1k0yb_355",oU="_dayCardNumber_1k0yb_363",lU="_todayBadge_1k0yb_377",cU="_dayCardMeals_1k0yb_388",uU="_mealRow_1k0yb_395",hU="_mealRowLabel_1k0yb_401",dU="_mealRowIcon_1k0yb_418",fU="_mealRowContent_1k0yb_423",mU="_footer_1k0yb_429",pU="_actionButton_1k0yb_438",gU="_loading_1k0yb_460",_U="_error_1k0yb_461",yU="_sideModal_1k0yb_615",vU="_modalOverlay_1k0yb_681",Re={container:A9,header:I9,headerLeft:C9,headerRight:N9,weekNavigation:x9,navButton:R9,weekInfo:D9,weekNumber:M9,weekDates:O9,viewToggle:k9,viewButton:j9,activeView:L9,extrasSection:P9,extrasHeader:V9,addExtraButton:B9,noExtras:U9,extrasList:z9,extraItem:q9,extraIcon:H9,extraName:F9,extraServings:$9,removeExtraButton:G9,weekGrid:Y9,gridHeader:Q9,dayHeader:K9,today:X9,dayName:W9,dayNumber:J9,gridRow:Z9,rowLabel:eU,weekList:tU,dayCard:nU,todayCard:iU,dayCardHeader:sU,dayCardDate:rU,dayCardName:aU,dayCardNumber:oU,todayBadge:lU,dayCardMeals:cU,mealRow:uU,mealRowLabel:hU,mealRowIcon:dU,mealRowContent:fU,footer:mU,actionButton:pU,loading:gU,error:_U,sideModal:yU,modalOverlay:vU},bU=()=>{const{mealPlan:i,loading:e,loadMealPlan:t,updateMealSlot:r,updateMultipleMealSlots:o,addExtra:c,deleteExtra:h}=p_(),{deleteRecipe:p}=Za(),g=q=>{const pe=new URLSearchParams(window.location.search);pe.set("week",q.weekNumber),pe.set("year",q.year),q.viewMode!=="grid"?pe.set("planView",q.viewMode):pe.delete("planView");const nt=`${window.location.pathname}?${pe}`;window.history.replaceState({},"",nt)},_=()=>{const q=new URLSearchParams(window.location.search),pe=sd();return{weekNumber:parseInt(q.get("week"))||pe.weekNumber,year:parseInt(q.get("year"))||pe.year,viewMode:q.get("planView")||"grid"}},[T,E]=g_("planningWeek",{weekNumber:sd().weekNumber,year:sd().year,viewMode:"grid"},{serializeToUrl:g,deserializeFromUrl:_}),[I,O]=ee.useState(T.viewMode),[L,z]=ee.useState(!1),[j,Y]=ee.useState(null),[F,le]=ee.useState(null),[K,B]=ee.useState(!1),[ie,A]=ee.useState(null),[w,S]=ee.useState(!1),[M,R]=ee.useState(null);ee.useEffect(()=>{T.weekNumber&&T.year&&t(T.weekNumber,T.year)},[T.weekNumber,T.year,t]);const k=q=>{const pe=V6(T.weekNumber,T.year,q);E({weekNumber:pe.weekNumber,year:pe.year,viewMode:I}),t(pe.weekNumber,pe.year)},N=q=>{O(q),E(pe=>({...pe,viewMode:q}))},ye=(q,pe)=>{Y(q),le(pe),z(!0)},oe=async(q,pe)=>{if(pe.length>1){const nt=pe.map((At,jt)=>({slotId:At,mealData:{...q,multiDayIndex:jt+1,multiDayMealIds:pe}}));await o(nt)}else await r(pe[0],q);z(!1),Y(null),le(null)},V=()=>{z(!1),Y(null),le(null)},X=(q,pe)=>{r(q,pe)},ne=q=>{r(q,null)},H=()=>{B(!0)},W=async q=>{const pe={recipeId:q.recipeId,recipeName:q.recipeName,recipeType:q.recipeType,recipeImageUrl:q.recipeImageUrl,servings:q.servings};await c(pe),B(!1)},D=()=>{B(!1)},G=async q=>{await h(q)},se=(q,pe)=>{R(q)},me=()=>{R(null)},Ee=async(q,pe)=>{if(!i)return;const nt=i.meals[q],At=i.meals[pe],jt=[];nt?jt.push({slotId:pe,mealData:nt}):jt.push({slotId:pe,mealData:null}),At?jt.push({slotId:q,mealData:At}):jt.push({slotId:q,mealData:null}),await o(jt)};if(e)return f.jsx("div",{className:Re.container,children:f.jsx("div",{className:Re.loading,children:"Chargement du planning..."})});if(!i)return f.jsx("div",{className:Re.container,children:f.jsx("div",{className:Re.error,children:"Erreur lors du chargement du planning"})});const Se=B6(i.startDate),we=P6(i.startDate,i.endDate),je=q=>{const pe=new Date(q),nt=new Date;return pe.getDate()===nt.getDate()&&pe.getMonth()===nt.getMonth()&&pe.getFullYear()===nt.getFullYear()},Ye=L?Se.filter(q=>!q.isPast).flatMap(q=>[{slotId:Fo(q.dayKey,"lunch"),dayKey:q.dayKey,dayName:q.dayName,slotType:"lunch"},{slotId:Fo(q.dayKey,"dinner"),dayKey:q.dayKey,dayName:q.dayName,slotType:"dinner"}]).filter(q=>!i.meals[q.slotId]):[];return f.jsxs("div",{className:Re.container,children:[f.jsxs("div",{className:Re.header,children:[f.jsxs("div",{className:Re.headerLeft,children:[f.jsx("h1",{children:"Planning des repas"}),f.jsxs("div",{className:Re.weekNavigation,children:[f.jsx("button",{onClick:()=>k(-1),className:Re.navButton,title:"Semaine prcdente",children:""}),f.jsxs("div",{className:Re.weekInfo,children:[f.jsxs("div",{className:Re.weekNumber,children:["Semaine ",i.weekNumber]}),f.jsxs("div",{className:Re.weekDates,children:[" ",we]})]}),f.jsx("button",{onClick:()=>k(1),className:Re.navButton,title:"Semaine suivante",children:""})]})]}),f.jsx("div",{className:Re.headerRight,children:f.jsxs("div",{className:Re.viewToggle,children:[f.jsx("button",{onClick:()=>N("grid"),className:`${Re.viewButton} ${I==="grid"?Re.activeView:""}`,title:"Vue grille",children:""}),f.jsx("button",{onClick:()=>N("list"),className:`${Re.viewButton} ${I==="list"?Re.activeView:""}`,title:"Vue liste",children:""})]})})]}),I==="grid"&&f.jsxs("div",{className:Re.weekGrid,children:[f.jsxs("div",{className:Re.gridHeader,children:[f.jsx("div",{}),Se.map(q=>f.jsxs("div",{className:`${Re.dayHeader} ${je(q.date)?Re.today:""}`,children:[f.jsx("div",{className:Re.dayName,children:q.dayName.substring(0,3)}),f.jsx("div",{className:Re.dayNumber,children:q.dayNumber})]},q.dayKey))]}),f.jsxs("div",{className:Re.gridRow,children:[f.jsx("div",{className:Re.rowLabel,children:" Midi"}),Se.map(q=>{const pe=Fo(q.dayKey,"lunch"),nt=i.meals[pe];return f.jsx(Yh,{meal:nt,dayName:q.dayName,slotType:"lunch",slotId:pe,isPast:q.isPast,onAdd:()=>ye(pe,"lunch"),onEdit:At=>X(pe,At),onRemove:()=>ne(pe),onViewRecipe:At=>A(At),onDragStart:se,onDragEnd:me,onDrop:Ee},pe)})]}),f.jsxs("div",{className:Re.gridRow,children:[f.jsx("div",{className:Re.rowLabel,children:" Soir"}),Se.map(q=>{const pe=Fo(q.dayKey,"dinner"),nt=i.meals[pe];return f.jsx(Yh,{meal:nt,dayName:q.dayName,slotType:"dinner",slotId:pe,isPast:q.isPast,onAdd:()=>ye(pe,"dinner"),onEdit:At=>X(pe,At),onRemove:()=>ne(pe),onViewRecipe:At=>A(At),onDragStart:se,onDragEnd:me,onDrop:Ee},pe)})]})]}),I==="list"&&f.jsx("div",{className:Re.weekList,children:Se.map(q=>{const pe=Fo(q.dayKey,"lunch"),nt=Fo(q.dayKey,"dinner"),At=i.meals[pe],jt=i.meals[nt];return f.jsxs("div",{className:`${Re.dayCard} ${je(q.date)?Re.todayCard:""}`,children:[f.jsxs("div",{className:Re.dayCardHeader,children:[f.jsxs("div",{className:Re.dayCardDate,children:[f.jsx("div",{className:Re.dayCardName,children:q.dayName}),f.jsx("div",{className:Re.dayCardNumber,children:q.dayNumber})]}),je(q.date)&&f.jsx("span",{className:Re.todayBadge,children:"Aujourd'hui"})]}),f.jsxs("div",{className:Re.dayCardMeals,children:[f.jsxs("div",{className:Re.mealRow,children:[f.jsxs("div",{className:Re.mealRowLabel,children:[f.jsx("span",{className:Re.mealRowIcon,children:""}),f.jsx("span",{children:"Midi"})]}),f.jsx("div",{className:Re.mealRowContent,children:f.jsx(Yh,{meal:At,dayName:q.dayName,slotType:"lunch",slotId:pe,isPast:q.isPast,onAdd:()=>ye(pe,"lunch"),onEdit:Dn=>X(pe,Dn),onRemove:()=>ne(pe),onViewRecipe:Dn=>A(Dn),onDragStart:se,onDragEnd:me,onDrop:Ee})})]}),f.jsxs("div",{className:Re.mealRow,children:[f.jsxs("div",{className:Re.mealRowLabel,children:[f.jsx("span",{className:Re.mealRowIcon,children:""}),f.jsx("span",{children:"Soir"})]}),f.jsx("div",{className:Re.mealRowContent,children:f.jsx(Yh,{meal:jt,dayName:q.dayName,slotType:"dinner",slotId:nt,isPast:q.isPast,onAdd:()=>ye(nt,"dinner"),onEdit:Dn=>X(nt,Dn),onRemove:()=>ne(nt),onViewRecipe:Dn=>A(Dn),onDragStart:se,onDragEnd:me,onDrop:Ee})})]})]})]},q.dayKey)})}),f.jsxs("div",{className:Re.extrasSection,children:[f.jsxs("div",{className:Re.extrasHeader,children:[f.jsx("h3",{children:" Extras de la semaine"}),f.jsx("button",{className:Re.addExtraButton,onClick:H,children:"+ Ajouter un extra"})]}),i.extras.length===0?f.jsx("p",{className:Re.noExtras,children:"Aucun extra pour cette semaine"}):f.jsx("div",{className:Re.extrasList,children:i.extras.map(q=>f.jsxs("div",{className:Re.extraItem,onClick:()=>A(q.recipeId),children:[f.jsx("span",{className:Re.extraIcon,children:TU(q.recipeType)?.icon||""}),f.jsx("span",{className:Re.extraName,children:q.recipeName}),f.jsxs("span",{className:Re.extraServings,children:[" ",q.servings]}),f.jsx("button",{className:Re.removeExtraButton,onClick:pe=>{pe.stopPropagation(),G(q.id)},title:"Retirer",children:""})]},q.id))})]}),f.jsx("div",{className:Re.footer,children:f.jsx("button",{className:Re.actionButton,onClick:()=>S(!0),children:" Modles de planning"})}),L&&f.jsx(V0,{onSelect:oe,onCancel:V,currentSlotId:j,availableDays:Ye}),K&&f.jsx(V0,{onSelect:q=>W(q),onCancel:D,currentSlotId:null,availableDays:[]}),ie&&f.jsxs(f.Fragment,{children:[f.jsx("div",{className:Re.modalOverlay,onClick:()=>A(null)}),f.jsx("div",{className:Re.sideModal,children:f.jsx(ZE,{recipeId:ie,onClose:()=>A(null),onDelete:p})})]}),f.jsx(S9,{isOpen:w,onClose:()=>S(!1)})]})},TU=i=>{const e={entree:{id:"entree",label:"Entre",icon:""},plat:{id:"plat",label:"Plat",icon:""},dessert:{id:"dessert",label:"Dessert",icon:""},appetizer:{id:"appetizer",label:"Apritif",icon:""},breakfast:{id:"breakfast",label:"Petit-djeuner",icon:""},snack:{id:"snack",label:"Goter",icon:""}};return e[i]||e.plat},wU="_container_y66lt_1",EU="_header_y66lt_8",SU="_headerLeft_y66lt_17",AU="_subtitle_y66lt_27",IU="_headerButtons_y66lt_33",CU="_shoppingModeButton_y66lt_39",NU="_addButton_y66lt_61",xU="_clearButton_y66lt_62",RU="_addForm_y66lt_92",DU="_formRow_y66lt_112",MU="_formGroup_y66lt_119",OU="_formInput_y66lt_133",kU="_formSelect_y66lt_134",jU="_submitButton_y66lt_152",LU="_stats_y66lt_172",PU="_statCard_y66lt_179",VU="_statIcon_y66lt_195",BU="_statContent_y66lt_200",UU="_statValue_y66lt_206",zU="_statLabel_y66lt_213",qU="_categoriesList_y66lt_222",HU="_categorySection_y66lt_228",FU="_categoryHeader_y66lt_235",$U="_categoryTitle_y66lt_244",GU="_categoryCount_y66lt_253",YU="_itemsList_y66lt_268",QU="_item_y66lt_268",KU="_itemClickable_y66lt_283",XU="_deleteButton_y66lt_291",WU="_checked_y66lt_314",JU="_itemName_y66lt_319",ZU="_checkbox_y66lt_324",e7="_checkmark_y66lt_346",t7="_itemContent_y66lt_353",n7="_customBadge_y66lt_373",i7="_itemQuantity_y66lt_379",s7="_empty_y66lt_387",r7="_loading_y66lt_408",a7="_shoppingModeContainer_y66lt_535",o7="_shoppingModeHeader_y66lt_548",l7="_shoppingModeTitle_y66lt_559",c7="_exitShoppingMode_y66lt_563",u7="_shoppingModeProgress_y66lt_579",h7="_progressText_y66lt_583",d7="_progressBarContainer_y66lt_587",f7="_progressBar_y66lt_587",m7="_shoppingModeList_y66lt_595",p7="_shoppingModeCategory_y66lt_601",g7="_shoppingModeCategoryHeader_y66lt_605",_7="_shoppingModeCategoryCount_y66lt_630",y7="_shoppingModeItems_y66lt_634",v7="_shoppingModeItem_y66lt_634",b7="_shoppingModeItemChecked_y66lt_660",T7="_shoppingModeItemName_y66lt_664",w7="_shoppingModeCheckbox_y66lt_669",E7="_shoppingModeItemContent_y66lt_698",S7="_shoppingModeItemQuantity_y66lt_718",be={container:wU,header:EU,headerLeft:SU,subtitle:AU,headerButtons:IU,shoppingModeButton:CU,addButton:NU,clearButton:xU,addForm:RU,formRow:DU,formGroup:MU,formInput:OU,formSelect:kU,submitButton:jU,stats:LU,statCard:PU,statIcon:VU,statContent:BU,statValue:UU,statLabel:zU,categoriesList:qU,categorySection:HU,categoryHeader:FU,categoryTitle:$U,categoryCount:GU,itemsList:YU,item:QU,itemClickable:KU,deleteButton:XU,checked:WU,itemName:JU,checkbox:ZU,checkmark:e7,itemContent:t7,customBadge:n7,itemQuantity:i7,empty:s7,loading:r7,shoppingModeContainer:a7,shoppingModeHeader:o7,shoppingModeTitle:l7,exitShoppingMode:c7,shoppingModeProgress:u7,progressText:h7,progressBarContainer:d7,progressBar:f7,shoppingModeList:m7,shoppingModeCategory:p7,shoppingModeCategoryHeader:g7,shoppingModeCategoryCount:_7,shoppingModeItems:y7,shoppingModeItem:v7,shoppingModeItemChecked:b7,shoppingModeItemName:T7,shoppingModeCheckbox:w7,shoppingModeItemContent:E7,shoppingModeItemQuantity:S7},A7=()=>{const{mealPlan:i,loading:e,addPermanentItem:t,deletePermanentItem:r,updateCheckedItems:o}=p_(),{recipes:c,loading:h}=Za(),[p,g]=ee.useState({}),[_,T]=ee.useState(!1),[E,I]=ee.useState(!1),[O,L]=ee.useState({name:"",category:"Autres",quantity:"",unit:""});ee.useEffect(()=>{i?.checkedItems&&g(i.checkedItems)},[i]);const z=ee.useMemo(()=>{if(!i||!c.length)return[];const S=new Date;S.setHours(0,0,0,0);const M=[],R=new Set;Object.entries(i.meals||{}).forEach(([X,ne])=>{const[H,W]=X.split("_"),D=["monday","tuesday","wednesday","thursday","friday","saturday","sunday"].indexOf(H),G=new Date(i.startDate);if(G.setDate(G.getDate()+D),G.setHours(0,0,0,0),!(G<S)&&!ne.skipShoppingList){if(ne.isMultiDay){const se=ne.multiDayMealIds?.sort().join("_");if(R.has(se))return;R.add(se)}M.push({...ne,slotId:X,date:G})}}),i.extras?.forEach(X=>{M.push({...X,isExtra:!0})});const k={};M.forEach(X=>{const ne=c.find(W=>W.id===X.recipeId);if(!ne||!ne.ingredients)return;const H=X.servings/(ne.servings||1);ne.ingredients.forEach(W=>{const D=`${W.name}_${W.unit||""}`;k[D]||(k[D]={name:W.name,unit:W.unit||"",quantity:0,category:W.category||"Autres",fromRecipes:[]});const G=(W.quantity||0)*H;k[D].quantity+=G,k[D].fromRecipes.push(ne.name)})});const N=Object.values(k),ye=i.permanentItems||[],oe=N.reduce((X,ne)=>(X[ne.category]||(X[ne.category]=[]),X[ne.category].push(ne),X),{});ye.forEach(X=>{const ne=X.id;p[ne]||(oe[X.category]||(oe[X.category]=[]),oe[X.category].push({...X,isPermanent:!0,fromRecipes:[]}))});const V=ye.filter(X=>p[X.id]);return V.length>0&&(oe[" Cochs"]=V.map(X=>({...X,isPermanent:!0,fromRecipes:[]}))),Object.entries(oe).map(([X,ne])=>({category:X,items:ne.sort((H,W)=>H.name.localeCompare(W.name))})).sort((X,ne)=>X.category===" Cochs"?1:ne.category===" Cochs"?-1:X.category.localeCompare(ne.category))},[i,c,p]),j=async(S,M,R)=>{const k=R||`${S}_${M}`,N={...p,[k]:!p[k]};g(N);try{await o(N)}catch(ye){console.error("Error updating checked items:",ye)}},Y=async()=>{g({});try{await o({})}catch(S){console.error("Error clearing checked items:",S)}},F=async S=>{if(S.preventDefault(),!!O.name.trim())try{await t({name:O.name.trim(),category:O.category,quantity:O.quantity?parseFloat(O.quantity):null,unit:O.unit}),L({name:"",category:"Autres",quantity:"",unit:""}),T(!1)}catch(M){console.error("Error adding permanent item:",M)}},le=async S=>{try{await r(S),g(M=>{const R={...M};return delete R[S],R})}catch(M){console.error("Error deleting permanent item:",M)}};if(e||h)return f.jsx("div",{className:be.container,children:f.jsx("div",{className:be.loading,children:"Gnration de la liste de courses..."})});if(!i)return f.jsx("div",{className:be.container,children:f.jsxs("div",{className:be.empty,children:[f.jsx("h2",{children:" Aucun planning disponible"}),f.jsx("p",{children:"Crez un planning pour gnrer votre liste de courses automatiquement."})]})});const B=z.reduce((S,M)=>S+M.items.length,0),ie=Object.values(p).filter(Boolean).length,A={"Fruits & Lgumes":"","Viandes & Poissons":"","Produits laitiers":"",picerie:"",Surgels:"",Boissons:"",Boulangerie:"",Autres:""," Cochs":""},w=["Fruits & Lgumes","Viandes & Poissons","Produits laitiers","picerie","Surgels","Boissons","Boulangerie","Autres"];return E?f.jsxs("div",{className:be.shoppingModeContainer,children:[f.jsxs("div",{className:be.shoppingModeHeader,children:[f.jsxs("div",{className:be.shoppingModeTitle,children:[f.jsx(k0,{size:18,strokeWidth:2}),f.jsx("h1",{children:"Mode Course"})]}),f.jsx("button",{onClick:()=>I(!1),className:be.exitShoppingMode,title:"Quitter le mode course",children:f.jsx(O4,{size:20,strokeWidth:2})})]}),f.jsxs("div",{className:be.shoppingModeProgress,children:[f.jsxs("div",{className:be.progressText,children:[ie," / ",B," articles"]}),f.jsx("div",{className:be.progressBarContainer,children:f.jsx("div",{className:be.progressBar,style:{width:`${B>0?ie/B*100:0}%`}})})]}),f.jsx("div",{className:be.shoppingModeList,children:z.map(({category:S,items:M})=>f.jsxs("div",{className:be.shoppingModeCategory,children:[f.jsxs("div",{className:be.shoppingModeCategoryHeader,children:[f.jsx("span",{children:A[S]||""}),f.jsx("h2",{children:S}),f.jsxs("span",{className:be.shoppingModeCategoryCount,children:[M.filter(R=>{const k=R.isPermanent?R.id:`${S}_${R.name}`;return p[k]}).length,"/",M.length]})]}),f.jsx("div",{className:be.shoppingModeItems,children:M.map((R,k)=>{const N=R.isPermanent?R.id:`${S}_${R.name}`,ye=p[N];return f.jsxs("div",{className:`${be.shoppingModeItem} ${ye?be.shoppingModeItemChecked:""}`,onClick:()=>j(S,R.name,R.isPermanent?R.id:null),children:[f.jsx("div",{className:be.shoppingModeCheckbox,children:ye&&f.jsx("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"3",children:f.jsx("polyline",{points:"20 6 9 17 4 12"})})}),f.jsxs("div",{className:be.shoppingModeItemContent,children:[f.jsx("div",{className:be.shoppingModeItemName,children:R.name}),R.quantity&&f.jsxs("div",{className:be.shoppingModeItemQuantity,children:[Number.isInteger(R.quantity)?R.quantity:R.quantity.toFixed(1)," ",R.unit]})]})]},k)})})]},S))})]}):f.jsxs("div",{className:be.container,children:[f.jsxs("div",{className:be.header,children:[f.jsxs("div",{className:be.headerLeft,children:[f.jsx("h1",{children:" Liste de Courses"}),f.jsx("p",{className:be.subtitle,children:"Gnre automatiquement  partir de votre planning"})]}),f.jsxs("div",{className:be.headerButtons,children:[f.jsxs("button",{onClick:()=>I(!0),className:be.shoppingModeButton,children:[f.jsx(k0,{size:18,strokeWidth:2}),"Mode Course"]}),f.jsx("button",{onClick:()=>T(!_),className:be.addButton,children:_?" Annuler":"+ Ajouter item"}),ie>0&&f.jsxs("button",{onClick:Y,className:be.clearButton,children:["Effacer coches (",ie,")"]})]})]}),_&&f.jsxs("form",{onSubmit:F,className:be.addForm,children:[f.jsxs("div",{className:be.formRow,children:[f.jsxs("div",{className:be.formGroup,children:[f.jsx("label",{children:"Nom de l'article *"}),f.jsx("input",{type:"text",value:O.name,onChange:S=>L({...O,name:S.target.value}),placeholder:"Ex: Lait",required:!0,autoFocus:!0,className:be.formInput})]}),f.jsxs("div",{className:be.formGroup,children:[f.jsx("label",{children:"Catgorie"}),f.jsx("select",{value:O.category,onChange:S=>L({...O,category:S.target.value}),className:be.formSelect,children:w.map(S=>f.jsx("option",{value:S,children:S},S))})]})]}),f.jsxs("div",{className:be.formRow,children:[f.jsxs("div",{className:be.formGroup,children:[f.jsx("label",{children:"Quantit (optionnel)"}),f.jsx("input",{type:"number",step:"0.1",value:O.quantity,onChange:S=>L({...O,quantity:S.target.value}),placeholder:"Ex: 2",className:be.formInput})]}),f.jsxs("div",{className:be.formGroup,children:[f.jsx("label",{children:"Unit (optionnel)"}),f.jsx("input",{type:"text",value:O.unit,onChange:S=>L({...O,unit:S.target.value}),placeholder:"Ex: L",className:be.formInput})]})]}),f.jsx("button",{type:"submit",className:be.submitButton,children:"Ajouter  la liste"})]}),B>0&&f.jsxs("div",{className:be.stats,children:[f.jsxs("div",{className:be.statCard,children:[f.jsx("div",{className:be.statIcon,children:""}),f.jsxs("div",{className:be.statContent,children:[f.jsx("div",{className:be.statValue,children:B}),f.jsx("div",{className:be.statLabel,children:"Articles"})]})]}),f.jsxs("div",{className:be.statCard,children:[f.jsx("div",{className:be.statIcon,children:""}),f.jsxs("div",{className:be.statContent,children:[f.jsx("div",{className:be.statValue,children:ie}),f.jsx("div",{className:be.statLabel,children:"Cochs"})]})]}),f.jsxs("div",{className:be.statCard,children:[f.jsx("div",{className:be.statIcon,children:""}),f.jsxs("div",{className:be.statContent,children:[f.jsx("div",{className:be.statValue,children:z.length}),f.jsx("div",{className:be.statLabel,children:"Catgories"})]})]})]}),z.length===0?f.jsxs("div",{className:be.empty,children:[f.jsx("h2",{children:" Aucun article"}),f.jsx("p",{children:"Ajoutez des repas  votre planning ou des articles permanents."})]}):f.jsx("div",{className:be.categoriesList,children:z.map(({category:S,items:M})=>f.jsxs("div",{className:be.categorySection,children:[f.jsxs("div",{className:be.categoryHeader,children:[f.jsxs("h3",{className:be.categoryTitle,children:[A[S]||""," ",S]}),f.jsx("span",{className:be.categoryCount,children:M.length})]}),f.jsx("div",{className:be.itemsList,children:M.map((R,k)=>{const N=R.isPermanent?R.id:`${S}_${R.name}`,ye=p[N];return f.jsxs("div",{className:`${be.item} ${ye?be.checked:""}`,children:[f.jsxs("div",{className:be.itemClickable,onClick:()=>j(S,R.name,R.isPermanent?R.id:null),children:[f.jsx("div",{className:be.checkbox,children:ye&&f.jsx("span",{className:be.checkmark,children:""})}),f.jsxs("div",{className:be.itemContent,children:[f.jsxs("div",{className:be.itemName,children:[R.isPermanent&&f.jsx("span",{className:be.customBadge,children:""}),R.name]}),f.jsx("div",{className:be.itemQuantity,children:R.quantity&&f.jsxs(f.Fragment,{children:[Number.isInteger(R.quantity)?R.quantity:R.quantity.toFixed(1)," ",R.unit]})})]})]}),R.isPermanent&&f.jsx("button",{onClick:()=>le(R.id),className:be.deleteButton,title:"Supprimer dfinitivement",children:""})]},k)})})]},S))})]})},I7="_container_1dvyl_2",C7="_header_1dvyl_10",N7="_subtitle_1dvyl_20",x7="_loading_1dvyl_27",R7="_section_1dvyl_35",D7="_sectionTitle_1dvyl_39",M7="_pageButton_1dvyl_47",O7="_pageInfo_1dvyl_65",k7="_pageIcon_1dvyl_71",j7="_pageText_1dvyl_76",L7="_pageName_1dvyl_82",P7="_pageDescription_1dvyl_88",V7="_pageArrow_1dvyl_93",B7="_sectionHeader_1dvyl_99",U7="_card_1dvyl_107",z7="_cardRow_1dvyl_114",q7="_label_1dvyl_128",H7="_value_1dvyl_137",F7="_valueRow_1dvyl_143",$7="_editRow_1dvyl_151",G7="_input_1dvyl_157",Y7="_editButton_1dvyl_175",Q7="_saveButton_1dvyl_193",K7="_cancelButton_1dvyl_211",X7="_inviteDescription_1dvyl_235",W7="_inviteLinkContainer_1dvyl_241",J7="_inviteLinkInput_1dvyl_247",Z7="_shareButton_1dvyl_263",ez="_addButton_1dvyl_283",tz="_addMemberForm_1dvyl_302",nz="_submitButton_1dvyl_312",iz="_membersList_1dvyl_331",sz="_emptyState_1dvyl_337",rz="_memberCard_1dvyl_347",az="_memberInfo_1dvyl_363",oz="_memberIcon_1dvyl_369",lz="_memberName_1dvyl_373",cz="_removeButton_1dvyl_379",uz="_servingsControl_1dvyl_403",hz="_servingsButton_1dvyl_409",dz="_servingsValue_1dvyl_433",fz="_hint_1dvyl_441",mz="_saveSettingsButton_1dvyl_447",pz="_logoutButton_1dvyl_468",gz="_footer_1dvyl_488",_z="_appName_1dvyl_495",yz="_version_1dvyl_502",ve={container:I7,header:C7,subtitle:N7,loading:x7,section:R7,sectionTitle:D7,pageButton:M7,pageInfo:O7,pageIcon:k7,pageText:j7,pageName:L7,pageDescription:P7,pageArrow:V7,sectionHeader:B7,card:U7,cardRow:z7,label:q7,value:H7,valueRow:F7,editRow:$7,input:G7,editButton:Y7,saveButton:Q7,cancelButton:K7,inviteDescription:X7,inviteLinkContainer:W7,inviteLinkInput:J7,shareButton:Z7,addButton:ez,addMemberForm:tz,submitButton:nz,membersList:iz,emptyState:sz,memberCard:rz,memberInfo:az,memberIcon:oz,memberName:lz,removeButton:cz,servingsControl:uz,servingsButton:hz,servingsValue:dz,hint:fz,saveSettingsButton:mz,logoutButton:pz,footer:gz,appName:_z,version:yz},vz=({onNavigate:i})=>{const{household:e,updateHousehold:t}=Ja(),{user:r,logout:o}=au(),[c,h]=ee.useState(!1),[p,g]=ee.useState(e?.name||""),[_,T]=ee.useState(e?.defaultServings||4),[E,I]=ee.useState(e?.members||[]),[O,L]=ee.useState(""),[z,j]=ee.useState(!1);ee.useEffect(()=>{e&&(g(e.name||""),T(e.defaultServings||4),I(e.members||[]))},[e]);const Y=async()=>{if(p.trim())try{await t({name:p.trim()}),h(!1)}catch(A){console.error("Error updating household name:",A),alert("Erreur lors de la mise  jour du nom")}},F=async()=>{try{await t({defaultServings:parseInt(_)}),alert("Paramtres sauvegards !")}catch(A){console.error("Error updating default servings:",A),alert("Erreur lors de la mise  jour")}},le=async()=>{if(!O.trim())return;const A={id:`member_${Date.now()}`,name:O.trim(),addedAt:new Date().toISOString()},w=[...E,A];try{await t({members:w}),I(w),L(""),j(!1)}catch(S){console.error("Error adding member:",S),alert("Erreur lors de l'ajout du membre")}},K=async A=>{const w=E.filter(S=>S.id!==A);try{await t({members:w}),I(w)}catch(S){console.error("Error removing member:",S),alert("Erreur lors de la suppression du membre")}},B=async()=>{confirm("tes-vous sr de vouloir vous dconnecter ?")&&await o()},ie=async()=>{if(confirm("Vider le cache et recharger l'application ? Cela permettra de rcuprer la dernire version."))try{if("serviceWorker"in navigator){const A=await navigator.serviceWorker.getRegistrations();for(const w of A)await w.unregister()}if("caches"in window){const A=await caches.keys();await Promise.all(A.map(w=>caches.delete(w)))}localStorage.clear(),sessionStorage.clear(),window.location.reload(!0)}catch(A){console.error("Error clearing cache:",A),alert("Erreur lors du vidage du cache")}};return e?f.jsxs("div",{className:ve.container,children:[f.jsxs("div",{className:ve.header,children:[f.jsx("h1",{children:" Plus"}),f.jsx("p",{className:ve.subtitle,children:"Paramtres et options supplmentaires"})]}),f.jsxs("div",{className:ve.section,children:[f.jsx("h2",{className:ve.sectionTitle,children:" Pages"}),f.jsx("div",{className:ve.card,children:f.jsxs("button",{className:ve.pageButton,onClick:()=>i&&i("ingredients"),children:[f.jsxs("div",{className:ve.pageInfo,children:[f.jsx("span",{className:ve.pageIcon,children:""}),f.jsxs("div",{className:ve.pageText,children:[f.jsx("span",{className:ve.pageName,children:"Ingrdients"}),f.jsx("span",{className:ve.pageDescription,children:"Grer vos ingrdients"})]})]}),f.jsx("span",{className:ve.pageArrow,children:""})]})})]}),f.jsxs("div",{className:ve.section,children:[f.jsx("h2",{className:ve.sectionTitle,children:" Informations du foyer"}),f.jsxs("div",{className:ve.card,children:[f.jsxs("div",{className:ve.cardRow,children:[f.jsx("div",{className:ve.label,children:"Nom du foyer"}),c?f.jsxs("div",{className:ve.editRow,children:[f.jsx("input",{type:"text",value:p,onChange:A=>g(A.target.value),className:ve.input,autoFocus:!0}),f.jsx("button",{onClick:Y,className:ve.saveButton,children:" Sauvegarder"}),f.jsx("button",{onClick:()=>{h(!1),g(e.name)},className:ve.cancelButton,children:""})]}):f.jsxs("div",{className:ve.valueRow,children:[f.jsx("span",{className:ve.value,children:e.name}),f.jsx("button",{onClick:()=>{g(e.name),h(!0)},className:ve.editButton,children:" Modifier"})]})]}),f.jsxs("div",{className:ve.cardRow,children:[f.jsx("div",{className:ve.label,children:"Cr le"}),f.jsx("div",{className:ve.value,children:new Date(e.createdAt).toLocaleDateString("fr-FR",{day:"numeric",month:"long",year:"numeric"})})]})]})]}),f.jsxs("div",{className:ve.section,children:[f.jsx("h2",{className:ve.sectionTitle,children:" Inviter des membres"}),f.jsxs("div",{className:ve.card,children:[f.jsx("p",{className:ve.inviteDescription,children:"Partagez ce lien pour inviter quelqu'un  rejoindre votre foyer"}),f.jsxs("div",{className:ve.inviteLinkContainer,children:[f.jsx("input",{type:"text",value:`${window.location.origin}${window.location.pathname}?join=${e.id}`,readOnly:!0,className:ve.inviteLinkInput,onClick:A=>A.target.select()}),f.jsx("button",{onClick:async()=>{const A=`${window.location.origin}${window.location.pathname}?join=${e.id}`;if(navigator.share)try{await navigator.share({title:"Invitation Go Gourmet",text:`Rejoignez mon foyer "${e.name}" sur Go Gourmet !`,url:A})}catch(w){w.name!=="AbortError"&&(navigator.clipboard.writeText(A),alert("Lien copi dans le presse-papiers !"))}else navigator.clipboard.writeText(A),alert("Lien copi dans le presse-papiers !")},className:ve.shareButton,children:" Partager"})]})]})]}),f.jsxs("div",{className:ve.section,children:[f.jsxs("div",{className:ve.sectionHeader,children:[f.jsx("h2",{className:ve.sectionTitle,children:" Membres du foyer"}),f.jsx("button",{onClick:()=>j(!z),className:ve.addButton,children:z?" Annuler":"+ Ajouter"})]}),z&&f.jsxs("div",{className:ve.addMemberForm,children:[f.jsx("input",{type:"text",value:O,onChange:A=>L(A.target.value),placeholder:"Nom du membre",className:ve.input,autoFocus:!0}),f.jsx("button",{onClick:le,className:ve.submitButton,children:"Ajouter"})]}),f.jsx("div",{className:ve.membersList,children:E.length===0?f.jsx("div",{className:ve.emptyState,children:"Aucun membre ajout"}):E.map(A=>f.jsxs("div",{className:ve.memberCard,children:[f.jsxs("div",{className:ve.memberInfo,children:[f.jsx("span",{className:ve.memberIcon,children:""}),f.jsx("span",{className:ve.memberName,children:A.name})]}),f.jsx("button",{onClick:()=>K(A.id),className:ve.removeButton,title:"Retirer ce membre",children:""})]},A.id))})]}),f.jsxs("div",{className:ve.section,children:[f.jsx("h2",{className:ve.sectionTitle,children:" Paramtres par dfaut"}),f.jsxs("div",{className:ve.card,children:[f.jsxs("div",{className:ve.cardRow,children:[f.jsxs("div",{children:[f.jsx("div",{className:ve.label,children:"Nombre de portions par dfaut"}),f.jsx("p",{className:ve.hint,children:"Utilis lors de l'ajout de nouveaux repas au planning"})]}),f.jsxs("div",{className:ve.servingsControl,children:[f.jsx("button",{onClick:()=>T(Math.max(1,_-1)),className:ve.servingsButton,children:""}),f.jsx("span",{className:ve.servingsValue,children:_}),f.jsx("button",{onClick:()=>T(_+1),className:ve.servingsButton,children:"+"})]})]}),f.jsx("button",{onClick:F,className:ve.saveSettingsButton,children:" Sauvegarder les paramtres"})]})]}),f.jsxs("div",{className:ve.section,children:[f.jsx("h2",{className:ve.sectionTitle,children:" Compte"}),f.jsxs("div",{className:ve.card,children:[f.jsxs("div",{className:ve.cardRow,children:[f.jsx("div",{className:ve.label,children:"Email"}),f.jsx("div",{className:ve.value,children:r?.email})]}),f.jsx("button",{onClick:B,className:ve.logoutButton,children:" Se dconnecter"})]})]}),f.jsxs("div",{className:ve.section,children:[f.jsx("h2",{className:ve.sectionTitle,children:" Application"}),f.jsxs("div",{className:ve.card,children:[f.jsx("div",{className:ve.cardRow,children:f.jsxs("div",{children:[f.jsx("div",{className:ve.label,children:"Vider le cache"}),f.jsx("p",{className:ve.hint,children:"Supprime tous les fichiers en cache et recharge l'application pour rcuprer la dernire version"})]})}),f.jsx("button",{onClick:ie,className:ve.logoutButton,children:" Vider le cache et recharger"})]})]}),f.jsxs("div",{className:ve.footer,children:[f.jsx("p",{className:ve.appName,children:" Go Gourmet"}),f.jsx("p",{className:ve.version,children:"Version 1.0.0"})]})]}):f.jsx("div",{className:ve.container,children:f.jsx("div",{className:ve.loading,children:"Chargement..."})})},bz="_container_1evtu_1",Tz="_header_1evtu_17",wz="_logo_1evtu_43",Ez="_logoIcon_1evtu_67",Sz="_logoText_1evtu_75",Az="_desktopNav_1evtu_97",Iz="_navButton_1evtu_107",Cz="_active_1evtu_149",Nz="_navIcon_1evtu_163",xz="_navLabel_1evtu_173",Rz="_mobileNav_1evtu_185",Dz="_mobileNavButton_1evtu_211",Mz="_mobileActive_1evtu_253",Oz="_mobileNavIcon_1evtu_285",kz="_mobileNavLabel_1evtu_295",jz="_main_1evtu_309",Lz="_modalOverlay_1evtu_541",Pz="_sideModal_1evtu_583",Fe={container:bz,header:Tz,logo:wz,logoIcon:Ez,logoText:Sz,desktopNav:Az,navButton:Iz,active:Cz,navIcon:Nz,navLabel:xz,mobileNav:Rz,mobileNavButton:Dz,mobileActive:Mz,mobileNavIcon:Oz,mobileNavLabel:kz,main:jz,modalOverlay:Lz,sideModal:Pz},Vz=()=>{const{user:i,signOut:e}=au(),{household:t}=Ja(),{deleteRecipe:r}=Za(),o=ie=>{const A=new URLSearchParams;ie.currentView&&ie.currentView!=="recipes"&&A.set("view",ie.currentView),ie.selectedRecipe&&A.set("recipe",ie.selectedRecipe);const w=A.toString()?`${window.location.pathname}?${A}`:window.location.pathname;window.history.replaceState({},"",w)},c=()=>{const ie=new URLSearchParams(window.location.search);return{currentView:ie.get("view")||"recipes",selectedRecipe:ie.get("recipe")||null,cookingRecipe:null,recipeToEdit:null}},[h,p]=g_("navigation",{currentView:"recipes",selectedRecipe:null,cookingRecipe:null,recipeToEdit:null},{serializeToUrl:o,deserializeFromUrl:c}),[g,_]=ee.useState(h.currentView),[T,E]=ee.useState(h.selectedRecipe),[I,O]=ee.useState(h.cookingRecipe),[L,z]=ee.useState(h.recipeToEdit);ee.useEffect(()=>{p({currentView:g,selectedRecipe:T,cookingRecipe:I,recipeToEdit:L})},[g,T,I,L,p]);const j=ie=>{E(ie)},Y=()=>{E(null)},F=()=>{z(null),_("createRecipe")},le=ie=>{z(ie),_("editRecipe")},K=ie=>{O(ie),_("cookingMode"),E(null)},B=()=>{_("recipes"),O(null)};return f.jsxs("div",{className:Fe.container,children:[f.jsxs("header",{className:Fe.header,children:[f.jsxs("div",{className:Fe.logo,onClick:()=>_("recipes"),children:[f.jsx("span",{className:Fe.logoIcon,children:""}),f.jsx("span",{className:Fe.logoText,children:"Go Gourmet"})]}),f.jsxs("nav",{className:Fe.desktopNav,children:[f.jsxs("button",{onClick:()=>_("recipes"),className:`${Fe.navButton} ${g==="recipes"?Fe.active:""}`,children:[f.jsx("span",{className:Fe.navIcon,children:""}),f.jsx("span",{className:Fe.navLabel,children:"Recettes"})]}),f.jsxs("button",{onClick:()=>_("planning"),className:`${Fe.navButton} ${g==="planning"?Fe.active:""}`,children:[f.jsx("span",{className:Fe.navIcon,children:""}),f.jsx("span",{className:Fe.navLabel,children:"Planning"})]}),f.jsxs("button",{onClick:()=>_("shopping"),className:`${Fe.navButton} ${g==="shopping"?Fe.active:""}`,children:[f.jsx("span",{className:Fe.navIcon,children:""}),f.jsx("span",{className:Fe.navLabel,children:"Courses"})]}),f.jsxs("button",{onClick:()=>_("settings"),className:`${Fe.navButton} ${g==="settings"?Fe.active:""}`,children:[f.jsx("span",{className:Fe.navIcon,children:""}),f.jsx("span",{className:Fe.navLabel,children:"Plus"})]})]})]}),f.jsxs("nav",{className:Fe.mobileNav,children:[f.jsxs("button",{onClick:()=>_("recipes"),className:`${Fe.mobileNavButton} ${g==="recipes"?Fe.mobileActive:""}`,children:[f.jsx("span",{className:Fe.mobileNavIcon,children:""}),f.jsx("span",{className:Fe.mobileNavLabel,children:"Recettes"})]}),f.jsxs("button",{onClick:()=>_("planning"),className:`${Fe.mobileNavButton} ${g==="planning"?Fe.mobileActive:""}`,children:[f.jsx("span",{className:Fe.mobileNavIcon,children:""}),f.jsx("span",{className:Fe.mobileNavLabel,children:"Planning"})]}),f.jsxs("button",{onClick:()=>_("shopping"),className:`${Fe.mobileNavButton} ${g==="shopping"?Fe.mobileActive:""}`,children:[f.jsx("span",{className:Fe.mobileNavIcon,children:""}),f.jsx("span",{className:Fe.mobileNavLabel,children:"Courses"})]}),f.jsxs("button",{onClick:()=>_("settings"),className:`${Fe.mobileNavButton} ${g==="settings"?Fe.mobileActive:""}`,children:[f.jsx("span",{className:Fe.mobileNavIcon,children:""}),f.jsx("span",{className:Fe.mobileNavLabel,children:"Plus"})]})]}),f.jsxs("main",{className:Fe.main,children:[g==="recipes"&&f.jsx(q3,{onSelectRecipe:j,onCreateRecipe:F}),g==="ingredients"&&f.jsx(r5,{}),g==="planning"&&f.jsx(bU,{}),g==="shopping"&&f.jsx(A7,{}),g==="settings"&&f.jsx(vz,{onNavigate:_}),g==="createRecipe"&&f.jsx(P0,{onCancel:()=>_("recipes"),onSuccess:()=>_("recipes")}),g==="editRecipe"&&L&&f.jsx(P0,{recipeToEdit:L,onCancel:()=>{_("recipes"),z(null)},onSuccess:()=>{_("recipes"),z(null)}}),g==="cookingMode"&&I&&f.jsx(hV,{recipe:I,onExit:B})]}),T&&f.jsxs(f.Fragment,{children:[f.jsx("div",{className:Fe.modalOverlay,onClick:Y}),f.jsx("div",{className:Fe.sideModal,children:f.jsx(ZE,{recipeId:T,onClose:Y,onStartCooking:K,onEdit:ie=>{le(ie),Y()},onDelete:r})})]})]})},Bz=()=>{const{user:i,loading:e}=au(),{household:t,loading:r}=Ja();return e||r?f.jsx("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",minHeight:"100vh",color:"var(--text-primary)"},children:"Chargement..."}):i?t?f.jsx(Vz,{}):f.jsx(o4,{}):f.jsx(Q6,{})};function Uz(){return f.jsx(tO,{children:f.jsx(nO,{children:f.jsx(iO,{children:f.jsx(sO,{children:f.jsx(U6,{children:f.jsx(Bz,{})})})})})})}const zz="modulepreload",qz=function(i){return"/go-gourmet/"+i},B0={},Hz=function(e,t,r){let o=Promise.resolve();if(t&&t.length>0){let _=function(T){return Promise.all(T.map(E=>Promise.resolve(E).then(I=>({status:"fulfilled",value:I}),I=>({status:"rejected",reason:I}))))};var h=_;document.getElementsByTagName("link");const p=document.querySelector("meta[property=csp-nonce]"),g=p?.nonce||p?.getAttribute("nonce");o=_(t.map(T=>{if(T=qz(T),T in B0)return;B0[T]=!0;const E=T.endsWith(".css"),I=E?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${T}"]${I}`))return;const O=document.createElement("link");if(O.rel=E?"stylesheet":zz,E||(O.as="script"),O.crossOrigin="",O.href=T,g&&O.setAttribute("nonce",g),document.head.appendChild(O),E)return new Promise((L,z)=>{O.addEventListener("load",L),O.addEventListener("error",()=>z(new Error(`Unable to preload CSS for ${T}`)))})}))}function c(p){const g=new Event("vite:preloadError",{cancelable:!0});if(g.payload=p,window.dispatchEvent(g),!g.defaultPrevented)throw p}return o.then(p=>{for(const g of p||[])g.status==="rejected"&&c(g.reason);return e().catch(c)})};function Fz(i={}){const{immediate:e=!1,onNeedRefresh:t,onOfflineReady:r,onRegistered:o,onRegisteredSW:c,onRegisterError:h}=i;let p,g;const _=async(E=!0)=>{await g};async function T(){if("serviceWorker"in navigator){if(p=await Hz(async()=>{const{Workbox:E}=await import("./workbox-window.prod.es5-BIl4cyR9.js");return{Workbox:E}},[]).then(({Workbox:E})=>new E("/go-gourmet/sw.js",{scope:"/go-gourmet/",type:"classic"})).catch(E=>{h?.(E)}),!p)return;p.addEventListener("activated",E=>{(E.isUpdate||E.isExternal)&&window.location.reload()}),p.addEventListener("installed",E=>{E.isUpdate||r?.()}),p.register({immediate:e}).then(E=>{c?c("/go-gourmet/sw.js",E):o?.(E)}).catch(E=>{h?.(E)})}}return g=T(),_}Fz({immediate:!0});UA.createRoot(document.getElementById("root")).render(f.jsx(ee.StrictMode,{children:f.jsx(Uz,{})}));
